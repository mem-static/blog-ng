{"componentChunkName":"component---src-templates-doc-js","path":"/course/c-programming/note/","result":{"data":{"site":{"siteMetadata":{"title":"mem 的小站"}},"post":{"id":"e52460ca-00b4-5e00-9448-56ab43e1b827","excerpt":"1. 类型 1.1. 隐式类型转换  水平方向：自动转换 垂直方向：低->高（短->长，有符号->无符号） 1.1.1. 整型提升 1.1.2. 有符号数与无符号数混合运算 2. 运算符 2.1. 优先级    3. 函数 3.…","html":"<h2>1. 类型</h2>\n<h3>1.1. 隐式类型转换</h3>\n<p><img src=\"https://static.memset0.cn/img/v6/2024/02/08/350EXKIx.png\"alt=\"\" ></p>\n<ul>\n<li>水平方向：自动转换</li>\n<li>垂直方向：低->高（短->长，有符号->无符号）</li>\n</ul>\n<h4>1.1.1. 整型提升</h4>\n<h4>1.1.2. 有符号数与无符号数混合运算</h4>\n<h2>2. 运算符</h2>\n<h3>2.1. 优先级</h3>\n<p><img src=\"https://static.memset0.cn/img/v6/2024/02/08/eu54EX0G.png\"alt=\"\" ></p>\n<p><img src=\"https://static.memset0.cn/img/v6/2024/02/08/kpoaJNvm.png\"alt=\"\" ></p>\n<p><img src=\"https://static.memset0.cn/img/v6/2024/02/08/P8WtKyi5.png\"alt=\"\" ></p>\n<h2>3. 函数</h2>\n<h3>3.1. 静态局部变量</h3>\n<div class=\"gatsby-highlight\" data-language=\"c\"><pre class=\"language-c\"><code class=\"language-c\"><span class=\"token keyword\">double</span> <span class=\"token function\">calc</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> n<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t<span class=\"token keyword\">static</span> <span class=\"token keyword\">int</span> count <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token operator\">++</span>count<span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">return</span> n <span class=\"token operator\">==</span> <span class=\"token number\">1</span> <span class=\"token operator\">?</span> <span class=\"token number\">1</span> <span class=\"token operator\">:</span> <span class=\"token function\">calc</span><span class=\"token punctuation\">(</span>n <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span> n<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<ul>\n<li>静态局部变量如果在定义时没有赋初值，系统将自动赋 <code class=\"language-text\">0</code>（类似与全局变量）。</li>\n<li>赋初值只在函数第一次调用时起作用，以后都不会自动修改他的值。</li>\n<li>静态变量与全局变量一样，生命周期贯穿整个程序执行过程。</li>\n</ul>\n<h2>4. 数组</h2>\n<h3>4.1. 静态全局变量与外部变量</h3>\n<div class=\"gatsby-highlight\" data-language=\"c\"><pre class=\"language-c\"><code class=\"language-c\"><span class=\"token comment\">// file1.c</span>\n<span class=\"token keyword\">int</span> x<span class=\"token punctuation\">;</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"c\"><pre class=\"language-c\"><code class=\"language-c\"><span class=\"token comment\">// file2.c</span>\n<span class=\"token keyword\">extern</span> <span class=\"token keyword\">int</span> x<span class=\"token punctuation\">;</span> <span class=\"token comment\">// 声明在file1.c中定义的变量x，而不是重新定义</span>\n<span class=\"token keyword\">static</span> <span class=\"token keyword\">int</span> y<span class=\"token punctuation\">;</span> <span class=\"token comment\">// 定义仅在file2.c中使用的变量y</span></code></pre></div>\n<h2>5. 指针</h2>\n<h3>5.1. 动态内存分配</h3>\n<p><img src=\"https://static.memset0.cn/img/v6/2024/02/08/bRKOoSDg.png\"alt=\"\" ></p>\n<h3>5.2. 指针数组</h3>\n<h4>5.2.1. 指针数组的应用</h4>\n<ol>\n<li>给字符串 / 二维数组排序</li>\n<li>二维数组，但是第二维的空间大小不固定，需要动态分配</li>\n</ol>\n<h4>5.2.2. 指针数组 vs 二维数组</h4>\n<div class=\"gatsby-highlight\" data-language=\"cpp\"><pre class=\"language-cpp\"><code class=\"language-cpp\"><span class=\"token keyword\">char</span> ccolor<span class=\"token punctuation\">[</span> <span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">7</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token string\">\"red\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"blue\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"yellow\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"green\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"black\"</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> <span class=\"token keyword\">char</span> <span class=\"token operator\">*</span>pcolor<span class=\"token punctuation\">[</span> <span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token string\">\"red\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"blue\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"yellow\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"green\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"black\"</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// ccolor[0] = \"white\" 不可以但 pcolor[0] = \"white\" 可以</span>\n<span class=\"token comment\">// ccolor[0][0] = 'x' 可以但 pcolor[0][0] = 'x' 不可以</span></code></pre></div>\n<p><img src=\"https://static.memset0.cn/img/v6/2024/02/08/qgsofRUX.png\"alt=\"\" ></p>\n<h4>5.2.3. 命令行参数</h4>\n<div class=\"gatsby-highlight\" data-language=\"cpp\"><pre class=\"language-cpp\"><code class=\"language-cpp\"><span class=\"token keyword\">int</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> argc<span class=\"token punctuation\">,</span> <span class=\"token keyword\">char</span> <span class=\"token operator\">*</span><span class=\"token operator\">*</span>argv<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>这里 <code class=\"language-text\">argc</code> 表示接受的参数个数，<code class=\"language-text\">argv</code> 表示接受的参数列表（注意指令名本身也算一个参数，存储在 <code class=\"language-text\">argv[0]</code>）</p>\n<h3>5.3. 二级指针</h3>\n<p><code class=\"language-text\">T **p</code> 定义一个指向 <code class=\"language-text\">T *</code> 类型的指针（指向另一个指针的指针）。</p>\n<h4>5.3.1. 使用二级指针</h4>\n<div class=\"gatsby-highlight\" data-language=\"cpp\"><pre class=\"language-cpp\"><code class=\"language-cpp\"><span class=\"token keyword\">char</span> color<span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">7</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token string\">\"red\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"blue\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"yellow\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"green\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"black\"</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">char</span> <span class=\"token operator\">*</span><span class=\"token operator\">*</span>pc <span class=\"token operator\">=</span> color<span class=\"token punctuation\">;</span>\n<span class=\"token operator\">*</span>pc <span class=\"token operator\">&lt;=></span> color<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span>\n<span class=\"token operator\">*</span>pc<span class=\"token operator\">+</span>i <span class=\"token operator\">&lt;=></span> color<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token operator\">+</span>i\n<span class=\"token operator\">*</span><span class=\"token punctuation\">(</span>pc<span class=\"token operator\">+</span>i<span class=\"token punctuation\">)</span> <span class=\"token operator\">&lt;=></span> color<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span>\n<span class=\"token operator\">*</span><span class=\"token operator\">*</span>pc <span class=\"token operator\">&lt;=></span> <span class=\"token operator\">*</span>color<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">&lt;=></span> color<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span>\n<span class=\"token operator\">*</span><span class=\"token operator\">*</span><span class=\"token punctuation\">(</span>pc<span class=\"token operator\">+</span>i<span class=\"token punctuation\">)</span> <span class=\"token operator\">&lt;=></span> <span class=\"token operator\">*</span>color<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span> <span class=\"token operator\">&lt;=></span> color<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span></code></pre></div>\n<h3>5.4. 指针数组 vs 数组指针</h3>\n<table>\n<thead>\n<tr>\n<th align=\"center\">指针数组</th>\n<th align=\"center\">vs</th>\n<th align=\"center\">数组指针</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align=\"center\"><code class=\"language-text\">char *color1[5]</code> <br><strong>一个数组</strong>，包含 5 个 <code class=\"language-text\">char*</code></td>\n<td align=\"center\">(<code class=\"language-text\">[]</code> 的优先级高于 <code class=\"language-text\">*</code>）</td>\n<td align=\"center\"><code class=\"language-text\">char (*color2)[5]</code> <br><strong>一个指针</strong>，指向 5 个 <code class=\"language-text\">char</code> 元素的数组</td>\n</tr>\n</tbody>\n</table>\n<p><strong>注意这里的声明方式比较反直觉</strong>。</p>\n<p>如何理解 <code class=\"language-text\">[]</code> 的优先级比 <code class=\"language-text\">*</code> 高？<code class=\"language-text\">char *color1[5]</code> 说明了 <code class=\"language-text\">color1</code> 一定是一个数组，<code class=\"language-text\">char (*color2)[5]</code> 说明了 <code class=\"language-text\">color2</code> 一定是一个指针。</p>\n<div class=\"gatsby-highlight\" data-language=\"cpp\"><pre class=\"language-cpp\"><code class=\"language-cpp\"><span class=\"token keyword\">int</span> a<span class=\"token punctuation\">[</span><span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">4</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\na <span class=\"token operator\">&lt;=></span> <span class=\"token operator\">&amp;</span>a<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span> <span class=\"token keyword\">int</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">*</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span><span class=\"token number\">4</span><span class=\"token punctuation\">]</span>\na<span class=\"token operator\">+</span>i <span class=\"token operator\">&lt;=></span> <span class=\"token operator\">&amp;</span>a<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span> <span class=\"token keyword\">int</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">*</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span><span class=\"token number\">4</span><span class=\"token punctuation\">]</span>\n<span class=\"token operator\">*</span><span class=\"token punctuation\">(</span>a<span class=\"token operator\">+</span>i<span class=\"token punctuation\">)</span> <span class=\"token operator\">&lt;=></span> a<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span> <span class=\"token operator\">&lt;=></span> <span class=\"token operator\">&amp;</span>a<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span> <span class=\"token keyword\">int</span> <span class=\"token operator\">*</span>\n<span class=\"token operator\">*</span><span class=\"token punctuation\">(</span>a<span class=\"token operator\">+</span>i<span class=\"token punctuation\">)</span><span class=\"token operator\">+</span>j <span class=\"token operator\">&lt;=></span> a<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token operator\">+</span>j <span class=\"token operator\">&lt;=></span> <span class=\"token operator\">&amp;</span>a<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>j<span class=\"token punctuation\">]</span> <span class=\"token keyword\">int</span> <span class=\"token operator\">*</span>\n<span class=\"token operator\">*</span><span class=\"token operator\">*</span><span class=\"token punctuation\">(</span>a<span class=\"token operator\">+</span>i<span class=\"token punctuation\">)</span> <span class=\"token operator\">&lt;=></span> <span class=\"token operator\">*</span>a<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span> <span class=\"token operator\">&lt;=></span> a<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">&lt;=></span> <span class=\"token keyword\">int</span>\n<span class=\"token operator\">*</span><span class=\"token punctuation\">(</span><span class=\"token operator\">*</span><span class=\"token punctuation\">(</span>a<span class=\"token operator\">+</span>i<span class=\"token punctuation\">)</span><span class=\"token operator\">+</span>j<span class=\"token punctuation\">)</span> <span class=\"token operator\">&lt;=></span> <span class=\"token operator\">*</span><span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token operator\">+</span>j<span class=\"token punctuation\">)</span> <span class=\"token operator\">&lt;=></span> a<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>j<span class=\"token punctuation\">]</span> <span class=\"token operator\">&lt;=></span> <span class=\"token keyword\">int</span></code></pre></div>\n<h3>5.5. 将二维数组作为函数参数</h3>\n<p>编译器改写规则：将（最外层的）数组改写为指针。</p>\n<p><img src=\"https://static.memset0.cn/img/v6/2024/02/08/TtgN226c.png\"alt=\"\" ></p>\n<div class=\"gatsby-highlight\" data-language=\"cpp\"><pre class=\"language-cpp\"><code class=\"language-cpp\"><span class=\"token keyword\">int</span> a<span class=\"token punctuation\">[</span><span class=\"token number\">10</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">20</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">void</span> <span class=\"token function\">func</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> <span class=\"token operator\">*</span><span class=\"token operator\">*</span>a<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>       <span class=\"token comment\">// CE: int (*)[20]与int **类型不匹配</span>\n<span class=\"token keyword\">void</span> <span class=\"token function\">func</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> a<span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>     <span class=\"token comment\">// CE: 数组不能包含此类型（int[]）的元素</span>\n<span class=\"token keyword\">void</span> <span class=\"token function\">func</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> a<span class=\"token punctuation\">[</span><span class=\"token number\">10</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>   <span class=\"token comment\">// CE: 数组不能包含此类型（int[]）的元素</span>\n<span class=\"token keyword\">void</span> <span class=\"token function\">func</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> a<span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">20</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>   <span class=\"token comment\">// √</span>\n<span class=\"token keyword\">void</span> <span class=\"token function\">func</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> a<span class=\"token punctuation\">[</span><span class=\"token number\">10</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">20</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// √</span>\n<span class=\"token keyword\">void</span> <span class=\"token function\">func</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">*</span>a<span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span><span class=\"token number\">20</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>  <span class=\"token comment\">// √</span></code></pre></div>\n<h3>5.6. 指向函数的指针</h3>\n<p>定义方式：<code class=\"language-text\">返回值类型 (*指针名)(参数类型表)</code>。</p>\n<p>调用方式：<code class=\"language-text\">指针名(参数表)</code> 或 <code class=\"language-text\">(*指针名)(参数表)</code>。</p>\n<h2>6. 文件操作</h2>\n<h3>6.1. 打开文件</h3>\n<ul>\n<li>使用 <code class=\"language-text\">FILE *fopen(char *文件名, char *模式)</code> 打开文件，返回对应的文件指针。如果返回值为 <code class=\"language-text\">NULL</code> 说明文件打开失败。</li>\n<li>使用 <code class=\"language-text\">int fclose(FILE *文件指针)</code> 关闭文件，如果返回值非 0 说明文件关闭失败。</li>\n</ul>\n<p><img src=\"https://static.memset0.cn/img/v6/2024/02/08/PCJUQXDp.png\"alt=\"\" ></p>\n<p><img src=\"https://static.memset0.cn/img/v6/2024/02/08/lsb9VGdd.png\"alt=\"\" ></p>\n<h3>6.2. 文件读写</h3>\n<ul>\n<li>使用 <code class=\"language-text\">char fgetc(FILE* file)</code> <strong>读取单个字符</strong>。</li>\n<li>使用 <code class=\"language-text\">void fputc(char c, FILE* file)</code> <strong>写入单个字符</strong>。</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"cpp\"><pre class=\"language-cpp\"><code class=\"language-cpp\"><span class=\"token comment\">// 示例代码：一直读入字符直到文件结束</span>\n<span class=\"token comment\">// 这样写法的前提是文件本身没有存储EOF字符，否则应用feof函数判断</span>\n<span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>ch <span class=\"token operator\">=</span> <span class=\"token function\">fgetc</span><span class=\"token punctuation\">(</span>file1<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">!=</span> <span class=\"token constant\">EOF</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t<span class=\"token function\">fputc</span><span class=\"token punctuation\">(</span>ch<span class=\"token punctuation\">,</span> file2<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<ul>\n<li>使用 <code class=\"language-text\">char *fgets(char *s, int n, FILE* file)</code> <strong>读取字符串</strong>：\n<ul>\n<li>连续读取至多 n-1 个字符并将其保存到 s 中。</li>\n<li>如果遇到换行符（会保留换行符）或 EOF（不保留）则截止，并自动往末尾添加 <code class=\"language-text\">\\0</code>。</li>\n<li>执行成功时返回读取到的字符串，否则返回 NULL。</li>\n</ul>\n</li>\n<li>使用 <code class=\"language-text\">char *fputs(char *s, FILE *file)</code> <strong>写入字符串</strong>：</li>\n</ul>\n<p>还可以使用 <code class=\"language-text\">fscanf</code> 与 <code class=\"language-text\">fprintf</code>，第一个参数是文件指针，后面参数和 <code class=\"language-text\">scanf</code> 与 <code class=\"language-text\">printf</code> 的使用方法相同。</p>\n<h3>6.3. 二进制文件读写</h3>\n<ul>\n<li>使用 <code class=\"language-text\">fread(void* 数据块(首)地址, size_t 单个数据块字节数, size_t 要读入的数据块个数, FILE* 文件指针)</code> 来从以<strong>二进制模式</strong>打开的文件中<strong>读取</strong>数据。</li>\n<li>使用 <code class=\"language-text\">fwrite(void* 数据块(首)地址, size_t 单个数据块字节数, size_t 要读入的数据块个数, FILE* 文件指针)</code> 来往以<strong>二进制模式</strong>打开的文件中<strong>写入</strong>数据。</li>\n</ul>\n<h3>6.4. 其他相关函数</h3>\n<ul>\n<li>使用 <code class=\"language-text\">int feof(FILE* 文件指针)</code> 判断文件尾是否已经被<strong>尝试读取</strong>。(如 <code class=\"language-text\">fgetc</code> 已经返回 EOF 而不是将要返回 EOF)</li>\n<li>使用 <code class=\"language-text\">rewind(FILE* 文件指针)</code> 使得文件读写指针恢复到打开文件时所指向的位置（<strong>字节</strong>数）。</li>\n<li>使用 <code class=\"language-text\">fseek(FILE* 文件指针, size_t 偏移量, int 起始位置)</code> 来移动读写指针，其中起始位置可选值为 0（SEEK_SET）、1（SEEK_CUR）、2（SEEK_END） 分别对应文件头、当前位置、文件尾。</li>\n<li>使用 <code class=\"language-text\">ftell(FILE* 文件指针)</code> 获取文件指针的位置（<strong>字节</strong>数），即相对于文件开头的偏移量。</li>\n</ul>\n<h2>7. 多文件编程</h2>\n<h3>7.1. 文件包含 <code class=\"language-text\">#include</code></h3>\n<p>Usage 1：<code class=\"language-text\">#include &lt;filename></code> 仅检索库文件夹<br>\nUsage 2：<code class=\"language-text\">#include \"filename\"</code> 检索库文件夹和当前文件夹</p>\n<p>在编译期编译器会把要包含的源代码直接拼接到对应为止。</p>\n<h3>7.2. 头文件保护</h3>\n<p>在编写头文件时，常用宏来避免头文件被重复包含。否则会引起<strong>链接期</strong>的编译错误。</p>\n<div class=\"gatsby-highlight\" data-language=\"cpp\"><pre class=\"language-cpp\"><code class=\"language-cpp\"><span class=\"token comment\">// student.h</span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">ifndef</span> <span class=\"token expression\">_STUDENT_H_</span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">define</span> <span class=\"token macro-name\">_STUDENT_H_</span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;stdio.h></span></span>\n<span class=\"token keyword\">struct</span> <span class=\"token class-name\">student</span> <span class=\"token punctuation\">{</span>\n\t<span class=\"token keyword\">int</span> num<span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">char</span> name<span class=\"token punctuation\">[</span><span class=\"token number\">10</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">int</span> computer<span class=\"token punctuation\">,</span> english<span class=\"token punctuation\">,</span> math<span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">double</span> average<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">endif</span></span></code></pre></div>\n<h3>7.3. 文件模块间的通信</h3>\n<div class=\"gatsby-highlight\" data-language=\"c\"><pre class=\"language-c\"><code class=\"language-c\"><span class=\"token keyword\">static</span> <span class=\"token keyword\">int</span> x<span class=\"token punctuation\">;</span> <span class=\"token comment\">// 静态全局变量，只能在当前文件中访问</span>\n<span class=\"token keyword\">extern</span> <span class=\"token keyword\">int</span> y<span class=\"token punctuation\">;</span> <span class=\"token comment\">// 外部全局变量，可以在其他文件中访问</span>\n<span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">f</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 静态全局函数，只能在当前文件中访问</span>\n<span class=\"token keyword\">extern</span> <span class=\"token keyword\">void</span> <span class=\"token function\">g</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 外部全局函数，可以在其他文件中访问</span></code></pre></div>\n<h2>8. 一些零散知识点</h2>\n<h3>8.1. 面经</h3>\n<ol>\n<li>C 语言的优点：结构化语言、简洁紧凑方便灵活、易于移植、处理能力强、效率高。</li>\n<li>C 语言的缺点：数据类型检查不严格、表达式有二义性、不检测数据越界、运算符的优先级与结合性相对复杂</li>\n</ol>\n<h3>8.2. 格式化输入输出函数</h3>\n<table>\n<thead>\n<tr>\n<th>类型</th>\n<th>格式字符串</th>\n<th>说明</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>整型</td>\n<td><code class=\"language-text\">%d</code><br /><code class=\"language-text\">%o</code><br /><code class=\"language-text\">%x</code><br /><code class=\"language-text\">%u</code></td>\n<td>有符号十进制整数<br />无符号八进制整数<br />无符号十六进制整数<br />无符号十进制整数</td>\n</tr>\n<tr>\n<td>浮点型</td>\n<td><code class=\"language-text\">%f</code><br /><code class=\"language-text\">%e</code><br /><code class=\"language-text\">%g</code></td>\n<td>以小数形式输出，默认小数位数为6位<br />以指数形式输出，数字部分默认为6位<br />以优化的小数或指数形式输出（去掉无意义的零后所占宽度较小的）</td>\n</tr>\n<tr>\n<td>字符型</td>\n<td><code class=\"language-text\">%c</code><br /><code class=\"language-text\">%s</code></td>\n<td>输出字符<br />输出字符串</td>\n</tr>\n</tbody>\n</table>\n<p><img src=\"https://static.memset0.cn/img/v6/2024/02/08/TJjvwgCW.png\"alt=\"\" ></p>\n<p><img src=\"https://static.memset0.cn/img/v6/2024/02/08/y0nSA3kD.png\"alt=\"\" ></p>\n<h3>8.3. <code class=\"language-text\">abs()</code> 函数与 C++ 不同</h3>\n<ul>\n<li>C 中在 <code class=\"language-text\">stdlib.h</code> 中提供了整数的 <code class=\"language-text\">abs()</code>，在 <code class=\"language-text\">math.h</code> 中提供了浮点的 <code class=\"language-text\">fabs()</code>。所以如果在 C 中调用 <code class=\"language-text\">abs(-0.1)</code> 会被隐式类型转换。</li>\n<li>而 C++ 中还在 <code class=\"language-text\">cmath</code> 中重载了支持浮点数的 <code class=\"language-text\">abs()</code> 函数，不存在这个问题。</li>\n</ul>\n<h2>9. 一些细节</h2>\n<h3>9.1. 多个 if-else 的匹配问题</h3>\n<h3>9.2. 省略长度的数组声明方式</h3>\n<h3>9.3. 初始化列表</h3>\n<h3>9.4. 变量的存储类型</h3>\n<p>对于局部变量存储类型的缺省值是 <code class=\"language-text\">auto</code>，对于全局变量存储的缺省值是 <code class=\"language-text\">extern</code>。</p>\n<table>\n<thead>\n<tr>\n<th>变量类型</th>\n<th>初始化</th>\n<th>作用范围</th>\n<th>生命周期</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>函数的局部变量 auto register</td>\n<td>随机值</td>\n<td>函数内部</td>\n<td>函数调用时分配，函数调用结束时自动回收</td>\n</tr>\n<tr>\n<td>函数的静态全局变量 static</td>\n<td>默认 0，函数第一次调用时赋初值</td>\n<td>函数内部</td>\n<td>程序开始直到程序结束</td>\n</tr>\n<tr>\n<td>全局变量 extern</td>\n<td>默认 0，main 函数被调用前赋初值</td>\n<td>文件内部，可以跨文件使用</td>\n<td>程序开始直到程序结束</td>\n</tr>\n<tr>\n<td>静态全局变量 static</td>\n<td>默认 0，main 函数被调用前赋初值</td>\n<td>文件内部，不能跨文件使用</td>\n<td>程序开始直到程序结束</td>\n</tr>\n</tbody>\n</table>\n<h2>10. 一些坑点</h2>\n<ol>\n<li>按照课本要求，可变长的数组为语法错误（<code class=\"language-text\">int n=5; int a[n];</code> ×）。</li>\n<li>带参数的宏没给参数加括号可能带来隐患。</li>\n<li><code class=\"language-text\">typedef</code> 不是简单的类型替换。如 <code class=\"language-text\">typedef int *int_p; int_p p1, p2;</code> 等价于 <code class=\"language-text\">int *p1, *p2;</code>。</li>\n</ol>","frontmatter":{"title":"一站式速通笔记","date":null,"description":null},"fields":{"category":"[{\"name\":\"课程笔记\",\"to\":\"/course/\"}]"}}},"pageContext":{"id":"e52460ca-00b4-5e00-9448-56ab43e1b827","previousPostId":null,"nextPostId":null,"navJson":"[{\"slug\":\"/course/c-programming\",\"file\":\"/home/runner/work/gatsby-blog/gatsby-blog/content/course/c-programming/index.md\",\"title\":\"课程简介\"},{\"slug\":\"/course/c-programming/note\",\"file\":\"/home/runner/work/gatsby-blog/gatsby-blog/content/course/c-programming/note.md\",\"title\":\"笔记\"},{\"slug\":\"/course/c-programming/correction\",\"file\":\"/home/runner/work/gatsby-blog/gatsby-blog/content/course/c-programming/correction.md\",\"title\":\"错题集\"}]"}},"staticQueryHashes":["2841359383"],"slicesMap":{}}