{"componentChunkName":"component---src-templates-doc-js","path":"/course/custom/fasm/note/1/","result":{"data":{"site":{"siteMetadata":{"title":"mem 的小站"}},"post":{"id":"bfee78ee-597a-58fc-bac0-83a49375c925","excerpt":"1. 汇编程序的结构 一个汇编语言程序的框架如下： 用  建立段地址和段寄存器的关联，这并不会真的修改段寄存器的值，而会帮助编译器在编译源程序时把变量或标号的段地址替换成关联的段寄存器。 2. 编译与运行 3. 调试 3.1. 使用 debug 调试 R 指令：查看、改变 CPU 寄存器的内容 D…","html":"<h2>1. 汇编程序的结构</h2>\n<p>一个汇编语言程序的框架如下：</p>\n<div class=\"gatsby-highlight\" data-language=\"asm\"><pre class=\"language-asm\"><code class=\"language-asm\">.386  ; 表示每个段默认使用32位偏移宽度\ndata segment use16  ; 表示端内偏移地址宽度是16位\n  变量、数组定义...\ndata ends\ncode segment use16\n\tassume cs:code, ds:data\nmain:\n\tmov ax, data\n\tmov dx, ax\n  程序主体...\n\tmov ah, 4ch\n\tmov al, 0   ; 这里AL寄存器的值表示程序返回码\n\tint 21h     ; 调用int21h中断，在AH=4Ch时对应的功能是结束程序\ncode ends\nend main ; 指定程序首条指令的位置</code></pre></div>\n<ul>\n<li>用 <code class=\"language-text\">assume</code> 建立段地址和段寄存器的关联，这并不会真的修改段寄存器的值，而会帮助编译器在编译源程序时把变量或标号的段地址替换成关联的段寄存器。</li>\n</ul>\n<h2>2. 编译与运行</h2>\n<h2>3. 调试</h2>\n<h3>3.1. 使用 debug 调试</h3>\n<ul>\n<li>R 指令：查看、改变 CPU 寄存器的内容</li>\n<li>D 指令：查看内存中的内容</li>\n<li>T 指令：执行一条机器指令</li>\n<li>G 指令：从停顿的地方运行到底</li>\n</ul>\n<h3>3.2. 使用 Turbo Debug 调试</h3>\n<p>需要使用 tasm 编译，tlink 链接：</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">tasm /zi hello<span class=\"token punctuation\">;</span>\ntlink /v/s hello<span class=\"token punctuation\">;</span>\ntd hello</code></pre></div>\n<p>常用快捷键如下：</p>\n<ul>\n<li>F7 单步执行（带跟踪）</li>\n<li>F8 单步执行（不带跟踪）</li>\n</ul>\n<h3>3.3. 使用 soft-ice 调试</h3>\n<h2>4. 其他基础知识</h2>\n<h3>4.1. 常用中断 <code class=\"language-text\">int 21h</code></h3>\n<p>中断表（中文）参见： <a href=\"https://blog.csdn.net/Zach_z/article/details/78576216\">https://blog.csdn.net/Zach_z/article/details/78576216</a> 。</p>\n<table>\n<thead>\n<tr>\n<th>AH</th>\n<th>功能</th>\n<th>调用参数</th>\n<th>返回参数</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>00</td>\n<td>程序终止</td>\n<td>CS=程序段前缀</td>\n<td></td>\n</tr>\n<tr>\n<td>01</td>\n<td>键盘输入并回显</td>\n<td></td>\n<td>AL=输入字符</td>\n</tr>\n<tr>\n<td>02</td>\n<td>显示输出</td>\n<td>DL=输出字符</td>\n<td></td>\n</tr>\n<tr>\n<td>09</td>\n<td>显示字符串，</td>\n<td>DS:DX=字符串地址</td>\n<td></td>\n</tr>\n<tr>\n<td>4C</td>\n<td>带返回码结束</td>\n<td>AL=返回码</td>\n<td></td>\n</tr>\n</tbody>\n</table>","frontmatter":{"title":"汇编语言入门","date":null,"description":null},"fields":{"category":"[{\"name\":\"课程笔记\",\"to\":\"/course/\"}]"}},"previous":{"fields":{"slug":"/course/custom/fasm/note/3/"},"frontmatter":{"title":""}},"next":{"fields":{"slug":"/course/custom/fasm/note/2/"},"frontmatter":{"title":"数据的表示与运算"}}},"pageContext":{"id":"bfee78ee-597a-58fc-bac0-83a49375c925","previousPostId":"6237aedd-dc1e-54de-82f9-fe9180626be9","nextPostId":"0ae01f57-51fd-5ce0-925d-9cb3762c377e"}},"staticQueryHashes":["2841359383"],"slicesMap":{}}