{"data":{"allMarkdownRemark":{"nodes":[{"id":"e344b850-3fbb-5382-ab77-03704c6a384e","fields":{"slug":"/travelogue/2023-nanjing/","plainText":"\nå¤§ä¸€æ–°ç”Ÿçš„ç¬¬ä¸€æ¬¡ ICPC åŒºåŸŸèµ›ã€‚\n\né€‰èµ›ç«™çš„æ—¶å€™è¿˜ä¸æ‡‚å¾—é¿é”‹èŠ’çš„é“ç†ï¼Œæ¥äº†æ‰å‘ç°è¿™ä¸€ç«™é«˜æ‰‹äº‘é›†ã€‚æ•…è€Œèµ›å‰å·²ç»å°†æœŸæœ›æ‹‰åˆ°æœ€ä½â€”â€”ç¨³ä½é‡‘ç‰Œå°±å¥½ã€‚\n\næ¯”èµ›è¿‡ç¨‹è™½ç„¶æœ‰ä¸å°‘é—æ†¾ï¼Œä½†ç»“æœç«Ÿå‡ºä¹æ„æ–™åœ°ä¸é”™ï¼Œå¯¹äºæˆ‘ä»¬è¿™æ”¯æ–°ç”Ÿé˜Ÿä¼æ¥è¯´ï¼Œç®—æ˜¯ä¸€ä¸ªæ¯”è¾ƒâ€œåä¸½â€çš„å¼€å±€äº†ï¼ˆæ­¤å¤„å¯¹åº”æ¯”èµ› K é¢˜åç§°â€”â€”â€œåä¸½æ”¶åœºâ€ï¼‰ã€‚\n\n<!-- more -->\n\n## Day -1\n\nä»å­¦æ ¡å‡ºå‘å‰å¾€å—äº¬ï¼Œä¸´èµ°å‰è¿˜åœ¨æŠ˜è…¾è¿™ä¸ªæ–°åšå®¢ç«™ã€‚\n\nååŠ¨è½¦æ—¶åœ¨çŸ¥ä¹ä¸Šæ°´åˆ° chenjb å‰è¾ˆçš„èµ›å‰æ¯’å¥¶ï¼Œå‘ç°è¿™åœºæ¥äº†å¥½å¤šé«˜æ‰‹ã€‚ä¸å¿…è¯´æ¥è‡ªåŒ—äº¬å¤§å­¦çš„â€œé‡ç”Ÿä¹‹æˆ‘æ˜¯èœç‹—â€å’Œæ¸…åå¤§å­¦çš„â€œæœ‰æ‰‹æœ‰è„šâ€çš„ä¸¤æ”¯ World Finalist å¼ºé˜Ÿï¼Œæ¥è‡ªå—äº¬é‚®ç”µå¤§å­¦çš„â€œCirtusâ€ã€ä¸œåŒ—å¤§å­¦çš„â€œå¤©ç‹åº§â€ã€å“ˆå°”æ»¨å·¥ä¸šå¤§å­¦çš„â€œç©åŸç¥ç©çš„â€ç­‰ç­‰é˜Ÿä¼éƒ½ä¸å®¹å°è§‘ã€‚\n\n![å¬åå­—å¾ˆä¸Šæµçš„ã€Šå›½é™…é…’åº—ã€‹|md](https://img.memset0.cn/2023/11/07/efYripY6.jpg)\n\nå…¥ä½æ—¶å’Œç”Ÿç—…çš„ Sugar å“¥å“¥åˆ†åˆ°äº†ä¸€ä¸ªæˆ¿é—´ï¼Œæˆ‘å¾ˆå…³å¿ƒä»–çš„èº«ä½“çŠ¶å†µï¼Œä½†æœ‰å®³æ€•è‡ªå·±è¢«ä¼ æŸ“ã€‚ï¼ˆå†…å¿ƒçº ç»“ osï¼‰\n\næ™šä¸Šçº¦äº†ä¸€ç¾¤äººå‡ºå»åƒé¥­ï¼Œé€‰äº†å®¶çœ‹èµ·æ¥æœ‰ç‚¹ä¸Šæµçš„åº—ï¼Œæ•´äº†ä¸ªå¤§ä¼—ç‚¹è¯„çš„å¥—é¤ã€‚å¼€å±€ç›´æ¥ç»™æˆ‘ä»¬ç«¯ä¸Šæ¥ä¹åªé†‰èŸ¹ï¼Œåˆšå‡†å¤‡å¤§å¿«æœµé¢ï¼Œå´è¢«å‘ŠçŸ¥ä¸Šé”™äº†â€”â€”æ­£ç¡®çš„å‰§æœ¬æ˜¯ï¼Œæˆ‘ä»¬å…­ä¸ªäººåªèƒ½åˆ†ä¸‰åªã€‚\n\n![æ—©çŸ¥é“å…ˆæ‹¿ä¸€ä¸ªåƒäº†ï¼|md](https://img.memset0.cn/2023/11/07/vZMR6bRh.jpeg)\n\nä¸è¿‡è¿™ä¸ªç”œè±†èŠ±å‘³é“æ˜¯çœŸçš„ä¸é”™ï¼Œæˆ‘è¿å¹²äº†ä¸‰ç¢—ã€‚\n\n![|md](https://img.memset0.cn/2023/11/07/9vtSDfPX.jpeg)\n\nè¿˜ç»™ Sugar å“¥å“¥æ‰“åŒ…äº†ç‚¹åƒçš„å›å»ï¼Œå«å¤–å–æ—¶åˆç‰¹æ„ä¸ºä»–åŠ äº†ä¸€ä»½å†°ç³–é›ªæ¢¨ï¼Œå¸Œæœ› Sugar å“¥å“¥èƒ½å¿«ç‚¹å¥½èµ·æ¥ã€‚\n\n## Day 0\n\næ—©ä¸Šèµ·çš„æ¯”è¾ƒæ™šï¼Œå¥½åœ¨æç€ ddl åƒä¸Šäº†æ—©é¥­ã€‚\n\nå’Œé˜Ÿå‹èƒ¡ä¹±è°‹åˆ’ä¸€ç•ªï¼Œå†³å®šå‰å¾€æ€»ç»Ÿåºœå‚è§‚ã€‚é—¨å£å–çš„å¡‘æ–™å°æªæ”¯éå¸¸æœ‰æ„æ€ï¼Œä¸ç”±èŠ±è´¹ 20 å¤§æ´‹ç»™è‡ªå·±ä¹Ÿæ•´äº†ä¸€ä¸ªã€‚\n\n![|md](https://img.memset0.cn/2023/11/06/InXFjUWy.jpeg)\n\nè¿›åºœä»¥åï¼Œé˜Ÿå‹æœ¬æƒ³çœ‹ç‚¹â€œèµ°å‘å…±å’Œâ€çš„å†å²èµ„æ–™ï¼Œæ²¡æƒ³åˆ°æ¨ªç«–å…¨æ˜¯â€œçº¢æ——æ’ä¸Šæ€»ç»Ÿåºœâ€ï¼Œä¸€ä¸‹å­å…´è‡´å…¨æ— ã€‚\n\n![åŠå¤æŠšä»Š|md](https://img.memset0.cn/2023/11/06/ATCwfcBL.jpeg)\n\nåŸè®¡åˆ’æ‰“ç®—å†å»ä¸­å±±é™µå‚è§‚ï¼Œç»“æœæ­¤æ—¶ä¸‰ä¸ªäººéƒ½æœ‰ç‚¹ç©ä¸åŠ¨äº†ï¼Œé‚å†³å®šå›å®¾é¦†ç¡å¤§è§‰ã€‚åœ¨åºŠä¸Šæ‰æƒ³èµ·æ¥è‡ªå·±æŠŠæ—©ä¸Šä¹°çš„å°æ‰‹æªè½åœ¨ä¸­åˆåƒé¥­çš„åœ°æ–¹äº† /å¤§å“­ã€‚\n\n![åƒä¸ªåˆé¥­ä¹Ÿé€ƒä¸å¼€åŸç¥|md](https://img.memset0.cn/2023/11/06/ihKHBl7U.jpeg)\n\nä¸€èµ·åºŠå‘ç°çƒ­èº«èµ›å·²ç»å¼€å§‹ï¼Œç¾¤é‡Œè¢«å­¦é•¿å’Œæ•™ç»ƒç–¯ç‹‚æ€’æ–¥ï¼ŒåŒ†å¿™èµ¶å¾€æ‰“äº†æœ€åä¸€å°æ—¶ã€‚æœ¬ä»¥ä¸ºèƒ½é€Ÿé€šå››é¢˜ï¼Œæ²¡æƒ³åˆ°è¡¨æ¼”äº†ä¸€æ‰‹ä¸‰çº¿å¡é¢˜ï¼Œç›´æ¥ä½åˆ—å€’æ•°ã€‚\n\n![|md](https://img.memset0.cn/2023/11/06/6swKmcSb.jpeg)\n\n![ä»€ä¹ˆå«â€œåå‘ç½šæ—¶â€å•Š|md](https://img.memset0.cn/2023/11/06/qlwCnygw.jpeg)\n\næ™šä¸Šç…§ä¾‹æ˜¯å’Œç¾¤å‹é¢åŸºï¼Œè§åˆ°äº†å¥½å¤šå…ˆå‰ä¸è®¤è¯†çš„å¤§ä½¬ã€‚\n\n![|md](https://img.memset0.cn/2023/11/07/Go2aQCX7.jpg)\n\nè¿™æ—¶ç¬”è®°æœ¬ç”µè„‘çªç„¶åäº†ï¼Œæ€¥å¾—è¦æ­»ã€‚é€‰æ‰‹ç¾¤é‡Œæœ‰ä¸ªå¤§å“¥è‡ªç§°ä¼šä¿®ï¼Œäºæ˜¯åŠå¤œæ‰“ä¸ªè½¦ç›´è¾¾æ²³æµ·å¤§å­¦ã€‚\n\n![æ²³æµ·å¤§å­¦|md](https://img.memset0.cn/2023/11/07/6bU9Wk40.jpeg)\n\nä¸å¾—ä¸è¯´ï¼Œæ²³æµ·å¤§å­¦çš„å®¿èˆç¯å¢ƒéå¸¸çš„å¥½ï¼Œç”šè‡³è¿˜é…å¤‡äº†ç”µæ¢¯ã€‚\n\n![å®¿èˆæ¥¼å…¥å£æ ‡è¯­|md](https://img.memset0.cn/2023/11/07/qWPy5MIw.jpg)\n\nç»æ´»å“¥æ‹†æœºç ”ç©¶ä¸€ç•ªæ–­è¨€å·²ç»æ²¡æ•‘ã€‚å¥½åœ¨ä»–å¤‡æœ‰ä¸€ä¸ªå›ºæ€ç¡¬ç›˜ç›’ï¼Œå¯ä»¥æŠŠ SSD ç›´æ¥æ’åœ¨é‡Œé¢ï¼Œè¿™æ ·æˆ‘å‘¨ä¸€è¦äº¤çš„ä½œä¸šå°±å…ˆæŠ¢æ•‘å‡ºæ¥äº†ã€‚\n\n![â€œä½ è¿™é‡Œçš„èºä¸å‘¢ï¼Ÿâ€ Ã— N|md](https://img.memset0.cn/2023/11/07/sEGuepBm.jpeg)\n\n## Day 1\n\nå¯æƒœæ™šä¸Šè¢«èšŠå­é¢‘ç¹éªšæ‰°ï¼Œåªç¡äº†å››ä¸ªå°æ—¶ã€‚æ—©ä¸Šèµ·åºŠååœ¨é£Ÿå ‚ç–¯ç‹‚çŒæ—©é¥­å’Œå’–å•¡ï¼Œå¸Œæœ›èƒ½æ¢å¤ä¸ªå…«æˆçš„ç²¾ç¥çŠ¶æ€ã€‚\n\n![è¿™æ ·çš„ä¸€ç›˜æˆ‘è¿å¹²ä¸‰ç¢—|md](https://img.memset0.cn/2024/04/04/6Ub9y8Iv.png)\n\nå¾—çŸ¥å‘çš„é¥­ç¥¨å¯ä»¥åœ¨é£Ÿå ‚äºŒæ¥¼æ¢é¥®æ–™ï¼Œä¸€å£æ°”æ•´äº†å¥½å¤šã€‚\n\n![æäº†æ•´æ•´åå…«ç“¶|lg](https://img.memset0.cn/2023/11/07/8mUDghqE.jpg)\n\nå‰æœŸå¼€ç­¾åˆ°é¢˜çŠ¶æ€ä¸€ç›´ä¸é”™ï¼Œæ’åç¨³åœ¨å‰ä¸‰ï¼Œç”šè‡³è¿˜çŸ­æš‚åè¶…æœ‰æ‰‹æœ‰è„šã€‚\n\nå‰ 7 é“ç­¾åˆ°é¢˜å†™å®Œåä¸€ä¸‹å­å¡ D ä¸ä¼šï¼ˆæˆ‘è„‘æŠ½æŠŠå‡¸æ€§å¦äº†ï¼Œå…¨è´£ï¼‰ï¼Œäºæ˜¯å¼€å§‹å¤§åŠ›æ Hï¼ˆæœ‰ç‚¹å…¨é”™äº†ï¼ï¼‰ã€‚è¿™æ—¶é˜Ÿå‹ä¸€çœ‹æ¦œå‘ç° E ä¹Ÿæ˜¯ç­¾åˆ°é¢˜ï¼Œå°±è®© wh å…ˆä¸Šå»å†™ Eã€‚\n\nä¸€æ®µæ—¶é—´è¿‡åçœ‹äº†çœ¼æ¦œï¼Œå‘ç° D è¿™ä¸ªé¢˜ä¸è¿‡ä¸è¡Œï¼Œæˆ‘å’Œ xry é‡æ–°å†·é™ä¸€ç•ªï¼Œé‡æ–°ç¡®è®¤äº†å‡¸çš„æ€§è´¨ï¼Œæˆ‘é©¬ä¸Šèƒ¡äº†ä¸ªæš´åŠ› set çš„åšæ³•ä¸€å‘å…¥é­‚ã€‚\n\nè¿™æ—¶é˜Ÿå‹çš„ E è¿˜æ²¡è°ƒå‡ºæ¥ï¼Œæˆ‘å’Œ xry è®¨è®ºäº†ä¸€ç•ªï¼Œå‘ç°äº† K é¢˜çš„å†³ç­–å•è°ƒæ€§ã€‚xry å¾ˆç†Ÿç»ƒçš„ç»™å‡ºäº†ä¸€ä¸ª DP çš„åšæ³•ï¼Œä¸€ç•ªæ€è€ƒåæˆ‘å†³å®šâ€œåˆ©ç”¨é˜Ÿé•¿æƒåˆ©â€æŠŠ wh èµ¶ä¸‹æ¥è®©å‡ºæœºæ—¶ã€‚\n\næ­¤æ—¶å·®ä¸å¤šå°æ¦œï¼Œæˆ‘ä»¬ä½åˆ—ç¬¬ä¸‰ã€‚ç¡®å®šäº†ç¨³ä½ Eã€K çš„æˆ˜ç•¥æ–¹é’ˆï¼Œæˆ‘ä¾¿ä¸“å¿ƒç»™ä»–ä»¬ä¸¤ä¸ªæ‰“è¾…åŠ©ã€‚æˆ‘ä¸€çœ‹å‘ç° wh çš„ç½‘ç»œæµæ¿å­é”™çš„ç¦»è°±ï¼Œä¸»ç¨‹åºé‡Œçš„ä¸€ä¸ªè¾¹ç•Œä¹Ÿå†™é”™äº†ã€‚ï¼ˆå…¨é”™äº†ï¼å…¨é”™äº†ï¼ï¼‰\n\nxry å¾ˆç¨³åœ°é€šè¿‡äº† Kï¼Œå¯ E è¿˜æ˜¯è°ƒä¸å‡ºæ¥ã€‚ç­‰åˆ°æœ€åååˆ†é’Ÿï¼Œxry ç»ˆäºå‘ç°æˆ‘ä»¬çš„åŒå‘è¾¹ç«Ÿç„¶åªè¿äº†ä¸€ä¾§ï¼ˆçº¢æ¸©äº†ï¼ï¼ï¼ï¼‰ã€‚åŒæ—¶è¿™é¢˜è¿˜è¦è¾“å‡ºæ–¹æ¡ˆï¼ï¼ï¼åŒ†å¿™ rushï¼Œå¯æƒœæœ€ååªå·®å‡ ç§’é’Ÿæ²¡èƒ½æˆåŠŸæäº¤ã€‚\n\næ¯”èµ›ç»“æŸåå› ä¸ºå‰æœŸç½šæ—¶çš„å·¨å¤§ä¼˜åŠ¿ï¼Œå‘ç°åªæœ‰å—äº¬é‚®ç”µå¤§å­¦çš„â€œCirtrusâ€é˜Ÿå†é€šè¿‡ä¸€é¢˜å¯ä»¥åè¶…æˆ‘ä»¬ã€‚\n\nå»é—®äº†ä¸‹å¾—çŸ¥ä»–ä»¬å°æ¦œå E é¢˜åœ¨ 258ï¼ˆå®é™…ä¸Šæ˜¯ 285ï¼‰åˆ†é’Ÿä¸€å‘å…¥é­‚ã€‚ææŒ‡ä¸€ç®—å‘ç°å­£å†›æ²¡äº†ï¼Œè¿˜æ˜¯æœ‰äº›å¤±è½ã€‚\n\næœ¬ç€æ—…æ¸¸é€‰æ‰‹çš„åˆå¿ƒï¼Œæˆ‘æ‹¿ç€æœ¬é¢˜é¢åˆ°å¤„æ‰¾ç¾¤å‹è¦ç­¾å /èˆ”ä¸€èˆ”ï¼ˆï¼‰\n\n![éå¸¸æ„Ÿè°¢æ„¿æ„ç»™æˆ‘ç­¾åçš„å“¥å“¥|md](https://img.memset0.cn/2023/11/06/5dJ6Qvwq.jpeg)\n\nè¿‡äº†ä¸€æ®µæ—¶é—´è¢«å­¦é•¿æé†’ä¹è§‚æ¦œä¸Šæˆ‘ä»¬æ˜¯ç¬¬ä¸‰ï¼Œæ‰å‘ç°å…ˆå‰çš„ç½šæ—¶ç®—é”™äº†ï¼Œæˆ‘ä»¬ä¼¼ä¹èƒ½ä»¥å¾®å¼±ä¼˜åŠ¿é¢†å…ˆå—é‚®ã€‚ï¼ˆè¿™ä¹ˆåˆºæ¿€ï¼ŸğŸ¥µï¼‰\n\nç…ç†¬åœ°çœ‹å®Œè®²é¢˜å’Œåå­çš„å¹¿å‘Šï¼Œç»ˆäºç­‰åˆ°æ²¡æœ‰æ„Ÿæƒ…çš„æ»šæ¦œæœºå™¨äºº mangoyang æ»šåˆ°æˆ‘ä»¬çš„é˜Ÿä¼ï¼Œç¡®å®šæ‹¿ä¸‹å­£å†› ï¼ğŸ˜\n\nç”±äºæ²‰è¿·äºæ»šæ¦œæ²¡æœ‰å»é¢†å¥–å¤„ï¼Œä¸»åŠæ–¹è¿˜ä»¥ä¸ºæˆ‘ä»¬è·‘è·¯äº†ã€‚æˆ‘åªå¾—å¤§å–Šä¸€å£°æˆ‘ä»¬é˜Ÿåœ¨è¿™é‡Œ$\\sim$ï¼Œ~~ç„¶åæŠŠå·²ç»èµ°åˆ°ä¸€åŠçš„æœ‰æ‰‹æœ‰è„šèµ¶äº†ä¸‹æ¥ã€‚~~\n\n![å­£æ¯ä¹Ÿæ˜¯æ¯|md](https://img.memset0.cn/2023/11/06/9aJmjRDK.jpeg)\n\nèµ›åé€Ÿé€šäº†ä¸‹å—äº¬èˆªç©ºèˆªå¤©å¤§å­¦çš„é£Ÿå ‚ï¼Œå¥½åƒæ˜¯çœŸçš„å¥½åƒï¼ˆç”šè‡³æœ‰ç‚¹åæ‚”å‰ä¸¤å¤©æ€ä¹ˆåœ¨å¤–é¢è€Œä¸æ˜¯å­¦æ ¡åƒçš„äº†ï¼‰ã€‚ç©ºå¿ƒèœã€çŒªè¹„å’Œå°èƒèŸ¹éƒ½å¾ˆå…¥å‘³ï¼Œæ¯”æˆ‘ä»¬å­¦æ ¡æ˜¯é«˜åˆ°ä¸çŸ¥é“å“ªé‡Œå»äº†ã€‚ğŸ˜­\n\n![|md](https://img.memset0.cn/2023/11/06/cXTO3ltp.jpeg)\n\næœ€åå› ä¸ºå µè½¦å·®ç‚¹æ²¡èµ¶ä¸Šé«˜é“ï¼Œåœ¨åŒ†å¿™ä¸­æ‹æ‹ä¸èˆåœ°ç¦»å¼€å—äº¬ã€‚\n\n![ä¼šå†è§çš„ï¼Œå—äº¬ï¼|md](https://img.memset0.cn/2023/11/06/q5Gkieb2.jpeg)\n\n## Day 2+\n\næŠŠæ”¶é›†çš„å¾½ç« æŒ‚åˆ°å®¿èˆé®å…‰å¸˜ä¸Šï¼Œåˆå›å½’åˆ°æ—¥å¸¸çš„å­¦ä¹ ç”Ÿæ´»ä¸­å•¦~\n\n![è¿„ä»Šä¸ºæ­¢æ”¶é›†åˆ°çš„å¾½ç« |md](https://img.memset0.cn/2023/11/06/LrRegqMR.jpeg)\n\n![ç´«é‡‘æ¸¯çš„è½æ—¥|md](https://img.memset0.cn/2023/11/06/uFqKlIHn.jpeg)\n\n<!--\n\n## æœ€åæƒ³è¯´çš„\n\nä½œä¸ºä¸€ä¸ªä¸‰æ–°ç”Ÿç»„æˆçš„é˜Ÿä¼ï¼Œèƒ½åœ¨åŒºåŸŸèµ›è·å¾—ä¸¤æˆ˜ä¸¤æ¯çš„æˆç»©ï¼Œæ„Ÿè§‰è¿˜æ˜¯ä¸å¤ªå®¹æ˜“çš„ã€‚å‡ åœºæ¯”èµ›ä¸‹æ¥ï¼Œå‘ç°æˆ‘ä»¬ä¸‰äººçš„é»˜å¥‘ä¸ä¿¡ä»»å·²ç»æ‹‰æ»¡äº†ã€‚èƒ½å‚ä¸è¿™æ ·ä¸€ä¸ªå›¢ç»“å‹çˆ±çš„é˜Ÿä¼çœŸçš„å¾ˆå¼€å¿ƒï¼Œä¹Ÿå¸Œæœ›æˆ‘ä»¬èƒ½ä¸€è·¯èµ°ä¸‹å»~\n\n-->\n","publishedTitle":"2023 ICPC å—äº¬ç«™æ¸¸è®°"}},{"id":"028947ea-3e80-5478-9295-fb4553da761a","fields":{"slug":"/oi/algorithm/bipartite-graph-game/","plainText":"\nä¸¤äººåœ¨ä¸€äºŒåˆ†å›¾ä¸Šè¿›è¡Œå†³ç­–ï¼Œåˆå§‹çŠ¶æ€ä¸ºäºŒåˆ†å›¾çš„ä¸€ä¸ªç‚¹ï¼Œä¸¤äººè½®æµæ²¿è¾¹è¡ŒåŠ¨ï¼Œä¸å…è®¸é‡å¤è®¿é—®èŠ‚ç‚¹ï¼Œæ— æ³•ç§»åŠ¨è€…è¾“ã€‚\n\nè¿™æ ·çš„é—®é¢˜ç§°ä¸ºäºŒåˆ†å›¾åšå¼ˆã€‚\n\n<!-- more -->\n\n## äºŒåˆ†å›¾åšå¼ˆ\n\n> **ç»“è®º 1**\n>\n> èµ·ç‚¹ $v$ æ˜¯å…ˆæ‰‹å¿…èƒœçš„å½“ä¸”ä»…å½“å…¶åœ¨æ‰€æœ‰æœ€å¤§åŒ¹é…ä¸Šã€‚\n\n**å¿…è¦æ€§**ï¼šå¦‚æœå­˜åœ¨ä¸€ä¸ªæœ€å¤§åŒ¹é… $M$ ä½¿å¾— $v$ ä¸åœ¨å…¶ä¸Šï¼Œé‚£ä¹ˆå…ˆæ‰‹æ¯æ¬¡æ“ä½œæ—¶ï¼Œè¦ä¹ˆæ— è·¯å¯èµ°ï¼Œè¦ä¹ˆèµ°åˆ°äº†æŸä¸ªåŒ¹é…ç‚¹ä¸Šï¼ˆå¦åˆ™å°±æ‰¾åˆ°äº†ä¸€æ¡å¢å¹¿è·¯ï¼‰ï¼Œäºæ˜¯åæ‰‹åªéœ€è¦æ¯æ¬¡èµ°åˆ° $M$ ä¸­ä¸ä¹‹ç›¸åŒ¹é…çš„èŠ‚ç‚¹å³å¯ã€‚\n\n**å……åˆ†æ€§**ï¼šå½“ $v$ åœ¨æ‰€æœ‰æœ€å¤§åŒ¹é…ä¸Šæ—¶ï¼Œæˆ‘ä»¬å–ä»»æ„æœ€å¤§åŒ¹é… $M$ï¼Œå°† $v$ ç§»åŠ¨åˆ°å¯¹åº”åŒ¹é…ç‚¹ã€‚å¯ä»¥è¯æ˜æ­¤æ—¶ $M$ åˆ å»ç‚¹ $v$ å’Œèµ°çš„åŒ¹é…åä»æ˜¯æœ€å¤§åŒ¹é…ï¼Œå°±å›åˆ°äº†è¯æ˜å¿…è¦æ€§ä¸­çš„æƒ…å†µã€‚\n\næœ‰å¢å¹¿è·¯å®šç†çš„ä¸€ä¸‹æ¨è®ºï¼šå¯¹äºæ— å‘å›¾ $G$ å’Œä»»ä¸€æœ€å¤§åŒ¹é… $M$ï¼Œç‚¹ $v$ å¿…å®šåœ¨æœ€å¤§åŒ¹é…ä¸Šå½“ä¸”ä»…å½“å¯¹äº $M$ï¼Œ$v$ åœ¨åŒ¹é…ä¸Šä¸”ä¸å­˜åœ¨ä»¥ $v$ ä¸ºä¸€ç«¯çš„å¶æ•°é•¿åº¦äº¤é”™è·¯ã€‚ï¼ˆå¦åˆ™å¯ä»¥æ²¿ç€å¶æ•°é•¿åº¦äº¤é”™è·¯å¹³ç§»åŒ¹é…æ–¹æ¡ˆï¼Œå°±å¾—åˆ°äº†ä¸€ä¸ª $v$ ä¸æ˜¯åŒ¹é…ç‚¹çš„åŒ¹é… $M'$ï¼ŒçŸ›ç›¾ï¼‰ã€‚\n\næ‰€ä»¥ç§»åŠ¨å¹¶åˆ é™¤ç‚¹ $v$ çš„å›¾ä¸­ä¹Ÿä¸å­˜åœ¨å¢å¹¿è·¯ï¼Œå……åˆ†æ€§å¾—åˆ°è¯æ˜ã€‚\n\n## Dinic æ±‚è§£\n\nè€ƒè™‘ç”¨ä¸€èˆ¬ç½‘ç»œæµç®—æ³•æ±‚è§£æ­¤ç±»é—®é¢˜ï¼Œæˆ‘ä»¬éœ€è¦ä¼˜åŒ–åˆ¤æ–­ä¸€ä¸ªç‚¹ $v$ æ˜¯å¦å¿…å®šåœ¨æ‰€æœ‰æœ€å¤§åŒ¹é…ä¸­çš„ç®—æ³•ã€‚\n\n> **ç»“è®º 2**\n>\n> ç‚¹ $v$ å¿…å®šåœ¨æ‰€æœ‰æœ€å¤§åŒ¹é…ä¸­å½“ä¸”ä»…å½“åœ¨æŸä¸ªæœ€å¤§æµä¸­ $S$ åˆ° $v$ çš„è¾¹æœ‰æµé‡ï¼Œä¸”æ®‹é‡ç½‘ç»œä¸Šä¸å­˜åœ¨ $S$ åˆ° $i$ çš„è·¯å¾„ã€‚\n\n**å……åˆ†æ€§**ï¼š$v$ åœ¨æœ€å¤§åŒ¹é… $M$ ä¸­å½“ä¸”ä»…å½“ $S$ åˆ° $v$ çš„è¾¹æœ‰æµé‡ã€‚è‹¥æ®‹é‡ç½‘ç»œä¸Šå­˜åœ¨ $S$ åˆ° $v$ çš„è·¯å¾„ï¼Œåˆ™å°†è¿™æ¡è·¯å¾„å’Œ $S$ åˆ° $v$ çš„è¾¹å–åå³å¯å¾—åˆ°ä¸€ä¸ªæ–°çš„ï¼Œ$S$ åˆ° $v$ æ— æµé‡çš„æœ€å¤§æµã€‚\n\n**å¿…è¦æ€§**ï¼šå‡è®¾å­˜åœ¨ä¸€ä¸ª $S$ åˆ° $v$ æ— æµé‡çš„æœ€å¤§æµï¼Œè€ƒè™‘è¯¥æœ€å¤§æµä¸ç°åœ¨çš„æœ€å¤§æµä¹‹å·®ï¼Œæ¯ä¸ªç‚¹çš„æµé‡å¿…å®šå¹³è¡¡ã€‚äºæ˜¯ç”±æ¬§æ‹‰å›è·¯å®šç†ï¼Œè¯¥å›¾å¿…å®šå¯è¢«åˆ†è§£ä¸ºè‹¥å¹²ç®€å•ç¯çš„å’Œï¼Œå–å…¶ä¸­åŒ…å« $S$ åˆ° $v$ çš„è¾¹å³å¯æ„é€ å‡ºä¸€ä¸ªæ®‹é‡ç½‘ç»œä¸Š $S$ åˆ° $v$ çš„è·¯å¾„ã€‚\n\n## å‚è€ƒä»£ç \n\n```cpp\ntemplate <int N, int M> struct Dinic {\n  int tot, s, t, cur[N], hed[N], dep[N], to[M << 1], val[M << 1], nxt[M << 1];\n  Dinic() { tot = 0, memset(hed, -1, sizeof(hed)); }\n  inline void add(int u, int v, int w) {\n    nxt[tot] = hed[u], to[tot] = v, val[tot] = w, hed[u] = tot++;\n    nxt[tot] = hed[v], to[tot] = u, val[tot] = 0, hed[v] = tot++;\n  }\n  bool bfs() {\n    static int u, l, r, q[N];\n    memset(dep + 1, 0, t << 2), l = r = dep[s] = 1, q[1] = s;\n    while (l <= r && (u = q[l++]))\n      for (int i = hed[u]; ~i; i = nxt[i])\n        if (val[i] && !dep[to[i]]) {\n          dep[to[i]] = dep[u] + 1;\n          q[++r] = to[i];\n        }\n    return dep[t];\n  }\n  int dfs(int u, int d) {\n    if (u == t) return d;\n    int s = 0;\n    for (int &i = cur[u]; ~i; i = nxt[i])\n      if (val[i] && dep[to[i]] == dep[u] + 1)\n        if (int e = dfs(to[i], std::min(d - s, val[i]))) {\n          s += e, val[i] -= e, val[i ^ 1] += e;\n          if (s == d) return s;\n        }\n    return s ? s : dep[s] = 0;\n  }\n  int dinic() {\n    int r = 0;\n    while (bfs()) memcpy(cur + 1, hed + 1, t << 2), r += dfs(s, 1e9);\n    return r;\n  }\n};\n\ntemplate <int N, int M> struct Main : Dinic<N, M> {\n  bool vis[N];\n  void dfs(int u) {\n    vis[u] = 0;\n    for (int i = hed[u]; ~i; i = nxt[i])\n      if (val[i] && vis[to[i]]) vis[to[i]] = 1, dfs(to[i]);\n  }\n  void filter() {\n    dfs(s);\n    for (int i = hed[s]; ~i; i = nxt[i]) vis[to[i]] &= !val[i];\n  }\n};\n```\n\n\n\n","publishedTitle":"äºŒåˆ†å›¾åšå¼ˆå­¦ä¹ ç¬”è®°"}},{"id":"99a493b6-88d3-5b41-b011-f8817a7adeda","fields":{"slug":"/oi/algorithm/rotational-symmetry/","plainText":"\näº”è¾¹å½¢æ•°çº§æ•°çš„ç”Ÿæˆå‡½æ•°å³æ¬§æ‹‰å‡½æ•°ï¼š\n\n$$\n\\varphi(x) = \\prod_{n=1}^\\infty (1 - x^n)\n$$\n\n<!-- more -->\n\n## æ¨å¯¼\n\näº”è¾¹å½¢æ•°å®šç†ç”¨æ¥æè¿°æ¬§æ‹‰å‡½æ•°å±•å¼€å¼çš„ç‰¹æ€§ï¼š\n\n$$\n\\varphi(x) = \\sum_{k=-\\infty}^{\\infty} (-1)^k x^{\\frac {k(3k+1)} 2} = \\sum_{k=0}^{\\infty} (-1)^k x^{\\frac {k(3k \\pm 1)} 2}\n$$\n\n> è¿™ä¸€éƒ¨åˆ†çš„è¯æ˜å¯ä»¥å‚è§ï¼šhttps://blog.csdn.net/visit_world/article/details/52734860\n\næ¬§æ‹‰å‡½æ•°çš„å€’æ•°æ˜¯åˆ’åˆ†æ•°çš„ç”Ÿæˆå‡½æ•°ï¼š\n\n$$\n\\frac 1 {\\varphi(x)} = \\sum_{i=0}^\\infty p(i) x^i = \\prod_{i=0}^\\infty \\sum_{j=0}^\\infty x^{ij} = \\prod_{i=0}^\\infty \\frac 1 {1 - x^i}\n$$\n\nç”±å®šä¹‰æˆ‘ä»¬å¯ä»¥å¾—åˆ°ï¼š\n\n$$\n\\varphi(x) \\times \\frac 1 {\\varphi(x)} = 1 \\Leftrightarrow\n\\left( \\sum_{k=0}^{\\infty} (-1)^k x^{\\frac {k(3k \\pm 1)} 2} \\right) \\left( \\sum_{i=0}^\\infty p(i) x^i \\right) = 1\n$$\n\né€šè¿‡è¿™ä¸ªæˆ‘ä»¬å¯ä»¥å¾—åˆ°åˆ’åˆ†æ•°çš„é€’æ¨å¼ã€‚\n\nåŒæ—¶å‘ç°äº”è¾¹å½¢æ•°ç”Ÿæˆå‡½æ•°çš„é¡¹æ•°æ˜¯ $O(\\sqrt n)$ çº§åˆ«çš„ï¼Œæ•…æˆ‘ä»¬å¯ä»¥åœ¨ $O(n \\sqrt n)$ çš„æ—¶é—´å¤æ‚åº¦å†…æ±‚å‡ºåˆ’åˆ†æ•°å‰ $n$ é¡¹ã€‚\n\næˆ‘ä»¬ä¹Ÿå¯ä»¥é€šè¿‡è¿™ç§æ–¹æ³•æ±‚æœ‰é™åˆ¶æ—¶çš„åˆ’åˆ†æ•°ï¼šç°åœ¨é™åˆ¶åˆ’åˆ†çš„æ¯ä¸ªæ•°çš„å¤§å°å°äº $k$ï¼Œåˆ™æœ‰\n\n$$\nF(x) = \\prod_{i=0}^\\infty \\sum_{j=0}^{k-1} x^{ij} = \\prod_{i=1}^\\infty \\frac {1-x^{ik}} {1 - x^i} = \\frac {\\varphi(x^k)} {\\varphi(x)}\n$$\n\nåˆ™\n\n$$\nF(x) = \\varphi(x^k) \\times P(x)\n$$\n\nåœ¨å…ˆæ±‚å‡ºåˆ’åˆ†æ•°çš„ç”Ÿæˆå‡½æ•°ä¹‹åï¼Œæˆ‘ä»¬åŒæ ·å¯ä»¥åœ¨ $O(\\sqrt n)$ çš„æ—¶é—´å¤æ‚åº¦å†…æ±‚å‡º $F(x)$ çš„å•é¡¹ã€‚\n\n## å®ç°\n\n### HDU4651\n\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\nconst int N = 1e5 + 10, mod = 1e9 + 7;\nint T, n, m, f[N], g[N];\nint main() {\n  cin.tie(0)->sync_with_stdio(0);\n  f[0] = 1;\n  for (int i = 1; i * (3 * i - 1) / 2 <= 100000; i++) {\n    g[m++] = i * (3 * i - 1) / 2;\n    g[m++] = i * (3 * i + 1) / 2;\n  }\n  for (int n = 1; n <= 100000; n++)\n    for (int j = 0; j < m && g[j] <= n; j++) {\n      f[n] = (f[n] + (((j >> 1) & 1) ? mod - 1ll : 1ll) * f[n - g[j]]) % mod;\n    }\n  for (cin >> T; T--;) cin >> n, cout << f[n] << '\\n';\n}\n```\n\n### HDU4658\n\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\nconst int N = 5e5 + 10, mod = 1e9 + 7;\nint T, n, m, k, f[N], g[N];\nint main() {\n  cin.tie(0)->sync_with_stdio(0);\n  f[0] = 1;\n  for (int k = 1; k * (3 * k - 1) / 2 <= 100000; k++) {\n    g[m++] = k * (3 * k - 1) / 2;\n    g[m++] = k * (3 * k + 1) / 2;\n  }\n  for (int i = 1; i <= 100000; i++)\n    for (int j = 0; j < m && g[j] <= i; j++) {\n      f[i] = (f[i] + f[i - g[j]] * ((j >> 1) & 1 ? mod - 1ll : 1ll)) % mod;\n    }\n  for (cin >> T; T--;) {\n    cin >> n >> k;\n    int res = f[n];\n    for (int i = 0; i < m && g[i] * k <= n; i++) {\n      res = (res + f[n - g[i] * k] * ((i >> 1) & 1 ? 1ll : mod - 1ll)) % mod;\n    }\n    cout << res << '\\n';\n  }\n}\n```\n","publishedTitle":"äº”è¾¹å½¢æ•°å®šç†å­¦ä¹ ç¬”è®°"}},{"id":"6e97ae4c-fe9c-5bc5-add6-16b05e72db95","fields":{"slug":"/oi/solution/cf1053e/","plainText":"\n> ç»™å®šä¸€æ£µæ ‘çš„æ¬§æ‹‰åºï¼Œå…¶ä¸­è¢«è‹¥å¹²ä½è¢«åˆ é™¤ã€‚ä½ å¯ä»¥åœ¨è¢«åˆ é™¤çš„ä½ç½®å¡«æ•°ï¼Œè¦æ±‚æ„é€ ä»»ä½•ä¸€ä¸ªåˆæ³•çš„æ¬§æ‹‰åºã€‚\n>\n> $n \\leq 5 \\times 10^5, |S| = 2n - 1$ã€‚\n\n<!-- more -->\n\n## é¢˜è§£\n\n### ä¸»ä½“æ€è·¯\n\næˆ‘ä»¬å¯ä»¥åˆ†æ²»ï¼Œ$\\operatorname{solve}(l, r)$ è¡¨ç¤ºè§£å†³ $l$ åˆ° $r$ è¿™æ®µåŒºé—´å…¶ä¸­ $a_l = a_r$ã€‚\n\né¦–å…ˆå¦‚æœ $a_{(l + 1) \\cdots (r - 1)}$ ä¸­æœ‰ä½• $a_l$ ç›¸ç­‰çš„æ•°ï¼Œé‚£ä¹ˆå¯ä»¥ç»§ç»­åˆ†æ²»ï¼Œå¦åˆ™çš„è¯ä¸­é—´æ²¡æœ‰å’Œ $a_l$ ç›¸ç­‰çš„æ•°ã€‚\n\nå¯¹äºæ‰€æœ‰æ»¡è¶³ $l < p < q < r \\text{ and } a_p = a_q$ï¼Œä¹Ÿå¯ä»¥é€’å½’ï¼Œé€’å½’å®Œååˆ é™¤æ‰é™¤äº†è¿™æ®µåŒºé—´çš„æ ¹èŠ‚ç‚¹çš„ç‚¹ã€‚è¿™æ ·çš„è¯ $a_{(l + 1) \\cdots (r - 1)}$ é™¤ $0$ å¤–äº’ä¸ç›¸åŒã€‚\n\næ¥ä¸‹æ¥è€ƒè™‘å¯¹äºæ‰€æœ‰ $x, y, 0$ æˆ– $0, y, x$ çš„ï¼Œå¯ä»¥ç›´æ¥æŠŠç©ºæ ¼å¤„å¡«æˆ $x$ï¼Œç„¶åç¼©æ‰ã€‚è¿™æ ·çš„è¯åªä¼šå‰©ä¸‹è¿ç»­çš„ $0$ã€‚\n\nå¯¹äºè¿ç»­çš„ $0$ï¼Œä¾æ¬¡è¡¥è¿‡å»ï¼Œæ¯è¡¥ä¸Šä¸€ä¸ªï¼Œå¦‚æœå­˜åœ¨ $x, y, 0$ æˆ– $0, y, x$ å°±ç»§ç»­ç¼©æ‰ã€‚\n\næœ€ååªå‰©ä¸‹ä¸€ä¸ªç‚¹ï¼Œä¹Ÿå°±å®Œæˆäº†é€’å½’ã€‚\n\n### å¯¹æ— è§£çš„åˆ¤æ–­\n\n1. æ²¡æœ‰è¶³å¤Ÿçš„ç‚¹ç”¨æ¥æ”¾\n2. $a_1 \\neq a_n$\n3. å¯¹äº $\\operatorname{solve}(l, r)$ï¼Œ$r - l + 1$ æ˜¯ $2$ çš„å€æ•°\n4. å¯¹äº $\\operatorname{solve}(l, r)$ï¼Œé€’å½’å®Œå $0$ çš„ä¸ªæ•°å°äºé $0$ ä¸ªæ•° $-1$\n5. å­˜åœ¨ $p < q < r < s$ æ»¡è¶³ $a_p = a_r \\text{ and } a_q = a_s \\text{ and } a_p \\neq a_q \\text{ and } a_r \\neq a_s$\n\n### å¯¹äº $a_1, a_{2n - 1}$ çš„ç‰¹æ®Šå¤„ç†\n\n1. å¦‚æœ $a_1 \\neq 0 \\text{ and } a_{2n-1} \\neq 0 \\text{ and } a_1 \\neq a_{2n-1}$ï¼Œé‚£ä¹ˆæ— è§£\n2. å¦‚æœ $(a_1 = 0 \\text{ and } a_{2n-1} \\neq 0) \\text{ or } (a_1 \\neq 0 \\text{ and } a_{2n-1} = 0)$ï¼Œé‚£ä¹ˆ $a_1 = a_{2n-1} = \\max(a_1, a_{2n-1})$ å³å¯\n3. å¦‚æœ $a_1 = a_{2n-1} = 0$ é‚£ä¹ˆéœ€è¦ç»™ $a_1, a_{2n-1}$ åˆ†é…ä¸€ä¸ªæ ‡å·ã€‚å…ˆæšä¸¾æ£€æŸ¥æœ‰æ²¡æœ‰å¯ä»¥ä»ä¸­é—´é€‰å‡ºçš„å¯èƒ½ï¼Œå¦‚æœæ²¡æœ‰ï¼Œå°±æ–°åˆ†é…ä¸€ä¸ªç‚¹\n\n### å¯¹äºé€’å½’çš„å¤æ‚åº¦ä¿è¯\n\nç›´æ¥å®ç°çš„å¯èƒ½ä¼šè¶…æ—¶ï¼Œæˆ‘æŠŠç›¸åŒå€¼çš„ä¸‹æ ‡å­˜åˆ°ä¸€èµ·ï¼Œç„¶åæ ¹æ®ã€ŒCTSC2018 é’è•ˆé¢†ä¸»ã€çš„æ–¹å¼å»ºæ ‘ï¼Œå…ˆæŠŠåŒºé—´å†…ä¸æ ¹èŠ‚ç‚¹ä¸åŒè‰²çš„é€’å½’å¤„ç†æ‰ï¼Œå†æ¥å¤„ç†æ ¹èŠ‚ç‚¹åŒè‰²çš„ã€‚\n\n### å¯¹äºæ‰«æå½¢å¦‚ $x, y, 0$ å’Œ $y, x, 0$ çš„å¤æ‚åº¦ä¿è¯\n\nå¯ä»¥å¼€ä¸€ä¸ªæ ˆæš´åŠ›æ‰«è¿‡å»ï¼Œç”¨ç±»ä¼¼æ‹¬å·åŒ¹é…çš„æ–¹å¼å¤„ç†ï¼Œè¿™é‡Œä¸å¤šè®²ã€‚\n\néœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæˆ‘çš„å®ç°æ˜¯å…ˆæŠŠå·²æœ‰çš„ $x, y, 0$ å’Œ $y, x, 0$ å¡«æ‰ï¼Œä¸ç„¶æœ‰å¯èƒ½ä¸æ˜¯æœ€ä¼˜æ–¹æ¡ˆã€‚\n\nç„¶åä¸¤ç«¯åŒæ—¶æ‰«æï¼Œå¦‚æœæ²¡æœ‰å¯ä»¥ç›´æ¥å¡«çš„ï¼Œä½†ç»™ä¸¤ç«¯ä¸­çš„ $0$ çš„ç‚¹åˆ†é…æ ‡å·å¯ä»¥é…å¯¹çš„è¯ï¼Œå°±åˆ†é…æ‰ã€‚å¦‚æœéƒ½æ²¡æœ‰ï¼Œéšä¾¿ä¸€ç«¯å¡«ä¸ªæ•°å³å¯ã€‚\n\n### å¤æ‚åº¦è¯æ˜\n\nä¸€ä¸ªæ•°åªä¼šåœ¨æŸä¸€å±‚è¢«å¤„ç†æ‰ï¼Œå¯¹é‚£ä¸€å±‚çš„å¤æ‚åº¦è´¡çŒ®æ˜¯ $\\mathcal O(1)$ çš„ï¼Œæ‰€ä»¥è¿™ä¸€éƒ¨åˆ†çš„æ—¶é—´å¤æ‚åº¦ä¸º $\\mathcal O(n)$ã€‚\n\nç”±äºéœ€è¦åˆ¤æ–­æ— è§£ç­‰ç­‰æƒ…å†µï¼Œå¯ä»¥å†™ä¸€ä¸ªæ”¯æŒåŒºé—´æŸ¥è¯¢æœ€å¤§å€¼ / æœ€å°å€¼çš„çº¿æ®µæ ‘ / ST è¡¨ï¼Œæ—¶é—´å¤æ‚åº¦ $\\mathcal O(n \\log n)$ï¼Œå…¶ä¸­ ST è¡¨çš„ç©ºé—´å¤æ‚åº¦ä¸º $\\mathcal O(n \\log n)$ï¼Œå¯èƒ½ä¼šå¯¼è‡´ $\\text{MLE}$ã€‚\n\nç»¼ä¸Šï¼Œæ—¶é—´å¤æ‚åº¦ $\\mathcal O(n \\log n)$ï¼Œç©ºé—´å¤æ‚åº¦ $\\mathcal O(n)$ï¼Œå¯ä»¥é€šè¿‡æœ¬é¢˜ã€‚\n\n## ä»£ç \n\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\nconst int N = 1e6 + 9, L = 21;\nint n, m, a[N], del[N], use[N], lg[N];\nvector<int> v[N], G[N];\nstruct info {\n  int val, id;\n  inline info() {}\n  inline info(int k) { val = a[k], id = k; }\n  inline info(int a, int b) { val = a, id = b; }\n};\nvector<info> s, h, t, bkt[N];\npriority_queue<int, vector<int>, greater<int>> q;\nvoid noSolution() { puts(\"no\"), exit(0); }\nstruct minimax {\n  int min, max;\n  inline minimax operator^(const minimax &other) const { return {std::min(min, other.min), std::max(max, other.max)}; }\n} b[N];\nstruct segment {\n  int l, r, mid;\n  minimax x;\n} p[N << 2];\nvoid build(int u, int l, int r) {\n  p[u].l = l, p[u].r = r, p[u].mid = (l + r) >> 1;\n  if (l == r) {\n    p[u].x = b[l];\n    return;\n  }\n  build(u << 1, l, p[u].mid);\n  build(u << 1 | 1, p[u].mid + 1, r);\n  p[u].x = p[u << 1].x ^ p[u << 1 | 1].x;\n}\nminimax query(int u, int l, int r) {\n  if (p[u].l == l && p[u].r == r) return p[u].x;\n  if (r <= p[u].mid) return query(u << 1, l, r);\n  else if (l > p[u].mid)\n    return query(u << 1 | 1, l, r);\n  else\n    return query(u << 1, l, p[u].mid) ^ query(u << 1 | 1, p[u].mid + 1, r);\n}\nvoid init() {\n  static int tmp[N];\n  memset(tmp, 0, sizeof tmp);\n  for (int i = 1; i <= m; i++)\n    if (a[i]) {\n      if (!tmp[a[i]]) tmp[a[i]] = i;\n      b[i].min = tmp[a[i]];\n    } else {\n      b[i].min = i;\n    }\n  memset(tmp, 0, sizeof tmp);\n  for (int i = m; i >= 1; i--)\n    if (a[i]) {\n      if (!tmp[a[i]]) tmp[a[i]] = i;\n      b[i].max = tmp[a[i]];\n    } else {\n      b[i].max = i;\n    }\n  build(1, 1, m);\n}\nminimax query(int l, int r) { return query(1, l, r); }\ninline bool possible(int l, int r) {\n  if (!((r - l + 1) & 1)) return false;\n  if (l + 1 > r - 1) return true;\n  auto it = query(l + 1, r - 1);\n  return it.max <= r && it.min >= l;\n}\ninline int newNode() {\n  static int cur = 1;\n  while (use[cur]) cur++;\n  if (cur > n) cerr << \"[No enougth nodes] No solution.\\n\", noSolution();\n  return use[cur] = 1, cur;\n}\nvoid solve(int x) {\n  vector<pair<int, int>> jump;\n  for (auto y : G[x]) {\n    solve(y);\n    jump.push_back(make_pair(*v[y].begin(), *--v[y].end()));\n  }\n  reverse(jump.begin(), jump.end());\n  for (int i = 0, L, R, at = 0; i + 1 < v[x].size(); i++) {\n    L = v[x][i], R = v[x][i + 1];\n    if (!((R - L + 1) & 1)) noSolution(); // è¦æ±‚æ¯ä¸ªè¿™æ ·çš„åŒºé—´ä¸ºå¥‡æ•°\n    s.clear(), s.push_back(info(L));\n    for (int i = L + 1; i <= R - 1; i++) {\n      s.push_back(info(i));\n      if (at < jump.size() && i == jump[at].first) i = jump[at++].second;\n    }\n    s.push_back(info(R));\n    int c0 = 0, c1 = 0;\n    for (int i = 1; i + 1 < s.size(); i++) s[i].val ? ++c1 : ++c0;\n    if (c0 < c1 - 1) noSolution();\n    int tl = 0, tr = s.size() - 1;\n    while (tl < s.size() && s[tl].val) tl++;\n    while (tr >= 0 && s[tr].val) tr--;\n    if (tl == s.size()) continue;\n    for (int i = tl; i <= tr; i++)\n      if (s[i].val) {\n        if (t.size() >= 2 && (--t.end())->val && !(-- --t.end())->val) {\n          a[(-- --t.end())->id] = s[i].val;\n          del[(-- --t.end())->id] = del[(--t.end())->id] = 1;\n          t.pop_back(), t.pop_back(), t.push_back(s[i]);\n        } else {\n          t.push_back(s[i]);\n        }\n      } else {\n        if (t.size() >= 2 && (--t.end())->val && (-- --t.end())->val) {\n          a[s[i].id] = (-- --t.end())->val;\n          del[s[i].id] = del[(--t.end())->id] = 1;\n          t.pop_back();\n        } else {\n          t.push_back(s[i]);\n        }\n      }\n    t.clear(), swap(t, s);\n    for (int i = 0; i < t.size(); i++)\n      if (del[t[i].id]) del[t[i].id] = false;\n      else\n        s.push_back(t[i]);\n    t.clear();\n    for (int i = 0, j = s.size() - 1; i <= j;) {\n      if (s[i].val) {\n        h.push_back(s[i++]);\n      } else if (s[j].val) {\n        t.push_back(s[j--]);\n      } else {\n        if (h.size() >= 2) {\n          a[s[i].id] = s[i].val = (-- --h.end())->val;\n          h.pop_back(), i++;\n        } else if (t.size() >= 2) {\n          a[s[j].id] = s[j].val = (-- --t.end())->val;\n          t.pop_back(), j--;\n        } else {\n          a[s[i].id] = s[i].val = newNode();\n          h.push_back(s[i++]);\n        }\n      }\n    }\n    h.clear(), t.clear(), s.clear();\n  }\n}\nint main() {\n  cin.tie(0)->sync_with_stdio(0);\n  cin >> n;\n  m = (n << 1) - 1, lg[0] = -1;\n  for (int i = 1; i <= m; i++) lg[i] = lg[i >> 1] + 1;\n  for (int i = 1; i <= m; i++) {\n    cin >> a[i];\n    if (a[i]) use[a[i]] = 1;\n  }\n  if (a[1] && a[m] && a[1] != a[m]) noSolution();\n  else if (!a[1] && !a[m]) {\n    init();\n    int any = 0;\n    for (int i = 3; i <= m - 2; i++) {\n      if (a[i] && a[i] != a[2] && a[i] != a[m - 1] && possible(1, i) && possible(i, m)) any = max(any, a[i]);\n    }\n    a[1] = a[m] = any ? any : newNode();\n  } else\n    a[1] = a[m] = a[1] | a[m];\n  init();\n  for (int i = 1; i <= m; i++)\n    if (a[i]) v[a[i]].push_back(i);\n  for (int i = 1; i <= n; i++)\n    if (v[i].size() > 1) {\n      for (int j = 0; j + 1 < v[i].size(); j++)\n        if (!possible(v[i][j], v[i][j + 1])) {\n          cerr << \"[Impossible section] \" << v[i][j] << \" \" << v[i][j + 1] << endl;\n          noSolution();\n        }\n      bkt[*--v[i].end()].push_back({*v[i].begin(), i});\n    }\n  for (int i = 1; i <= m; i++) {\n    for (auto it : bkt[i]) {\n      while (s.size() && (--s.end())->val >= it.val) {\n        G[it.id].push_back((--s.end())->id);\n        s.pop_back();\n      }\n      s.push_back(it);\n    }\n  }\n  s.clear();\n  solve(a[1]);\n  cout << \"yes\" << endl;\n  for (int i = 1; i <= m; i++) cout << a[i] << \" \\n\"[i == m];\n}\n```\n","publishedTitle":"ã€ŒCF1053Eã€Euler tour"}},{"id":"2e49aa6c-1819-522d-aef3-060a6fa9825b","fields":{"slug":"/oi/solution/cf1264f/","plainText":"\n> ç”¨ä¸‰å…ƒç»„ $(a,d,n)$ è¡¨ç¤ºé•¿åº¦ä¸º $n$ çš„é€’å¢ç­‰å·®æ­£æ•´æ•°åºåˆ— $\\{a, a+d, a+2d \\ldots a+(n-1)d\\}$ã€‚ç»™å®š $(a,d,n)$ï¼Œè¦æ±‚æ„é€  $(b,e,n)$ æ»¡è¶³ï¼š\n>\n> - $b,e < 2^{64}$ï¼Œä¸”æ˜¯æ­£æ•´æ•°\n> - å¯¹äºæ‰€æœ‰ $0 \\leq i < n$ï¼Œ$a+id$ çš„åè¿›åˆ¶è¡¨ç¤ºæ˜¯ $F_{b+ie}$ çš„åè¿›åˆ¶è¡¨ç¤ºçš„å $18$ ä½çš„å­ä¸²ï¼ˆå¦‚æœæ²¡æœ‰ $18$ ä½è‡ªåŠ¨è¡¥å‰å¯¼é›¶ï¼‰ã€‚å…¶ä¸­ $F_i$ æ˜¯æŒ‡æ–æ³¢é‚£å¥‘æ•°åˆ—çš„ç¬¬ $i$ é¡¹ã€‚\n>\n> $1 \\leq a+(n-1)d \\leq 10^6$ã€‚\n\n<!-- more -->\n\n## é¢˜è§£\n\nè®¾ $P = 10^6$ï¼Œåˆ™æœ‰ $\\pi(P) \\mid 6P$ï¼Œå°è¯•å¾—å– $n = 3P$ æ˜¯ $\\bmod P$ æ„ä¹‰ä¸‹çš„å‘¨æœŸã€‚\n\nåˆ™æœ‰ $F_{n} \\equiv 0 \\pmod P$ï¼Œ$F_{n+1} \\equiv 1 \\pmod P$ã€‚è€ƒè™‘ï¼š\n\n- $F_{2n+1} \\equiv F_n^2 + F_{n+1}^2 \\equiv F_{n+1}^2 \\pmod {P^2}$\n- $F_{3n+1} \\equiv F_n F_{2n} + F_{n+1} F_{2n+1} \\equiv F_{n+1}^3 \\pmod {P^2}$\n- $\\ldots$\n- $F_{kn+1} \\equiv F_{n+1}^k \\pmod {P^2}$\n\næ­¤ä¾‹ä¸­ï¼Œæˆ‘ä»¬æœ‰ $F_{n+1} \\equiv 2 t P + 1 \\pmod P^2$ï¼Œå…¶ä¸­ $t$ æ˜¯ä¸ $P$ äº’è´¨çš„æ•´æ•°ã€‚\n\nåˆ™ $F_{kn+1} \\equiv F_{n+1}^k \\equiv 2kt P + 1$ï¼Œå– $k = 5 k' t^{-1}$ï¼Œåˆ™æšä¸¾ $1 \\leq k' < 10^6$ å³å¯è§£å†³æœ¬é¢˜ã€‚\n\n## ä»£ç \n\n```py\ndef exgcd(a, b):\n    if b == 0:\n        return 1, 0\n    x, y = exgcd(b, a % b)\n    return y, x - y * (a // b)\n\n\ndef inv(a, p):\n    x, y = exgcd(a, p)\n    return (x % p + p) % p\n\n\ndef xmul(a, b):\n    c = [[0, 0], [0, 0]]\n    for i in range(0, 2):\n        for j in range(0, 2):\n            for k in range(0, 2):\n                c[i][j] = (c[i][j] + a[i][k] * b[k][j]) % (10**12)\n    return c\n\n\ndef xpow(a, b):\n    s = [[1, 0], [0, 1]]\n    while b:\n        if b % 2:\n            s = xmul(s, a)\n        a = xmul(a, a)\n        b //= 2\n    return s\n\n\ndef fib(n):\n    if n <= 1:\n        return n\n    return xmul([[1, 0], [0, 0]], xpow([[1, 1], [1, 0]], n - 1))[0][0]\n\n\nif __name__ == \"__main__\":\n    t = fib(3 * (10**6) + 1) // (10**6)\n    u = 15 * inv(t // 2, 10**6)\n    n, a, d = map(int, input().split())\n    b = a * u * (10**6) + 1\n    e = d * u * (10**6)\n    print(b, e)\n```\n","publishedTitle":"ã€ŒCF1264Fã€Beautiful Fibonacci Problem"}},{"id":"e7ba81f8-555e-5b3e-8c89-86fe034b07fd","fields":{"slug":"/oi/solution/cf1336e2/","plainText":"\n> ç»™å®š $n$ ä¸ªæ•´æ•° $\\langle a_1, a_2 ... a_n \\rangle$ï¼Œåœ¨ $[0; 2^m)$ çš„èŒƒå›´å†…ã€‚å¯¹äº $k \\in [0; m]$ï¼Œæ±‚é€‰å‡ºä¸€ä¸ªå­é›†ä½¿å¾—å¼‚æˆ–å’Œçš„äºŒè¿›åˆ¶è¡¨ç¤ºæœ‰ $k$ ä¸ª $1$ çš„æ–¹æ¡ˆæ•°ã€‚\n>\n> $1 \\leq n \\leq 2 \\times 10^5,\\ 0 \\leq m \\leq 53$ã€‚\n\n<!-- more -->\n\n## é¢˜è§£\n\n### 0x01\n\nå®šä¹‰ï¼š\n\n- $\\operatorname{popcount}(x)$ è¡¨ç¤º $x$ çš„äºŒè¿›åˆ¶è¡¨ç¤ºä¸‹ $1$ çš„ä¸ªæ•°\n- $\\langle i, j \\rangle = \\operatorname{popcount(i\\ \\&\\ j)}$\n\nå¯¹äºçº¿æ€§åŸº $S$ï¼Œå®šä¹‰ï¼š\n\n- $\\operatorname{span}(S)$ è¡¨ç¤º $S$ å¼ æˆçš„å‘é‡ç©ºé—´\n- $F(S) = \\sum_{x \\in \\operatorname{span}(S)} z^x$\n- $P(S) = \\sum_{x \\in \\operatorname{span}(S)} z^{\\operatorname{popcount}(x)}$\n\nå¯¹äºæ­¤é¢˜ï¼Œå®šä¹‰\n\n- $A$ ä¸ºç”±é¢˜ä¸­ç»™å®šæ•°å¾—åˆ°çš„çº¿æ€§åŸº\n\né¦–å…ˆä½ å·²ç»ä¼šäº†ä¸€ä¸ª $O(2^{\\operatorname{rank}(A)})$ çš„æš´åŠ›ï¼Œä¸‹æ–‡æˆ‘ä»¬ä»‹ç»ä¸€ç§ $O(2^{m-\\operatorname{rank}(A)})$ çš„ç®—æ³•ï¼Œå°±å¯ä»¥é€šè¿‡åˆ†æ²»åœ¨ $O(2^{m/2})$ çš„æ—¶é—´å¤æ‚åº¦å†…é€šè¿‡æœ¬é¢˜ã€‚\n\n### 0x02\n\nç”±çº¿æ€§åŸºçš„åŸºæœ¬æ€§è´¨ï¼Œå¯ä»¥å¾—åˆ°ï¼š\n\n$$\n(z^x) * F(A) = F(A)\n$$\n\nåœ¨æ­¤åŸºç¡€ä¸Šæšä¸¾ $x \\in \\operatorname{span}(A)$ æœ‰\n\n$$\n\\begin{aligned}\n\tF(A) * F(A) &= F(A) \\cdot 2^{\\operatorname{rank}(A)} \\\\\n\t\\operatorname{FWT}(F(A)) \\cdot \\operatorname{FWT}(F(A)) &= \\operatorname{FWT}(F(A)) \\cdot 2^{\\operatorname{rank}(A)}\n\\end{aligned}\n$$\n\nç”±äºæ˜¯æŒ‰ä½ç›¸ä¹˜ï¼Œè€ƒè™‘æ–¹ç¨‹ $x^2=x+1$ çš„å®æ ¹ä»…æœ‰\n\n$$\n\\left\\{ \\begin{aligned} x_1 &= 0 \\\\ x_2 &= 2^{\\operatorname{rank}(A)} \\end{aligned} \\right.\n$$\n\næ•… $[z^i] \\operatorname{FWT}(F(A))  \\in \\{0, 2^{\\operatorname{rank}(A)}\\}$ã€‚\n\n### 0x03\n\nè®©æˆ‘ä»¬å†å›åˆ° $\\operatorname{FWT}$ è¿ç®—æœ¬èº«çš„æ„ä¹‰ï¼š\n\n$$\n\\begin{aligned}\n[z^i] \\operatorname{FWT}(F(A))\n&= \\sum_{x \\in \\operatorname{span}(A)} (-1)^{\\langle i,x \\rangle} \\\\\n&\\in \\{ 0, 2^{\\operatorname{rank}(A)} \\} \\\\\n\\end{aligned}\n$$\n\nå¦‚æœå­˜åœ¨ $x$ ä½¿å¾— $(-1)^{\\langle i,x \\rangle} = -1$ï¼Œåˆ™ $\\operatorname{FWT}(A)_i$ åªèƒ½ä¸º $0$ã€‚\n\n$\\langle x,y \\rangle$ å’Œ $\\oplus$ è¿ç®—æ»¡è¶³ç»“åˆå¾‹ï¼š\n\n$$\n\\langle i,x \\rangle \\oplus \\langle j,x \\rangle = \\langle i \\oplus j, x \\rangle\n$$\n\nå¯ä»¥é€šè¿‡æŠŠ $\\&$ ç†è§£ä¸ºäºŒè¿›åˆ¶æŒ‰ä½ä¹˜æ³•ï¼Œ$\\oplus$ ç†è§£ä¸ºäºŒè¿›åˆ¶ä¸è¿›ä½åŠ æ³•æ¥è¯æ˜ã€‚\n\næ•…æˆ‘ä»¬åªéœ€æ£€éªŒ $A$ ä¸­çš„æ¯ä¸ªåŸºåº•è€Œé $\\operatorname{span}(A)$ å³å¯åˆ¤æ–­è¿™ä¸€ä½çš„å€¼ã€‚\n\n### 0x04\n\nå®šä¹‰ $A$ çš„æ­£äº¤çº¿æ€§åŸºä¸º $B$ï¼Œä½¿å¾—å¯¹äºæ‰€æœ‰ $x \\in \\operatorname{span}(A), y \\in \\operatorname{span}(B)$ï¼Œæ»¡è¶³ $\\operatorname{popcount(x \\& y)}$ æ˜¯å¶æ•°ï¼Œä¸” $\\operatorname{rank}(A) + \\operatorname{rank}(B) = m$ã€‚\n\næ ¹æ®å‰é¢çš„å¼•ç†ï¼Œæœ‰\n\n$$\nB \\cdot 2^{\\operatorname{rank}(A)} = \\operatorname{FWT} (A) \\Leftrightarrow \\operatorname{IFWT}(B \\cdot 2^{\\operatorname{rank}(A)}) = A\n$$\n\nä¸€ç§ç®€å•çš„æ­£äº¤çº¿æ€§åŸºæ„é€ æ–¹å¼æ˜¯\n\n<img src=\"https://i.loli.net/2020/04/26/wKc3le9s8vBzQYr.png\" style=\"margin: auto;\" />\n\nç”¨é«˜æ–¯æ¶ˆå…ƒæ•´ç†å…³é”®ä½ï¼Œæ—‹è½¬å³ä¸Šè§’åˆ°å·¦ä¸‹è§’å¾—åˆ°ã€‚\n\n<img src=\"https://i.loli.net/2020/04/26/QckSaT4BjewVXNE.png\" style=\"margin: auto;\" />\n\nè¯æ˜å¯ä»¥è€ƒè™‘å›¾ä¸­åœˆå‡ºçŸ©å½¢çš„å·¦ä¸Šè§’å’Œå³ä¸Šè§’ä¸€å®šä¸º $1$ï¼Œè€Œä¸¤å‘é‡çš„å¼‚æˆ–çš„ $\\operatorname{popcount}$ ä¸ºå¶æ•°ï¼Œé‚£ä¹ˆå·¦ä¸‹è§’å’Œå³ä¸Šè§’çš„æ•°è¦ä¹ˆå…¨ä¸º $0$ï¼Œè¦ä¹ˆå…¨ä¸º $1$ã€‚\n\n### 0x05\n\nçŸ¥é“äº†æ­£äº¤çº¿æ€§åŸºæ€ä¹ˆæ±‚ï¼Œå¦‚ä½•è®¡ç®—ç­”æ¡ˆå‘¢ï¼Ÿ\n\nè€ƒè™‘ç”¨ $\\operatorname{FWT}$ è¡¨ç¤ºç­”æ¡ˆç»Ÿè®¡ï¼š\n\n$$\n[z^c]P(A) = [z^0] (A * G^c) = [z^0] \\operatorname{IFWT}(\\operatorname{FWT}(F(A)) \\cdot \\operatorname{FWT}(G^c))\n$$\n\nå…¶ä¸­ $G^c$ è¡¨ç¤º $\\sum_{x \\geq 0} z^x [\\operatorname{popcount}(x)=c]$ã€‚\n\nå…¶ä¸­ï¼š\n\n$$\n[z^0] \\operatorname{IFWT}(X) = 2^{-m} [z^0] \\operatorname{FWT}(X) = 2^{-m} \\sum_{i \\geq 0} [z^i] X\n$$\n\nç”±äº $\\operatorname{FWT}(F(A)) = F(B) \\cdot 2^k$ï¼Œè€Œ $B$ ä¸­çš„å…ƒç´ åªæœ‰ $2^{\\operatorname{rank}(B)} = 2^{m - \\operatorname{rank}(A)}$ ä¸ªã€‚æ•…é€šè¿‡æš´åŠ›å¾—åˆ° $P(B)$ï¼Œå³å¯é€šè¿‡ç»„åˆæ•°è®¡ç®—å¾— $P(A)$ã€‚\n\n$$\n[z^c]P(A) = 2^{k-m} \\sum_{d \\geq 0} [z^d] P(B) \\sum_{i \\geq 0} (-1)^i \\binom d i \\binom {m-d} {c-i}\n$$\n\n## ä»£ç \n\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\nconst int N = 60, mod = 998244353;\nint n, m, k, t, c[N];\nlong long f[N], g[N];\nstruct z {\n  int x;\n  z(int x = 0) : x(x) {}\n  friend inline z operator*(z a, z b) { return (long long)a.x * b.x % mod; }\n  friend inline z operator-(z a, z b) { return (a.x -= b.x) < 0 ? a.x + mod : a.x; }\n  friend inline z operator+(z a, z b) { return (a.x += b.x) >= mod ? a.x - mod : a.x; }\n} p[N], q[N], fac[N], ifac[N];\ninline z C(int n, int m) { return n < m ? 0 : fac[n] * ifac[m] * ifac[n - m]; }\ninline z fpow(z a, int b) {\n  z s = 1;\n  for (; b; b >>= 1, a = a * a)\n    if (b & 1) s = s * a;\n  return s;\n}\ninline void insert(long long x) {\n  for (int i = m - 1; i >= 0; i--)\n    if ((x >> i) & 1) {\n      if (f[i]) x ^= f[i];\n      else {\n        f[i] = x;\n        return;\n      }\n    }\n}\nint main() {\n  cin.tie(0)->sync_with_stdio(0);\n  cin >> n >> m;\n  for (int i = 1; i <= n; i++) {\n    long long x;\n    cin >> x, insert(x);\n  }\n  for (int i = 0; i < m; i++)\n    for (int j = i + 1; j < m; j++)\n      if ((f[j] >> i) & 1) f[j] ^= f[i];\n  for (int i = 0; i < m; i++)\n    if (f[i]) c[i] = k++;\n  for (int i = 0; i < m; i++)\n    if (!f[i]) c[i] = k + (t++);\n  for (int i = 0; i < m; i++)\n    if (f[i])\n      for (int j = 0; j < m; j++)\n        if ((f[i] >> j) & 1) g[c[i]] |= 1ll << c[j];\n  for (int i = 0; i < k; i++)\n    for (int j = k; j < m; j++)\n      if ((g[i] >> j) & 1) g[j] |= 1ll << i;\n  for (int i = k; i < m; i++) g[i] |= 1ll << i;\n  if (k <= ((m + 1) >> 1)) {\n    function<void(int, long long)> dfs = [&](int i, long long s) {\n      if (i >= k) {\n        p[__builtin_popcountll(s)].x++;\n        return;\n      }\n      dfs(i + 1, s), dfs(i + 1, s ^ g[i]);\n    };\n    dfs(0, 0ll);\n  } else {\n    function<void(int, long long)> dfs = [&](int i, long long s) {\n      if (i >= m) {\n        q[__builtin_popcountll(s)].x++;\n        return;\n      }\n      dfs(i + 1, s), dfs(i + 1, s ^ g[i]);\n    };\n    dfs(k, 0ll);\n    fac[0] = ifac[0] = ifac[1] = 1;\n    for (int i = 1; i <= m; i++) fac[i] = fac[i - 1] * i;\n    for (int i = 2; i <= m; i++) ifac[i] = (mod - mod / i) * ifac[mod % i];\n    for (int i = 1; i <= m; i++) ifac[i] = ifac[i - 1] * ifac[i];\n    for (int c = 0; c <= m; c++)\n      for (int d = 0; d <= m; d++)\n        for (int i = 0; i <= c; i++) {\n          p[c] = p[c] + fpow(2, mod - 1 + k - m) * q[d] * (i & 1 ? mod - 1 : 1) * C(d, i) * C(m - d, c - i);\n        }\n  }\n  for (int i = 0; i <= m; i++) cout << (p[i] * fpow(2, n - k)).x << \" \\n\"[i == m];\n}\n```\n","publishedTitle":"ã€ŒCF1336E2ã€Chiori and Doll Picking (hard version)"}},{"id":"116c0a36-c6f0-59e3-8783-d4ceb6fef63e","fields":{"slug":"/oi/solution/cf1292f/","plainText":"\n> ä¸€ä¸ªå¤§å°ä¸º $n$ çš„é›†åˆ $\\{a_i\\}_{i=1}^n$ï¼Œæ¯æ¬¡å¯ä»¥é€‰æ‹© $(i,j,k)$ï¼Œè‹¥ $a_i \\mid a_j$ ä¸” $a_i \\mid a_k$ï¼Œå¯ä»¥å°† $a_k$ åˆ å»ã€‚\n>\n> æ±‚èƒ½åˆ é™¤æœ€å¤šæ•°çš„åˆ é™¤åºåˆ—æ•°ï¼Œåˆ é™¤åºåˆ—å®šä¹‰ä¸ºå¯¹äºä¸€ä¸ªä¸‰å…ƒç»„ $(i,j,k)$ï¼Œæ¯æ¬¡åˆ æ•°æŠŠ $a_k$ åŠ å…¥åˆ°åˆ é™¤åºåˆ—ä¸­ã€‚\n>\n> $1 \\leq a_i, n \\leq 60$ï¼Œä¿è¯ $a_i$ ä¸¤ä¸¤ä¸åŒã€‚\n\n<!-- more -->\n\n## é¢˜è§£\n\nè€ƒè™‘å¦‚æœ $a_i \\mid a_j$ï¼Œå°±ä» $i$ åˆ° $j$ è¿ä¸€æ¡è¾¹ï¼Œè¿™æ ·å½¢æˆçš„å›¾æ˜¯ä¸€ä¸ªååºé›†ã€‚ä¸å¦¨åªè€ƒè™‘ç¬¬ä¸€å±‚çš„ç‚¹ï¼Œç§°ä¸º $A$ ç±»ç‚¹ï¼Œå…¶ä½™çš„ç‚¹ç§°ä¸º $B$ ç±»ç‚¹ã€‚æ¯æ¬¡åˆ é™¤æ“ä½œå¯ä»¥è½¬åŒ–ä¸ºï¼Œæ‰¾åˆ°ä¸€ä¸ª $A$ ç±»ç‚¹ï¼Œå­˜åœ¨ $\\geq 2$ çš„å‡ºåº¦ï¼Œå°±å¯ä»¥åˆ æ‰å…¶ä¸­ä»»æ„ä¸€æ¡å‡ºè¾¹æŒ‡å‘çš„ç‚¹ã€‚\n\nå¯¹äºä»»æ„ä¸€ä¸ªç”± $A$ã€$B$ ç±»ç‚¹ç»„æˆçš„éå¹³å‡¡å¼±è”é€šå—ï¼Œä¸€å®šå­˜åœ¨ä¸€ç§åˆ é™¤æ–¹å¼ä½¿å¾—æ˜¯å‰©ä¸‹å…¶ä¸­çš„ $A$ ç±»ç‚¹å’ŒæŸä¸€ä¸ª $B$ ç±»ç‚¹ã€‚è¿™å°±æ˜¯åˆ é™¤æœ€å¤šæ•°çš„æ–¹æ¡ˆã€‚\n\né‚£ä¹ˆæ€ä¹ˆç»Ÿè®¡æ–¹æ¡ˆæ•°å‘¢ï¼Œæˆ‘ä»¬æšä¸¾æœ€åå‰©ä¸‹çš„ç‚¹ï¼Œç„¶åæŠŠåˆ é™¤æ“ä½œå€’è¿‡æ¥åšï¼Œå˜æˆåŠ å…¥æ“ä½œã€‚é‚£ä¹ˆæˆ‘ä»¬å¯ä»¥çŠ¶å‹ä¸€ä¸ªçŠ¶æ€ï¼Œæ˜¯ä¸€ä¸ª $A$ ç±»ç‚¹çš„é›†åˆï¼Œæ­¤æ—¶è¿™äº› $A$ ç±»ç‚¹æœ‰è‡³å°‘ $1$ çš„å‡ºåº¦ã€‚é‚£ä¹ˆæ¯æ¬¡è¢«åå‘ã€Œåˆ é™¤ã€å›æ¥çš„ç‚¹ä¸€å®šå’ŒçŠ¶æ€ä¸­çš„æŸä¸€ä¸ª $A$ ç±»ç‚¹æœ‰è¾¹ï¼Œä¸”ä¼šäº§ç”Ÿä¸¤ç§å½±å“ï¼Œå³ï¼šè¦ä¹ˆå¢åŠ åçŠ¶æ€ä¸å˜ï¼Œè¦ä¹ˆå¢åŠ åä½¿å¾—æ›´å¤šçš„ $A$ ç±»ç‚¹å˜æˆã€Œå¯ç”¨ã€ã€‚\n\næˆ‘ä»¬ä¸å¦¨åœ¨æ¯æ¬¡å¯¼è‡´ç¬¬äºŒç§å½±å“çš„æ—¶å€™ç»Ÿè®¡æ–¹æ¡ˆï¼Œå°±ä¸ä¼šç»Ÿè®¡é‡å¤ï¼Œè¿™æ ·çš„è¯å¯ä»¥å¾—åˆ°ä¸€ä¸ª $O(2^{r} n^2)$ çš„æš´åŠ› DPï¼Œå…¶ä¸­ $r$ æ˜¯ $A$ ç±»ç‚¹çš„ä¸ªæ•°ã€‚\n\nå¦‚æœæˆ‘ä»¬åˆ é™¤æ²¡æœ‰å‡ºåº¦çš„ç‚¹ï¼Œå®¹æ˜“è¯æ˜ $r \\leq 15$ï¼ˆ$[16,30] \\cup [46,60]$ï¼‰ï¼Œå¯ä»¥é€šè¿‡æœ¬é¢˜ã€‚å®é™…ä¸Šå¦‚æœç‰¹åˆ¤å‡ºåº¦ä¸º $1$ï¼Œèƒ½è®© $r$ åšåˆ°æ›´å°ã€‚\n\n## ä»£ç \n\n<!-- more -->\n\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\nconst int N = 65, mod = 1e9 + 7;\nint n, m, tot, sum, ans, in[N], out[N], anc[N], val[N], tag[N], fac[N], ifac[N], S[1 << 15], dp[N][1 << 15];\nlong long T[1 << 15];\nint find(int x) { return anc[x] == x ? x : anc[x] = find(anc[x]); }\ninline int C(int n, int m) { return n < m ? 0 : (long long)fac[n] * ifac[m] % mod * ifac[n - m] % mod; }\nint main() {\n#ifdef memset0\n  freopen(\"1.in\", \"r\", stdin);\n#endif\n  cin.tie(0)->sync_with_stdio(0);\n  fac[0] = ifac[0] = ifac[1] = 1;\n  for (int i = 2; i < N; i++) ifac[i] = (long long)(mod - mod / i) * ifac[mod % i] % mod;\n  for (int i = 1; i < N; i++) fac[i] = (long long)fac[i - 1] * i % mod, ifac[i] = (long long)ifac[i - 1] * ifac[i] % mod;\n  cin >> n;\n  for (int i = 1; i <= n; i++) cin >> val[i], tag[val[i]] = true;\n  m = *max_element(val + 1, val + n + 1);\n  for (int i = 1; i <= m; i++)\n    if (tag[i]) anc[i] = i;\n  for (int i = 1; i <= m; i++)\n    if (tag[i])\n      for (int j = (i << 1); j <= m; j += i)\n        if (tag[j]) {\n          out[i]++, in[j]++;\n          anc[find(i)] = find(j);\n        }\n  ans = 1;\n  for (int c = 1; c <= m; c++)\n    if (tag[c] && find(c) == c) {\n      vector<int> a, b;\n      vector<long long> A, B;\n      for (int i = 1; i <= m; i++)\n        if (tag[i] && find(i) == c) {\n          if (!in[i]) {\n            if (!out[i]) continue;\n            a.push_back(i);\n          } else {\n            b.push_back(i);\n          }\n        }\n      if (!b.size()) continue;\n      A.resize(a.size());\n      B.resize(b.size());\n      for (int i = 0; i < a.size(); i++)\n        for (int j = 0; j < b.size(); j++)\n          if (b[j] % a[i] == 0) {\n            A[i] |= 1ll << j;\n            B[j] |= 1ll << i;\n          }\n      for (int x = 0; x < (1 << a.size()); x++) {\n        long long s = 0, t = 0;\n        for (int i = 0; i < a.size(); i++)\n          if ((x >> i) & 1) t |= A[i];\n        for (int j = 0; j < b.size(); j++)\n          if (((t >> j) & 1) && (x & B[j]) == B[j]) s |= 1ll << j;\n        S[x] = __builtin_popcountll(s), T[x] = t;\n      }\n      sum = 0;\n      for (int i = 0; i < b.size(); i++) {\n        for (int i = 0; i <= b.size(); i++) memset(dp[i], 0, (1 << a.size()) << 2);\n        dp[1][B[i]] = fac[S[B[i]] - 1];\n        for (int x = B[i], y; x < (1 << a.size()); x++)\n          for (int t = 0; t < b.size(); t++)\n            if (((T[x] >> t) & 1) && (y = x | B[t]) != x)\n              for (int i = 1; i < b.size(); i++)\n                if (dp[i][x])\n                  for (int j = i + 1; j <= b.size(); j++) {\n                    dp[j][y] = (dp[j][y] + (long long)dp[i][x] * C(S[y] - j, S[y] - S[x] - 1) % mod * fac[S[y] - S[x] - 1]) % mod;\n                  }\n        for (int i = 0; i <= b.size(); i++) sum = (sum + dp[i][(1 << a.size()) - 1]) % mod;\n      }\n      tot += b.size() - 1;\n      ans = (long long)ans * sum % mod * C(tot, b.size() - 1) % mod;\n    }\n  cout << ans << endl;\n}\n```\n","publishedTitle":"ã€ŒCF1292Fã€Nora's Toy Boxes"}},{"id":"c5f74b69-54f4-576a-b82c-46ce4bc7c5af","fields":{"slug":"/oi/solution/cf1349f2/","plainText":"\n> å®šä¹‰ä¸€ä¸ªæ’åˆ— $p$ æ˜¯å¥½çš„å½“ä¸”ä»…å½“å¯¹äºæ¯ä¸ª $k < \\max\\{p\\}$ï¼Œå­˜åœ¨ $1 \\leq i < j \\leq n$ ä½¿å¾— $a_i = k-1$ ä¸” $a_j = k$ã€‚\n>\n> å®šä¹‰ $f_a(k)$ ä¸ºåºåˆ— $a$ ä¸­æ•°å€¼ $k$ çš„å‡ºç°æ¬¡æ•°ï¼Œå‡è®¾æ‰€æœ‰åˆæ³•åºåˆ—é›†åˆä¸º $S$ï¼Œå¯¹äºæ¯ä¸ª $k \\in [1;n]$ï¼Œæ±‚\n>\n> $$\n> \\left( \\sum_{a \\in S} f_a(k) \\right) \\bmod 998244353\n> $$\n>\n> $n \\leq 10^5$ã€‚\n\n<!-- more -->\n\n## é¢˜è§£\n\nè€ƒè™‘ç”±æ’åˆ— $p$ ç”Ÿæˆåºåˆ—ï¼Œåœ¨ $p_i$ å’Œ $p_{i+1}$ ä¹‹é—´å¡«å…¥å¤§äºæˆ–å°äºå·ï¼Œåˆ™ $a_{p_i}$ çš„å€¼ä¸º $p_{1...i}$ ä¸­çš„å°äºå·ä¸ªæ•° $+1$ï¼Œä¸éš¾éªŒè¯åˆæ³•åºåˆ—é›†åˆå’Œæ’åˆ—é›†åˆæ„æˆåŒå°„ã€‚\n\næ³¨æ„åˆ°è¿™æ˜¯ä¸ªæ¬§æ‹‰æ•°çš„å½¢å¼ï¼Œè€ƒè™‘å®¹æ–¥ç»´æŠ¤ï¼š\n\n$$\n\\newcommand{\\strling}[2]{\\left\\{\\begin{matrix}#1\\\\#2\\end{matrix}\\right\\}}\n\\begin{aligned}\nans_i\n&= \\sum_{m=0}^n \\frac {n!} {m!} \\sum_{j \\ge i} (m-j)! (-1)^{j-i}\\binom j i \\strling m {m-j} \\\\\n&= \\sum_{j \\ge i} n! (-1)^{j-i} \\binom j i \\sum_{m=j+1}^n \\strling m {m-j} \\frac {(m-j)!} {m!}\n\\end{aligned}\n$$\n\n> ç¬¬äºŒç±»æ–¯ç‰¹æ—æ•°çš„ç”Ÿæˆå‡½æ•°\n>\n> $$\\newcommand{\\strling}[2]{\\left\\{\\begin{matrix}#1\\\\#2\\end{matrix}\\right\\}} \\strling n k = n! [z^n] \\frac {(e^z-1)^k} {k!}$$\n\nè®¾ $h$ï¼Œå…ˆå¸¦ä¸Š $m=i$ çš„æƒ…å†µè®¡ç®—ï¼Œæœ€åå†ä»¤ $h_0$ å‡ $1$ã€‚\n\n$$\n\\newcommand{\\strling}[2]{\\left\\{\\begin{matrix}#1\\\\#2\\end{matrix}\\right\\}}\n\\begin{aligned}\nh_i\n&= \\sum_{m=i}^n \\strling m {m-i} \\frac{(m-i)!} {m!} \\\\\n&= \\sum_{m=i}^n [z^m] (e^z-1)^{m-i}\\\\\n&= \\sum_{j=0}^{n-i} [z^{j+i}] (e^z-1)^j \\\\\n&= [z^i] \\sum_{j=0}^{n-i} \\left( \\frac{e^z-1} {z} \\right)^j \\\\\n\\end{aligned}\n$$\n\nä»¤ $F(z) = (e^z-1)/z$ï¼Œæœ‰\n\n$$\n\\begin{aligned}\nh_i\n&= [z^i] \\sum_{j=0}^{n-i} F^j(z) \\\\\n&= [z^i] \\frac{F^{n-i+1}(z)-1} {F(z)-1} \\\\\n&= [z^i] \\left( \\frac{-1}{F(z)-1} + \\frac{F^{n-i+1}(z)}{F(z)-1} \\right) \\\\\n\\end{aligned}\n$$\n\nå‰åŠéƒ¨åˆ†å®¹æ˜“ç›´æ¥å¤šé¡¹å¼æ±‚é€†å¤„ç†ï¼Œç°åœ¨è€ƒè™‘ååŠéƒ¨åˆ†\n\n$$\n[z^i] \\frac{F^{n-i+1}(z)}{F(z)-1} = [z^{n+1}] \\frac{(z F(z))^{n-i+1}}{F(z)-1}\n$$\n\nï¼ˆå¼€å§‹åœ¨è¿™é‡Œå¡ä½äº†ï¼Œä¸æ±‚ç”šè§£çš„ä»é¢˜è§£é‚£é‡Œæ‹‰äº†ä¸ªå¼å­ï¼Œç¬¬äºŒå¤©å†·é™äº†ä¸€ä¸‹ï¼Œä¸ºäº†è¡Œæ–‡è¿è´¯ï¼ŒæŠŠè¡¥å……ç†è§£é™„åœ¨åé¢ï¼‰\n\nè®¾ $\\omega(z) = zF(z)$ï¼Œ$\\varphi(z)$ æ»¡è¶³ $\\dfrac{\\omega(z)}{\\varphi(\\omega(z))}=z$ï¼Œåˆ™ $\\dfrac{zF(z)}{\\varphi(\\omega(z))}=z$ï¼Œå³ $F=\\varphi(\\omega)$\n\n> æ‹“å±•æ‹‰æ ¼æœ—æ—¥åæ¼”\n>\n> $f,g,h$ æ˜¯ $F[[x]]$ ä¸Šçš„å¤šé¡¹å¼ï¼Œå·²çŸ¥ $f(g(x)) = g(f(x)) = x$ï¼Œåˆ™\n>\n> $$[x^n] h(f(x)) = \\frac 1 n [x^{n-1}] h'(x) \\left( \\frac {x} {g(x)} \\right)^n$$\n\nè€ƒè™‘\n\n$$\n\\begin{aligned}\nf(x) &= \\omega(x) \\\\\ng(x) &= \\frac x {\\varphi(x)} \\\\\nh(x) &= \\frac 1 {(1-\\varphi(x)) (1 - ux)} \\\\\n\\end{aligned}\n$$\n\nåˆ™\n\n$$\n\\begin{aligned}\n & [u^{n-i+1} z^{n+1}] \\frac 1 {1-\\varphi (\\omega(z))} \\frac 1 {1-uw(z)} \\\\\n=& [u^{n-i+1}] \\frac 1 {n+1} [z^n] \\left(\\left(\\frac 1 {1-\\varphi(z)} \\frac 1 {1-uz}\\right)'\\cdot \\varphi(z)^{n+1}\\right) \\\\\n\\end{aligned}\n$$\n\n> $\\displaystyle \\frac 1 {(1-x)^k} = \\sum_{i=0}^{\\infty} \\binom {i+k-1} {k-1} x^i$\n>\n> ç›´æ¥è€ƒè™‘ç³»æ•°ç»„åˆæ„ä¹‰å°±å¯ä»¥è¯æ˜ã€‚\n\nå…¶ä¸­\n\n$$\n\\begin{aligned}\n & \\left(\\frac 1 {1-\\varphi(z)} \\frac 1 {1-uz}\\right)' \\\\\n=& \\frac {\\varphi'(z)} {(1-uz) (1-\\varphi(z))^2} + \\frac {u} {(1-\\varphi(z))(1-uz)^2} \\\\\n=& \\frac {\\varphi'(z)} {(1-\\varphi(z))^2} \\sum_{i=0}^\\infty u^i z^i + \\frac {1} {1 - \\varphi(z)} \\sum_{i=0}^\\infty (i+1) u^{i+1} z^i \\\\\n\\end{aligned}\n$$\n\nä»£å…¥åˆ°åŸå¼ä¸­æœ‰\n\n$$\n\\begin{aligned}\n & \\frac {[z^n] \\varphi^{n+1}(z)} {n+1} \\left( \\frac {z^{n-i+1} \\varphi'(z)} {(1-\\varphi(z))^2} + \\frac {(n-i+1) z^{n-i}} {1 - \\varphi(z)} \\right) \\\\\n=& [z^{i-1}] \\frac {\\varphi^{n+1}(z) \\varphi'(z)} {(n+1) (1-\\varphi(z))^2} + [z^i] \\frac {\\varphi^{n+1}(z) (n-i+1)} {(n+1) (1-\\varphi(z))} \\\\\n\\end{aligned}\n$$\n\nå”¯ä¸€çš„é—®é¢˜å°±æ˜¯ $\\varphi(x)$ æ€ä¹ˆæ±‚äº†ï¼Œæ³¨æ„åˆ° $\\omega(x) = e^x-1$ï¼Œæ„é€ å¾— $\\dfrac z {\\ln (1+z)}$ã€‚\n\n## å‘ç‚¹\n\n1. $\\varphi(z) = \\dfrac {z} {\\ln(1+z)}$ï¼Œæ³¨æ„åˆ° $\\ln(1+z)$ çš„å¸¸æ•°é¡¹æ˜¯ $0$ï¼Œä¸èƒ½ç›´æ¥æ±‚é€†ï¼›\n2. $1-\\varphi(z)$ å¸¸æ•°é¡¹ä¹Ÿæ˜¯ $0$ï¼ŒåŒæ ·ä¸èƒ½ç›´æ¥æ±‚é€†ï¼Œåªèƒ½æ±‚å‡º $(1-\\varphi(z))/z$ï¼Œä¸Šé¢çš„å¼å­å¤§æ¦‚å˜æˆ\n   $$\n    [z^{i+1}] \\frac {\\varphi^{n+1}(z) \\varphi'(z)} {(n+1) ((1-\\varphi(z))/z)^2} + [z^{i+1}] \\frac {\\varphi^{n+1}(z) (n-i+1)} {(n+1) ((1-\\varphi(z)/z))}\n   $$\n3. ä¸Šé¢ä¸¤ç§æƒ…å†µçš„å¤„ç†å¯èƒ½å¸¦æ¥æ›´å¤šçš„å¤šé¡¹å¼é•¿åº¦è¦æ±‚ã€‚\n4. $h_0$ å‡ $1$ã€‚\n\n## è¡¥å……\n\nç°åœ¨æˆ‘ä»¬éœ€è¦å¯¹ $i \\in [0;n]$ï¼Œæ±‚å‡º\n\n$$\n[z^{n+1}] \\frac{(z F(z))^{n-i+1}}{F(z)-1}\n$$\n\nè€ƒè™‘ç”¨äºŒå…ƒç”Ÿæˆå‡½æ•°è¡¨ç¤º\n\n$$\n\\begin{aligned}\n & [z^{n+1} u^{n-i+1}] \\frac 1 {F(z)-1} \\sum_{k=0}^\\infty (z u F(z))^{k} \\\\\n=& [z^{n+1} u^{n-i+1}] \\frac 1 {(F(z)-1) (1-zuF(z))} \\\\\n\\end{aligned}\n$$\n\nå¦‚æœç›´æ¥å¯¹ç€è¿™ä¸ªå¼å­åšï¼Œæ˜¯æ²¡æœ‰åŠæ³•æ‹‰æ ¼æœ—æ—¥åæ¼”çš„ï¼Œå› ä¸ºæœ¬è´¨ä¸Šæˆ‘ä»¬æœ‰ä¸¤ä¸ªå…³äº $z$ çš„å¤šé¡¹å¼ï¼š$F(z)$ å’Œ $zF(z)$ã€‚æˆ‘ä»¬è®¾æ³•æ„é€ ä¸€ä¸ªå…³äº $F$ çš„å¤šé¡¹å¼ä½¿å…¶æ»¡è¶³ $\\varphi(F(z)) = z F(z)$ã€‚\n\nå½¢å¼åŒ–çš„ï¼Œæˆ‘ä»¬æƒ³è¦æ„é€ å¤šé¡¹å¼ $\\varphi(z)$ ä½¿å¾—\n\n$$\n\\varphi(F(z)) = z F(z)\n$$\n\nåŒæ—¶ï¼Œç”±è¯¥å¼æˆ‘ä»¬ä¹Ÿå¯ä»¥ç›´æ¥å¾—åˆ° $F$ çš„å¤åˆé€†å½¢å¼ï¼š\n\n$$\n\\frac {\\varphi(F(z))} {F(z)} = z\n$$\n\nè¯´å›åˆ° $\\varphi(x)$ çš„æ„é€ ï¼Œæˆ‘ä»¬åªèƒ½åˆ©ç”¨ $F(z)$ æœ¬èº«çš„æ€§è´¨è®¾æ³•æ„é€ å‡º $z$ï¼šæˆ‘ä»¬æœ‰\n\n$$\nF(z) = \\frac {e^{z} - 1} {z}\n$$\n\nç›¸å½“äºæœ‰\n\n$$\n\\ln(1 + zF(z)) = z\n$$\n\nä¸å¹¸çš„æ˜¯ï¼Œè¿™ä¸ªå¼å­æœ¬èº«è¿˜å’Œ $z$ æœ‰å…³ï¼Œä½†å¯å‘æˆ‘ä»¬æ”¹å˜æ–¹å‘ï¼Œè®¾ $\\omega(z) = z F(z)$ï¼Œæ„é€ å¤šé¡¹å¼ $\\varphi(z)$ ä½¿å¾—\n\n$$\n\\begin{cases}\n\\omega(z) = z F(z) \\\\\n\\varphi(\\omega(z)) = F(z) \\\\\n\\end{cases}\n$$\n\næœ‰ $\\varphi(z) = \\dfrac {z} {\\ln(1 + z)}$ï¼Œ$\\dfrac {\\omega(z)} {\\varphi(\\omega(z))} = z$ã€‚å³æŠŠåŸå¼è½¬åŒ–ä¸ºäº†ï¼š\n\n$$\n\\frac 1 {(1 - u \\omega(z)) \\left(\\dfrac {\\omega(z)} {\\ln(1 + \\omega(z))}-1\\right)}\n$$\n\n## ä»£ç \n\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\nconst int N = 1e5 + 9, mod = 998244353;\nstruct z {\n  int x;\n  z(int x = 0) : x(x) {}\n  friend inline z operator*(z a, z b) { return (long long)a.x * b.x % mod; }\n  friend inline z operator-(z a, z b) { return (a.x -= b.x) < 0 ? a.x + mod : a.x; }\n  friend inline z operator+(z a, z b) { return (a.x += b.x) >= mod ? a.x - mod : a.x; }\n} h[N], ans[N], inv[N], fac[N], ifac[N];\ninline z fpow(z a, int b) {\n  z s = 1;\n  for (; b; b >>= 1, a = a * a)\n    if (b & 1) s = s * a;\n  return s;\n}\nint len = 1, rev[N << 2];\nz w[N << 2];\nstruct vec : vector<z> {\n  using vector<z>::vector;\n  inline vec divx() {\n    vec res = *this;\n    return res.erase(res.begin()), res;\n  }\n  inline vec setl(size_t len) {\n    vec res = *this;\n    return res.resize(len), res;\n  }\n  inline vec fun1() {\n    vec res(this->begin() + 1, this->end());\n    for (int i = 0; i < res.size(); i++) res[i].x = mod - res[i].x;\n    return res;\n  }\n};\nint init(int n) {\n  int lim = 1, k = 0;\n  while (lim < n) lim <<= 1, ++k;\n  for (int i = 0; i < lim; i++) rev[i] = (rev[i >> 1] >> 1) | ((i & 1) << (k - 1));\n  for (; len < lim; len <<= 1) {\n    z wn = fpow(3, (mod - 1) / (len << 1));\n    w[len] = 1;\n    for (int i = 1; i < len; i++) w[i + len] = w[i + len - 1] * wn;\n  }\n  return lim;\n}\nvoid dft(vec &a, int lim) {\n  a.resize(lim);\n  for (int i = 0; i < lim; i++)\n    if (i < rev[i]) swap(a[i], a[rev[i]]);\n  for (int i = 0; i < lim; i += 2) {\n    z x = a[i], y = a[i + 1] * w[1];\n    a[i] = x + y, a[i + 1] = x - y;\n  }\n  for (int len = 2; len < lim; len <<= 1)\n    for (int i = 0; i < lim; i += (len << 1))\n      for (int j = 0; j < len; j++) {\n        z x = a[i + j], y = a[i + j + len] * w[j + len];\n        a[i + j] = x + y, a[i + j + len] = x - y;\n      }\n}\nvoid idft(vec &a, int lim) {\n  z inv = fpow(lim, mod - 2);\n  dft(a, lim), reverse(&a[1], &a[lim]);\n  for (int i = 0; i < lim; i++) a[i] = a[i] * inv;\n}\nvec operator+(vec a, const vec &b) {\n  a.resize(max(a.size(), b.size()));\n  for (int i = 0; i < b.size(); i++) a[i] = a[i] + b[i];\n  return a;\n}\nvec operator-(vec a, const vec &b) {\n  a.resize(max(a.size(), b.size()));\n  for (int i = 0; i < b.size(); i++) a[i] = a[i] - b[i];\n  return a;\n}\nvec operator*(vec a, vec b) {\n  if (a.size() < 20 || b.size() < 20 || (uint64_t)a.size() + b.size() < 400) {\n    vec c(a.size() + b.size() - 1);\n    for (int i = 0; i < a.size(); i++)\n      for (int j = 0; j < b.size(); j++) c[i + j] = c[i + j] + a[i] * b[j];\n    return c;\n  }\n  int len = a.size() + b.size() - 1, lim = init(len);\n  dft(a, lim), dft(b, lim);\n  for (int i = 0; i < lim; i++) a[i] = a[i] * b[i];\n  return idft(a, lim), a.resize(len), a;\n}\nvec inve(const vec &f, int len = -1) {\n  if ((len = ~len ? len : f.size()) == 1) return vec{fpow(f[0], mod - 2)};\n  vec a = inve(f, (len + 1) >> 1), b(&f[0], &f[len]);\n  int lim = init((len << 1) - 1);\n  dft(a, lim), dft(b, lim);\n  for (int i = 0; i < lim; i++) a[i] = a[i] * (2 - a[i] * b[i]);\n  return idft(a, lim), a.resize(len), a;\n}\nvec inte(vec a) {\n  for (int i = a.size() - 1; i; i--) a[i] = a[i - 1] * ::inv[i];\n  return *a.begin() = 0, a;\n}\nvec deri(vec a) {\n  for (int i = 0; i < a.size() - 1; i++) a[i] = a[i + 1] * (i + 1);\n  return *a.rbegin() = 0, a;\n}\nvec ln(const vec &f) { return inte((deri(f) * inve(f)).setl(f.size())); }\nvec exp(const vec &f, int len = -1) {\n  if ((len = ~len ? len : f.size()) == 1) return vec{1};\n  vec a = exp(f, (len + 1) >> 1), b = a;\n  b.resize(len), b = ln(b);\n  for (int i = 0; i < len; i++) b[i] = 0 - b[i];\n  b[0] = b[0] + 1;\n  for (int i = 0; i < len; i++) b[i] = b[i] + f[i];\n  return (a * b).setl(len);\n}\nvec pow(vec a, int b) {\n  a = ln(a);\n  for (int i = 0; i < a.size(); i++) a[i] = a[i] * b;\n  return exp(a);\n}\nint main() {\n#ifdef memset0\n  freopen(\"1.in\", \"r\", stdin);\n#endif\n  cin.tie(0)->sync_with_stdio(0);\n  fac[0] = ifac[0] = inv[0] = inv[1] = 1;\n  for (int i = 2; i < N; i++) inv[i] = (mod - mod / i) * inv[mod % i];\n  for (int i = 1; i < N; i++) fac[i] = fac[i - 1] * i, ifac[i] = ifac[i - 1] * inv[i];\n  int n, len;\n  cin >> n, len = n + 5;\n  vec Finv = inve(vec(ifac + 1, ifac + len + 1).fun1());\n  for (int i = 0; i <= n; i++) h[i] = Finv[i + 1];\n  h[0] = h[0] - 1;\n  vec P(len);\n  for (int i = 0; i < len; i++) P[i] = (i & 1 ? mod - 1 : 1) * inv[i + 1];\n  P = inve(P);\n  vec Ppow = pow(P, n + 1);\n  vec Pinv = inve(P.fun1());\n  vec lpart = (Ppow * Pinv).setl(len);\n  vec rpart = ((deri(P) * Pinv).setl(len) * lpart).setl(len);\n  z tmp = fpow(n + 1, mod - 2);\n  for (int i = 0; i <= n; i++) h[i] = h[i] - tmp * (lpart[i + 1] * (n - i + 1) + rpart[i + 1]);\n  vec f(n + 1), g(n + 1);\n  for (int i = 0; i <= n; i++) f[i] = ((n - i) & 1 ? mod - 1 : 1) * ifac[n - i];\n  for (int i = 0; i <= n; i++) g[i] = fac[i] * h[i];\n  f = f * g;\n  for (int i = 0; i < n; i++) ans[i] = f[i + n] * fac[n] * ifac[i];\n  for (int i = 0; i < n; i++) cout << ans[i].x << \" \\n\"[i + 1 == n];\n}\n```\n","publishedTitle":"ã€ŒCF1349F2ã€Slime and Sequences (Hard Version)"}},{"id":"e0cf573a-04e5-59ba-81a9-8c06bd8ead45","fields":{"slug":"/oi/solution/cometoj-round2-f/","plainText":"\n> æœ‰ $n$ ç§æ“ä½œï¼Œç¬¬ $i$ ç§æ“ä½œä½¿ç”¨åæœ‰ $p_i$ çš„æ¦‚ç‡å‡çº§ï¼Œ$(1-p_i)$ çš„æ¦‚ç‡ä¸å‡çº§ã€‚\n>\n> è¿›è¡Œè‹¥å¹²æ¬¡æ“ä½œåï¼Œå¦‚æœä¸»äººå…¬çš„ç­‰çº§ä¸º $i$ï¼Œå°±èƒ½äº§ç”Ÿ $a_i$ çš„è´¡çŒ®ã€‚\n>\n> å¯¹äºæ¯ä¸ª $i \\in [1;n]$ æ±‚å‡ºï¼Œä½¿ç”¨ $j \\neq i$ çš„æ‰€æœ‰æ“ä½œ $j$ï¼Œä¸»äººå…¬äº§ç”Ÿç­‰çº§è´¡çŒ®çš„æœŸæœ›ã€‚\n>\n> $n \\leq 10^5$ã€‚\n\n<!-- more -->\n\n## é¢˜è§£\n\nè®¾ $C_i(x) = (1 - p_i + p_i x)$ï¼Œ$C(x) = \\prod_{i=0}^{n-1} C_i(x)$\n\n$$\nans_m = \\sum_{i=0}^{n-1} a_i [x^i] \\prod_{j \\neq m} C_j(x)\n$$\n\nè¿™æ˜¯ä¸€ä¸ªçº¿æ€§ç®—æ³•ï¼Œå…¶è½¬ç§»çŸ©é˜µä¸º $D_{m,i} = [x^i] \\prod_{j \\neq m} C_j(x)$\n\nè€ƒè™‘å…¶è½¬ç½® $D^T_{m,i} = [x^m] \\prod_{j \\neq i} C_j(x)$\n\næˆ‘ä»¬æœ‰åšæ³•\n\n$$\nans_m = \\prod_{i=0}^{n-1} a_i [x^m] \\prod_{j \\neq i} C_j(x)\n$$\n\n$$\nANS(x) = \\prod_{i=0}^n a_i \\prod_{j \\neq i} C_j(x)\n$$\n\næœ‰ç±»ä¼¼ $k$ æ¬¡å¹‚å’Œçš„ $O(n \\log^2 n)$ åšæ³•ï¼Œå¯ä»¥æ”¹å†™æˆå…¶è½¬ç½®ã€‚\n\nå…·ä½“çš„ï¼Œæˆ‘ä»¬ä»¤ $A(x) = \\sum_{i \\ge 0} a_i x^i$ï¼Œä¸ºçº¿æ®µæ ‘æ ¹èŠ‚ç‚¹ï¼Œ$\\operatorname{mul}^T$ åˆ°å¶å­èŠ‚ç‚¹å³å¯ã€‚\n\nä¸€èˆ¬åšæ³•å¯ä»¥å‚è§ zsy åšå®¢ï¼šhttps://www.cnblogs.com/zhoushuyu/p/10777808.html\n\nå¤§æ¦‚æ˜¯åˆ©ç”¨å¤šé¡¹å¼ç‚¹ä¹˜çš„æ€§è´¨æŠŠè´¡çŒ®æ‹†å¼€ç„¶åå¤šç‚¹æ±‚å€¼ï¼ˆ\n\n## ä»£ç \n\n```cpp\n#include <bits/stdc++.h>\ntemplate <class T> inline void read(T &x) {\n  x = 0;\n  register char c = getchar();\n  register bool f = 0;\n  while (!isdigit(c)) f ^= c == '-', c = getchar();\n  while (isdigit(c)) x = x * 10 + c - '0', c = getchar();\n  if (f) x = -x;\n}\ntemplate <class T> inline void print(T x) {\n  if (x < 0) putchar('-'), x = -x;\n  if (x > 9) print(x / 10);\n  putchar(x % 10 + '0');\n}\ntemplate <class T> inline void print(T x, char c) { print(x), putchar(c); }\nconst int N = 1e5 + 10, mod = 998244353;\nint n, m;\nstruct z {\n  int x;\n  z(int x = 0) : x(x) {}\n  friend inline z operator*(z a, z b) { return (long long)a.x * b.x % mod; }\n  friend inline z operator-(z a, z b) { return (a.x -= b.x) < 0 ? a.x + mod : a.x; }\n  friend inline z operator+(z a, z b) { return (a.x += b.x) >= mod ? a.x - mod : a.x; }\n} a[N], p[N], ans[N], fac[N], ifac[N], inv[N];\ninline z fpow(z a, int b) {\n  z s = 1;\n  for (; b; b >>= 1, a = a * a)\n    if (b & 1) s = s * a;\n  return s;\n}\nvoid init(int n) {\n  n += 5, inv[0] = inv[1] = fac[0] = ifac[0] = 1;\n  for (int i = 2; i < n; i++) inv[i] = (mod - mod / i) * inv[mod % i];\n  for (int i = 1; i < n; i++) fac[i] = fac[i - 1] * i, ifac[i] = ifac[i - 1] * inv[i];\n}\nnamespace poly { // polynomial\nint len = 1, rev[N << 2];\nz w[N << 2];\nstruct vec : std::vector<z> {\n  using std::vector<z>::vector;\n  inline void input(int n) {\n    resize(n);\n    for (int i = 0; i < n; i++) read(this->operator[](i).x);\n  }\n  inline void output() {\n    for (int i = 0; i < size(); i++) print(this->operator[](i).x, \" \\n\"[i + 1 == size()]);\n  }\n};\nint init(int n) {\n  int lim = 1, k = 0;\n  while (lim < n) lim <<= 1, ++k;\n  for (int i = 0; i < lim; i++) rev[i] = (rev[i >> 1] >> 1) | ((i & 1) << (k - 1));\n  for (; len < lim; len <<= 1) {\n    z wn = fpow(3, (mod - 1) / (len << 1));\n    w[len] = 1;\n    for (int i = 1; i < len; i++) w[i + len] = w[i + len - 1] * wn;\n  }\n  return lim;\n}\nvoid dft(vec &a, int lim) {\n  a.resize(lim);\n  for (int i = 0; i < lim; i++)\n    if (i < rev[i]) std::swap(a[i], a[rev[i]]);\n  for (int len = 1; len < lim; len <<= 1)\n    for (int i = 0; i < lim; i += (len << 1))\n      for (int j = 0; j < len; j++) {\n        z x = a[i + j], y = a[i + j + len] * w[j + len];\n        a[i + j] = x + y, a[i + j + len] = x - y;\n      }\n}\nvoid idft(vec &a, int lim) {\n  dft(a, lim), std::reverse(&a[1], &a[lim]);\n  z inv = fpow(lim, mod - 2);\n  for (int i = 0; i < lim; i++) a[i] = a[i] * inv;\n}\ninline vec mul(vec a, vec b, int l = -1) {\n  int len = ~l ? l : a.size() + b.size() - 1, lim = init(a.size() + b.size() - 1);\n  dft(a, lim), dft(b, lim);\n  for (int i = 0; i < lim; i++) a[i] = a[i] * b[i];\n  return idft(a, lim), a.resize(len), a;\n}\nnamespace extra {\nusing namespace poly;\nvec mulT(vec a, vec b) {\n  int al = a.size(), bl = b.size(), lim = init(al);\n  dft(a, lim), std::reverse(b.begin(), b.end()), dft(b, lim);\n  for (int i = 0; i < lim; i++) a[i] = a[i] * b[i];\n  return idft(a, lim), vec(&a[bl - 1], &a[al]);\n}\n} // namespace extra\n} // namespace poly\npoly::vec F[N << 2], G[N << 2];\nvoid dfs1(int u, int l, int r) {\n  if (l == r) {\n    F[u] = {1 - p[l], p[l]};\n    return;\n  }\n  dfs1(u << 1, l, (l + r) >> 1), dfs1(u << 1 | 1, ((l + r) >> 1) + 1, r);\n  F[u] = poly::mul(F[u << 1], F[u << 1 | 1]);\n}\nvoid dfs2(int u, int l, int r) {\n  if (l == r) {\n    ans[l] = G[u][0];\n    return;\n  }\n  G[u << 1] = poly::extra::mulT(G[u], F[u << 1 | 1]);\n  G[u << 1 | 1] = poly::extra::mulT(G[u], F[u << 1]);\n  dfs2(u << 1, l, (l + r) >> 1), dfs2(u << 1 | 1, ((l + r) >> 1) + 1, r);\n}\nint main() {\n#ifdef memset0\n  freopen(\"1.in\", \"r\", stdin);\n#endif\n  read(n);\n  for (int i = 0; i < n; i++) read((int &)a[i]);\n  for (int i = 0, x, y; i < n; i++) read(x), read(y), p[i] = x * fpow(y, mod - 2);\n  dfs1(1, 0, n - 1), G[1] = poly::vec(a, a + n), dfs2(1, 0, n - 1);\n  for (int i = 0; i < n; i++) print(ans[i].x, \" \\n\"[i == n]);\n}\n```\n","publishedTitle":"ã€ŒCometOJ Round #2 Fã€çœŸå®æ— å¦„å¥¹ä»¬çš„äººç”Ÿä¹‹è·¯"}},{"id":"f5617264-33aa-538c-8934-82f4aa12c0e0","fields":{"slug":"/oi/solution/cometoj-round7-f/","plainText":"\n> ç»´æŠ¤åºåˆ— $a_{1\\ldots n}$ï¼Œæ”¯æŒä»¥ä¸‹æ“ä½œ $m$ æ¬¡ï¼š\n>\n> 1. ç»™ $x,y$ï¼Œå°† $x$ ä½ç½®çš„å€¼ä¿®æ”¹ä¸º $y$ï¼›\n> 2. ç»™ $l,r,x$ï¼ŒæŸ¥è¯¢åŒºé—´$[l,r]$ä¸­æœ‰å¤šå°‘å­åŒºé—´çš„æœ€å¤§å€¼å°äºæˆ–ç­‰äº $x$ã€‚\n>\n> $n,m \\leq 3 \\times 10^5$ã€‚\n\n<!-- more -->\n\n## é¢˜è§£\n\nå¯¹äºè¯¢é—® $\\{l,r,x\\}$ï¼Œç›¸å½“äºè½¬åŒ–ä¸ºè¿™æ ·ä¸€ä¸ªé—®é¢˜ï¼š\n\nåºåˆ— $b$ æ»¡è¶³ $b_i = [a_i \\leq x]$ï¼Œç„¶åè¯¢é—® $b$ çš„åŒºé—´ $[l,r]$ å†…ï¼Œæœ‰å¤šå°‘å­åŒºé—´çš„å‡ä¸º $1$ã€‚\n\nè€ƒè™‘ä¸€ä¸ªåˆ†å—ï¼Œç»´æŠ¤å—å†…å¤–çš„ä¿¡æ¯æ˜¯å¹³å‡¡çš„ï¼Œç“¶é¢ˆåœ¨äºå¦‚ä½•ä¼˜åŒ–ç¦»æ•£åŒ–çš„å¤æ‚åº¦ã€‚\n\nç„¶åæ­¤å¤„ç”¨åˆ°ä¸€ä¸ªå«åˆ†æ•£å±‚å çš„ trickï¼Œå¼€ä¸€ä¸ªæ¯ä¸€ä¸ªå—ä½œä¸ºå¶å­èŠ‚ç‚¹çš„çº¿æ®µæ ‘ï¼Œå¶å­èŠ‚ç‚¹ç»´æŠ¤æ¯ä¸ªæ•°çš„æƒå€¼åŠæ’åï¼Œ\n\nè€ƒè™‘ `maintain` æ“ä½œï¼Œæ¯æ¬¡åªä¿ç•™ä¸‹æ ‡æ˜¯ $3$ çš„å€æ•°çš„ä½ç½®ã€‚\n\n- å¯¹äºä¿®æ”¹æ“ä½œï¼Œæš´åŠ› `maintain` ä¸Šå»ï¼Œæ—¶é—´å¤æ‚åº¦ $O(\\sqrt n + \\frac 2 3 \\sqrt n + \\frac 4 9 \\sqrt n + \\cdots) = O(\\sqrt n)$ã€‚\n- å¯¹äºæŸ¥è¯¢æ“ä½œï¼ŒDFS éå†æ•´æ£µæ ‘ï¼Œé€’å½’åˆ°ä¸‹ä¸€å±‚çš„æ—¶å€™æŒ‡é’ˆåªä¼šå³ç§»è‡³å¤š $2$ æ¬¡ï¼Œæ˜¯å¸¸æ•°çº§åˆ«çš„ï¼Œæ•…æ—¶é—´å¤æ‚åº¦ä¸ºæ€»èŠ‚ç‚¹æ•°ï¼Œå³ $O(\\sqrt n)$ã€‚\n\n## å¡å¸¸\n\nå®ç°ä¸Šç”±äºåˆ†æ•£å±‚å çš„å¸¸æ•°æœ‰ç‚¹å¤§ï¼Œæˆ‘ä»¬éœ€è¦ä¸€äº›å¡å¸¸çš„å°æŠ€å·§ã€‚\n\n1. å†…å­˜è¿ç»­ï¼Œè€Œä¸”æ³¨æ„åˆ°ç›´æ¥å¼€çš„è¯å†…å­˜ç©ºä½™ä¼šå¾ˆå¤§ï¼Œå¯ä»¥æ‰‹åŠ¨åˆ†é…å†…å­˜ã€‚\n2. å…³äºå¾€åæ‰«å››æ¬¡çš„è¿™ä¸ªæ“ä½œï¼Œå¯ä»¥å†™æˆè¿™æ · `k+=arr[k+2]<=x?2:0,k+=arr[k+1]<=x`ï¼Œç„¶ååœ¨ `arr` é‡Œå¤šä¸¢ä¸¤ä¸ª $+\\infty$ã€‚è¿™æ ·å¯ä»¥å°‘å¾ˆå¤šåˆ†æ”¯æ¡ä»¶ã€‚\n\n## ä»£ç \n\n### äºŒåˆ†æŸ¥æ‰¾ç‰ˆæœ¬\n\næ—¶é—´å¤æ‚åº¦ï¼š$O(n \\sqrt {n\\log n})$\n\n```cpp\n#include<bits/stdc++.h>\n\nnamespace mem{ //v2.1.2 => size: 14.19KiB\n  #define MEM_IO\n  #define MEM_MATH\n  #define MEM_UTILS\n  #define MEM_MODINT\n  #define MEM_RANDOM\n  #define MEM_STDVAL\n  #define MEM_LOGGER\n  #define MEM_CONTAINER\n  #ifdef memset0\n  #else\n    #define MEM_FASTIO\n  #endif\n\n  #ifdef __SIZEOF_INT128__\n    #define MEM_INT128\n  #endif\n\n  #define __integer_mapper(func)       \\\n        func(int)                      \\\n        func(unsigned int)             \\\n        func(long long int)            \\\n        func(unsigned long long int)\n  #define __float_mapper(func)         \\\n        func(float)                    \\\n        func(double)                   \\\n        func(long double)\n\n    namespace stdval{\n  #ifdef MEM_STDVAL\n      using i32=int;\n      using i64=long long int;\n      using u32=unsigned int;\n      using u64=unsigned long long int;\n      using f32=float;\n      using f64=double;\n      using f96=long double;\n    #ifdef MEM_INT128\n      using i128=__int128_t;\n      using u128=__uint128_t;\n    #endif\n  #endif\n    }\n\n    namespace utils{\n  #ifdef MEM_UTILS\n      using std::cin;\n      using std::tie;\n      using std::cout;\n      using std::cerr;\n      using std::endl;\n      using std::swap;\n      using std::sort;\n      using std::unique;\n      using std::reverse;\n      using std::shuffle;\n      using std::function;\n      using std::make_pair;\n      using std::make_tuple;\n      using std::accumulate;\n      using std::lower_bound;\n      using std::upper_bound;\n      using std::max_element;\n      using std::min_element;\n  #endif\n    }\n\n    namespace random{\n  #ifdef MEM_RANDOM\n      const int LuckyNumber=20040726; // Kanbe Kotori's Birthday\n      std::mt19937 rng(LuckyNumber^std::chrono::steady_clock::now().time_since_epoch().count());\n      std::mt19937_64 rng64(LuckyNumber^std::chrono::steady_clock::now().time_since_epoch().count());\n\n      template<class T> inline T rand(T l,T r){return std::uniform_int_distribution<T>(l,r)(rng);}\n      template<class T> inline T rand64(T l,T r){return std::uniform_int_distribution<T>(l,r)(rng);}\n  #endif\n    }\n\n    namespace modint{\n  #ifdef MEM_MODINT\n      template<const int mod> struct Z{\n        int x;\n        inline Z(){x=0;}\n        inline Z(int t){x=t;}\n\n        inline void operator-=(Z a){(x-=a.x)<0&&(x+=mod);}\n        inline void operator+=(Z a){(x+=a.x)>=mod&&(x-=mod);}\n        inline void operator*=(Z a){x=(long long)x*a.x%mod;}\n\n        friend inline Z operator*(Z a,Z b){return (long long)a.x*b.x%mod;}\n        friend inline Z operator-(Z a,Z b){return ((a.x-=b.x)<0&&(a.x+=mod)),a;}\n        friend inline Z operator+(Z a,Z b){return ((a.x+=b.x)>=mod&&(a.x-=mod)),a;}\n      };\n\n      template<const int mod> inline Z<mod> finv(Z<mod> x){\n        if(x.x<2)return x;\n        return (mod-mod/x.x)*finv(mod%x.x);\n      }\n      template<const int mod> inline Z<mod> fpow(Z<mod> a,int b){\n        Z <mod> s=1;\n        for(;b;b>>=1,a=a*a)\n          if(b&1)s=s*a;\n        return s;\n      }\n\n      template<const int mod> inline void init_inverse(int n,Z<mod> *inv){\n        inv[0]=inv[1]=1;\n        for(int i=2;i<n;i++)inv[i]=(mod-mod/i)*inv[mod%i];\n      }\n      template<const int mod> inline void init_factorial(int n,Z<mod> *fac,Z<mod> *ifac){\n        fac[0]=1,init_inverse(n,ifac);\n        for(int i=1;i<n;i++)fac[i]=fac[i-1]*i,ifac[i]=ifac[i-1]*ifac[i];\n      }\n    }\n\n    namespace io{\n      template<const int mod> inline void read(modint::Z<mod> &x){read(x.x);}\n      template<const int mod> inline void print(modint::Z<mod> x){print(x.x);}\n  #endif\n    }\n\n    namespace math{\n  #ifdef MEM_MATH\n      using std::max;\n      using std::min;\n      template<class T> inline T abs(T x){return x<0?-x:x;}\n      template<class T> inline T gcd(T n,T m){return m?gcd(m,n%m):n;}\n      template<class T> inline T lcm(T n,T m){return n/gcd(n,m)*m;}\n\n      template<const stdval::u64 p> struct FastDiv{\n        stdval::u64 t,i;\n        inline FastDiv():t(stdval::u64(-1)/p),i(mul_inv(p)){}\n\n        inline bool divide(stdval::u64 n){return n*i<=t;}\n        inline bool divide(stdval::i64 n){return stdval::u64(n<0?-n:n)*i<=t;}\n        inline stdval::u64 mul_inv(stdval::u64 n){\n          stdval::u64 x=n;\n          for(int i=0;i<5;++i)x*=2-n*x;\n          return x;\n        }\n      };\n\n    #ifdef MEM_INT128\n      template<const stdval::u64 b> struct FastMod{\n        stdval::u64 m;\n        inline FastMod():m(stdval::u64((stdval::u128(1)<<64)/b)){}\n\n        inline stdval::u64 reduce(stdval::u64 a){\n          stdval::u64 q=(stdval::u64)((stdval::u128(m)*a)>>64);\n          stdval::u64 r=a-q*b;\n          return r>=b?r-b:r;\n        }\n      };\n    #endif\n  #endif\n    }\n\n    namespace container{\n  #ifdef MEM_CONTAINER\n      using std::pair;\n      using std::tuple;\n      using std::set;\n      using std::unordered_set;\n      using std::map;\n      using std::unordered_map;\n\n      using std::tie;\n      using std::make_pair;\n      using std::make_tuple;\n\n      template<class T> struct vector:std::vector<T>{\n        using std::vector<T>::vector;\n        vector():std::vector<T>(){}\n        vector(const std::vector<T> &plain):std::vector<T>(plain){}\n\n        inline void sort(){std::sort(this->begin(),this->end());}\n        inline void concat(const vector &rhs){this->insert(this->end(),rhs.begin(),rhs.end());}\n        inline bool includes(const T &x) const{return std::find(this->begin(),this->end(),x)!=this->end();}\n        template<class Function> inline void forEach(Function func){for(const auto &it:*this)func(it);}\n\n        inline vector slice(int l,int r) const{\n          if(l>r)return {};\n          if(r<this->size())return vector(this->begin()+l,this->begin()+r);\n          vector<int> rsp=(this->begin()+l,this->end());\n          return rsp.resize(r-l),rsp;\n        }\n\n        inline void from(const std::set<T> &src){\n          this->resize(src.size());\n          auto it=this->begin();\n          for(const T e:src)*it++=e;\n        }\n\n        template<class R,class Function> inline vector<R> _map(Function func) const{\n          vector <R> res(this->size());\n          for(size_t i=0;i<this->size();i++)\n            res[i]=func(this->operator[](i));\n          return res;\n        }\n        template<class R> inline vector<R> map(R func(T)) const{return this->_map<R>(func);}\n        template<class R> inline vector<R> map(const std::function<R(T)> &func) const{return this->_map<R>(func);}\n      };\n\n      struct string:std::string{\n        using std::string::string;\n        string():std::string(\"\"){}\n        string(const std::string &plain):std::string(plain){}\n\n        template<class T> inline string join(const vector<T> &vet) const;\n\n        vector<string> split(const string &dim) const{\n          if(this->empty())return {};\n          char *src=new char[this->length()+1];\n          strcpy(src,this->c_str());\n          char *tar=new char[dim.length()+1];\n          strcpy(tar,dim.c_str());\n          vector <string> rsp;\n          for(char *pos=strtok(src,tar);pos;pos=strtok(nullptr,tar))\n            rsp.push_back(string(pos));\n          delete[] src;\n          delete[] tar;\n          return rsp;\n        }\n\n        template<class... Args> static inline string format(const char *fm,Args... args){\n          int len=snprintf(nullptr,0,fm,args...);\n          char *buf=new char[len+1];\n          snprintf(buf,len+1,fm,args...);\n          string str(buf);\n          delete[] buf;\n          return str;\n        }\n        template<class... Args> static inline string format(const string &fm,Args... args){\n          return format(fm.c_str(),args...);\n        }\n      };\n\n    #define __to_string(T)                 \\\n      inline string to_string(const T &x){ \\\n        return std::to_string(x);          \\\n      }\n      __float_mapper(__to_string)\n      __integer_mapper(__to_string)\n    #undef __to_string\n\n      inline string to_string(const string &s){return s;}\n      inline string to_string(const char *s){return string(s);}\n      inline string to_string(const std::string &s){return string(s);}\n\n      template<const int mod> inline string to_string(const mem::modint::Z<mod> &v){return std::to_string(v.x);}\n\n      template<class T> inline string to_string(const vector<T> &ctn){return \"[\"+string(\",\").join(ctn)+\"]\";}\n      template<class T> inline string to_string(const set<T> &ctn){\n        string result=\"{\";\n        bool flag=false;\n        for(const auto &it:ctn){\n          if(flag)result+=\",\";\n          flag=true;\n          result+=to_string(it);\n        }\n        return result+\"}\";\n      }\n      template<class T1,class T2> inline string to_string(const map<T1,T2> &ctn){\n        string result=\"{\";\n        bool flag=false;\n        for(const auto &it:ctn){\n          if(flag)result+=\",\";\n          flag=true;\n          result+=to_string(it.first)+\":\"+to_string(it.second);\n        }\n        return result+\"}\";\n      }\n\n      template<class T> inline string string::join(const vector<T> &vet) const{\n        if(!vet.size())return \"\";\n        string res=to_string(vet[0]);\n        for(size_t i=1;i<vet.size();i++){\n          res+=*this;\n          res+=to_string(vet[i]);\n        }\n        return res;\n      }\n\n      inline string operator \"\" _s(const char *s){return string(s);}\n      inline string operator \"\" _s(const char *s,size_t len){return string(s,len);}\n      inline string operator \"\" _s(long double x){return to_string(x);}\n      inline string operator \"\" _s(unsigned long long int x){return to_string(x);}\n  #endif\n    }\n\n    namespace io{\n  #ifdef MEM_IO\n    #ifdef MEM_FASTIO\n      namespace fastio{\n        const int BUFFER=1<<18;\n        char ibuf[BUFFER],*iS,*iT;\n        inline int getc(){\n          if(iS==iT){\n            iT=(iS=ibuf)+fread(ibuf,1,BUFFER,stdin);\n            return iS==iT?EOF:*iS++;\n          }else{\n            return *iS++;\n          }\n        }\n        char obuf[BUFFER],*oS=obuf,*oT=oS+BUFFER-1;\n        inline void flush(){\n          fwrite(obuf,1,oS-obuf,stdout);\n          oS=obuf;\n        }\n        inline void putc(int x){\n          *oS++=x;\n          if(oS==oT)flush();\n        }\n        struct Flusher{~Flusher(){flush();}}flusher;\n      }\n      using fastio::getc;\n      using fastio::putc;\n    #else\n      inline int getc(){return getchar();}\n      inline void putc(int c){putchar(c);}\n    #endif\n\n      template<class T> inline void readDigit(T &x){\n        x=getc();\n        while(!isdigit(x))x=getc();\n      }\n      inline int readDigit(){\n        int x;\n        readDigit(x);\n        return x;\n      }\n      template<class T> inline void readAlpha(T &x){\n        x=getc();\n        while(!isalpha(x))x=getc();\n      }\n      inline int readAlpha(){\n        int x;\n        readAlpha(x);\n        return x;\n      }\n\n    #define __read(T)                             \\\n        inline void read(T &x) {                  \\\n          x=0; bool f=0; char c=getc();           \\\n          while(!isdigit(c))f^=c=='-',c=getc();   \\\n          while(isdigit(c))x=x*10+c-'0',c=getc(); \\\n          if(f)x=-x;                              \\\n        }\n      __integer_mapper(__read)\n    #undef __read\n\n      inline void read(char &x){x=getc();}\n      inline void read(char *s){\n        char c=getc();\n        while(~c&&!isspace(c))*s++=c,c=getc();\n        *s++='\\0';\n      }\n      inline void read(container::string &s){\n        char c=getc();\n        s=\"\";\n        while(~c&&!isspace(c))s+=c,c=getc();\n      }\n\n      template<class T=int> inline T read(){\n        T x;\n        read(x);\n        return x;\n      }\n      template<class T,class... Args> inline void read(T &x,Args &... args){\n        read(x),read(args...);\n      }\n\n    #define __print(T)           \\\n        inline void print(T x){  \\\n          if(x<0)putc('-'),x=-x; \\\n          if(x>9)print(x/10);    \\\n          putc('0'+x%10);        \\\n        }\n      __integer_mapper(__print)\n    #undef __print\n\n      inline void print(char x){putc(x);}\n      inline void print(const char *s){\n        int len=strlen(s);\n        for(int i=0;i<len;i++)putc(s[i]);\n      }\n      inline void print(const container::string &s){\n        for(int i=0;i<s.length();i++)putc(s[i]);\n      }\n\n      template<class T,class... Args> inline void print(const T &x,Args... args){\n        print(x),print(args...);\n      }\n      template<class... Args> inline void println(Args... args){\n        print(args...),putc('\\n');\n      }\n\n      template<class... Args> inline void printfm(const char *formatter,Args... arguments){\n        print(container::string().format(formatter,arguments...));\n      }\n      template<class... Args> inline void printfm(const container::string &formatter,Args... arguments){\n        print(container::string().format(formatter,arguments...));\n      }\n  #endif\n    }\n\n    namespace logger{\n  #ifdef MEM_LOGGER\n      enum ConsoleColor{\n        NOPE=-1,BLACK,RED,GREEN,YELLOW,BLUE,PURPLE,DEEPBLUE\n      };\n      template<const ConsoleColor color=NOPE,class... Args> inline void log(const char *formatter,Args... args){\n        if(~color){\n          fprintf(stderr,\"\\033[%dm\",30+color);\n          fprintf(stderr,formatter,args...);\n          fprintf(stderr,\"\\033[0m\");\n        }else{\n          fprintf(stderr,formatter,args...);\n        }\n      }\n      template<const ConsoleColor color=NOPE,class... Args> inline void logln(const char *formatter,Args... args){\n        if(~color){\n          fprintf(stderr,\"\\033[%dm\",30+color);\n          fprintf(stderr,formatter,args...);\n          fprintf(stderr,\"\\033[0m\\n\");\n        }else{\n          fprintf(stderr,formatter,args...);\n          fprintf(stderr,\"\\n\");\n        }\n      }\n      template<class T> inline void logs(const T &x){\n        fprintf(stderr,container::to_string(x).c_str());\n      }\n      template<class T,class... Args> inline void logs(const T &x,Args... args){\n        logs(x),logs(args...);\n      }\n      template<class... Args> inline void logsln(Args... args){\n        logs(args...);\n        fprintf(stderr,\"\\n\");\n      }\n  #endif\n    }\n\n  #undef __integer_mapper\n  #undef __float_mapper\n  #undef __string_mapper\n  #undef __string_join_mapper\n\n    using namespace io;\n    using namespace math;\n    using namespace utils;\n    using namespace modint;\n    using namespace random;\n    using namespace stdval;\n    using namespace logger;\n    using namespace container;\n} // namespace mem\n\nusing namespace mem::io;\nusing namespace mem::math;\nusing namespace mem::utils;\n\nconst int N=3e5+10,sqn=502,S=sqn+10;\nint n,m,a[N],bln[N];\n\nstruct atom{\n  int l,r,c;\n  long long s;\n};\ninline atom operator+(const atom &a,const atom &b){\n  if(a.l==a.c&&b.l==b.c){\n    return {a.l+b.l,a.r+b.r,a.c+b.c,a.s+b.s+a.c*b.c};\n  }else if(a.l==a.c){\n    return {a.l+b.l,b.r,a.c+b.c,a.s+b.s+a.c*b.l};\n  }else if(b.l==b.c){\n    return {a.l,a.r+b.r,a.c+b.c,a.s+b.s+a.r*b.c};\n  }else{\n    return {a.l,b.r,a.c+b.c,a.s+b.s+a.r*b.l};\n  }\n}\ninline atom calc(int l,int r,int x){\n  atom res{0,0,r-l+1,0};\n  while(res.l<res.c&&a[l+res.l]<=x)res.l++;\n  while(res.r<res.c&&a[r-res.r]<=x)res.r++;\n  int pre=0;\n  for(int i=l;i<=r;i++)if(a[i]<=x)res.s+=++pre; else pre=0;\n  return res;\n}\nconst atom c[2]={{0,0,1,0},{1,1,1,1}};\n\nint anc[S],siz[S],tag[S];\nint find(int x){return anc[x]==x?x:anc[x]=find(anc[x]);}\ninline void merge(int a,int b,long long &s){\n  a=find(a),b=find(b),s+=siz[a]*siz[b];\n  if(siz[a]>siz[b])swap(a,b);\n  anc[a]=b,siz[b]+=siz[a];\n}\nstruct block{\n  int l,r,n,val[S],pos[S];\n  atom pre[S];\n  inline int loc(int x){return upper_bound(val+1,val+n+1,x)-val-1;}\n  inline void init(){\n    n=r-l+1;\n    pre[0]={0,0,n,0};\n    pre[n]={n,n,n,(long long)n*(n-1)/2};\n    for(int i=1;i<n;i++)pre[i].c=n;\n    std::vector<std::pair<int,int>> t(n);\n    for(int i=0;i<n;i++)t[i]={a[i+l],i};\n    sort(t.begin(),t.end());\n    for(int i=1;i<=n;i++)val[i]=t[i-1].first,pos[i]=t[i-1].second;\n  }\n  inline void modify(int k){\n    for(int i=1;i<=n;i++)if(pos[i]==k){\n      val[i]=a[k+l];\n      while(i>1&&val[i]<val[i-1])swap(val[i],val[i-1]),swap(pos[i],pos[i-1]),i--;\n      while(i<n&&val[i]>val[i+1])swap(val[i],val[i+1]),swap(pos[i],pos[i+1]),i++;\n      return;\n    }\n  }\n  inline void build(){\n    for(int i=n-1;i>=1;i--){\n      pre[i].l=min(pre[i+1].l,pos[i+1]);\n      pre[i].r=min(pre[i+1].r,n-pos[i+1]-1);\n    }\n    for(int i=0;i<n;i++)anc[i]=i,siz[i]=1,tag[i]=0;\n    for(int i=1;i<=n;i++){\n      pre[i].s=i?pre[i-1].s+1:1;\n      tag[pos[i]]=1;\n      if(pos[i]&&tag[pos[i]-1])merge(pos[i]-1,pos[i],pre[i].s);\n      if(pos[i]<n-1&&tag[pos[i]+1])merge(pos[i]+1,pos[i],pre[i].s);\n    }\n  }\n}s[N/sqn+5];\n\nint main(){\n#ifdef memset0\n  freopen(\"1.in\",\"r\",stdin);\n  freopen(\"1.out\",\"w\",stdout);\n#endif\n  read(n,m);\n  for(int i=1;i<=n;i++)read(a[i]);\n  for(int i=1;i<=n;i++)bln[i]=(i-1)/sqn+1;\n  for(int i=1;i<=n;i++)s[bln[i]].r=i;\n  for(int i=n;i>=1;i--)s[bln[i]].l=i;\n  for(int i=1;i<=bln[n];i++)s[i].init(),s[i].build();\n  for(int o,l,r,x,y,i=1;i<=m;i++){\n    read(o);\n    if(o==1){\n      read(x,y);\n      a[x]=y;\n      s[bln[x]].modify(x-s[bln[x]].l);\n      s[bln[x]].build();\n    }else{\n      read(l,r,x);\n      atom ans;\n      if(bln[l]==bln[r]){\n        ans=calc(l,r,x);\n      }else{\n        ans=calc(l,s[bln[l]].r,x);\n        for(int i=bln[l]+1;i<=bln[r]-1;i++)ans=ans+s[i].pre[s[i].loc(x)];\n        ans=ans+calc(s[bln[r]].l,r,x);\n      }\n      print(ans.s,'\\n');\n    }\n  }\n  fprintf(stderr,\"clocks: %.4lf\\n\",clock()/(double)CLOCKS_PER_SEC);\n}\n```\n\n### åˆ†æ•£å±‚å ç‰ˆæœ¬\n\næ—¶é—´å¤æ‚åº¦ï¼š$O(n \\sqrt n)$\n\n```cpp\n#pragma GCC target(\"sse,sse2,sse3,ssse3,sse4,sse4.1,sse4.2,popcnt,abm,mmx,avx,avx2,fma,tune=native\")\n#include<bits/stdc++.h>\n\nnamespace mem{ //v2.1.2 => size: 14.19KiB\n  #define MEM_IO\n  #define MEM_MATH\n  #define MEM_UTILS\n  #define MEM_MODINT\n  #define MEM_RANDOM\n  #define MEM_STDVAL\n  #define MEM_LOGGER\n  #define MEM_CONTAINER\n  #ifdef memset0\n  #else\n    #define MEM_FASTIO\n  #endif\n\n  #ifdef __SIZEOF_INT128__\n    #define MEM_INT128\n  #endif\n\n  #define __integer_mapper(func)       \\\n        func(int)                      \\\n        func(unsigned int)             \\\n        func(long long int)            \\\n        func(unsigned long long int)\n  #define __float_mapper(func)         \\\n        func(float)                    \\\n        func(double)                   \\\n        func(long double)\n\n    namespace stdval{\n  #ifdef MEM_STDVAL\n      using i32=int;\n      using i64=long long int;\n      using u32=unsigned int;\n      using u64=unsigned long long int;\n      using f32=float;\n      using f64=double;\n      using f96=long double;\n    #ifdef MEM_INT128\n      using i128=__int128_t;\n      using u128=__uint128_t;\n    #endif\n  #endif\n    }\n\n    namespace utils{\n  #ifdef MEM_UTILS\n      using std::cin;\n      using std::tie;\n      using std::cout;\n      using std::cerr;\n      using std::endl;\n      using std::swap;\n      using std::sort;\n      using std::unique;\n      using std::reverse;\n      using std::shuffle;\n      using std::function;\n      using std::make_pair;\n      using std::make_tuple;\n      using std::accumulate;\n      using std::lower_bound;\n      using std::upper_bound;\n      using std::max_element;\n      using std::min_element;\n  #endif\n    }\n\n    namespace random{\n  #ifdef MEM_RANDOM\n      const int LuckyNumber=20040726; // Kanbe Kotori's Birthday\n      std::mt19937 rng(LuckyNumber^std::chrono::steady_clock::now().time_since_epoch().count());\n      std::mt19937_64 rng64(LuckyNumber^std::chrono::steady_clock::now().time_since_epoch().count());\n\n      template<class T> inline T rand(T l,T r){return std::uniform_int_distribution<T>(l,r)(rng);}\n      template<class T> inline T rand64(T l,T r){return std::uniform_int_distribution<T>(l,r)(rng);}\n  #endif\n    }\n\n    namespace modint{\n  #ifdef MEM_MODINT\n      template<const int mod> struct Z{\n        int x;\n        inline Z(){x=0;}\n        inline Z(int t){x=t;}\n\n        inline void operator-=(Z a){(x-=a.x)<0&&(x+=mod);}\n        inline void operator+=(Z a){(x+=a.x)>=mod&&(x-=mod);}\n        inline void operator*=(Z a){x=(long long)x*a.x%mod;}\n\n        friend inline Z operator*(Z a,Z b){return (long long)a.x*b.x%mod;}\n        friend inline Z operator-(Z a,Z b){return ((a.x-=b.x)<0&&(a.x+=mod)),a;}\n        friend inline Z operator+(Z a,Z b){return ((a.x+=b.x)>=mod&&(a.x-=mod)),a;}\n      };\n\n      template<const int mod> inline Z<mod> finv(Z<mod> x){\n        if(x.x<2)return x;\n        return (mod-mod/x.x)*finv(mod%x.x);\n      }\n      template<const int mod> inline Z<mod> fpow(Z<mod> a,int b){\n        Z <mod> s=1;\n        for(;b;b>>=1,a=a*a)\n          if(b&1)s=s*a;\n        return s;\n      }\n\n      template<const int mod> inline void init_inverse(int n,Z<mod> *inv){\n        inv[0]=inv[1]=1;\n        for(int i=2;i<n;i++)inv[i]=(mod-mod/i)*inv[mod%i];\n      }\n      template<const int mod> inline void init_factorial(int n,Z<mod> *fac,Z<mod> *ifac){\n        fac[0]=1,init_inverse(n,ifac);\n        for(int i=1;i<n;i++)fac[i]=fac[i-1]*i,ifac[i]=ifac[i-1]*ifac[i];\n      }\n    }\n\n    namespace io{\n      template<const int mod> inline void read(modint::Z<mod> &x){read(x.x);}\n      template<const int mod> inline void print(modint::Z<mod> x){print(x.x);}\n  #endif\n    }\n\n    namespace math{\n  #ifdef MEM_MATH\n      using std::max;\n      using std::min;\n      template<class T> inline T abs(T x){return x<0?-x:x;}\n      template<class T> inline T gcd(T n,T m){return m?gcd(m,n%m):n;}\n      template<class T> inline T lcm(T n,T m){return n/gcd(n,m)*m;}\n\n      template<const stdval::u64 p> struct FastDiv{\n        stdval::u64 t,i;\n        inline FastDiv():t(stdval::u64(-1)/p),i(mul_inv(p)){}\n\n        inline bool divide(stdval::u64 n){return n*i<=t;}\n        inline bool divide(stdval::i64 n){return stdval::u64(n<0?-n:n)*i<=t;}\n        inline stdval::u64 mul_inv(stdval::u64 n){\n          stdval::u64 x=n;\n          for(int i=0;i<5;++i)x*=2-n*x;\n          return x;\n        }\n      };\n\n    #ifdef MEM_INT128\n      template<const stdval::u64 b> struct FastMod{\n        stdval::u64 m;\n        inline FastMod():m(stdval::u64((stdval::u128(1)<<64)/b)){}\n\n        inline stdval::u64 reduce(stdval::u64 a){\n          stdval::u64 q=(stdval::u64)((stdval::u128(m)*a)>>64);\n          stdval::u64 r=a-q*b;\n          return r>=b?r-b:r;\n        }\n      };\n    #endif\n  #endif\n    }\n\n    namespace container{\n  #ifdef MEM_CONTAINER\n      using std::pair;\n      using std::tuple;\n      using std::set;\n      using std::unordered_set;\n      using std::map;\n      using std::unordered_map;\n\n      using std::tie;\n      using std::make_pair;\n      using std::make_tuple;\n\n      template<class T> struct vector:std::vector<T>{\n        using std::vector<T>::vector;\n        vector():std::vector<T>(){}\n        vector(const std::vector<T> &plain):std::vector<T>(plain){}\n\n        inline void sort(){std::sort(this->begin(),this->end());}\n        inline void concat(const vector &rhs){this->insert(this->end(),rhs.begin(),rhs.end());}\n        inline bool includes(const T &x) const{return std::find(this->begin(),this->end(),x)!=this->end();}\n        template<class Function> inline void forEach(Function func){for(const auto &it:*this)func(it);}\n\n        inline vector slice(int l,int r) const{\n          if(l>r)return {};\n          if(r<this->size())return vector(this->begin()+l,this->begin()+r);\n          vector<int> rsp=(this->begin()+l,this->end());\n          return rsp.resize(r-l),rsp;\n        }\n\n        inline void from(const std::set<T> &src){\n          this->resize(src.size());\n          auto it=this->begin();\n          for(const T e:src)*it++=e;\n        }\n\n        template<class R,class Function> inline vector<R> _map(Function func) const{\n          vector <R> res(this->size());\n          for(size_t i=0;i<this->size();i++)\n            res[i]=func(this->operator[](i));\n          return res;\n        }\n        template<class R> inline vector<R> map(R func(T)) const{return this->_map<R>(func);}\n        template<class R> inline vector<R> map(const std::function<R(T)> &func) const{return this->_map<R>(func);}\n      };\n\n      struct string:std::string{\n        using std::string::string;\n        string():std::string(\"\"){}\n        string(const std::string &plain):std::string(plain){}\n\n        template<class T> inline string join(const vector<T> &vet) const;\n\n        vector<string> split(const string &dim) const{\n          if(this->empty())return {};\n          char *src=new char[this->length()+1];\n          strcpy(src,this->c_str());\n          char *tar=new char[dim.length()+1];\n          strcpy(tar,dim.c_str());\n          vector <string> rsp;\n          for(char *pos=strtok(src,tar);pos;pos=strtok(nullptr,tar))\n            rsp.push_back(string(pos));\n          delete[] src;\n          delete[] tar;\n          return rsp;\n        }\n\n        template<class... Args> static inline string format(const char *fm,Args... args){\n          int len=snprintf(nullptr,0,fm,args...);\n          char *buf=new char[len+1];\n          snprintf(buf,len+1,fm,args...);\n          string str(buf);\n          delete[] buf;\n          return str;\n        }\n        template<class... Args> static inline string format(const string &fm,Args... args){\n          return format(fm.c_str(),args...);\n        }\n      };\n\n    #define __to_string(T)                 \\\n      inline string to_string(const T &x){ \\\n        return std::to_string(x);          \\\n      }\n      __float_mapper(__to_string)\n      __integer_mapper(__to_string)\n    #undef __to_string\n\n      inline string to_string(const string &s){return s;}\n      inline string to_string(const char *s){return string(s);}\n      inline string to_string(const std::string &s){return string(s);}\n\n      template<const int mod> inline string to_string(const mem::modint::Z<mod> &v){return std::to_string(v.x);}\n\n      template<class T> inline string to_string(const vector<T> &ctn){return \"[\"+string(\",\").join(ctn)+\"]\";}\n      template<class T> inline string to_string(const set<T> &ctn){\n        string result=\"{\";\n        bool flag=false;\n        for(const auto &it:ctn){\n          if(flag)result+=\",\";\n          flag=true;\n          result+=to_string(it);\n        }\n        return result+\"}\";\n      }\n      template<class T1,class T2> inline string to_string(const map<T1,T2> &ctn){\n        string result=\"{\";\n        bool flag=false;\n        for(const auto &it:ctn){\n          if(flag)result+=\",\";\n          flag=true;\n          result+=to_string(it.first)+\":\"+to_string(it.second);\n        }\n        return result+\"}\";\n      }\n\n      template<class T> inline string string::join(const vector<T> &vet) const{\n        if(!vet.size())return \"\";\n        string res=to_string(vet[0]);\n        for(size_t i=1;i<vet.size();i++){\n          res+=*this;\n          res+=to_string(vet[i]);\n        }\n        return res;\n      }\n\n      inline string operator \"\" _s(const char *s){return string(s);}\n      inline string operator \"\" _s(const char *s,size_t len){return string(s,len);}\n      inline string operator \"\" _s(long double x){return to_string(x);}\n      inline string operator \"\" _s(unsigned long long int x){return to_string(x);}\n  #endif\n    }\n\n    namespace io{\n  #ifdef MEM_IO\n    #ifdef MEM_FASTIO\n      namespace fastio{\n        const int BUFFER=1<<18;\n        char ibuf[BUFFER],*iS,*iT;\n        inline int getc(){\n          if(iS==iT){\n            iT=(iS=ibuf)+fread(ibuf,1,BUFFER,stdin);\n            return iS==iT?EOF:*iS++;\n          }else{\n            return *iS++;\n          }\n        }\n        char obuf[BUFFER],*oS=obuf,*oT=oS+BUFFER-1;\n        inline void flush(){\n          fwrite(obuf,1,oS-obuf,stdout);\n          oS=obuf;\n        }\n        inline void putc(int x){\n          *oS++=x;\n          if(oS==oT)flush();\n        }\n        struct Flusher{~Flusher(){flush();}}flusher;\n      }\n      using fastio::getc;\n      using fastio::putc;\n    #else\n      inline int getc(){return getchar();}\n      inline void putc(int c){putchar(c);}\n    #endif\n\n      template<class T> inline void readDigit(T &x){\n        x=getc();\n        while(!isdigit(x))x=getc();\n      }\n      inline int readDigit(){\n        int x;\n        readDigit(x);\n        return x;\n      }\n      template<class T> inline void readAlpha(T &x){\n        x=getc();\n        while(!isalpha(x))x=getc();\n      }\n      inline int readAlpha(){\n        int x;\n        readAlpha(x);\n        return x;\n      }\n\n    #define __read(T)                             \\\n        inline void read(T &x) {                  \\\n          x=0; bool f=0; char c=getc();           \\\n          while(!isdigit(c))f^=c=='-',c=getc();   \\\n          while(isdigit(c))x=x*10+c-'0',c=getc(); \\\n          if(f)x=-x;                              \\\n        }\n      __integer_mapper(__read)\n    #undef __read\n\n      inline void read(char &x){x=getc();}\n      inline void read(char *s){\n        char c=getc();\n        while(~c&&!isspace(c))*s++=c,c=getc();\n        *s++='\\0';\n      }\n      inline void read(container::string &s){\n        char c=getc();\n        s=\"\";\n        while(~c&&!isspace(c))s+=c,c=getc();\n      }\n\n      template<class T=int> inline T read(){\n        T x;\n        read(x);\n        return x;\n      }\n      template<class T,class... Args> inline void read(T &x,Args &... args){\n        read(x),read(args...);\n      }\n\n    #define __print(T)           \\\n        inline void print(T x){  \\\n          if(x<0)putc('-'),x=-x; \\\n          if(x>9)print(x/10);    \\\n          putc('0'+x%10);        \\\n        }\n      __integer_mapper(__print)\n    #undef __print\n\n      inline void print(char x){putc(x);}\n      inline void print(const char *s){\n        int len=strlen(s);\n        for(int i=0;i<len;i++)putc(s[i]);\n      }\n      inline void print(const container::string &s){\n        for(int i=0;i<s.length();i++)putc(s[i]);\n      }\n\n      template<class T,class... Args> inline void print(const T &x,Args... args){\n        print(x),print(args...);\n      }\n      template<class... Args> inline void println(Args... args){\n        print(args...),putc('\\n');\n      }\n\n      template<class... Args> inline void printfm(const char *formatter,Args... arguments){\n        print(container::string().format(formatter,arguments...));\n      }\n      template<class... Args> inline void printfm(const container::string &formatter,Args... arguments){\n        print(container::string().format(formatter,arguments...));\n      }\n  #endif\n    }\n\n    namespace logger{\n  #ifdef MEM_LOGGER\n      enum ConsoleColor{\n        NOPE=-1,BLACK,RED,GREEN,YELLOW,BLUE,PURPLE,DEEPBLUE\n      };\n      template<const ConsoleColor color=NOPE,class... Args> inline void log(const char *formatter,Args... args){\n        if(~color){\n          fprintf(stderr,\"\\033[%dm\",30+color);\n          fprintf(stderr,formatter,args...);\n          fprintf(stderr,\"\\033[0m\");\n        }else{\n          fprintf(stderr,formatter,args...);\n        }\n      }\n      template<const ConsoleColor color=NOPE,class... Args> inline void logln(const char *formatter,Args... args){\n        if(~color){\n          fprintf(stderr,\"\\033[%dm\",30+color);\n          fprintf(stderr,formatter,args...);\n          fprintf(stderr,\"\\033[0m\\n\");\n        }else{\n          fprintf(stderr,formatter,args...);\n          fprintf(stderr,\"\\n\");\n        }\n      }\n      template<class T> inline void logs(const T &x){\n        fprintf(stderr,container::to_string(x).c_str());\n      }\n      template<class T,class... Args> inline void logs(const T &x,Args... args){\n        logs(x),logs(args...);\n      }\n      template<class... Args> inline void logsln(Args... args){\n        logs(args...);\n        fprintf(stderr,\"\\n\");\n      }\n  #endif\n    }\n\n  #undef __integer_mapper\n  #undef __float_mapper\n  #undef __string_mapper\n  #undef __string_join_mapper\n\n    using namespace io;\n    using namespace math;\n    using namespace utils;\n    using namespace modint;\n    using namespace random;\n    using namespace stdval;\n    using namespace logger;\n    using namespace container;\n} // namespace mem\n\nusing namespace mem::io;\nusing namespace mem::math;\nusing namespace mem::utils;\nusing namespace mem::logger;\n\nconst int N=3e5+10,sqn=600,S=sqn+10;\nint n,m,bn,a[N],bln[N];\n\nstruct atom{\n  int l,r,c;\n  long long s;\n};\ninline atom operator+(const atom &a,const atom &b){\n  if(a.l==a.c&&b.l==b.c){\n    return {a.l+b.l,a.r+b.r,a.c+b.c,a.s+b.s+a.c*b.c};\n  }else if(a.l==a.c){\n    return {a.l+b.l,b.r,a.c+b.c,a.s+b.s+a.c*b.l};\n  }else if(b.l==b.c){\n    return {a.l,a.r+b.r,a.c+b.c,a.s+b.s+a.r*b.c};\n  }else{\n    return {a.l,b.r,a.c+b.c,a.s+b.s+a.r*b.l};\n  }\n}\ninline atom calc(int l,int r,int x){\n  atom res{0,0,r-l+1,0};\n  while(res.l<res.c&&a[l+res.l]<=x)res.l++;\n  while(res.r<res.c&&a[r-res.r]<=x)res.r++;\n  int pre=0;\n  for(int i=l;i<=r;i++)if(a[i]<=x)res.s+=++pre; else pre=0;\n  return res;\n}\nconst atom c[2]={{0,0,1,0},{1,1,1,1}};\n\nint anc[S],siz[S],tag[S];\nint find(int x){return anc[x]==x?x:anc[x]=find(anc[x]);}\ninline void merge(int a,int b,long long &s){\n  a=find(a),b=find(b),s+=siz[a]*siz[b];\n  if(siz[a]>siz[b])swap(a,b);\n  anc[a]=b,siz[b]+=siz[a];\n}\nstruct block{\n  int l,r,n,val[S],pos[S];\n  atom pre[S];\n  inline int loc(int x){return upper_bound(val+1,val+n+1,x)-val-1;}\n  inline void init(){\n    n=r-l+1;\n    pre[0]={0,0,n,0};\n    pre[n]={n,n,n,(long long)n*(n-1)/2};\n    for(int i=1;i<n;i++)pre[i].c=n;\n    std::vector<std::pair<int,int>> t(n);\n    for(int i=0;i<n;i++)t[i]={a[i+l],i};\n    sort(t.begin(),t.end());\n    for(int i=1;i<=n;i++)val[i]=t[i-1].first,pos[i]=t[i-1].second;\n  }\n  inline void modify(int k){\n    for(int i=1;i<=n;i++)if(pos[i]==k){\n      val[i]=a[k+l];\n      while(i>1&&val[i]<val[i-1])swap(val[i],val[i-1]),swap(pos[i],pos[i-1]),i--;\n      while(i<n&&val[i]>val[i+1])swap(val[i],val[i+1]),swap(pos[i],pos[i+1]),i++;\n      return;\n    }\n  }\n  inline void build(){\n    for(int i=n-1;i>=1;i--){\n      pre[i].l=min(pre[i+1].l,pos[i+1]);\n      pre[i].r=min(pre[i+1].r,n-pos[i+1]-1);\n    }\n    for(int i=0;i<n;i++)anc[i]=i,siz[i]=1,tag[i]=0;\n    for(int i=1;i<=n;i++){\n      pre[i].s=i?pre[i-1].s+1:1;\n      tag[pos[i]]=1;\n      if(pos[i]&&tag[pos[i]-1])merge(pos[i]-1,pos[i],pre[i].s);\n      if(pos[i]<n-1&&tag[pos[i]+1])merge(pos[i]+1,pos[i],pre[i].s);\n    }\n  }\n}s[N/sqn+5];\n\nint bas,_mem[N*12],*_p=_mem;\nstruct FC{\n  int n,*arr,*l,*r;\n  inline void source(int i){memcpy(arr+1,s[i].val+1,n<<2);}\n  inline void land(int n){if(n)this->n=n,arr=_p,_p+=n+3,l=_p,_p+=n+1,r=_p,_p+=n+1,arr[n+1]=arr[n+2]=1e9;}\n  inline void merge(const FC &a,const FC &b){\n    #define PushI {if(!c)arr[++n]=a.arr[i++],l[n]=i-1,r[n]=j-1; else ++i; c=(c+1)&3;}\n    #define PushJ {if(!c)arr[++n]=b.arr[j++],l[n]=i-1,r[n]=j-1; else ++j; c=(c+1)&3;}\n    int i=1,j=1,c=0;n=0;\n    while(i<=a.n&&j<=b.n)if(a.arr[i]<b.arr[j])PushI else PushJ;\n    while(i<=a.n)PushI;\n    while(j<=b.n)PushJ;\n  }\n  inline void out(){\n    log(\"n=%d\\n\",n);\n    for(int i=1;i<=n;i++)log<RED>(\"%d%c\",arr[i],\" \\n\"[i==n]);\n    for(int i=1;i<=n;i++)log<BLUE>(\"%d%c\",l[i],\" \\n\"[i==n]);\n    for(int i=1;i<=n;i++)log<GREEN>(\"%d%c\",r[i],\" \\n\"[i==n]);\n  }\n}tr[S<<1];\nint res[S<<1];\nbool use[S<<1];\nvoid locate(int x,int l,int r){\n  #define Loc res[i]+=tr[i].arr[res[i]+2]<=x?2:0,res[i]+=tr[i].arr[res[i]+1]<=x\n  for(int i=1;i<=bn;i++)use[bas+i]=l<=i&&i<=r;\n  for(int i=bas;i>=1;i--)use[i]=use[i<<1]||use[i<<1|1];\n  res[1]=0;\n  for(int i=1;i<=bas;i++)if(use[i]){\n    Loc;\n    res[i<<1]=tr[i].l[res[i]];\n    res[i<<1|1]=tr[i].r[res[i]];\n  }\n  for(int i=l+bas;i<=r+bas;i++)Loc;\n  // for(int i=l;i<=r;i++)log(\"%d%c\",tr[i+bas].k,\" \\n\"[i==r]);\n}\n\nint main(){\n#ifdef memset0\n  freopen(\"1.in\",\"r\",stdin);\n  freopen(\"1.out\",\"w\",stdout);\n#endif\n  read(n,m);\n  for(int i=1;i<=n;i++)read(a[i]);\n  for(int i=1;i<=n;i++)bln[i]=(i-1)/sqn+1;\n  bn=bln[n];\n  for(int i=1;i<=n;i++)s[bln[i]].r=i;\n  for(int i=n;i>=1;i--)s[bln[i]].l=i;\n  for(int i=1;i<=bn;i++)s[i].init(),s[i].build();\n  log<RED>(\"block=%d\\n\",bn);\n  for(bas=1;bas<=bn;bas<<=1);--bas;\n  for(int i=1;i<=bn;i++)tr[bas+i].land(s[i].n);\n  for(int i=bas;i>=1;i--)tr[i].land((tr[i<<1].n+tr[i<<1|1].n+3)>>2);\n  for(int i=1;i<=bn;i++)tr[bas+i].source(i);\n  for(int i=bas;i>=1;i--)tr[i].merge(tr[i<<1],tr[i<<1|1]);\n  // for(int i=1;i<=bas+n;i++)tr[i].out();\n  for(int o,l,r,x,y,i=1;i<=m;i++){\n    read(o);\n    if(o==1){\n      read(x,y);\n      a[x]=y;\n      s[bln[x]].modify(x-s[bln[x]].l);\n      s[bln[x]].build();\n      tr[bas+bln[x]].source(bln[x]);\n      for(int i=(bas+bln[x])>>1;i>=1;i>>=1)tr[i].merge(tr[i<<1],tr[i<<1|1]);\n    }else{\n      read(l,r,x);\n      atom ans;\n      if(bln[l]==bln[r]){\n        ans=calc(l,r,x);\n      }else{\n        ans=calc(l,s[bln[l]].r,x);\n        if(bln[l]+1<=bln[r]-1)locate(x,bln[l]+1,bln[r]-1);\n        for(int i=bln[l]+1;i<=bln[r]-1;i++)ans=ans+s[i].pre[res[i+bas]];\n        ans=ans+calc(s[bln[r]].l,r,x);\n      }\n      print(ans.s,'\\n');\n    }\n    // if(i%10000==0)fprintf(stderr,\"clocks: %.4lf\\n\",clock()/(double)CLOCKS_PER_SEC);\n  }\n  fprintf(stderr,\"clocks: %.4lf\\n\",clock()/(double)CLOCKS_PER_SEC);\n}\n```\n","publishedTitle":"ã€ŒCometOJ Round #7 Fã€æœ€ç®€å•çš„é¢˜"}},{"id":"00eb38f4-ded2-5ab2-98dd-9223d4c78a49","fields":{"slug":"/oi/solution/hdu6810/","plainText":"\n> ç»™å®š $n$ ä¸ªç‚¹çš„æ ‘ï¼Œå®šä¹‰ $m$ ä¸ªäººçš„çº¦ä¼šç‚¹ $x$ ä¸ºä½¿å¾— $m$ ä¸ªäººæ‰€åœ¨çš„ç‚¹åˆ° $x$ çš„è·ç¦»ä¹‹å’Œæœ€å°çš„ç‚¹ã€‚\n>\n> $m$ ä¸ªäººæ‰€åœ¨ä½ç½®åœ¨ $n$ ä¸ªç‚¹ä¸­éšæœºé€‰æ‹©ï¼ˆå³æ€»æ–¹æ¡ˆæ•° $\\binom nm$ï¼‰ï¼Œé—®æ‰€æœ‰æ–¹æ¡ˆåˆ°çº¦ä¼šç‚¹è·ç¦»ä¹‹å’Œçš„å’Œã€‚\n>\n> $n \\leq 10^6$ï¼Œç­”æ¡ˆå¯¹ $10^9 + 7$ å–æ¨¡ã€‚\n\n<!-- more -->\n\n## é¢˜è§£\n\nè€ƒè™‘ç¡®å®š $m$ ä¸ªç‚¹åï¼Œæ‰€æœ‰äººåˆ°æŸä¸ªç‚¹çš„è·ç¦»å’Œæ˜¯å•è°ƒçš„ï¼Œä¹Ÿå°±æ˜¯è¯´å¯èƒ½ç§°ä¸ºçº¦ä¼šç‚¹çš„ç‚¹ä¸€å®šæ˜¯ä¸€ä¸ªè”é€šå—ã€‚\n\næˆ‘ä»¬é¢„å¤„ç†å‡ºæ‰€æœ‰ç‚¹åˆ°æŸä¸ªç‚¹çš„è·ç¦»å’Œï¼Œå› ä¸ºç¨åæˆ‘ä»¬é€‰ç‚¹æ—¶ï¼Œï¼ˆæŸä¸€é€‰ç‚¹èŒƒå›´å†…ï¼‰æ¯ä¸ªç‚¹è¢«é€‰ä¸­çš„æ¦‚ç‡æ˜¯å‡ç­‰çš„ã€‚\n\nã€ŒPart1ã€ä¸€ä¸ªç‚¹èƒ½å¤Ÿæˆä¸ºçº¦ä¼šç‚¹å½“ä¸”ä»…å½“æ¯æ£µå­æ ‘å†…é€‰çš„ç‚¹ä¸ªæ•°éƒ½ $\\leq \\frac m 2$ï¼Œæˆ‘ä»¬æšä¸¾ç‚¹ $u$ å’Œå…¶ä¸€ä¸ªå­æ ‘ $v$ï¼Œä½¿å¾— $v$ å†…é€‰çš„ç‚¹çš„ä¸ªæ•° $> \\frac m 2$ï¼ˆå¯¹äºä¸€ç§æ–¹æ¡ˆå’Œå›ºå®šçš„ $u$ï¼Œè¿™æ ·çš„ $v$ è‡³å¤šåªæœ‰ä¸€ä¸ªï¼‰ã€‚è´¡çŒ®å½¢å¦‚\n\n$$\n\\sum_{\\frac m 2 < i \\leq m} \\binom {siz_v} {i} \\binom {n - siz_v} {m - i} \\left( \\frac {i} {siz_v} \\cdot (sumsub_v + siz_v) + \\frac {m - i} {n - siz_v} \\cdot (sumall_u - sumsub_v - siz_v)\\right)\n$$\n\nè¿™ä¸ªåˆ†æ•°å¯ä»¥åˆåˆ°ç»„åˆæ•°é‡Œï¼Œä¹Ÿå°±æ˜¯ç“¶é¢ˆä¸º\n\n$$\n\\sum_{\\frac m2 < i \\leq m} \\binom si \\binom {n-s} {m-i}\n$$\n\nè¿™ä¸ªä¸œè¥¿æˆ‘ä»¬è€ƒè™‘ç»„åˆæ„ä¹‰ï¼Œå®¹æ˜“ä» $f_s$ é€’æ¨åˆ° $f_{s-1}$ã€‚\n\nã€ŒPart2ã€ä¸€æ¡è¾¹ä¸Šçš„ä¸¤ä¸ªç‚¹èƒ½åŒæ—¶æˆä¸ºçº¦ä¼šç‚¹å½“ä¸”ä»…å½“ä¸¤ä¾§è¢«é€‰ä¸­çš„ç‚¹çš„ä¸ªæ•°éƒ½æ°ä¸º $\\frac m 2$ï¼Œè¿™ä¸€éƒ¨åˆ†å®¹æ˜“ç›´æ¥è®¡ç®—ã€‚\n\näºæ˜¯ç‚¹å‡è¾¹å°±åšå®Œäº†ï¼Œæ—¶é—´å¤æ‚åº¦ $O(n)$ã€‚\n\n## ä»£ç \n\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\nconst int N = 1e6 + 9, mod = 1e9 + 7;\nint T, n, m, fa[N], siz[N];\nvector<int> G[N];\nstruct z {\n  int x;\n  z(int x = 0) : x(x) {}\n  friend inline z operator*(z a, z b) { return (long long)a.x * b.x % mod; }\n  friend inline z operator-(z a, z b) { return (a.x -= b.x) < 0 ? a.x + mod : a.x; }\n  friend inline z operator+(z a, z b) { return (a.x += b.x) >= mod ? a.x - mod : a.x; }\n} F0[N], F1[N], fac[N], inv[N], ifac[N], sumall[N], sumsub[N];\ninline z fpow(z a, int b) {\n  z s = 1;\n  for (; b; b >>= 1, a = a * a)\n    if (b & 1) s = s * a;\n  return s;\n}\ninline z finv(z a) { return fpow(a, mod - 2); }\ninline z C(int n, int m) { return n < m ? 0 : fac[n] * ifac[m] * ifac[n - m]; }\nstruct atom {\n  int siz;\n  z sum;\n};\nvector<atom> A[N];\nvoid dfs(int u) {\n  siz[u] = 1;\n  sumsub[u] = 0;\n  for (int v : G[u]) {\n    fa[v] = u, dfs(v), siz[u] += siz[v];\n    sumsub[u] = sumsub[u] + sumsub[v] + siz[v];\n  }\n}\nvoid dfs2(int u, z fr) {\n  sumall[u] = fr + sumsub[u], fr = fr + n;\n  for (int v : G[u]) {\n    fr = fr + sumsub[v] + siz[v];\n  }\n  for (int v : G[u]) {\n    dfs2(v, fr - sumsub[v] - siz[v] - siz[v]);\n  }\n}\nvoid sol0(int n, int m, int l, int r, z *F) {\n  if (l > m || l > r) {\n    memset(F, 0, (n + 1) << 2);\n  } else {\n    F[n] = C(n, m);\n    for (int i = n - 1; i >= 0; i--) F[i] = F[i + 1] - C(i, l - 1) * C(n - i - 1, m - l);\n    for (int j = m + 1; j <= r; j++)\n      for (int i = 0; i <= n; i++) F[i] = F[i] + C(i, j) * C(n - i, m - j);\n  }\n}\nz sol1() {\n  z res = 0;\n  for (int u = 1; u <= n; u++) {\n    res = res + C(n - 1, m - 1) * sumall[u];\n    for (auto &x : A[u]) {\n      res = res - F0[x.siz - 1] * (x.sum + x.siz) - F1[x.siz] * (sumall[u] - x.sum - x.siz);\n    }\n  }\n  return res;\n}\nz sol2() {\n  if (m & 1) return 0;\n  z res = 0;\n  for (int u = 1; u <= n; u++)\n    for (auto &x : A[u]) {\n      res = res + C(x.siz, m >> 1) * C(n - x.siz, m >> 1) * (inv[x.siz] * (x.sum + x.siz) + inv[n - x.siz] * (sumall[u] - x.sum - x.siz));\n    }\n  return res * (m >> 1) * finv(2);\n}\nint main() {\n#ifdef memset0\n  freopen(\"1.in\", \"r\", stdin);\n#endif\n  cin.tie(0)->sync_with_stdio(0);\n  fac[0] = ifac[0] = inv[0] = inv[1] = 1;\n  for (int i = 1; i < N; i++) fac[i] = fac[i - 1] * i;\n  for (int i = 2; i < N; i++) inv[i] = (mod - mod / i) * inv[mod % i];\n  for (int i = 1; i < N; i++) ifac[i] = ifac[i - 1] * inv[i];\n  for (cin >> T; T--;) {\n    cin >> n >> m;\n    for (int i = 1; i <= n; i++) G[i].clear(), A[i].clear();\n    for (int fa, i = 2; i <= n; i++) {\n      cin >> fa;\n      G[fa].push_back(i);\n    }\n    dfs(1);\n    dfs2(1, 0);\n    for (int u = 1; u <= n; u++) {\n      for (int v : G[u]) A[u].push_back({siz[v], sumsub[v]});\n      A[u].push_back({n - siz[u], sumall[fa[u]] - sumsub[u] - siz[u]});\n    }\n    int l = (m >> 1) + 1;\n    sol0(n - 1, m - 1, l - 1, m - 1, F0);\n    sol0(n - 1, m - 1, l, m, F1);\n    cout << (sol1() - sol2()).x << '\\n';\n  }\n}\n```\n","publishedTitle":"ã€ŒHDU6810ã€Imperative Meeting"}},{"id":"81c16de1-77a3-5387-8322-88fe3585f54c","fields":{"slug":"/oi/solution/loj2461/","plainText":"\n> ä½ æœ‰ $n$ ä¸ªé˜Ÿåˆ—ï¼Œæ¯ä¸ªé˜Ÿåˆ—æœ‰ $a_i$ çš„å®¹é‡ã€‚\n>\n> $Q$ æ¬¡æ“ä½œï¼Œæ¯æ¬¡ç»™å®šé˜Ÿåˆ—çš„åŒºé—´ $[l,r]$ï¼Œpush ä¸€ä¸ª $x$ã€‚å¦‚æœç¬¬ $i$ ä¸ªé˜Ÿåˆ—çš„å…ƒç´ ä¸ªæ•° $>a_i$ï¼Œä¼šè‡ªåŠ¨ popã€‚\n>\n> è¦æ±‚æ¯æ¬¡æ“ä½œåæ±‚å‡ºæ‰€æœ‰åºåˆ—ä¸­æœ¬è´¨ä¸åŒçš„å…ƒç´ ä¸ªæ•°ã€‚\n>\n> $n,m,a_i,x \\leq 10^5$ã€‚\n\n<!-- more -->\n\n## é¢˜è§£\n\nå»ºå‡ºçº¿æ®µæ ‘ï¼Œé‚£ä¹ˆä¸€ä¸ªåŒºé—´æ“ä½œ $[l,r]$ èƒ½æ°å¥½è¦†ç›– $O(\\log n)$ æ¡çº¿æ®µã€‚å¯¹äºæ¯æ¡çº¿æ®µï¼Œè€ƒè™‘ç»Ÿè®¡æ“ä½œåŠ å…¥çš„ç‚¹ä½•æ—¶è¢«å®Œå…¨ç§»å‡ºè¯¥åŒºé—´ã€‚\n\nç”±äºæˆ‘ä»¬åªæŠŠå®Œå…¨è¦†ç›–è¯¥çº¿æ®µçš„æ“ä½œä¸¢å…¥æ”¹çº¿æ®µå¤„ç†ï¼Œé‚£ä¹ˆæ“ä½œçš„è¿›å…¥å’Œå¼¹å‡ºç¬¦åˆå•è°ƒé˜Ÿåˆ—çš„æ€§è´¨ï¼Œæˆ‘ä»¬é€šè¿‡ä¸€æ¡çº¿æ®µç»´æŠ¤ã€‚æ¯æ¬¡å¯¹çº¿æ®µè¿›è¡Œä¿®æ”¹åï¼Œæˆ‘ä»¬ä¸æ–­åˆ¤æ–­å¹¶å¼¹å‡ºé˜Ÿåˆ—å¤´å³å¯ä¿è¯å¤æ‚åº¦ã€‚\n\né‚£ä¹ˆå¦‚ä½•åˆ¤æ–­å‘¢ï¼Œè€ƒè™‘ä¸€ä¸ªæ“ä½œæ’å…¥ä¸€æ¡çº¿æ®µ $[l;r]$ æ—¶ï¼Œåˆå§‹çš„é™åˆ¶æ˜¯å½¢å¦‚è¿™ä¸€æ®µ $a_{l\\ldots r}$ã€‚è¿›è¡Œåˆ«çš„æ“ä½œç»è¿‡è¿™æ¡çº¿æ®µæ—¶å°±æ˜¯æŠŠé™åˆ¶çš„åŒºé—´æˆ–æ•´ä½“ $-1$ã€‚å¦‚æœé™åˆ¶å…¨éƒ¨ $\\leq 0$ï¼Œè¿™æ¬¡æ“ä½œæ·»åŠ çš„æ‰€æœ‰å…ƒç´ è¢«å®Œå…¨å¼¹å‡ºæ”¹çº¿æ®µå¯¹åº”çš„é˜Ÿåˆ—ä¸­ã€‚\n\næ˜¾ç„¶å¯¹äºæ¯ä¸€ä¸ªï¼ˆæ“ä½œï¼Œçº¿æ®µï¼‰äºŒå…ƒç»„å¼€çº¿æ®µæ ‘ç»´æŠ¤é™åˆ¶ï¼Œæ³¨æ„åˆ°å‰é¢è¯´çš„å•è°ƒé˜Ÿåˆ—æ€§è´¨ï¼Œä¸€ä¸ªæ“ä½œåœ¨å›ºå®šçº¿æ®µä¸Šï¼Œå½±å“é™åˆ¶çš„æ“ä½œå¯ä»¥çœ‹åšæ˜¯ç»è¿‡è¯¥çº¿æ®µæ‰€å½¢æˆçš„æ“ä½œåºåˆ—çš„ä¸€ä¸ªåŒºé—´ã€‚æˆ‘ä»¬å¯¹çº¿æ®µå¼€çº¿æ®µæ ‘ï¼ˆå“å¦ˆå‘€çœŸç»•ï¼‰ï¼Œåˆšè¯´çš„æ“ä½œåºåˆ—åŒºé—´çš„å·¦å³ç«¯ç‚¹éƒ½æ˜¯å•è°ƒå¢çš„ï¼Œç»´æŠ¤è¾ƒä¸ºå¹³å‡¡ã€‚\n\nè¿˜æœ‰ä¸ªå¤æ‚åº¦ä¸Šçš„å°é—®é¢˜ï¼Œå¯¹äºæ¯æ¬¡æ“ä½œï¼Œæ°å¥½è¦†ç›–ä¸€æ¡çº¿æ®µçš„æ—¶å€™æˆ‘ä»¬å°± return äº†ï¼Œè€Œå¯¹äºè¯¥çº¿æ®µæ ‘èŠ‚ç‚¹çš„å­æ ‘å†…å•è°ƒé˜Ÿåˆ—ï¼Œå¯èƒ½æ˜¯æœ‰è´¡çŒ®çš„ã€‚éœ€è¦ç»´æŠ¤å•è°ƒé˜Ÿåˆ—è·ç¦»ä¸‹æ¬¡å¼¹å‡ºéœ€è¦çš„æ‡’æ ‡è®°ä¸ªæ•°ï¼Œä¹Ÿæ˜¯è¾ƒä¸ºå¹³å‡¡çš„ã€‚\n\n## ä»£ç \n\n```cpp\n// n log^2 n solution\n#include <bits/stdc++.h>\nusing namespace std;\nconst int N = 1e5 + 10, M = N * 40;\nint n, m, tot, nod, ans, a[N], col[N], lc[M], rc[M], val[M], tag[M];\ninline void up(int u, int x) { val[u] += x, tag[u] += x; }\ninline void down(int u) {\n  if (tag[u]) up(lc[u], tag[u]), up(rc[u], tag[u]), tag[u] = 0;\n}\nvoid build(int &u, int l, int r) {\n  u = ++tot;\n  if (l == r) {\n    val[u] = a[l];\n    return;\n  }\n  int mid = (l + r) >> 1;\n  build(lc[u], l, mid);\n  build(rc[u], mid + 1, r);\n  val[u] = max(val[lc[u]], val[rc[u]]);\n}\nvoid modify(int u, int ql, int qr, int x, int l, int r) {\n  down(u);\n  if (ql == l && qr == r) {\n    up(u, x);\n    return;\n  }\n  int mid = (l + r) >> 1;\n  if (qr <= mid) {\n    modify(lc[u], ql, qr, x, l, mid);\n  } else if (ql > mid) {\n    modify(rc[u], ql, qr, x, mid + 1, r);\n  } else {\n    modify(lc[u], ql, mid, x, l, mid);\n    modify(rc[u], mid + 1, qr, x, mid + 1, r);\n  }\n  val[u] = max(val[lc[u]], val[rc[u]]);\n}\nstruct segment {\n  int l, r, mid, rt, d, k, tag, lc, rc;\n  pair<int, int> todo, item;\n  queue<tuple<int, int, int>> q;\n  vector<pair<int, int>> opt;\n} p[N << 1];\ninline void pushup(int u, int x) { p[u].d += x, p[u].tag += x, p[u].todo.first -= x; }\ninline void pushdown(int u) {\n  if (p[u].tag && p[u].l != p[u].r) {\n    pushup(p[u].lc, p[u].tag);\n    pushup(p[u].rc, p[u].tag);\n    p[u].tag = 0;\n  }\n}\ninline void maintain(int u) {\n  p[u].todo = p[u].item;\n  if (p[u].l != p[u].r) {\n    pushdown(u);\n    if (p[p[u].lc].todo.first < p[u].todo.first) p[u].todo = p[p[u].lc].todo;\n    if (p[p[u].rc].todo.first < p[u].todo.first) p[u].todo = p[p[u].rc].todo;\n  }\n}\nint build(int l, int r) {\n  int u = ++nod;\n  p[u].l = l, p[u].r = r, p[u].mid = (l + r) >> 1;\n  build(p[u].rt, l, r);\n  p[u].item = p[u].todo = {114514, u};\n  if (l != r) {\n    p[u].lc = build(l, p[u].mid);\n    p[u].rc = build(p[u].mid + 1, r);\n  }\n  return u;\n}\nvoid update(int u) {\n  static int c, k, d, l, r;\n  while (p[u].q.size()) {\n    tie(c, k, d) = p[u].q.front();\n    while (p[u].k < k) {\n      tie(l, r) = p[u].opt[p[u].k++];\n      modify(p[u].rt, l, r, 1, p[u].l, p[u].r);\n    }\n    if (p[u].d - d >= val[p[u].rt]) {\n      col[c]--, ans -= !col[c];\n      p[u].q.pop();\n    } else {\n      p[u].item = {val[p[u].rt] + d - p[u].d, u};\n      maintain(u);\n      return;\n    }\n  }\n  p[u].item = {114514, u};\n  maintain(u);\n}\nvoid modify(int u, int l, int r, int c) {\n  if (p[u].l == l && p[u].r == r) {\n    ans += !col[c], col[c]++;\n    pushup(u, 1);\n    p[u].q.push({c, (int)p[u].opt.size(), p[u].d});\n  } else {\n    pushdown(u);\n    p[u].opt.push_back({l, r});\n    modify(p[u].rt, l, r, -1, p[u].l, p[u].r);\n    if (r <= p[u].mid) modify(p[u].lc, l, r, c);\n    else if (l > p[u].mid)\n      modify(p[u].rc, l, r, c);\n    else\n      modify(p[u].lc, l, p[u].mid, c), modify(p[u].rc, p[u].mid + 1, r, c);\n    maintain(u);\n  }\n  update(u);\n}\nvoid resolve(int u, int v) {\n  pushdown(u);\n  if (u == v) {\n    update(u);\n    return;\n  }\n  resolve(p[v].r <= p[u].mid ? p[u].lc : p[u].rc, v);\n  update(u);\n  maintain(u);\n}\nint main() {\n#ifdef memset0\n  freopen(\"1.in\", \"r\", stdin);\n#endif\n  cin.tie(0)->sync_with_stdio(0);\n  cin >> n >> m;\n  for (int i = 1; i <= n; i++) cin >> a[i];\n  build(1, n);\n  for (int i = 1, l, r, x; i <= m; i++) {\n    cin >> l >> r >> x;\n    modify(1, l, r, x);\n    while (!p[1].todo.first) resolve(1, p[1].todo.second);\n    cout << ans << '\\n';\n  }\n}\n```\n","publishedTitle":"ã€Œé›†è®­é˜Ÿäº’æµ‹2018ã€å®Œç¾çš„é˜Ÿåˆ—"}},{"id":"edb9ca8d-27d8-56cc-a8b3-8c9ed5494b35","fields":{"slug":"/oi/solution/loj3315/","plainText":"\n> æœ‰ $m$ å¼ å¸¦ç¼–å·å¡ç‰Œï¼Œæ¯æ¬¡ä½ å¯ä»¥éšæœºæŠ½å–ä¸€å¼ ã€‚æŠ½ä¸­æ¯å¼ çš„æ¦‚ç‡å‡ä¸º $\\frac 1 m$ã€‚å½“ç¼–å·è¿ç»­çš„ $k$ å¼ ç‰Œéƒ½è¢«æŠ½å–è¿‡æ—¶ï¼Œæ¸¸æˆç»“æŸã€‚\n>\n> é—®æ¸¸æˆç»“æŸçš„æœŸæœ›æ­¥æ•°ã€‚\n>\n> $1 \\leq k \\leq m \\leq 2 \\times 10^5$ã€‚\n\n<!-- more -->\n\n## é¢˜è§£\n\n### Part 1\n\næˆ‘ä»¬å¯ä»¥ç›´æ¥å¯¹æ¯å¼ ç‰Œç¬¬ä¸€æ¬¡è¢«æŠ½ä¸­çš„æ“ä½œåºåˆ—è®¡æ•°ã€‚\n\næŠŠç‰Œçš„æ¯ä¸€æ®µç¼–å·è¿ç»­åŒºé—´åˆ†å¼€è€ƒè™‘ï¼Œæ¯ä¸€æ®µå¤„ç†å‡ºé€‰ä¸­è¿ç»­åŒºé—´é•¿åº¦ä¸è¶…è¿‡ $k$ çš„æ–¹æ¡ˆæ•°ï¼ˆåŒæ—¶å®¹æ˜“å¾—åˆ°è¶…è¿‡çš„æ–¹æ¡ˆæ•°ï¼‰ï¼Œç„¶ååˆ†æ²» + NTT åˆå¹¶ï¼Œè¿™æ˜¯å¹³å‡¡çš„ã€‚\n\nè¿™ä¸ªåšæ³•çš„æ—¶é—´å¤æ‚åº¦æ˜¯ $O(n^2ï¼‹n \\log^2 n)$ çš„ï¼Œç“¶é¢ˆåœ¨äºå‰åŠéƒ¨åˆ†å³å¤„ç†å‡ºåˆ†æˆæŠŠ $n$ ä¸ª $m=1...n$ æ®µæ»¡è¶³æ¯ä¸€æ®µé•¿åº¦éƒ½ä¸è¶…è¿‡ $k$ çš„æ–¹æ¡ˆæ•°ï¼Œæ›´è¿›ä¸€æ­¥çš„å¯ä»¥è¡¨ç¤ºä¸ºï¼š\n\n$$\nB(u) = [x^{n+1}] \\frac 1 {1 - u \\frac {x - x^{k+1}} {1 - x}}\n$$\n\næˆ‘ä»¬éœ€è¦æ±‚å‡ºå¤šé¡¹å¼ $B$ã€‚\n\n### Part2\n\næ³¨æ„åˆ°è¿™æ˜¯ä¸€ä¸ªæ‹“å±•æ‹‰æ ¼æœ—æ—¥åæ¼”çš„å½¢å¼ï¼Œæˆ‘ä»¬éœ€è¦æ±‚å‡º $\\displaystyle{F(x) = \\frac{x - x^{k+1}} {1 - x}}$ çš„å¤åˆé€†ã€‚\nç›¸å½“äºæˆ‘ä»¬è¦æ±‚ $G(x)$ æ»¡è¶³ $F(G(x)) = x$ï¼Œæ ¹æ®å¤šé¡¹å¼ç‰›é¡¿è¿­ä»£ï¼Œæœ‰\n\n$$\nT(G(x))\n= F(G(x)) - x\n= \\frac {G(x) - G^{k+1}(x)}{1 - G(x)} - x \\\\\n\\begin{aligned}\nT'(G(x))\n&= \\frac {(1 - (k+1)G^k(x))(1 - G(x)) + (G(x) - G^{k+1}(x))}{(1 - G(x))^2} \\\\\n&= \\frac {1 - (k+1)G^k(x) + kG^{k+1}(x)} {1 - 2G(x) + G^2(x)} \\\\\n\\end{aligned}\n$$\n\nç”±å¤šé¡¹å¼ç‰›é¡¿è¿­ä»£ï¼Œæˆ‘ä»¬å¯ä»¥å€å¢å¾—åˆ° $G(x)$ã€‚\n\n### Part3\n\nä»£å…¥æ‹“å±•æ‹‰æ ¼æœ—æ—¥åæ¼”çš„å¼å­ï¼Œä»¤ $\\displaystyle{H(x) = \\frac 1 {1 - ux}}$ æˆ‘ä»¬å¯ä»¥å¾—åˆ°\n\n$$\nS\n= [x^{n+1}] H(F(x))\n= \\frac 1 {n+1} [x^n] H'(x) \\left(\\frac x {G(x)}\\right)^{n+1}\n$$\n\nè®¾ $\\displaystyle{T(x) = \\frac 1{n+1} \\left(\\frac x {G(x)}\\right)^{n+1}}$ï¼Œåˆ™æœ‰\n\n$$\n\\begin{aligned}\nS\n&= [x^n] H'(x) T(x) = [x^n] T(x) \\frac {u} {(1-ux)^2} \\\\\n&= [x^n] T(x) u \\sum_{i=0}^\\infty (i+1) (ux)^i\n\\end{aligned}\n$$\n\nå³å¯ç›´æ¥å¾—åˆ° $S(u)$ã€‚\n\né—®é¢˜è§£å†³ï¼Œæ€»æ—¶é—´å¤æ‚åº¦ $O(n\\log^2 n)$ã€‚\n\n## ä»£ç \n\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\nconst int N = 2e5 + 10, mod = 998244353;\nint n, m, k, a[N], b[N], rev[N << 2];\nstruct z {\n  int x;\n  inline z() : x(0) {}\n  inline z(int x) : x(x) {}\n  friend inline z operator*(z a, z b) { return (long long)a.x * b.x % mod; }\n  friend inline z operator-(z a, z b) { return (a.x -= b.x) < 0 ? a.x + mod : a.x; }\n  friend inline z operator+(z a, z b) { return (a.x += b.x) >= mod ? a.x - mod : a.x; }\n} ans, len[N], fac[N], ifac[N], w[N << 2], S[N];\nusing vec = vector<z>;\ninline z C(int n, int m) { return n < m ? 0 : fac[n] * ifac[m] * ifac[n - m]; }\ninline z fpow(z a, int b) {\n  z s = 1;\n  for (; b; b >>= 1, a = a * a)\n    if (b & 1) s = s * a;\n  return s;\n}\ninline vec resize(vec a, int n) {\n  a.resize(n);\n  return a;\n}\nvoid initfac(int n) {\n  fac[0] = fac[1] = ifac[0] = ifac[1] = 1;\n  for (int i = 2; i <= n; i++) fac[i] = fac[i - 1] * i;\n  for (int i = 2; i <= n; i++) ifac[i] = (mod - mod / i) * ifac[mod % i];\n  for (int i = 2; i <= n; i++) ifac[i] = ifac[i - 1] * ifac[i];\n}\nint init(int n) {\n  int lim = 1, k = 0;\n  while (lim < n) lim <<= 1, ++k;\n  for (int i = 0; i < lim; i++) rev[i] = (rev[i >> 1] >> 1) | ((i & 1) << (k - 1));\n  static int len = 1;\n  for (; len < lim; len <<= 1) {\n    z wn = fpow(3, (mod - 1) / (len << 1));\n    w[len] = 1;\n    for (int i = 1; i < len; i++) w[i + len] = w[i + len - 1] * wn;\n  }\n  return lim;\n}\nvoid dft(vec &a, int lim) {\n  a.resize(lim);\n  for (int i = 0; i < lim; i++)\n    if (i < rev[i]) swap(a[i], a[rev[i]]);\n  for (int len = 1; len < lim; len <<= 1)\n    for (int i = 0; i < lim; i += (len << 1))\n      for (int j = 0; j < len; j++) {\n        z x = a[i + j], y = a[i + j + len] * w[j + len];\n        a[i + j] = x + y, a[i + j + len] = x - y;\n      }\n}\nvoid idft(vec &a, int lim) {\n  dft(a, lim), reverse(&a[1], &a[lim]);\n  z inv = fpow(lim, mod - 2);\n  for (int i = 0; i < lim; i++) a[i] = a[i] * inv;\n}\ninline vec mul(vec a, vec b, int l) {\n  if (a.size() < 10 || b.size() < 10) {\n    vec c(a.size() + b.size() - 1);\n    for (int i = 0; i < a.size(); i++)\n      for (int j = 0; j < b.size(); j++) c[i + j] = c[i + j] + a[i] * b[j];\n    return c.resize(l), c;\n  }\n  int len = a.size() + b.size() - 1, lim = init(len);\n  dft(a, lim), dft(b, lim);\n  for (int i = 0; i < lim; i++) a[i] = a[i] * b[i];\n  return idft(a, lim), a.resize(l), a;\n}\ninline vec operator*(const vec &a, const vec &b) { return mul(a, b, a.size() + b.size() - 1); }\ninline vec operator+(vec a, const vec &b) {\n  a.resize(max(a.size(), b.size()));\n  for (int i = 0; i < b.size(); i++) a[i] = a[i] + b[i];\n  return a;\n}\ninline vec operator-(vec a, const vec &b) {\n  a.resize(max(a.size(), b.size()));\n  for (int i = 0; i < b.size(); i++) a[i] = a[i] - b[i];\n  return a;\n}\nvec inv(const vec &f, int len = -1) {\n  if ((len = ~len ? len : f.size()) == 1) return {fpow(f[0], mod - 2)};\n  vec a(&f[0], &f[len]), b = inv(f, (len + 1) >> 1);\n  int lim = init((len << 1) - 1);\n  dft(a, lim), dft(b, lim);\n  for (int i = 0; i < lim; i++) a[i] = b[i] * (2 - a[i] * b[i]);\n  return idft(a, lim), a.resize(len), a;\n}\nvec deri(vec f) {\n  for (int i = 0; i <= (int)f.size() - 2; i++) f[i] = f[i + 1] * (i + 1);\n  return f.back() = 0, f;\n}\nvec inte(vec f) {\n  for (int i = (int)f.size() - 1; i >= 1; i--) f[i] = f[i - 1] * fpow(i, mod - 2);\n  return f.front() = 0, f;\n}\nvec ln(const vec &f) { return inte(mul(inv(f), deri(f), f.size())); }\nvec exp(const vec &f, int len = -1) {\n  if ((len = ~len ? len : f.size()) == 1) return {1};\n  vec a(&f[0], &f[len]), b = exp(f, (len + 1) >> 1);\n  return b.resize(len), mul(b, a + vec{1} - ln(b), len);\n}\nvec fpow(vec a, int b) {\n  int n = a.size();\n  vec s;\n  for (int c = 0; c < n; c++)\n    if (a[c].x) {\n      int l = n - c * b;\n      if (l <= 0) return s.resize(n), s;\n      for (int i = 0; i < l; i++) a[i] = a[i + c];\n      a.resize(l);\n      a = ln(a);\n      for (int i = 0; i < l; i++) a[i] = a[i] * b;\n      a = exp(a), s.resize(c * b);\n      s.insert(s.end(), a.begin(), a.end());\n      return s;\n    }\n  return a;\n}\nvec complex(const vec &g) { // F(G(x))\n  vec s, c = {1};\n  for (int i = 1; i <= k; i++) c = mul(c, g, g.size()), s = s + c;\n  return s;\n}\nvec complex_inv(int len) { // G^{-1}(F(x))\n  if (len == 1) return {0};\n  vec g = resize(complex_inv((len + 1) >> 1), len), gk = fpow(g, k), gk1 = mul(gk, g, len);\n  vec res = g - mul(mul(g - gk1 - vec{0, 1} * (vec{1} - g), vec{1} - g, len), inv(vec{1} - vec{k + 1} * gk + vec{k} * gk1), len);\n  return res;\n}\ninline vec sol(int n) { //\tn+1ä¸ªçƒï¼Œåˆ†mç»„ï¼Œæ¯ç»„1~kä¸ªã€‚\n  vec g = complex_inv(n + 1), res(n + 1);\n  g.erase(g.begin());\n  g = fpow(inv(g), n + 1) * vec{fpow(n + 1, mod - 2)};\n  for (int i = 1; i <= n; i++) res[i - 1] = (i + 1) * g[n - i];\n  reverse(&res[0], &res[n]), res[n] = n + 1 <= k;\n  return res;\n}\npair<vec, vec> solve(int l, int r) {\n  if (l == r) {\n    int n = b[l];\n    vec F(n + 1), G = sol(n);\n    for (int i = 0; i <= n; i++) {\n      F[i] = fac[n] * ifac[n - i] - G[i] * fac[i] - (i ? S[i - 1] : 0) * ifac[n - i];\n      S[i] = (i ? S[i - 1] : 0) + F[i] * fac[n - i];\n    }\n    for (int i = 0; i < n; i++) F[i] = F[i + 1] * ifac[i];\n    return F.pop_back(), pair<vec, vec>{F, G};\n  }\n  int mid = (l + r) >> 1;\n  auto L = solve(l, (l + r) >> 1), R = solve(((l + r) >> 1) + 1, r);\n  return {L.first * R.second + L.second * R.first, L.second * R.second};\n}\nint main() {\n#ifdef memset0\n  freopen(\"1.in\", \"r\", stdin);\n#endif\n  cin >> n >> k;\n  initfac(n + 5);\n  for (int i = 1; i <= n; i++) cin >> a[i];\n  sort(a + 1, a + n + 1);\n  for (int i = 1, j; i <= n; i = j + 1) {\n    for (j = i; j < n && a[j + 1] == a[i] + j - i + 1; j++)\n      ;\n    b[++m] = j - i + 1;\n  }\n  auto res = solve(1, m);\n  for (int i = 1; i <= n; i++) {\n    len[i] = len[i - 1] + n * fpow(n - i + 1, mod - 2);\n    ans = ans + res.first[i - 1] * fac[i - 1] * fac[n - i] * len[i];\n  }\n  cout << (ans * ifac[n]).x << endl;\n}\n```\n","publishedTitle":"ã€ŒZJOI2020ã€æŠ½å¡"}},{"id":"b1b755e1-d06f-5dca-ace1-ea92af4c49a9","fields":{"slug":"/oi/solution/loj3397/","plainText":"\n> ä¸€ä¸ªé•¿åº¦ä¸º $n$ çš„æ’åˆ—æ˜¯æ­£ç¡®çš„ï¼Œå½“ä¸”ä»…å½“ä»–ä¸å­˜åœ¨éå¹³å‡¡çš„è¿ç»­å­åºåˆ—ï¼Œä½¿å¾—ä»–çš„å€¼ä¹Ÿæ˜¯è¿ç»­çš„ã€‚ å¯¹äº $k\\in[1,n]$ æ±‚å‡ºï¼Œæœ‰å¤šå°‘é•¿åº¦ä¸º $k$ çš„æ­£ç¡®çš„æ’åˆ—ã€‚\n>\n> $n\\le 10^5$ã€‚\n\n<!-- more -->\n\n## é¢˜è§£\n\n### Step 1\n\nå®šä¹‰ $F(x)=\\sum_{i\\ge 4}f_ix^i,\\ G(x)=\\sum_{i\\ge 2}g_ix^i,\\ H(x)=\\sum_{i\\ge 2}i!x^i$ã€‚\n\nå…¶ä¸­ $f_i$ è¡¨ç¤ºæœ‰ $i$ ä¸ªå¶å­èŠ‚ç‚¹ï¼Œæ ¹èŠ‚ç‚¹ä¸ºæç‚¹ä¸”æ ‘é«˜ä¸º $2$ çš„æåˆæ ‘æ•°é‡ï¼Œ$g_i$ è¡¨ç¤ºæœ‰ $n$ ä¸ªå¶å­èŠ‚ç‚¹ï¼Œæ ¹èŠ‚ç‚¹ä¸ºåˆç‚¹ï¼Œä¸”å­©å­æ’åˆ—çš„ç›¸å¯¹å¤§å°å…³ç³»æ˜¯å•è°ƒä¸Šå‡çš„æåˆæ ‘ä¸ªæ•°ã€‚æ³¨æ„åˆ° $g_i$ ä¹ŸåŒæ—¶è¡¨ç¤ºå­©å­æ’åˆ—ç›¸å¯¹å¤§å°å•è°ƒä¸‹é™çš„æåˆæ ‘ä¸ªæ•°ã€‚\n\nè€ƒè™‘ä¸€ä¸ªæåˆæ ‘æ˜¯åˆæ³•çš„ï¼Œå…¶æœ¬èº«èŠ‚ç‚¹çš„é™åˆ¶ï¼š\n\n- å¦‚æœä¸€ä¸ªç‚¹æ˜¯æç‚¹ï¼Œä»–çš„æ‰€æœ‰å„¿å­éƒ½æ˜¯æç‚¹ã€‚\n- å¦‚æœä¸€ä¸ªç‚¹æ˜¯åˆç‚¹ï¼Œä¸”ä»–çš„ä¸€ä¸ªå„¿å­ä¹Ÿæ˜¯åˆç‚¹ï¼Œé‚£ä¹ˆè¿™ä¸¤ä¸ªç‚¹çš„å•è°ƒæ€§ä¸€å®šæ°å¥½ç›¸åã€‚\n\næ ¹æ®è¿™ä¸¤æ¡æˆ‘ä»¬å¯ä»¥å¾—åˆ°å…³äºä¸Šè¿°ç”Ÿæˆå‡½æ•°çš„è‹¥å¹²ç­‰å¼ï¼š\n\n$$\n\\begin{aligned}\n&G(x)=\\sum_{k\\ge 2}(H(x)-G(x))^k & (1)\\\\\n&F(H(x))=H(x)-2G(x)-x & (2)\\\\\n\\end{aligned}\n$$\n\næ ¹æ® $(1)$ å¼æˆ‘ä»¬å¯ä»¥è§£å¾— $G(x)=\\dfrac{H^2(x)}{H(x)+1}$ã€‚\n\nåœ¨ $(2)$ å¼ä¸­å¸¦å…¥ $H(x)$ çš„å¤åˆé€† $I(x)$ï¼Œæœ‰\n\n$$\n\\begin{aligned}\n&F(H(I(x)))=H(I(x))-2G(I(x))-I(x)\\\\\n\\Rightarrow\\ &F(x)=x-\\dfrac{2x^2}{x+1}-I(x)\n\\end{aligned}\n$$\n\n$x-\\dfrac{2x^2}{x+1}$ éƒ¨åˆ†å¯¹ç­”æ¡ˆçš„è´¡çŒ®æ˜¯å®¹æ˜“è®¡ç®—çš„ï¼Œæ•…æˆ‘ä»¬çš„ç“¶é¢ˆåœ¨äºæ±‚å‡º $H(x)$ çš„å¤åˆé€† $I(x)$ã€‚\n\n### Step 2\n\nç°é—®é¢˜è½¬åŒ–ä¸ºï¼Œå¯¹äºæŸå‡½æ•° $\\displaystyle F(x)=\\sum_{i=1}^\\infty i!x^i$ï¼Œè®¡ç®—å…¶å¤åˆé€†ã€‚\n\nè€ƒè™‘ $F(x)$ æ»¡è¶³å¦‚ä¸‹å¾®åˆ†æ–¹ç¨‹ï¼ˆå¯ä»¥é€šè¿‡å…¶é€’æ¨å¼å¾—åˆ°ï¼‰\n\n$$\nF(x)=F'(x)\\cdot x^2+F(x)\\cdot x+x\n$$\n\nå¸¦å…¥å…¶å¤åˆé€† $G(x)$ å¾—åˆ°\n\n$$\n\\begin{aligned}\n&x=F'(G(x))\\cdot G^2(x)+ x\\cdot G(x)+G(x) \\\\\n\\Rightarrow\\ &x=\\frac{1}{G'(x)} G^2(x)+ x\\cdot G(x)+G(x) \\\\\n\\Rightarrow\\ &G^2(x)-G'(x)\\cdot x+(x+1)G(x)G'(x)=0\\\\\n\\end{aligned}\n$$\n\nè€ƒè™‘å…¶ä¸­æ¯ä¸€é¡¹éƒ½ç­‰äº $0$ï¼Œå¾—åˆ°é€’æ¨å¼ï¼š\n\n$$\ng_n=\\begin{cases}\n0&(n=0)\\\\\n1&(n=1)\\\\\n-\\sum_{i=1}^{n-1}(i+1)g_ig_{n-i}-\\sum_{i=2}^{n-1}ig_ig_{n-i+1}&(n\\ge 2)\n\\end{cases}\n$$\n\nå¯ä»¥åˆ†æ²» NTT æˆ–è€…åŠåœ¨çº¿å·ç§¯ã€‚\n\n## åæ€\n\né€šè¿‡è§‚å¯Ÿé˜¶ä¹˜çš„é€’æ¨å…¬å¼ï¼Œæˆ‘ä»¬å¾—åˆ°äº†å…³äºå…¶ç”Ÿæˆå‡½æ•°çš„ä¸€ä¸ªä¸€é˜¶å¸¸å¾®åˆ†æ–¹ç¨‹ï¼Œå¹¶ç”¨ä»¥è§£å†³å¤šé¡¹å¼å¤åˆé€†é—®é¢˜ï¼Œä»è€Œæä¾›äº†ä¸€ç§ä¸åŒäºæ‹‰æ ¼æœ—æ—¥åæ¼”çš„æ¨å¯¼æ–¹å¼ã€‚\n\næƒ³èµ·ä¹‹å‰åšçš„â€œç®€å•çš„æ™®åŠç»„è®¡æ•°â€ï¼Œè‡ªå·±åœ¨è¿™æ–¹é¢çš„æ°´å¹³ä»éœ€è®­ç»ƒåŠ å¼ºã€‚\n\n## ä»£ç \n\n```cpp\n#include<bits/stdc++.h>\nnamespace mem{ //v2.10.1 => size: 15.80KiB\n  #ifdef memset0\n  #else\n    #define MEM_FASTIO\n  #endif\n\n  #ifdef __SIZEOF_INT128__\n    #define MEM_INT128\n  #endif\n\n  #define __integer_mapper(func)    \\\n      func(int)                     \\\n      func(unsigned int)            \\\n      func(long long int)           \\\n      func(unsigned long long int)\n  #define __float_mapper(func)        \\\n      func(float)                     \\\n      func(double)                    \\\n      func(long double)\n\n  namespace stdval{\n    using i32=int;\n    using i64=long long;\n    using u32=unsigned;\n    using u64=unsigned long long;\n    using f32=float;\n    using f64=double;\n    using f96=long double;\n  #ifdef MEM_INT128\n    using i128=__int128_t;\n    using u128=__uint128_t;\n  #endif\n  }\n\n  namespace utils{\n    using std::cin;\n    using std::tie;\n    using std::get;\n    using std::cout;\n    using std::cerr;\n    using std::endl;\n    using std::swap;\n    using std::sort;\n    using std::find;\n    using std::copy;\n    using std::fill;\n    using std::unique;\n    using std::reverse;\n    using std::shuffle;\n    using std::function;\n    using std::make_pair;\n    using std::make_tuple;\n    using std::accumulate;\n    using std::lower_bound;\n    using std::upper_bound;\n    using std::max_element;\n    using std::min_element;\n    using std::next_permutation;\n  }\n\n  namespace random{\n    const int LuckyNumber=0726; // Kanbe Kotori's Birthday\n    std::mt19937 rng(LuckyNumber^std::chrono::steady_clock::now().time_since_epoch().count());\n    std::mt19937_64 rng64(LuckyNumber^std::chrono::steady_clock::now().time_since_epoch().count());\n\n    template<class T> inline T rand(T l,T r){return std::uniform_int_distribution<T>(l,r)(rng);}\n    template<class T> inline T rand64(T l,T r){return std::uniform_int_distribution<T>(l,r)(rng);}\n  }\n\n  namespace modint{\n    template<const int mod> struct Z{\n      int x;\n      inline Z(){x=0;}\n      inline Z(int t){x=t;}\n      inline Z(long long t){x=t%mod,x<0&&(x+=mod);}\n\n      inline void operator-=(Z a){(x-=a.x)<0&&(x+=mod);}\n      inline void operator+=(Z a){(x+=a.x)>=mod&&(x-=mod);}\n      inline void operator*=(Z a){x=(long long)x*a.x%mod;}\n\n      friend inline Z operator*(Z a,Z b){return (long long)a.x*b.x%mod;}\n      friend inline Z operator-(Z a,Z b){return ((a.x-=b.x)<0&&(a.x+=mod)),a;}\n      friend inline Z operator+(Z a,Z b){return ((a.x+=b.x)>=mod&&(a.x-=mod)),a;}\n    };\n\n    template<const int mod> inline Z<mod> finv(Z<mod> x){\n      if(x.x<2)return x;\n      return (mod-mod/x.x)*finv(mod%x.x);\n    }\n    template<const int mod> inline Z<mod> fpow(Z<mod> a,int b){\n      Z<mod> s=1;\n      for(;b;b>>=1,a=a*a)\n        if(b&1)s=s*a;\n      return s;\n    }\n\n    template<const int mod> inline void init_inverse(int n,Z<mod> *inv){\n      inv[0]=inv[1]=1;\n      for(int i=2;i<n;i++)inv[i]=(mod-mod/i)*inv[mod%i];\n    }\n    template<const int mod> inline void init_factorial(int n,Z<mod> *fac,Z<mod> *ifac){\n      fac[0]=1,init_inverse(n,ifac);\n      for(int i=1;i<n;i++)fac[i]=fac[i-1]*i,ifac[i]=ifac[i-1]*ifac[i];\n    }\n  }\n\n  namespace math{\n    using namespace stdval;\n    using std::max;\n    using std::min;\n    template<class T> inline T abs(T x){return x<0?-x:x;}\n    template<class T> inline T gcd(T n,T m){return m?gcd(m,n%m):n;}\n    template<class T> inline T lcm(T n,T m){return n/gcd(n,m)*m;}\n\n    struct FastDiv{\n      u64 t,i;\n      inline FastDiv(u64 p):t(u64(-1)/p),i(mul_inv(p)){}\n\n      inline bool divide(u64 n){return n*i<=t;}\n      inline bool divide(i64 n){return u64(n<0?-n:n)*i<=t;}\n      inline u64 mul_inv(u64 n){\n        u64 x=n;\n        for(int i=0;i<5;++i)x*=2-n*x;\n        return x;\n      }\n    };\n\n  #ifdef MEM_INT128\n    struct FastMod{\n      u64 m,b;\n      inline FastMod(u64 b):m(u64((u128(1)<<64)/b)),b(b){}\n\n      inline u64 reduce(u64 a){\n        u64 q=(u64)((u128(m)*a)>>64);\n        u64 r=a-q*b;\n        return r>=b?r-b:r;\n      }\n    };\n  #endif\n  }\n\n  namespace container{\n    using std::pair;\n    using std::tuple;\n    using std::set;\n    using std::multiset;\n    using std::unordered_set;\n    using std::unordered_multiset;\n    using std::map;\n    using std::multimap;\n    using std::unordered_map;\n    using std::unordered_multimap;\n    using std::queue;\n    using std::stack;\n    using std::priority_queue;\n    using std::deque;\n    using std::bitset;\n\n    using std::tie;\n    using std::get;\n    using std::make_pair;\n    using std::make_tuple;\n\n    template<class T> struct vector:std::vector<T>{\n      using std::vector<T>::vector;\n      using iterator=typename std::vector<T>::iterator;\n      using const_iterator=typename std::vector<T>::const_iterator;\n      vector():std::vector<T>(){}\n      explicit vector(const std::vector<T> &plain):std::vector<T>(plain){}\n\n      inline void reverse(){std::reverse(this->begin(),this->end());}\n      inline void unique(){this->erase(std::unique(this->begin(),this->end()),this->end());}\n      inline void concat(const vector &rhs){this->insert(this->end(),rhs.begin(),rhs.end());}\n      inline bool includes(const T &x) const{return std::find(this->begin(),this->end(),x)!=this->end();}\n      template<class Function> inline void forEach(Function func){for(const auto &it:*this)func(it);}\n\n      inline iterator find(const T &x){return std::find(this->begin(),this->end(),x);}\n      inline iterator lower_bound(const T &x){return std::lower_bound(this->begin(),this->end(),x);}\n      inline iterator upper_bound(const T &x){return std::upper_bound(this->begin(),this->end(),x);}\n      inline const_iterator find(const T &x)const{return std::find(this->begin(),this->end(),x);}\n      inline const_iterator lower_bound(const T &x)const{return std::lower_bound(this->begin(),this->end(),x);}\n      inline const_iterator upper_bound(const T &x)const{return std::upper_bound(this->begin(),this->end(),x);}\n\n      inline void sort(){std::sort(this->begin(),this->end());}\n      template<class Function> inline void sort(Function func){std::sort(this->begin(),this->end(),func);}\n\n      inline vector slice(int l,int r) const{\n        if(l>r)return {};\n        if(r<this->size())return vector(this->begin()+l,this->begin()+r);\n        vector rsp(this->begin()+l,this->end());\n        return rsp.resize(r-l),rsp;\n      }\n\n      inline void from(const std::set<T> &src){\n        this->resize(src.size());\n        auto it=this->begin();\n        for(const T e:src)*it++=e;\n      }\n\n      template<class R,class Function> inline vector<R> _map(Function func) const{\n        vector<R> res(this->size());\n        for(size_t i=0;i<this->size();i++)\n          res[i]=func(this->operator[](i));\n        return res;\n      }\n      template<class R> inline vector<R> map(R func(T)) const{return this->_map<R>(func);}\n      template<class R> inline vector<R> map(const std::function<R(T)> &func) const{return this->_map<R>(func);}\n    };\n\n    struct string:std::string{\n      using std::string::string;\n      string():std::string(\"\"){}\n      string(const std::string &plain):std::string(plain){}\n\n      template<class T> inline string join(const vector<T> &vet) const;\n\n      inline string slice(int l,int r) const{\n        if(l>r)return {};\n        if(r<this->size())return string(this->begin()+l,this->begin()+r);\n        string rsp(this->begin()+l,this->end());\n        return rsp.resize(r-l),rsp;\n      }\n\n      vector<string> split(const string &dim) const{\n        if(this->empty())return {};\n        char *src=new char[this->length()+1];\n        strcpy(src,this->c_str());\n        char *tar=new char[dim.length()+1];\n        strcpy(tar,dim.c_str());\n        vector<string> rsp;\n        for(char *pos=strtok(src,tar);pos;pos=strtok(nullptr,tar))\n          rsp.push_back(string(pos));\n        delete[] src;\n        delete[] tar;\n        return rsp;\n      }\n\n      template<class... Args> static inline string format(const char *fm,Args... args){\n        int len=snprintf(nullptr,0,fm,args...);\n        char *buf=new char[len+1];\n        snprintf(buf,len+1,fm,args...);\n        string str(buf);\n        delete[] buf;\n        return str;\n      }\n      template<class... Args> static inline string format(const string &fm,Args... args){\n        return format(fm.c_str(),args...);\n      }\n    };\n\n  #define __to_string(T)                   \\\n      inline string to_string(const T &x){ \\\n        return std::to_string(x);          \\\n      }\n    __float_mapper(__to_string)\n    __integer_mapper(__to_string)\n  #undef __to_string\n\n    inline string to_string(const string &s){return s;}\n    inline string to_string(const char *s){return string(s);}\n    inline string to_string(const std::string &s){return string(s);}\n    template<const int mod> inline string to_string(const modint::Z<mod> &v){return std::to_string(v.x);}\n\n    template<class T> inline string to_string(const vector<T> &ctn){return \"[\"+string(\",\").join(ctn)+\"]\";}\n    template<class T> inline string to_string(const set<T> &ctn){\n      string result=\"{\";\n      bool flag=false;\n      for(const auto &it:ctn){\n        if(flag)result+=\",\";\n        flag=true;\n        result+=to_string(it);\n      }\n      return result+\"}\";\n    }\n    template<class T1,class T2> inline string to_string(const map<T1,T2> &ctn){\n      string result=\"{\";\n      bool flag=false;\n      for(const auto &it:ctn){\n        if(flag)result+=\",\";\n        flag=true;\n        result+=to_string(it.first)+\":\"+to_string(it.second);\n      }\n      return result+\"}\";\n    }\n\n    template<class T> inline string string::join(const vector<T> &vet) const{\n      if(!vet.size())return \"\";\n      string res=to_string(vet[0]);\n      for(size_t i=1;i<vet.size();i++){\n        res+=*this;\n        res+=to_string(vet[i]);\n      }\n      return res;\n    }\n\n    inline string operator \"\" _s(const char *s){return string(s);}\n    inline string operator \"\" _s(const char *s,size_t len){return string(s,len);}\n    inline string operator \"\" _s(long double x){return to_string(x);}\n    inline string operator \"\" _s(unsigned long long int x){return to_string(x);}\n  }\n\n  namespace io{\n  #ifdef MEM_FASTIO\n    namespace fastio{\n      const int BUFFER=1<<18;\n      char ibuf[BUFFER],*iS,*iT;\n      inline int getc(){\n        if(iS==iT){\n          iT=(iS=ibuf)+fread(ibuf,1,BUFFER,stdin);\n          return iS==iT?EOF:*iS++;\n        }else{\n          return *iS++;\n        }\n      }\n      char obuf[BUFFER],*oS=obuf,*oT=oS+BUFFER-1;\n      inline void flush(){\n        fwrite(obuf,1,oS-obuf,stdout);\n        oS=obuf;\n      }\n      inline void putc(int x){\n        *oS++=x;\n        if(oS==oT)flush();\n      }\n      struct Flusher{~Flusher(){flush();}}flusher;\n    }\n    using fastio::getc;\n    using fastio::putc;\n    inline void flush(){fastio::flush(),fflush(stdout);}\n  #else\n    inline int getc(){return getchar();}\n    inline void putc(int c){putchar(c);}\n    inline void flush(){fflush(stdout);}\n  #endif\n\n    template<class T> inline void read_digit(T &x){x=getc(); while(!isdigit(x))x=getc();}\n    template<class T> inline void read_alpha(T &x){x=getc(); while(!isalpha(x))x=getc();}\n    template<class T> inline void read_lower(T &x){x=getc(); while(!islower(x))x=getc();}\n    template<class T> inline void read_upper(T &x){x=getc(); while(!isupper(x))x=getc();}\n    inline int read_digit(){int x; read_digit(x); return x;}\n    inline int read_alpha(){int x; read_alpha(x); return x;}\n    inline int read_lower(){int x; read_lower(x); return x;}\n    inline int read_upper(){int x; read_upper(x); return x;}\n\n  #define __read(T)                             \\\n      inline void read(T &x) {                  \\\n        x=0; bool f=0; char c=getc();           \\\n        while(!isdigit(c))f^=c=='-',c=getc();   \\\n        while(isdigit(c))x=x*10+c-'0',c=getc(); \\\n        if(f)x=-x;                              \\\n      }\n    __integer_mapper(__read)\n    #ifdef MEM_INT128\n      __read(__int128_t)\n      __read(__uint128_t)\n    #endif\n  #undef __read\n\n    inline void read(char &x){x=getc();}\n    inline void read(char *s){\n      char c=getc();\n      while(~c&&!isspace(c))*s++=c,c=getc();\n      *s++='\\0';\n    }\n    inline void read(container::string &s){\n      char c=getc();\n      s=\"\";\n      while(~c&&!isspace(c))s+=c,c=getc();\n    }\n    template<const int mod> inline void read(const modint::Z<mod> &x){read(x.x);}\n\n    template<class T=int> inline T read(){T x; read(x); return x;}\n    template<class T,class... Args> inline void read(T &x,Args &... args){\n      read(x),read(args...);\n    }\n\n  #define __print(T)           \\\n      inline void print(T x){  \\\n        if(x<0)putc('-'),x=-x; \\\n        if(x>9)print(x/10);    \\\n        putc('0'+x%10);        \\\n      }\n    __integer_mapper(__print)\n    #ifdef MEM_INT128\n      __print(__int128_t)\n      __print(__uint128_t)\n    #endif\n  #undef __print\n\n    inline void print(char x){putc(x);}\n    inline void print(const char *s){\n      size_t len=strlen(s);\n      for(size_t i=0;i<len;i++)putc(s[i]);\n    }\n    inline void print(const container::string &s){\n      for(size_t i=0;i<s.length();i++)putc(s[i]);\n    }\n    template<const int mod> inline void print(const modint::Z<mod> &x){print(x.x);}\n\n    template<class T,class... Args> inline void print(const T &x,Args... args){\n      print(x),print(args...);\n    }\n    template<class... Args> inline void println(Args... args){\n      print(args...),putc('\\n');\n    }\n\n    template<class... Args> inline void printfm(const char *formatter,Args... arguments){\n      print(container::string().format(formatter,arguments...));\n    }\n    template<class... Args> inline void printfm(const container::string &formatter,Args... arguments){\n      print(container::string().format(formatter,arguments...));\n    }\n  }\n\n  namespace logger{\n    enum ConsoleColor{\n      NOPE=-1,BLACK,RED,GREEN,YELLOW,BLUE,PURPLE,DEEPBLUE\n    };\n    template<const ConsoleColor color=NOPE,class... Args> inline void log(const char *formatter,Args... args){\n  #ifdef memset0\n      if(~color){\n        fprintf(stderr,\"\\033[%dm\",30+color);\n        fprintf(stderr,formatter,args...);\n        fprintf(stderr,\"\\033[0m\");\n      }else{\n        fprintf(stderr,formatter,args...);\n      }\n  #endif\n    }\n    template<const ConsoleColor color=NOPE,class... Args> inline void logln(const char *formatter,Args... args){\n  #ifdef memset0\n      if(~color){\n        fprintf(stderr,\"\\033[%dm\",30+color);\n        fprintf(stderr,formatter,args...);\n        fprintf(stderr,\"\\033[0m\\n\");\n      }else{\n        fprintf(stderr,formatter,args...);\n        fprintf(stderr,\"\\n\");\n      }\n  #endif\n    }\n    template<class T> inline void logs(const T &x){\n  #ifdef memset0\n      fprintf(stderr,container::to_string(x).c_str());\n  #endif\n    }\n    template<class T,class... Args> inline void logs(const T &x,Args... args){\n      logs(x),logs(args...);\n    }\n    template<class... Args> inline void logsln(Args... args){\n      logs(args...);\n  #ifdef memset0\n      fprintf(stderr,\"\\n\");\n  #endif\n    }\n  }\n\n  namespace fileio{\n    inline void file_input(const char *dir){freopen(dir,\"r\",stdin);}\n    inline void file_output(const char *dir){freopen(dir,\"w\",stdout);}\n    inline void file_input(const std::string &dir){file_input(dir.c_str());}\n    inline void file_output(const std::string &dir){file_output(dir.c_str());}\n    inline void file_input(const container::string &dir){file_input(dir.c_str());}\n    inline void file_output(const container::string &dir){file_output(dir.c_str());}\n\n    template<class T> inline void file_io(const T name){\n      using namespace container;\n      file_input(name+\".in\"_s);\n      file_output(name+\".out\"_s);\n    }\n\n    inline void fast_cpp_io(){\n      std::ios::sync_with_stdio(0);\n      std::cin.tie(0);\n      std::cout.tie(0);\n    }\n  }\n\n  #undef __integer_mapper\n  #undef __float_mapper\n  #undef __string_mapper\n  #undef __string_join_mapper\n\n  using namespace io;\n  using namespace math;\n  using namespace utils;\n  using namespace modint;\n  using namespace random;\n  using namespace stdval;\n  using namespace fileio;\n  using namespace logger;\n  using namespace container;\n} // namespace mem\n\nconst int N=1<<19,mod=998244353;\n\nnamespace polynomial{\n  namespace full{\n    using u32=unsigned;\n    using u64=unsigned long long;\n    using z=mem::modint::Z<mod>;\n\n    const u32 mod=::mod;\n    z fac[N],ifac[N];\n\n    inline z fpow(z a,int b){z s=1;for(;b;b>>=1,a=a*a)if(b&1)s=s*a;return s;}\n\n    struct poly:mem::container::vector<z>{\n      using mem::container::vector<z>::vector;\n      inline void input(){\n        for(int i=0;i<this->size();i++){\n          mem::io::read(this->operator[](i).x);\n        }\n      }\n      inline void output()const{\n        for(int i=0;i<this->size();i++){\n          mem::io::print(this->operator[](i).x);\n          if(i+1!=this->size())mem::io::putc(' ');\n        }\n        mem::io::putc('\\n');\n      }\n    };\n\n    namespace SimpleNTT{\n      u32 lim,shift,rev[N],w[N];\n      u64 a[N];\n      void dft_base_init(int N){\n        for(int wn,len=1;len<N;len<<=1){\n          wn=fpow(3,(mod-1)/(len<<1)).x,w[len]=1;\n          for(int i=1;i<len;i++)w[i+len]=((u64)w[i+len-1]*wn)%mod;\n        }\n      }\n      void dft_init(int len){\n        lim=1,shift=0;\n        while(lim<len)lim<<=1,++shift;\n        for(int i=0;i<lim;i++)rev[i]=(rev[i>>1]>>1)|((i&1)<<(shift-1));\n      }\n      void dft(u32 *f){\n        for(int i=0;i<lim;i++)a[rev[i]]=f[i];\n        for(int len=1;len<lim;len<<=1){\n          for(int i=0;i<lim;i+=(len<<1))\n            for(int j=0;j<len;j++){\n              u64 x=a[i+j],y=a[i+j+len]*w[j+len]%mod;\n              a[i+j]=x+y,a[i+j+len]=x+mod-y;\n            }\n          if(len==131072)for(int i=0;i<lim;i++)a[i]%=mod;\n        }\n        for(int i=0;i<lim;i++)f[i]=(u32)(a[i]%mod);\n      }\n      void idft(u32 *f){\n        dft(f);\n        std::reverse(f+1,f+lim);\n        u32 inv_lim=fpow((int)lim,mod-2).x;\n        for(int i=0;i<lim;i++)f[i]=(u64)f[i]*inv_lim%mod;\n      }\n    }\n\n    namespace FastNTT{ // source: skip2004, https://uoj.ac/submission/415571\n      const u32 mod2=mod<<1;\n      u32 lim,shift;\n      struct multi_integer{\n        u32 val,ival;\n        inline multi_integer(){}\n        inline explicit multi_integer(u32 v){val=v,ival=((u64)v<<32)/mod;}\n        inline u32 operator*(u32 x)const{return val*x-u32((u64)x*ival>>32)*mod;}\n      }wn[N|1],iwn[N|1];\n\n      inline u32 get(u32 x){return ((u64)x<<32)/mod;}\n      inline u32 norm1(u32 x){return x>=mod?x-mod:x;}\n      inline u32 norm2(u32 x){return x>=mod2?x-mod2:x;}\n      inline u32 pow(u32 a,u32 b,u32 ans=1){for(;b;b>>=1,a=(u64)a*a%mod)if(b&1)ans=(u64)ans*a%mod;return ans;}\n      inline u32 multi(u32 w,u32 idx){return wn[idx]*w;}\n      inline u32 div_lim(u32 x){return (x+(u64)(-x&lim-1)*mod)>>shift;}\n      inline void fold(u32 *a){for(int i=0;i<lim;i++)if(a[i]>=mod)a[i]-=mod;}\n\n      inline void dft_base_init(u32 len){\n        u32 N=1; for(;N<len;)N<<=1;\n        const u32 mid=N>>1,w=pow(3,mod/N),iw=pow((mod+1)/3,mod/N);\n        wn[mid]=iwn[mid]=multi_integer(1);\n        for(u32 i=1;i<mid;++i){\n          wn[mid+i]=multi_integer((u64)wn[mid+i-1].val*w%mod);\n          iwn[mid+i]=multi_integer((u64)iwn[mid+i-1].val*iw%mod);\n        }\n        for(u32 i=mid-1;(int)i>=0;--i)wn[i]=wn[i<<1],iwn[i]=iwn[i<<1];\n      }\n      inline void dft_init(u32 len){lim=1,shift=0;for(;lim<len;)lim<<=1,++shift;}\n\n      inline void dft(u32 *a){\n      #define trans(a,b,idx) { \\\n          const u32 A=norm2(a+b); \\\n          b=wn[idx]*(a+mod2-b),a=A; \\\n        }\n      #define trans2(a,b) { \\\n          const u32 A=norm2(a+b); \\\n          b=norm2(a+mod2-b),a=A; \\\n        }\n        if(lim==1)return;\n        if(lim==2){trans(a[0],a[1],1);return fold(a);}\n        if(lim==4){trans2(a[0],a[2])trans(a[1],a[3],3)trans(a[0],a[1],1)trans(a[2],a[3],1);return fold(a);}\n        for(int mid=lim>>1;mid>2;mid>>=1)\n          for(int j=0;j<lim;j+=mid+mid)\n            for(int k=0;k<mid;k+=4){\n              trans(a[j+k+0],a[mid+j+k+0],mid+k+0);\n              trans(a[j+k+1],a[mid+j+k+1],mid+k+1);\n              trans(a[j+k+2],a[mid+j+k+2],mid+k+2);\n              trans(a[j+k+3],a[mid+j+k+3],mid+k+3);\n            }\n        for(int j=0;j<lim;j+=8){\n          trans2(a[j+0],a[j+2])trans(a[j+1],a[j+3],3);\n          trans2(a[j+4],a[j+6])trans(a[j+5],a[j+7],3);\n        }\n        for(int j=0;j<lim;j+=8){\n          trans2(a[j+0],a[j+1])trans2(a[j+2],a[j+3]);\n          trans2(a[j+4],a[j+5])trans2(a[j+6],a[j+7]);\n        }\n        for(int i=0;i<lim;i++)if(a[i]>=mod)a[i]-=mod;\n        fold(a);\n      #undef trans\n      #undef trans2\n      }\n\n      inline void idft(u32 *a){\n      #define trans(a,b,idx) { \\\n          u32 _a=a,_b=b,A=norm2(_a),B=iwn[idx]*_b; \\\n          a=A+B,b=A+mod2-B; \\\n        }\n      #define trans2(a,b) { \\\n          const u32 A=norm2(a),B=norm2(b); \\\n          a=A+B,b=A+mod2-B; \\\n        }\n        if(lim==1)return;\n        if(lim==2){\n          const u32 A=a[0],B=a[1];\n          a[0]=div_lim(A+B),a[1]=div_lim(A+mod2-B);\n          return fold(a);\n        }\n        if(lim==4){\n          trans(a[0],a[1],1)trans(a[2],a[3],1)trans2(a[0],a[2])trans(a[1],a[3],3);\n          a[0]=div_lim(a[0]),a[1]=div_lim(a[1]),a[2]=div_lim(a[2]),a[3]=div_lim(a[3]);\n          return fold(a);\n        }\n        for(int j=0;j<lim;j+=8){\n          trans2(a[j+0],a[j+1])trans2(a[j+2],a[j+3]);\n          trans2(a[j+4],a[j+5])trans2(a[j+6],a[j+7]);\n        }\n        for(int j=0;j<lim;j+=8){\n          trans2(a[j+0],a[j+2])trans(a[j+1],a[j+3],3);\n          trans2(a[j+4],a[j+6])trans(a[j+5],a[j+7],3);\n        }\n        for(int mid=4;mid<lim;mid<<=1)\n          for(int j=0;j<lim;j+=mid+mid)\n            for(int k=0;k<mid;k+=4){\n              trans(a[j+k+0],a[mid+j+k+0],mid+k+0);\n              trans(a[j+k+1],a[mid+j+k+1],mid+k+1);\n              trans(a[j+k+2],a[mid+j+k+2],mid+k+2);\n              trans(a[j+k+3],a[mid+j+k+3],mid+k+3);\n            }\n        for(int i=0;i<lim;++i)a[i]=div_lim(a[i]);\n        fold(a);\n      #undef trans\n      #undef trans2\n      }\n    }\n\n    using namespace FastNTT;\n    inline void dft(z *a){dft((u32*)a);}\n    inline void idft(z *a){idft((u32*)a);}\n    inline void dft(poly &a){a.resize(lim),dft((u32*)&a[0]);}\n    inline void idft(poly &a){a.resize(lim),idft((u32*)&a[0]);}\n\n    inline poly mul(poly a,poly b,int len=-1){\n      if(!~len)len=(int)a.size()+(int)b.size()-1;\n      dft_init((int)a.size()+(int)b.size()-1);\n      dft(a),dft(b);\n      for(int i=0;i<lim;i++)a[i]*=b[i];\n      idft(a);\n      return a.resize(len),a;\n    }\n\n    inline poly operator+(poly a,const poly &b){\n      if(b.size()>a.size())a.resize(b.size());\n      for(int i=0;i<b.size();i++)a[i]+=b[i];\n      return a;\n    }\n    inline poly operator-(poly a,const poly &b){\n      if(b.size()>a.size())a.resize(b.size());\n      for(int i=0;i<b.size();i++)a[i]-=b[i];\n      return a;\n    }\n    inline poly operator*(const poly &a,const poly &b){\n      return mul(a,b,(int)a.size()+(int)b.size()-1);\n    }\n\n    struct PolynomialInit{PolynomialInit(){dft_base_init(N);}}_polynomial_initer;\n  }\n  using full::z;\n  using full::poly;\n  using full::dft_init;\n  using full::dft;\n  using full::idft;\n  using full::mul;\n}\n\nusing namespace mem;\nusing namespace polynomial;\n\nint type,n;\nz a[N],b[N],c[N],d[N],e[N],f[N],g[N];\n\nvoid solve(int l,int r){\n  if(l+1==r){\n    if(l==1)g[l]=1;\n//\t\tfor(int j=1;j<=l-1;j++)g[l]-=(j+1)*g[j]*g[l-j];\n//\t\tfor(int j=2;j<=l-1;j++)g[l]-=j*g[j]*g[l-j+1];\n    return;\n  }\n  int m=(l+r)>>1,n=(r-l)>>1;\n  solve(l,m);\n  using polynomial::full::lim;\n  if(l==0){\n    dft_init((n<<1)-1);\n    for(int i=0;i<n;i++)b[i]=g[i]*i;\n    memset(b+n,0,(lim-n)<<2),dft(b);\n    for(int i=0;i<n;i++)c[i]=g[i];\n    memset(c+n,0,(lim-n)<<2),dft(c);\n    for(int i=0;i<lim;i++)a[i]=b[i]+c[i];\n    for(int i=0;i<lim;i++)a[i]*=c[i],b[i]*=c[i];\n    idft(a);\n    idft(b);\n    for(int i=0;i<n;i++)g[m+i]-=a[n+i];\n    for(int i=0;i<n-1;i++)g[m+i]-=b[n+i+1];\n  }else{\n    dft_init(n*3);\n    for(int i=0;i<n;i++)b[i]=g[i+l]*(i+l);\n    memset(b+n,0,(lim-n)<<2),dft(b);\n    for(int i=0;i<n;i++)c[i]=g[i+l];\n    memset(c+n,0,(lim-n)<<2),dft(c);\n    for(int i=0;i<lim;i++)a[i]=b[i]+c[i];\n    for(int i=0;i<=(n<<1);i++)e[i]=g[i]*i;\n    memset(e+(n<<1)+1,0,(lim-(n<<1)-1)<<2),dft(e);\n    for(int i=0;i<=(n<<1);i++)f[i]=g[i];\n    memset(f+(n<<1)+1,0,(lim-(n<<1)-1)<<2),dft(f);\n    for(int i=0;i<lim;i++)d[i]=e[i]+f[i];\n    for(int i=0;i<lim;i++)a[i]*=f[i],b[i]*=f[i];\n    idft(a);\n    idft(b);\n    for(int i=0;i<lim;i++)d[i]*=c[i],e[i]*=c[i];\n    idft(d);\n    idft(e);\n    for(int i=0;i<n;i++)g[m+i]-=a[n+i]+d[n+i];\n    for(int i=0;i<n;i++)g[m+i]-=b[n+i+1]+e[n+i+1];\n    if((n<<1)==l)g[(l<<1)-1]+=g[l]*g[l]*l;\n  }\n//\tlog(\"solve(%d,%d)=>%d\\n\",l,r,g[5].x);\n  solve(m,r);\n}\n\nint main(){\n#ifdef memset0\n  freopen(\"1.in\",\"r\",stdin);\n#endif\n  read(type,n);\n  int lim=1;\n  while(lim<=n)lim<<=1;\n  solve(0,lim);\n//\tfor(int i=1;i<=n;i++)println(g[i]);\n  for(int i=1;i<=n;i++)f[i]=(i&1?2:mod-2)-g[i];\n  f[2]=2;\n  for(int i=1;i<=n;i++)if(type||i==n)println(f[i]);\n}\n```\n","publishedTitle":"ã€Œé›†è®­é˜Ÿä½œä¸š2020ã€æ˜¥å¤©ï¼Œåœ¨ç§¯é›ªä¸‹ç»“ä¸€æˆå½¢ï¼ŒæŠ½æå‘èŠ½"}},{"id":"fb4e799b-deeb-572a-94b1-81d190be41ad","fields":{"slug":"/oi/solution/loj3401/","plainText":"\n> ç»™ä¸€ä¸ªé•¿åº¦ä¸º $n$ çš„åºåˆ— $a_i$ï¼Œå’Œ $q$ ç»„è¯¢é—® $(l,r,x)$ï¼Œè¡¨ç¤ºæ±‚ $\\displaystyle\\prod_{i=l}^r\\left(1-\\frac{a_i}{x}\\right)$ çš„å€¼ã€‚å®æ•°è¾“å‡ºï¼Œç²¾åº¦è¦æ±‚ $10^{-6}$ã€‚\n>\n> $n,q\\le6\\times10^5,\\ 1\\leq a_i < x\\leq 10^9$ã€‚\n\n<!-- more -->\n\n## é¢˜è§£\n\næŒ‰ç…§ EI çš„è¯è¯´ï¼Œè¿™æ˜¯ä¸€ä¸ªè¯¯å·®åˆ†æé¢˜ã€‚\n\né¦–å…ˆéœ€è¦æ³¨æ„åˆ°è¿™ä¸ªå¼å­å¯ä»¥æ³°å‹’å±•å¼€ï¼š\n\n$$\n\\begin{aligned}\n &\\exp\\left(\\ln\\left(\\prod_{i=l}^r\\left(1-\\frac{a_i}{x}\\right)\\right)\\right) \\\\\n=&\\exp\\left(\\sum_{i=l}^r\\ln\\left(1-\\frac{a_i}{x}\\right)\\right) \\\\\n=&\\exp\\left(-\\sum_{i=l}^r\\sum_{k=1}^{L}\\frac{a_i^k}{k\\cdot x^k}\\right) \\\\\n\\end{aligned}\n$$\n\nç„¶è€Œï¼Œå¦‚æœç›´æ¥æ³°å‹’å±•å¼€ï¼Œéœ€è¦çš„ $L$ æ˜¯æ•°åä¸‡çº§åˆ«çš„ï¼Œæ— ç›Šäºæˆ‘ä»¬è§£å†³é—®é¢˜ã€‚\n\nè€ƒè™‘åˆ°å¯¼è‡´æ³°å‹’å±•å¼€ç²¾åº¦æŸå¤±çš„ä¸»è¦åŸå› ï¼Œæ˜¯å› ä¸ºå½“ $a_i/x$ è¾ƒå¤§æ—¶ï¼Œæˆ‘ä»¬å¯¹ $\\ln(1-a_i/x)$ çš„ç²¾åº¦è¦æ±‚å¾ˆé«˜ã€‚ç„¶è€Œï¼Œ$a_i/x$ è¾ƒå¤§æ—¶ï¼Œå¾ˆå®¹æ˜“å¯¼è‡´ç­”æ¡ˆå°äºæˆ‘ä»¬è¦æ±‚çš„ç²¾åº¦èŒƒå›´ã€‚\n\næ•…æˆ‘ä»¬ä¸å¦¨è®¾å®šä¸€ä¸ªé˜ˆå€¼ $R=0.5$ï¼Œå½“ $a_i/x\\le R$ æ—¶ï¼Œè€ƒè™‘çº¿æ®µæ ‘ç»´æŠ¤æ³°å‹’å±•å¼€ï¼›å¦åˆ™ï¼Œå½“ $a_i/x>R$ æ—¶ï¼Œä¼˜å…ˆæ‰¾å‡ºè¿™äº›ä½ç½®å¹¶æš´åŠ›è®¡ç®—ã€‚å½“ç­”æ¡ˆå°äºç²¾åº¦è¦æ±‚æ—¶å°±é€€å‡ºã€‚æš´åŠ›è®¡ç®—çš„æ¬¡æ•°æ˜¾ç„¶ä¸ä¼šè¶…è¿‡ $\\log_2 10^6$ æ¬¡ã€‚\n\nè¿™æ ·å°±å¾—åˆ°äº†ä¸€ä¸ª $O(n\\log^2L)$ çš„åšæ³•ï¼Œå®è·µå¾— $L$ å– $20$ å·¦å³å³å¯ã€‚\n\nå¯ä»¥é€šè¿‡æœ¬é¢˜ï¼Œä½†æ—¶é—´è¾ƒå¤§ã€‚å®é™…ä¸Šï¼Œçº¿æ®µæ ‘çš„éƒ¨åˆ†å¯ä»¥ç›´æ¥æ¢ä¸ºå‰ç¼€å’Œã€‚ä¸ºä»€ä¹ˆç²¾åº¦è¿˜åœ¨æ¥å—èŒƒå›´å†…å‘¢ï¼Ÿæ³¨æ„åˆ° $x>a_i$ å¯¹äºä»»æ„ $x$ å’Œä»»æ„ $i$ éƒ½æˆç«‹ã€‚å¦‚æœå‰ç¼€å’Œçš„éƒ¨åˆ†å› ä¸º $a_i$ å¤ªå°è¢«çœç•¥ï¼Œä»–æœ¬èº«å¯¹æ³°å‹’å±•å¼€çš„å½±å“ä¹Ÿæ˜¯è¢«çœç•¥çš„çº§åˆ«ã€‚æ¢å¥è¯è¯´ï¼Œå¯¹äºæ³°å‹’å±•å¼€çš„å€¼ï¼Œå‰ç¼€å’Œèƒ½ä¿è¯çš„ç²¾åº¦èŒƒå›´ï¼Œæ°ä¸º `double` æœ¬èº«çš„ç²¾åº¦èŒƒå›´ã€‚\n\næ‰€ä»¥ï¼Œç›´æ¥å°†ä¸Šè¿°åšæ³•ä¸­çš„çº¿æ®µæ ‘æ›¿æ¢ä¸ºå‰ç¼€å’Œå°±èƒ½åœ¨ $O(n\\log nL)$ çš„æ—¶é—´å¤æ‚åº¦å†…è§£å†³æœ¬é¢˜ã€‚~~ä¸‰ä¸ª log å¹´è½»äººä¸è®²æ­¦å¾·ã€‚~~\n\n## ä»£ç \n\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\nconst int N = 6e5 + 10, K = 20;\nconst double eps = 1e-10;\nint n, m, x, a[N], lg[N], st[20][N];\ndouble sum, ans;\nmt19937 rng(20040725);\ninline int better(int i, int j) { return a[i] < a[j] ? j : i; }\ninline int query(int l, int r) {\n  if (l == r) return l;\n  int k = lg[r - l];\n  return better(st[k][l], st[k][r - (1 << k)]);\n}\nstruct segment {\n  int l, r, mid;\n  double s[K];\n} p[N << 2];\nvoid build(int u, int l, int r) {\n  p[u].l = l, p[u].r = r, p[u].mid = (l + r) >> 1;\n  if (l == r) {\n    p[u].s[0] = a[l];\n    for (int i = 1; i < K; i++) p[u].s[i] = p[u].s[i - 1] * a[l];\n    return;\n  }\n  build(u << 1, l, p[u].mid);\n  build(u << 1 | 1, p[u].mid + 1, r);\n  for (int i = 0; i < K; i++) {\n    p[u].s[i] = p[u << 1].s[i] + p[u << 1 | 1].s[i];\n  }\n}\ndouble query(int u, int l, int r) {\n  if (p[u].l == l && p[u].r == r) {\n    double sum = 0;\n    for (int i = K - 1; i >= 0; i--) {\n      sum = (sum + p[u].s[i] / (i + 1)) / x;\n    }\n    return sum;\n  }\n  if (r <= p[u].mid) return query(u << 1, l, r);\n  if (l > p[u].mid) return query(u << 1 | 1, l, r);\n  return query(u << 1, l, p[u].mid) + query(u << 1 | 1, p[u].mid + 1, r);\n}\nvoid solve(int l, int r) {\n  if (l > r || ans < eps) {\n    return;\n  }\n  int pos = query(l, r);\n  if (a[pos] < (x >> 1)) {\n    ans *= exp(-query(1, l, r));\n    return;\n  }\n  ans *= 1 - a[pos] / (double)x;\n  if (rng() & 1) {\n    solve(l, pos - 1);\n    solve(pos + 1, r);\n  } else {\n    solve(pos + 1, r);\n    solve(l, pos - 1);\n  }\n}\nint main() {\n#ifdef memset0\n  freopen(\"1.in\", \"r\", stdin);\n#endif\n  cin.tie(0)->sync_with_stdio(0);\n  lg[0] = -1;\n  for (int i = 1; i < N; i++) lg[i] = lg[i >> 1] + 1;\n  cin >> n >> m;\n  for (int i = 1; i <= n; i++) cin >> a[i];\n  for (int i = 1; i < n; i++) {\n    st[0][i] = better(i, i + 1);\n  }\n  for (int i = 1; i < 20; i++)\n    for (int j = 1; j + (1 << i) <= n; j++) {\n      st[i][j] = better(st[i - 1][j], st[i - 1][j + (1 << (i - 1))]);\n    }\n  build(1, 1, n);\n  cout << fixed << setprecision(12);\n  for (int l, r, i = 1; i <= m; i++) {\n    cin >> l >> r >> x;\n    ans = 1;\n    solve(l, r);\n    cout << 1 - ans << endl;\n  }\n}\n```\n","publishedTitle":"ã€Œé›†è®­é˜Ÿä½œä¸š2020ã€Old Problem"}},{"id":"670ee843-1d97-533a-8680-86318efcd54e","fields":{"slug":"/oi/solution/loj6051/","plainText":"\n> ç»™å®šé•¿åº¦ä¸º $n$ çš„åºåˆ— $\\{a_i\\}$ï¼Œæ»¡è¶³ $a_0 \\geq a_1 \\geq \\cdots \\geq a_{n - 1} \\geq 0$ï¼Œæ±‚å‡ºåœ¨ $n$ ç»´ç©ºé—´ä¸­ä»ç‚¹ $(0, 0, \\ldots, 0)$ éšæœºæ¸¸èµ°åˆ°ç‚¹ $(a_0, a_1, \\ldots, a_{n - 1})$ï¼Œæ»¡è¶³ç»è¿‡çš„æ‰€æœ‰ç‚¹ $(x_0, x_1, \\ldots, x_{n - 1})$ éƒ½æœ‰ $x_0 \\geq x_1 \\geq \\cdots \\geq x_{n - 1}$ çš„æ¦‚ç‡ï¼Œéšæœºæ–¹å¼æ˜¯æ¯ä¸€æ­¥å‡åŒ€éšæœºä¸€ä¸ª $i\\in [1,n]\\cup \\mathbb N_+$ å¹¶ä»¤ $x_i:=x_i+1$ã€‚\n>\n> $1\\le n, a_i \\leq 5\\times 10^5$ã€‚ç­”æ¡ˆå¯¹ $1004535809$ å–æ¨¡ã€‚\n\n<!-- more -->\n\n## é¢˜è§£\n\nåˆ©ç”¨é’©å­å®šç†ç›¸å…³çŸ¥è¯†æˆ‘ä»¬å¯ä»¥ç›´æ¥å¾—åˆ°\n\n$$\nans = \\frac { \\displaystyle \\frac {m!} { \\prod\\limits_{(i, j) \\in \\lambda} h(i, j)}} { \\displaystyle \\frac {m!} {\\prod\\limits_{i=1}^n a_i} }\n$$\n\nå…¶ä¸­ $m = \\sum\\limits_{i=1}^n a_i$ï¼Œ$\\lambda$ æ˜¯ç¬¬ $i$ è¡Œé•¿åº¦ä¸º $a_i$ çš„æ¨è¡¨ï¼Œ$h_\\lambda(i, j)$ è¡¨ç¤ºæ¨è¡¨ $\\lambda$ ä¸­ç¬¬ $i$ è¡Œç¬¬ $j$ ä¸ªå…ƒç´ çš„é’©å­é•¿åº¦ã€‚\n\næ ¹æ®\n\n$$\n\\prod\\limits_{(i, j) \\in \\lambda} h_\\lambda(i, j)\n= \\frac { \\prod\\limits_{i=1}^n (a_i + n - i)! } { \\prod\\limits_{1 \\leq i < j \\leq n} \\left((a_i - i) - (a_j - j)\\right)}\n$$\n\né‚£ä¹ˆ\n\n$$\n\\begin{aligned}\nans\n&= \\frac { \\displaystyle \\frac {m! \\prod\\limits_{1 \\leq i < j \\leq n} \\left((a_i - i) - (a_j - j)\\right)} { \\prod\\limits_{i=1}^n (a_i + n - i)! }} { \\displaystyle \\frac {m!} {\\prod\\limits_{i=1}^n a_i} } \\\\\n&= \\frac { \\prod\\limits_{i=1}^n a_i} { \\prod\\limits_{i=1}^n (a_i + n - i)! } \\times \\prod\\limits_{1 \\leq i < j \\leq n} \\left((a_i - i) - (a_j - j)\\right)\n\\end{aligned}\n$$\n\nå‘ç°å¤„ç†çš„ç“¶é¢ˆåœ¨äºå³åŠéƒ¨åˆ†ã€‚\n\næ³¨æ„åˆ° $\\{a_i\\}_{i=1}^n$ ä¸ºä»…ä¸º $O(n)$ çº§åˆ«ã€‚å¹¶ä¸”ç”±äº $\\forall i < j ,\\; a_i \\geq a_j$ ï¼Œå¯å¾— $\\forall i < j, (a_i - i) > (a_j - j)$ ã€‚è€ƒè™‘å·ç§¯ä¼˜åŒ–ã€‚\n\nå¯ä»¥å¼€ä¸¤ä¸ªå¤šé¡¹å¼ï¼Œä¸€ä¸ªå¹‚æ¬¡ä¸º $(a_i - i)$ ä¸€ä¸ªå¹‚æ¬¡ä¸º $-(a_i - i)$ ï¼Œå·ç§¯ä¸€æ³¢åªå–å¹‚æ¬¡ä¸ºæ•´æ•°çš„å³å¯ã€‚ï¼ˆå¦‚æœç”± $i \\geq j$ çš„è´¡çŒ®è€Œæˆï¼Œä¸€å®šæ»¡è¶³å¹‚æ¬¡ $\\leq 0$ï¼‰ã€‚\n\næ—¶é—´å¤æ‚åº¦ $O(n \\log n)$ ã€‚\n\n<!-- more -->\n\n## ä»£ç \n\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\nusing ll = long long;\nconst int N = 4e6 + 10, mod = 1004535809;\nint n, l, tmp_n, tmp_m, ans = 1;\nint a[N], f[N], g[N], h[N], w[N], rev[N], fac[N], ifac[N];\nvoid setup(int *a, int &l, int n) { ++a[n], l = std::max(l, n); }\ninline int dec(int a, int b) {\n  a -= b;\n  return a < 0 ? a + mod : a;\n}\ninline int inc(int a, int b) {\n  a += b;\n  return a >= mod ? a - mod : a;\n}\ninline int mul(int a, int b) { return (ll)a * b - (ll)a * b / mod * mod; }\ninline int inv(int x) { return x < 2 ? 1 : mul(mod - mod / x, inv(mod % x)); }\ninline int fpow(int a, int b) {\n  int s = 1;\n  for (; b; b >>= 1, a = mul(a, a))\n    if (b & 1) s = mul(s, a);\n  return s;\n}\nvoid init_fac(int n) {\n  fac[0] = fac[1] = ifac[0] = ifac[1] = 1;\n  for (int i = 2; i <= n; i++) fac[i] = mul(fac[i - 1], i);\n  for (int i = 2; i <= n; i++) ifac[i] = mul(mod - mod / i, ifac[mod % i]);\n  for (int i = 2; i <= n; i++) ifac[i] = mul(ifac[i - 1], ifac[i]);\n}\nvoid ntt(int *a, int l) {\n  for (int i = 0; i < l; i++)\n    if (i < rev[i]) std::swap(a[i], a[rev[i]]);\n  for (int len = 1; len < l; len <<= 1)\n    for (int i = 0; i < l; i += (len << 1))\n      for (int j = 0; j < len; j++) {\n        int x = a[i + j], y = mul(a[i + j + len], w[j + len]);\n        a[i + j] = inc(x, y), a[i + j + len] = dec(x, y);\n      }\n}\nvoid mul(int *a, int *b, int *c, int n, int m, int &l) {\n  l = 1;\n  int k = 0;\n  while (l < n + m - 1) l <<= 1, ++k;\n  for (int i = 0; i < l; i++) rev[i] = (rev[i >> 1] >> 1) | ((i & 1) << (k - 1));\n  for (int wn, len = 1; len < l; len <<= 1) {\n    wn = fpow(3, (mod - 1) / (len << 1)), w[len] = 1;\n    for (int i = 1; i < len; i++) w[i + len] = mul(w[i + len - 1], wn);\n  }\n  int inv_l = inv(l);\n  ntt(a, l), ntt(b, l);\n  for (int i = 0; i < l; i++) c[i] = mul(a[i], b[i]);\n  std::reverse(c + 1, c + l), ntt(c, l);\n  for (int i = 0; i < l; i++) c[i] = mul(c[i], inv_l);\n}\nint main() {\n  cin.tie(0)->sync_with_stdio(0);\n  cin >> n;\n  for (int i = 1; i <= n; i++) cin >> a[i];\n  init_fac(n + a[1]);\n  for (int i = 1; i <= n; i++) {\n    ans = mul(ans, mul(fac[a[i]], ifac[a[i] + n - i]));\n    setup(f, tmp_n, a[i] - i + n);\n    setup(g, tmp_m, -a[i] + i + a[1]);\n  }\n  mul(f, g, h, tmp_n + 1, tmp_m + 1, l);\n  for (int i = 1, d = n + a[1]; i + d < l; i++) {\n    ans = mul(ans, fpow(i, h[i + d]));\n  }\n  cout << ans << endl;\n}\n```\n","publishedTitle":"ã€Œé›…ç¤¼é›†è®­2017ã€PATH"}},{"id":"2a213b19-7b25-5667-bf3f-9bd2c712b1fa","fields":{"slug":"/oi/solution/loj6380/","plainText":"\n> å®šä¹‰åŒºé—´æ ‘ä¸ºçº¿æ®µæ ‘çš„æ‹“å±•ï¼Œå³æ¯æ¬¡æ–­å¼€çš„ä½ç½®å¯ä»¥ä¸æ˜¯çº¿æ®µçš„ä¸­å¿ƒã€‚\n>\n> ç»™å®šä¸€ä¸ª $[1, n]$ çš„åŒºé—´æ ‘å’Œ $q$ æ¬¡è¯¢é—®ï¼Œæ¯æ¬¡è¯¢é—®åŒ…å«ä¸€ä¸ªæ­£æ•´æ•° $k$, ä½ éœ€è¦æ±‚å‡ºæœ‰å¤šå°‘åŒºé—´çš„æ—¶é—´å¤æ‚åº¦æ°å¥½ç­‰äº $k$ã€‚\n>\n> $n, q\\le 10^5,\\ k\\le 10^9$ã€‚\n\n<!-- more -->\n\n## é¢˜è§£\n\nåœ¨çº¿å›ç­”è¯¢é—®æ— æ„ä¹‰ï¼Œè€ƒè™‘åˆ©ç”¨ç”Ÿæˆå‡½æ•°å¤„ç†å‡ºæ‰€æœ‰è¯¢é—®çš„ç­”æ¡ˆã€‚\n\nè¯¢é—® $[l;r]$ é€‰ä¸­çš„çº¿æ®µï¼ˆ$ql=l \\land qr=r$ çš„çº¿æ®µï¼Œè€Œéç»è¿‡çš„çº¿æ®µï¼‰ï¼ŒLCA å¾€ä¸¤ä¾§æ·±åº¦å•è°ƒå‡ï¼ˆä¸”ä¸­é—´å¹³çš„ä¸€æ®µçš„é•¿åº¦è‡³å¤šä¸º $2$ï¼‰ã€‚\n\næ±‚å‡ºå¾€ä¸¤ä¾§å•è°ƒçš„ç”Ÿæˆå‡½æ•°åˆå¹¶ï¼Œç±»ä¼¼ï¼š\n\n$$\nL_u(x) = x (1 + L_l(x) + x (L_r(x) - x)) = x L_l(x) + x^2 L_r(x) + x - x^3 \\\\\nR_u(x) = x (1 + R_r(x) + x (R_l(x) - x)) = x R_r(x) + x^2 R_l(x) + x - x^3 \\\\\n$$\n\nå…¶ä¸­ $L,R$ åˆ†åˆ«è¡¨ç¤ºå·¦/å³ç«¯ç‚¹å’Œå½“å‰çº¿æ®µçš„å·¦/å³ç«¯ç‚¹ç›¸åŒçš„çº¿æ®µï¼ˆä¸åŒ…æ‹¬å®Œå…¨ç›¸åŒçš„æƒ…å†µï¼‰çš„ç”Ÿæˆå‡½æ•°ï¼Œ$u$ æ˜¯å½“å‰èŠ‚ç‚¹ï¼Œ$l$ æ˜¯å·¦å„¿å­ï¼Œ$r$ æ˜¯å³å„¿å­ã€‚\n\nå¤„ç†ä¸€äº›å¹³å‡¡æƒ…å†µï¼Œåœ¨æ–­ç‚¹è®¡ç®—è´¡çŒ®ï¼š\n\n$$\nS_u(x) = x^{dep_u} (R_l(x) L_r(x) - x^2 + 1)\n$$\n\nå°±èƒ½åšåˆ° $\\text{polylog} \\times \\sum \\small{\\text{çº¿æ®µé•¿åº¦}}$ å¤æ‚åº¦ã€‚\n\nè¿›ä¸€æ­¥ä¼˜åŒ–å¤æ‚åº¦ï¼Œè€ƒè™‘è¾¹åˆ†æ²»ï¼šå‡è®¾å½“å‰å¤„ç†å­æ ‘ $u$ï¼Œè¾¹åˆ†çš„å­æ ‘ $v$ã€‚é€’å½’å¤„ç†å‡º $u \\leftrightarrow v$ çš„è·¯å¾„ä¸Šçš„ $S,L,R$ã€‚ä¸‹é¢è€ƒè™‘ $L_v,R_v$ å¯¹è·¯å¾„ä¸Šç‚¹çš„ $S$ å’Œ $u$ çš„ $L,R$ çš„è´¡çŒ®ã€‚\n\nå‰è€…å¯ä»¥åˆ†åˆ«è€ƒè™‘ $L_v,R_v$ çš„è´¡çŒ®ï¼Œé€šè¿‡ä¸¤æ¬¡å·ç§¯å¾—åˆ°ã€‚åè€…åˆ™æ˜¯è·¯å¾„ä¸Šçš„ $L,R$ é€šè¿‡ä¸€å®šä½ç§»å¾—åˆ°ã€‚\n\nè‡³äºå¤„ç†å¯ä»¥åˆ†åˆ«åœ¨ä¸¤ä¾§ç»§ç»­è¾¹åˆ†ã€‚å¤æ‚åº¦ $O(n \\log^2 n)$ã€‚\n\n## ä»£ç \n\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\nconst int N = 2e5 + 10, mod = 998244353;\nint _, n, m, cnt, siz[N], vis[N], mid[N], ch[N][2], fa[N], l[N], r[N], dep[N], rev[N << 2];\nstruct z {\n  int x;\n  z(int x = 0) : x(x) {}\n  friend inline z operator*(z a, z b) { return (long long)a.x * b.x % mod; }\n  friend inline z operator-(z a, z b) { return (a.x -= b.x) < 0 ? a.x + mod : a.x; }\n  friend inline z operator+(z a, z b) { return (a.x += b.x) >= mod ? a.x - mod : a.x; }\n} w[N << 2];\nvector<z> ans;\ninline z fpow(z a, int b) {\n  z s = 1;\n  for (; b; b >>= 1, a = a * a)\n    if (b & 1) s = s * a;\n  return s;\n}\nvoid dft(vector<z> &a, int lim) {\n  a.resize(lim);\n  for (int i = 0; i < lim; i++)\n    if (i < rev[i]) swap(a[i], a[rev[i]]);\n  for (int len = 1; len < lim; len <<= 1)\n    for (int i = 0; i < lim; i += (len << 1))\n      for (int j = 0; j < len; j++) {\n        z x = a[i + j], y = a[i + j + len] * w[j + len];\n        a[i + j] = x + y, a[i + j + len] = x - y;\n      }\n}\nvector<z> operator+(vector<z> a, const vector<z> &b) {\n  a.resize(max(a.size(), b.size()));\n  for (int i = 0; i < b.size(); i++) a[i] = a[i] + b[i];\n  return a;\n}\nvector<z> operator-(vector<z> a, const vector<z> &b) {\n  a.resize(max(a.size(), b.size()));\n  for (int i = 0; i < b.size(); i++) a[i] = a[i] - b[i];\n  return a;\n}\nvector<z> operator*(vector<z> a, vector<z> b) {\n  int len = a.size() + b.size() - 1, lim = 1, k = 0;\n  while (lim < len) lim <<= 1, ++k;\n  for (int i = 0; i < lim; i++) rev[i] = rev[i >> 1] >> 1 | ((i & 1) << (k - 1));\n  dft(a, lim), dft(b, lim);\n  for (int i = 0; i < lim; i++) a[i] = a[i] * b[i];\n  dft(a, lim), reverse(&a[1], &a[lim]);\n  z inv = fpow(lim, mod - 2);\n  for (int i = 0; i < lim; i++) a[i] = a[i] * inv;\n  return a.resize(len), a;\n}\nvoid shift(z x, vector<z> &dst, size_t dta) {\n  dst.resize(max(dst.size(), dta + 1));\n  dst[dta] = dst[dta] + x;\n}\nvoid shift(const vector<z> &src, vector<z> &dst, size_t dta) {\n  dst.resize(max(dst.size(), src.size() + dta));\n  for (int i = 0; i < src.size(); i++) dst[i + dta] = dst[i + dta] + src[i];\n}\nvoid dfsInit(int &u, int l, int r, int dep) {\n  if (l == r) {\n    u = n - 1 + l;\n  } else {\n    u = ++cnt;\n    dfsInit(ch[u][0], l, mid[u], dep + 1), fa[ch[u][0]] = u;\n    dfsInit(ch[u][1], mid[u] + 1, r, dep + 1), fa[ch[u][1]] = u;\n  }\n  ::l[u] = l, ::r[u] = r, ::dep[u] = dep;\n}\nint calcSize(int u) {\n  if (!u || vis[u]) return 0;\n  return siz[u] = 1 + calcSize(ch[u][0]) + calcSize(ch[u][1]);\n}\npair<int, int> findSubTree(int u, int lim) {\n  if (!u || vis[u]) return {-1, -1};\n  if (siz[u] < lim) return {u, siz[u]};\n  pair<int, int> x = ch[u][0] ? findSubTree(ch[u][0], lim) : make_pair(-1, -1);\n  pair<int, int> y = ch[u][1] ? findSubTree(ch[u][1], lim) : make_pair(-1, -1);\n  return x.second > y.second ? x : y;\n}\nvoid calc(bool fl, int u, int mov, vector<z> &f) {\n  if (vis[u] || l[u] == r[u]) return shift(1, f, mov + 1);\n  shift(1, f, mov + 1);\n  shift(mod - 1, f, mov + 3);\n  calc(fl, ch[u][0], mov + (fl ? 2 : 1), f);\n  calc(fl, ch[u][1], mov + (fl ? 1 : 2), f);\n}\npair<vector<z>, vector<z>> fuck(int u) {\n  if (vis[u] || l[u] == r[u]) return {{0, 1}, {0, 1}};\n  vector<z> Ll, Lr, Rl, Rr, Lu, Ru;\n  Lu = Ru = vector<z>{0, 1, 0, mod - 1};\n  tie(Ll, Rl) = fuck(ch[u][0]);\n  tie(Lr, Rr) = fuck(ch[u][1]);\n  shift(Ll, Lu, 1), shift(Lr, Lu, 2);\n  shift(Rr, Ru, 1), shift(Rl, Ru, 2);\n  shift(Rl * Lr, ans, dep[u]);\n  return {Lu, Ru};\n}\npair<vector<z>, vector<z>> solve(int u) {\n  if (vis[u] || l[u] == r[u]) return {{0, 1}, {0, 1}};\n  int siz = calcSize(u);\n  int v = findSubTree(u, (siz * 2) / 4).first;\n  if (v == -1) return fuck(u);\n  vector<z> Lu, Ru, Lv, Rv, Lt, Rt, T;\n  tie(Lv, Rv) = solve(v);\n  vis[v] = 1;\n  tie(Lu, Ru) = solve(u);\n  vis[v] = 0;\n  int lmov = 0, rmov = 0;\n  for (int p = v; p != u; lmov += ch[fa[p]][0] == p ? 1 : 2, rmov += ch[fa[p]][0] == p ? 2 : 1, p = fa[p]) {\n    int f = fa[p], q = ch[f][0] == p ? ch[f][1] : ch[f][0];\n    if (ch[f][0] == p) {\n      T.clear(), calc(0, q, 0, T), shift(T, Lt, rmov + dep[f] - dep[u]);\n    } else {\n      T.clear(), calc(1, q, 0, T), shift(T, Rt, lmov + dep[f] - dep[u]);\n    }\n  }\n  shift(mod - 1, Lv, 1);\n  shift(mod - 1, Rv, 1);\n  shift(Lv * Rt, ans, dep[u]);\n  shift(Rv * Lt, ans, dep[u]);\n  shift(Lv, Lu, lmov);\n  shift(Rv, Ru, rmov);\n  return {Lu, Ru};\n}\nvoid solution() {\n  for (int i = 1; i < n; i++) cin >> mid[i];\n  dfsInit(_, 1, n, 1);\n  solve(1);\n  for (int i = 1; i < (n << 1); i++) shift(1, ans, dep[i]);\n  for (int i = 1; i < n; i++) shift(mod - 1, ans, dep[i] + 2);\n  for (int i = 1, q; i <= m; i++) {\n    cin >> q;\n    cout << (q < ans.size() ? ans[q].x : 0) << '\\n';\n  }\n}\nvoid recycle() {\n  cnt = 0;\n  ans.clear();\n  memset(ch, 0, sizeof(ch));\n  memset(fa, 0, sizeof(fa));\n}\nint main() {\n  cin.tie(0)->sync_with_stdio(0);\n  for (int len = 1; len < (N << 1); len <<= 1) {\n    z wn = fpow(3, (mod - 1) / (len << 1));\n    w[len] = 1;\n    for (int i = 1; i < len; i++) w[i + len] = w[i + len - 1] * wn;\n  }\n  while (cin >> n >> m) solution(), recycle();\n}\n```\n","publishedTitle":"ã€Œæ˜¯ç”·äººå°±è¿‡8é¢˜â€”â€”Pony.aiã€IntervalTree"}},{"id":"4b4c831d-3036-5f17-a72c-78ae013d3c73","fields":{"slug":"/oi/solution/luogu6579/","plainText":"\n> ç»™æ•°ç»„ $A$ å’Œ $n$ ä¸ªèŠ‚ç‚¹çš„æ ‘ï¼Œæ¯ä¸ªç‚¹æœ‰ä¸€ä¸ª $1$ åˆ° $x$ é¢œè‰²ã€‚\n>\n> $m$ æ¬¡æŸ¥è¯¢ï¼Œæ¯æ¬¡æŸ¥è¯¢æ ‘ä¸Šåªä¿ç•™ $[l,r]$ å†…çš„æ‰€æœ‰èŠ‚ç‚¹ï¼Œè®¾ä¸€ä¸ªæå¤§è¿é€šå—ä¸­å‡ºç°å¥‡æ•°æ¬¡æ•°çš„é¢œè‰²ä¸ªæ•°ä¸º $t$ï¼Œåˆ™å…¶å¯¹ç­”æ¡ˆçš„è´¡çŒ®ä¸º $A_t$ ï¼Œå³ç­”æ¡ˆæ˜¯æ‰€æœ‰è¿é€šå—è´¡çŒ®çš„å’Œï¼Œè¯¢é—®ç›¸äº’ç‹¬ç«‹ã€‚\n>\n> $1\\leq n,m\\leq 10^5$ï¼Œ$1\\leq x,A_i \\leq 10^4$ã€‚\n\n<!-- more -->\n\n## é¢˜è§£\n\n~~é€€å½¹é€‰æ‰‹è¢« lxl æŠ“è¿‡æ¥å†™é¢˜è§£~~\n\nè€ƒè™‘ç”¨å•å¢è«é˜Ÿç»´æŠ¤ï¼Œæƒ³äº†æƒ³å®¹æ˜“å‘ç°å¤æ‚åº¦ä¸å¯¹ã€‚\n\nè«é˜Ÿçš„ç«¯ç‚¹ç§»åŠ¨éœ€è¦å¯å‘å¼åˆå¹¶ç»´æŠ¤ä¿¡æ¯ï¼Œè€Œå¯å‘å¼åˆå¹¶çš„å¤æ‚åº¦åŸºäºæˆ‘ä»¬å¯ä»¥æŠŠåŠ¿èƒ½å‡æ‘Šï¼Œå¦‚æœæˆ‘ä»¬åœ¨åˆ†å—æ—¶åŸºäºåŠ¿èƒ½å‘¢ï¼Ÿ\n\nå•å¢è«é˜Ÿçš„å¤æ‚åº¦ä¸»è¦äº§ç”Ÿäºä»¥ä¸‹ä¸¤ä¸ªéƒ¨åˆ†ï¼ˆå‡è®¾æŠŠè¯¢é—®åˆ†ä¸º $S$ å—ï¼‰ï¼š\n\n- å·¦ç«¯ç‚¹å·¦ç§»ï¼šå¯¹äºæ¯ä¸ªç«¯ç‚¹éƒ½ä¼šè´¡çŒ® $O(S)$ï¼Œæ•…è¿™ä¸€éƒ¨åˆ†çš„æ€»åŠ¿èƒ½æ˜¯ $O(S n \\sqrt n)$ çš„\n- å³ç«¯ç‚¹å³ç§»ï¼šæ¯ä¸ªå—å†…çš„è¯¢é—®ä¼šå¯¹æ¯ä¸ªå—å†…çš„ç«¯ç‚¹è´¡çŒ® $O(1)$ æ¬¡ï¼Œå¯ä»¥é€šè¿‡æ„é€ è¯¢é—®åˆ†å¸ƒï¼Œå¡æ»¡è¿™éƒ¨åˆ†çš„åŠ¿èƒ½å’Œã€‚\n- å›æ»šåç¼€çš„å³ç«¯ç‚¹å³ç§»æ“ä½œï¼šå›æ»šæ“ä½œäºå¢åŠ æ“ä½œå¤æ‚åº¦ç›¸åŒã€‚\n\n~~æœ‰æ²¡æœ‰æ•‘å‘¢ï¼Ÿå½“ç„¶æ˜¯æœ‰çš„ã€‚~~æ³¨æ„å·¦ç«¯ç‚¹çš„ç§»åŠ¨åŠ¿èƒ½æ˜¯åªå’Œå—æ•°ç›¸å…³çš„ã€‚ç“¶é¢ˆåœ¨äºå³ç«¯ç‚¹çš„ç§»åŠ¨ï¼šå¯¹äºä¸€ä¸ªåŒºé—´ $[l,r]$ï¼Œç«¯ç‚¹ $i$ åœ¨å³ç«¯ç‚¹ç§»åŠ¨æ—¶è´¡çŒ®çš„åŠ¿èƒ½ä¸º $A_i$ï¼Œåˆ™ä¸€æ¬¡ç»è¿‡è¯¥åŒºé—´çš„è¯¢é—®äº§ç”Ÿçš„åŠ¿èƒ½è‡³å¤šä¸º $\\sum_{i=l+1}^r A_i$ã€‚\n\nç†æ¸…æ€è·¯åé¢˜è§£å°±å¾ˆæ˜¾ç„¶äº†ï¼Œæˆ‘ä»¬å…ˆå¤„ç†å‡ºæ¯ä¸ªç«¯ç‚¹çš„åŠ¿èƒ½ $B_i$ï¼ˆåœ¨ $1 \\ldots (i-1)$ åæ’å…¥ $i$ è´¡çŒ®çš„åŠ¿èƒ½ï¼Œä¸Šæ–‡æåˆ°çš„åŠ¿èƒ½ $A_i$ æ˜¯ä¸€å®šæœ‰ $A_i \\leq B_i$ çš„ï¼‰ã€‚ç„¶åä»å³åˆ°å·¦å¯¹åŠ¿èƒ½åˆ†å—ã€‚\n\nå¦‚æœåŠ å…¥å½“å‰ç«¯ç‚¹åå½“å‰æ ˆå†…ç«¯ç‚¹çš„åŠ¿èƒ½å’Œå¤§äº $\\sqrt {n} \\log n$ å°±å°†æ ˆå†…å…ƒç´ åˆ†ä¸ºä¸€å—ã€‚ç”±äºæ‰€æœ‰è¢«åˆ†é…åˆ°è¿™ä¸ªå—çš„è¯¢é—®éƒ½æ˜¯ç»è¿‡å—çš„ä¸ä¼šè´¡çŒ®åŠ¿èƒ½çš„å·¦ç«¯ç‚¹ï¼Œè€Œå…¶ä½™ç«¯ç‚¹è´¡çŒ®çš„åŠ¿èƒ½å’Œæ˜¯ä¸€å®šå°äº $\\sqrt n \\log n$ çš„ã€‚\n\næ€»æ—¶é—´å¤æ‚åº¦ $O((n+Q)\\sqrt n \\log n)$ã€‚\n\n## å¡å¸¸æŠ€å·§\n\næœ¬é¢˜å¡å¸¸çš„ä¸€æ¯”ï¼Œæ¯’ç˜¤ lxlï¼ˆï¼ˆ\n\n1. æ‰‹åŠ¨è°ƒæ•´å—å¤§å°\n2. ä½œæ ˆ/é˜Ÿåˆ—åŠŸèƒ½çš„ `std::vector<T>` æ¢æˆæ‰‹å†™ï¼ˆä¸çŸ¥é“ä¸ºä»€ä¹ˆæˆ‘åšåˆ°è¿™è¿™æ­¥å°±è¿‡äº†ï¼‰\n3. æ‰‹å†™ bitsetï¼ˆæˆ‘é¸½äº†ï¼‰\n4. æ‰‹å†™å¯åˆå¹¶çš„ vectorï¼ˆç„¶è€Œæˆ‘æ‰‹å†™äº†ä¸€ä¸ªè¿˜æ‰“ä¸è¿‡ `std::vector<T>`ï¼Œæˆ‘å·²ç»æŠ¥è­¦äº†ï¼‰\n\n## ä»£ç \n\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\n#pragma GCC target(\"avx\")\n#pragma GCC target(\"popcnt\")\n#pragma GCC optimize(2)\n#pragma GCC optimize(3)\n#pragma GCC optimize(\"Ofast\")\n#pragma GCC optimize(\"unroll-loops\")\n#pragma GCC optimize(\"inline-functions\")\n#pragma GCC optimize(\"no-stack-protector\")\n#pragma GCC optimize(\"inline-functions-called-once\")\n#define log(...) fprintf(stderr, __VA_ARGS__)\n#define debug log(\"\\33[2mPassing [%s] in LINE %d\\33[0m\\n\", __FUNCTION__, __LINE__);\nconst int S = 1 << 21;\nchar ibuf[S], *iS, *iT, obuf[S], *oS = obuf, *oT = oS + S - 1;\n#define flush() (fwrite(obuf, 1, oS - obuf, stdout), oS = obuf, void())\n#define getchar() (iS == iT ? (iT = (iS = ibuf) + fread(ibuf, 1, S, stdin), (iS == iT ? EOF : *iS++)) : *iS++)\n#define putchar(x) (*oS++ = (x), oS == oT ? flush() : void())\nstruct Flusher_ {\n  ~Flusher_() { flush(); }\n} flusher_;\ntemplate <class T> inline void read(T &x) {\n  x = 0;\n  int c = getchar(), f = 0;\n  while (!isdigit(c)) f ^= c == '-', c = getchar();\n  while (isdigit(c)) x = x * 10 + c - '0', c = getchar();\n  if (f) x = -x;\n}\ntemplate <class T> inline void print(T x) {\n  if (x < 0) putchar('-'), x = -x;\n  if (x > 9) print(x / 10);\n  putchar(x % 10 + '0');\n}\ntemplate <class T> inline void print(T x, char c) { print(x), putchar(c); }\nconst int N = 1e5 + 9, M = 1e4 + 9, S1 = 256, S2 = 4;\nint n, m, x, blocks, a[N], c[N], bln[N], anc[N], pre[N], siz[N], ans[N];\nvector<int> G[N];\ntemplate <class T, int N> struct static_vector {\n  T a[N];\n  size_t top;\n  inline T &operator[](size_t k) { return a[k]; }\n  inline T operator[](size_t k) const { return a[k]; }\n  inline T &back() { return a[top - 1]; }\n  inline T back() const { return a[top - 1]; }\n  inline void clear() { top = 0; }\n  inline void pop_back() { top--; }\n  inline void push_back(const T &e) { a[top++] = e; }\n  inline size_t size() { return top; }\n};\nstruct query {\n  int l, r, id;\n};\nvector<query> q;\nnamespace tree {\nint ans, delta, anc[N];\nbool roll, mrk[N];\nbitset<M> mem[N / S2 + 5];\nstatic_vector<size_t, (N / S2 + 5)> rub;\nstatic_vector<tuple<int, int, int>, (N << 1)> history;\nstruct unicom_block {\n  int id, cnt, bitset, key[S2];\n  vector<int> vec;\n  inline unicom_block() { bitset = -1, memset(key, -1, sizeof(key)); }\n  inline void clear() {\n    if (~bitset) mem[bitset].reset(), rub.push_back(bitset), bitset = -1;\n    cnt = 0, vec.clear(), memset(key, -1, sizeof(key));\n  }\n  inline void pushup(int k) {\n    ans -= a[cnt];\n    if (~bitset) {\n      if (mem[bitset][k]) {\n        mem[bitset][k] = 0, --cnt;\n      } else {\n        mem[bitset][k] = 1, ++cnt;\n      }\n    } else {\n      for (int i = 0; i < S2; i++)\n        if (key[i] == k) {\n          key[i] = -1, --cnt;\n          goto out;\n        }\n      for (int i = 0; i < S2; i++)\n        if (key[i] == -1) {\n          key[i] = k, ++cnt;\n          goto out;\n        }\n      bitset = rub.back(), rub.pop_back();\n      mem[bitset][k] = 1, ++cnt;\n      for (int i = 0; i < S2; i++) mem[bitset][key[i]] = 1;\n    }\n  out:\n    ans += a[cnt];\n  }\n} uni[N];\ninline void merge(unicom_block &u, unicom_block &v) {\n  for (int i : u.vec) v.pushup(i);\n}\nint find(int x) { return x == anc[x] ? x : find(anc[x]); }\nvoid reset() {\n  ans = roll = 0;\n  for (int i = 1; i <= n; i++) {\n    anc[i] = i;\n    if (mrk[i]) uni[i].clear(), mrk[i] = 0;\n  }\n}\nvoid add(int x) {\n  ans += a[0];\n  if (roll) delta += a[0];\n  if (roll) history.push_back({0, x, 0});\n  mrk[x] = 1;\n  uni[x].vec.push_back(c[x]), uni[x].pushup(c[x]);\n  for (int i = 0; i < G[x].size(); i++)\n    if (mrk[G[x][i]]) {\n      int y = G[x][i], u = find(x), v = find(y);\n      if (uni[u].vec.size() > uni[v].vec.size()) swap(u, v);\n      if (roll) history.push_back({u, v, anc[u]});\n      merge(uni[u], uni[v]);\n      uni[v].vec.insert(uni[v].vec.end(), uni[u].vec.begin(), uni[u].vec.end()), anc[u] = v;\n      ans -= a[uni[u].cnt];\n      if (roll) delta -= a[uni[u].cnt];\n    }\n}\nint query() { return ans; }\nvoid rollback() {\n  ans -= delta, delta = 0;\n  for (int u, v, t, i = (int)history.size() - 1; i >= 0; i--) {\n    tie(u, v, t) = history[i];\n    if (u) {\n      anc[u] = t;\n      for (int i : uni[u].vec) uni[v].vec.pop_back();\n      merge(uni[u], uni[v]);\n    } else {\n      mrk[v] = 0, uni[v].pushup(c[v]), uni[v].clear();\n    }\n  }\n  history.clear();\n}\n} // namespace tree\nstruct block {\n  int id, l, r;\n  vector<query> q;\n  void init() {\n    for (int i = l; i <= r; i++) bln[i] = id;\n  }\n  void solve() {\n    sort(q.begin(), q.end(), [](const query &a, const query &b) { return a.l > b.l; });\n    tree::reset();\n    int cur = l, i;\n    for (const auto &it : q) {\n      while (it.l <= cur) tree::add(cur--);\n      for (tree::roll ^= 1, i = l + 1; i <= it.r; i++) tree::add(i);\n      ans[it.id] = tree::query();\n      tree::roll ^= 1, tree::rollback();\n    }\n  }\n} block[S1 << 1];\nvoid build() {\n  function<int(int)> find = [&](int x) { return anc[x] == x ? x : anc[x] = find(anc[x]); };\n  for (int i = 1; i <= n; i++) anc[i] = i, siz[i] = 1;\n  for (int u = 1; u <= n; u++) {\n    for (int v : G[u])\n      if (v < u) {\n        int fu = find(u), fv = find(v);\n        if (fu == fv) continue;\n        if (siz[fu] > siz[fv]) swap(fu, fv);\n        pre[u] += siz[fu], anc[fu] = fv, siz[fv] += siz[fu];\n      }\n    pre[u] += G[u].size();\n  }\n  int S = accumulate(pre + 1, pre + n + 1, 0) / S1 + 1;\n  fprintf(stderr, \"> block limit = %d\\n\", S);\n  vector<tuple<int, int, int>> seq = {{n + 1, n, 0}};\n  for (int i = n; i >= 1; i--) {\n    get<0>(seq.back())--, get<2>(seq.back()) += pre[i];\n    if (i == 1 || get<2>(seq.back()) + pre[i] > S) seq.push_back({i, i - 1, 0});\n  }\n  seq.pop_back(), reverse(seq.begin(), seq.end()), blocks = seq.size();\n  for (int _, i = 0; i < blocks; i++) {\n    tie(block[i].l, block[i].r, _) = seq[i];\n    block[i].id = i, block[i].init();\n  }\n}\nvoid solve() {\n  for (int i = 1; i <= n; i++) tree::uni[i].id = i;\n  for (const auto &it : q)\n    if (bln[it.l] == bln[it.r]) {\n      tree::reset();\n      for (int i = it.l; i <= it.r; i++) tree::add(i);\n      ans[it.id] = tree::query();\n    } else {\n      block[bln[it.r]].q.push_back(it);\n    }\n  for (int i = 0; i < blocks; i++) block[i].solve();\n}\nint main() {\n#ifdef memset0\n  freopen(\"1.in\", \"r\", stdin);\n  freopen(\"1.out\", \"w\", stdout);\n#endif\n  for (int i = 0; i < N / S2 + 5; i++) tree::rub.push_back(i);\n  read(n), read(m), read(x);\n  for (int i = 1; i <= n; i++) read(c[i]), --c[i];\n  for (int u, v, i = 1; i < n; i++) {\n    read(u), read(v);\n    G[u].push_back(v), G[v].push_back(u);\n  }\n  for (int i = 0; i <= x; i++) read(a[i]);\n  build();\n  for (int l, r, i = 1; i <= m; i++) {\n    read(l), read(r);\n    q.push_back({l, r, i});\n  }\n  solve();\n  for (int i = 1; i <= m; i++) print(ans[i], '\\n');\n}\n```\n\n## æ‰‹å†™ vector ä¸”æ²¡é€šè¿‡çš„ä»£ç \n\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\n#pragma GCC target(\"avx\")\n#pragma GCC target(\"popcnt,tune=native\")\n#pragma GCC optimize(2)\n#pragma GCC optimize(3)\n#pragma GCC optimize(\"Ofast\")\n#pragma GCC optimize(\"unroll-loops\")\n#pragma GCC optimize(\"inline-functions\")\n#pragma GCC optimize(\"no-stack-protector\")\n#pragma GCC optimize(\"inline-functions-called-once\")\nconst int S = 1 << 21;\nchar ibuf[S], *iS, *iT, obuf[S], *oS = obuf, *oT = oS + S - 1;\n#define flush() (fwrite(obuf, 1, oS - obuf, stdout), oS = obuf, void())\n#define getchar() (iS == iT ? (iT = (iS = ibuf) + fread(ibuf, 1, S, stdin), (iS == iT ? EOF : *iS++)) : *iS++)\n#define putchar(x) (*oS++ = (x), oS == oT ? flush() : void())\nstruct Flusher_ {\n  ~Flusher_() { flush(); }\n} flusher_;\ntemplate <class T> inline void read(T &x) {\n  x = 0;\n  int c = getchar(), f = 0;\n  while (!isdigit(c)) f ^= c == '-', c = getchar();\n  while (isdigit(c)) x = x * 10 + c - '0', c = getchar();\n  if (f) x = -x;\n}\ntemplate <class T> inline void print(T x) {\n  if (x < 0) putchar('-'), x = -x;\n  if (x > 9) print(x / 10);\n  putchar(x % 10 + '0');\n}\ntemplate <class T> inline void print(T x, char c) { print(x), putchar(c); }\nconst int N = 1e5 + 9, M = 1e4 + 9, S1 = 256, S2 = 4;\nint n, m, x, blocks, a[N], c[N], bln[N], anc[N], pre[N], siz[N], ans[N];\nvector<int> G[N];\nstruct query {\n  int l, r, id;\n};\nvector<query> q;\ntemplate <class T, int N> struct static_vector {\n  T a[N];\n  size_t top;\n  inline T &operator[](size_t k) { return a[k]; }\n  inline T operator[](size_t k) const { return a[k]; }\n  inline T &back() { return a[top - 1]; }\n  inline T back() const { return a[top - 1]; }\n  inline void clear() { top = 0; }\n  inline void pop_back() { top--; }\n  inline void push_back(const T &e) { a[top++] = e; }\n  inline size_t size() { return top; }\n};\nint mempool[N << 5], *mempointer = mempool;\nint *memselect(int n) {\n  int *res = mempointer;\n  mempointer += n;\n  return res;\n}\nstruct combinable_vector {\n  int lim;\n  int *l, *r;\n  inline size_t size() const { return r - l; }\n  inline void clear() { r = l; }\n  inline void assign() { l = r = memselect(lim = 8); }\n  inline void re_assign() {\n    int *tl = l, *tr = r;\n    lim <<= 3, l = memselect(lim), r = l + (tr - tl);\n    memcpy(l, tl, size() << 2);\n  }\n  inline void push_back(int x) {\n    if (size() == lim) re_assign();\n    *(r++) = x;\n  }\n  inline void pop_back() { r--; }\n  inline void concat(const combinable_vector &rhs) {\n    if (size() + rhs.size() > lim) re_assign();\n    memcpy(r, rhs.l, rhs.size() << 2), r += rhs.size();\n  }\n  inline void concat_reverse(const combinable_vector &rhs) { r -= rhs.size(); }\n};\nnamespace tree {\nint ans, delta, anc[N];\nbool roll, mrk[N];\nbitset<M> mem[N / S2 + 5];\nstatic_vector<size_t, (N / S2 + 5)> rub;\nstatic_vector<tuple<int, int, int>, (N << 1)> history;\nstruct unicom_block {\n  int id, cnt, bitset, key[S2];\n  combinable_vector vec;\n  inline unicom_block() { bitset = -1, memset(key, -1, sizeof(key)), vec.assign(); }\n  inline void clear() {\n    if (~bitset) mem[bitset].reset(), rub.push_back(bitset), bitset = -1;\n    cnt = 0, vec.clear(), memset(key, -1, sizeof(key));\n  }\n  inline void pushup(int k) {\n    ans -= a[cnt];\n    if (~bitset) {\n      if (mem[bitset][k]) {\n        mem[bitset][k] = 0, --cnt;\n      } else {\n        mem[bitset][k] = 1, ++cnt;\n      }\n    } else {\n      for (int i = 0; i < S2; i++)\n        if (key[i] == k) {\n          key[i] = -1, --cnt;\n          goto out;\n        }\n      for (int i = 0; i < S2; i++)\n        if (key[i] == -1) {\n          key[i] = k, ++cnt;\n          goto out;\n        }\n      bitset = rub.back(), rub.pop_back();\n      mem[bitset][k] = 1, ++cnt;\n      for (int i = 0; i < S2; i++) mem[bitset][key[i]] = 1;\n    }\n  out:\n    ans += a[cnt];\n  }\n} uni[N];\ninline void merge(unicom_block &u, unicom_block &v) {\n  for (int *it = u.vec.l; it != u.vec.r; it++) v.pushup(*it);\n}\nint find(int x) { return x == anc[x] ? x : find(anc[x]); }\nvoid reset() {\n  ans = roll = 0;\n  for (int i = 1; i <= n; i++) {\n    anc[i] = i;\n    if (mrk[i]) uni[i].clear(), mrk[i] = 0;\n  }\n  mempointer = mempool;\n  for (int i = 1; i <= n; i++) uni[i].vec.assign();\n}\nvoid add(int x) {\n  ans += a[0];\n  if (roll) delta += a[0];\n  if (roll) history.push_back({0, x, 0});\n  mrk[x] = 1, uni[x].pushup(c[x]);\n  uni[x].vec.push_back(c[x]);\n  for (int i = 0; i < G[x].size(); i++)\n    if (mrk[G[x][i]]) {\n      int y = G[x][i], u = find(x), v = find(y);\n      if (uni[u].vec.size() > uni[v].vec.size()) swap(u, v);\n      if (roll) history.push_back({u, v, anc[u]});\n      merge(uni[u], uni[v]);\n      anc[u] = v;\n      uni[v].vec.concat(uni[u].vec);\n      ans -= a[uni[u].cnt];\n      if (roll) delta -= a[uni[u].cnt];\n    }\n}\nint query() { return ans; }\nvoid rollback() {\n  ans -= delta, delta = 0;\n  for (int u, v, t, i = (int)history.size() - 1; i >= 0; i--) {\n    tie(u, v, t) = history[i];\n    if (u) {\n      anc[u] = t;\n      merge(uni[u], uni[v]);\n      uni[v].vec.concat_reverse(uni[u].vec);\n    } else {\n      mrk[v] = 0, uni[v].pushup(c[v]), uni[v].clear();\n    }\n  }\n  history.clear();\n}\n} // namespace tree\nstruct block {\n  int id, l, r;\n  vector<query> q;\n  void init() {\n    for (int i = l; i <= r; i++) bln[i] = id;\n  }\n  void solve() {\n    sort(q.begin(), q.end(), [](const query &a, const query &b) { return a.l > b.l; });\n    tree::reset();\n    int cur = l, i;\n    for (const auto &it : q) {\n      while (it.l <= cur) tree::add(cur--);\n      for (tree::roll ^= 1, i = l + 1; i <= it.r; i++) tree::add(i);\n      ans[it.id] = tree::query();\n      tree::roll ^= 1, tree::rollback();\n    }\n  }\n} block[S1 << 1];\nvoid build() {\n  function<int(int)> find = [&](int x) { return anc[x] == x ? x : anc[x] = find(anc[x]); };\n  for (int i = 1; i <= n; i++) anc[i] = i, siz[i] = 1;\n  for (int u = 1; u <= n; u++) {\n    for (int v : G[u])\n      if (v < u) {\n        int fu = find(u), fv = find(v);\n        if (fu == fv) continue;\n        if (siz[fu] > siz[fv]) swap(fu, fv);\n        pre[u] += siz[fu], anc[fu] = fv, siz[fv] += siz[fu];\n      }\n    pre[u] += G[u].size();\n  }\n  int S = accumulate(pre + 1, pre + n + 1, 0) / S1 + 1;\n  fprintf(stderr, \"> block limit = %d\\n\", S);\n  vector<tuple<int, int, int>> seq = {{n + 1, n, 0}};\n  for (int i = n; i >= 1; i--) {\n    get<0>(seq.back())--, get<2>(seq.back()) += pre[i];\n    if (i == 1 || get<2>(seq.back()) + pre[i] > S) seq.push_back({i, i - 1, 0});\n  }\n  seq.pop_back(), reverse(seq.begin(), seq.end()), blocks = seq.size();\n  for (int _, i = 0; i < blocks; i++) {\n    tie(block[i].l, block[i].r, _) = seq[i];\n    block[i].id = i, block[i].init();\n  }\n}\nvoid solve() {\n  for (int i = 1; i <= n; i++) tree::uni[i].id = i;\n  for (const auto &it : q)\n    if (bln[it.l] == bln[it.r]) {\n      tree::reset();\n      for (int i = it.l; i <= it.r; i++) tree::add(i);\n      ans[it.id] = tree::query();\n    } else {\n      block[bln[it.r]].q.push_back(it);\n    }\n  for (int i = 0; i < blocks; i++) block[i].solve();\n}\nint main() {\n#ifdef memset0\n  freopen(\"1.in\", \"r\", stdin);\n  freopen(\"1.out\", \"w\", stdout);\n#endif\n  for (int i = 0; i < N / S2 + 5; i++) tree::rub.push_back(i);\n  read(n), read(m), read(x);\n  for (int i = 1; i <= n; i++) read(c[i]), --c[i];\n  for (int u, v, i = 1; i < n; i++) {\n    read(u), read(v);\n    G[u].push_back(v), G[v].push_back(u);\n  }\n  for (int i = 0; i <= x; i++) read(a[i]);\n  build();\n  for (int l, r, i = 1; i <= m; i++) {\n    read(l), read(r);\n    q.push_back({l, r, i});\n  }\n  solve();\n  for (int i = 1; i <= m; i++) print(ans[i], '\\n');\n}\n```\n","publishedTitle":"ã€ŒYnoi2019ã€ç¾å¥½çš„æ¯ä¸€å¤©~ ä¸è¿ç»­çš„å­˜åœ¨"}},{"id":"4c1ed000-9f57-5e29-b271-86948ba613e7","fields":{"slug":"/oi/solution/luogu5655/","plainText":"\n> ç»™å®šä¸€ä¸ªé•¿åº¦ä¸º $n$ çš„æ•°ç»„ $\\{a_i\\}_{i=1}^n$ï¼Œ$Q$ æ¬¡è¯¢é—®ï¼Œæ¯æ¬¡ç»™å®š $l$ å’Œ $r$ æŸ¥è¯¢\n>\n> $$\\operatorname*{lcm}_{i=l}^r a_i$$\n>\n> ç­”æ¡ˆå¯¹ $10^9+7$ å–æ¨¡ï¼Œå¤šç»„æ•°æ®ã€‚\n>\n> $T,n,Q \\leq 300,\\ a_i \\leq 10^{18}$ã€‚\n\n<!-- more -->\n\n## é¢˜è§£\n\næŠŠ $< 10^{4.5}$ çš„è´¨æ•°åˆ†å¼€æ¥å¤„ç†ï¼Œè¿™æ ·å‰©ä½™æ¯ä¸ªæ•°è‡³å¤šå‰©ä½™ $3$ ä¸ªä¸åŒçš„è´¨å› å­ã€‚è€ƒè™‘æˆ‘ä»¬ä¸éœ€æŠŠæ¯ä¸ªæ•°åˆ†è§£è´¨å› æ•°ï¼Œåªéœ€è¦èƒ½å¤Ÿæ„é€ ä¸€ä¸ªç­‰ä»·çš„è´¨æ•°é›†åˆå³å¯ã€‚æ„é€ æ–¹æ³•å¦‚ä¸‹ï¼š\n\nå¯¹äºæ‰€æœ‰ $1 \\leq i < j \\leq n$ï¼Œå°† $\\gcd(a_i, a_j), a_i / \\gcd(a_i, a_j), a_j / \\gcd(a_i, a_j)$ åŠ å…¥åˆ°é›†åˆ $S$ ä¸­ã€‚å°†å…¶ä¸­å­˜åœ¨ $S$ ä¸­çš„æ•°ä½œä¸ºå› æ•°çš„æ•°åˆ æ‰ï¼Œå‰©ä¸‹çš„é›†åˆå°±æ˜¯ä¸€ä¸ªåˆæ³•çš„è´¨æ•°é›†åˆã€‚\n\næ¥ä¸‹æ¥çš„ä¸€ä¸ªæœ´ç´ åšæ³•æ˜¯è«é˜Ÿï¼Œéœ€è¦ä¸€äº›ç²¾å¦™çš„å®ç°ä½¿å¾—é‚£ä¸ª $\\log$ æ˜¯åŠ ä¸Šå»çš„è€Œä¸æ˜¯ä¹˜ä¸Šå»çš„ã€‚\n\n1. ä¼šç”¨åˆ°è´¨æ•°çš„å¿«é€Ÿå¹‚ï¼Œè¿™ä¸ªå¯ä»¥é¢„å¤„ç†\n2. ç›¸å½“äºå¯¹äºæ¯ä¸ªè´¨æ•°ç»´æŠ¤ä¸€ä¸ªå‡ºç°æ¬¡æ•°é›†åˆï¼Œæ”¯æŒåŠ å‡å’ŒæŸ¥è¯¢æœ€å¤§çš„å‡ºç°æ¬¡æ•°ã€‚é¦–å…ˆç»´æŠ¤ä¸€ä¸ªæ¡¶æ¥å»é‡ï¼Œç„¶åå¼€ä¸€ä¸ª long longï¼Œå¹¶æ¯æ¬¡æŸ¥è¯¢æœ€é«˜çš„ $1$ å‡ºç°çš„ä½ç½®ã€‚\n\næ—¶é—´å¤æ‚åº¦è¿‘ä¼¼äº $O(n^3 \\log n)$ï¼Œéœ€è¦ä¸€äº›ç²¾ç»†çš„å®ç°ã€‚\n\n## ä»£ç \n\n> ä¸€åº¦è·å¾— TLE çš„å¥½æˆç»©ï¼Œåæ¥åœ¨ zx2003 å“¥å“¥çš„å¸®åŠ©ä¸‹å¡äº†åŠå¤©ç»ˆäºå¡è¿›å»äº†ã€‚\n\n```cpp\n#include<bits/stdc++.h>\n#define ll long long\n#define ull unsigned long long\n#define pair std::pair<int,int>\nconst int N=310,M=32000,L=5000,mod=1e9+7;\nnamespace io {\n\tconst int SIZE = (1 << 21) + 1;\n\tchar ibuf[SIZE], *iS, *iT, obuf[SIZE], *oS = obuf, *oT = oS + SIZE - 1, c, qu[55]; int f, qr;\n\t// getchar\n\t#define gc() (iS == iT ? (iT = (iS = ibuf) + fread (ibuf, 1, SIZE, stdin), (iS == iT ? EOF : *iS ++)) : *iS ++)\n\t// print the remaining part\n\tinline void flush () {\n\t\tfwrite (obuf, 1, oS - obuf, stdout);\n\t\toS = obuf;\n\t}\n\t// putchar\n\tinline void putc (char x) {\n\t\t*oS ++ = x;\n\t\tif (oS == oT) flush ();\n\t}\n\t// input a signed integer\n\tinline char gch(){\n\t\tchar c=gc();for(;isspace(c);c=gc());\n\t\treturn c;\n\t}\n\tinline void gs(char*c){\n\t\tchar x=gc();for(;isspace(x);x=gc());\n\t\tfor(;!isspace(x);x=gc())*c++=x;*c=0;\n\t}\n\ttemplate <class I>\n\tinline void gi (I &x) {\n\t\tfor (f = 1, c = gc(); c < '0' || c > '9'; c = gc()) if (c == '-') f = -1;\n\t\tfor (x = 0; c <= '9' && c >= '0'; c = gc()) x = x * 10 + (c & 15); x *= f;\n\t}\n\t// print a signed integer\n\ttemplate <class I>\n\tinline void print (I x) {\n\t\tif (!x) putc ('0'); if (x < 0) putc ('-'), x = -x;\n\t\twhile (x) qu[++ qr] = x % 10 + '0',  x /= 10;\n\t\twhile (qr) putc (qu[qr --]);\n\t}\n\t//no need to call flush at the end manually!\n\tstruct Flusher_ {~Flusher_(){flush();}}io_flusher_;\n}\nstruct ExactDiv {\n  ExactDiv() {}\n  ExactDiv(ull n){\n  \tfor(z=0;!(n&1);++z,n>>=1);\n  \tt=((ull)-1) / n;\n\ti=mul_inv(n);\n  }\n  ull mul_inv(ull n) {\n    ull x = n;\n    for (int i = 0; i < 6; ++i) x *= 2 - n * x;\n    return x;\n  }\n  inline bool divide(const ull&n) { return ((n>>z<<z)==n) && (n>>z)*this->i<=this->t; }\n  inline bool ck(const ll&n){\n  \treturn n>=0 && divide(n);\n  }\n  ull t, i,z;\n}ediv[M],el[L];\nint T,n,m,l,tl,pc,sqn,p[L],ans[N],vis[M],bln[N],pri[M];ll a[N],ls[L],pw[L][65],ipw[L][65];\nstd::vector<ll> fac;\nstd::vector<pair> v[N];\nconst int Z=1005;\nint gg[Z][Z];\nint C;\ntemplate<class T> inline T gcd(T x,T y){++C;return x<Z && y<Z?gg[x][y]:(y?gcd(y,x%y):x);}\nstruct query{\n\tint l,r,id;\n\tinline bool operator<(const query &other)const{\n\t\treturn bln[l]==bln[other.l]?(r<other.r)==(bln[l]&1):l<other.l;\n//\t\treturn bln[l]==bln[other.l]?r<other.r:l<other.l;\n\t}\n}q[N];\ninline int fpow(int a,int b){\n\tint s=1;\n\tfor(;b;b>>=1,a=(ll)a*a%mod)if(b&1)s=(ll)s*a%mod;\n\treturn s;\n}\nint buc[L][65],mx[L];\nint tot=1,zcnt;\ninline void add(const std::vector<pair> &vet){\n\tfor(auto it:vet){\n\t\tif(mx[it.first]){\n\t\t\tif(ls[it.first])tot=tot*ipw[it.first][mx[it.first]]%mod;\n\t\t\t\telse --zcnt;\n\t\t}\n\t\t++buc[it.first][it.second];\n\t\tmx[it.first]=std::max(mx[it.first],it.second);\n\t\tif(mx[it.first]){\n\t\t\tif(ls[it.first])tot=tot*pw[it.first][mx[it.first]]%mod;\n\t\t\t\telse ++zcnt;\n\t\t}\n\t}\n}\ninline void del(const std::vector<pair> &vet){\n\tfor(auto it:vet){\n\t\tif(mx[it.first]){\n\t\t\tif(ls[it.first])tot=tot*ipw[it.first][mx[it.first]]%mod;\n\t\t\t\telse --zcnt;\n\t\t}\n\t\t--buc[it.first][it.second];\n\t\tfor(mx[it.first]=p[it.first];mx[it.first] && !buc[it.first][mx[it.first]];--mx[it.first]);\n\t\tif(mx[it.first]){\n\t\t\tif(ls[it.first])tot=tot*pw[it.first][mx[it.first]]%mod;\n\t\t\t\telse ++zcnt;\n\t\t}\n\t}\n}\ninline ll fpow2(ll x,ll y,ll mo){\n\tll ans=1;\n\tfor(;y;y>>=1,x=(__int128)x*x%mo)if(y&1)ans=(__int128)x*x%mo;\n\treturn ans;\n}\ninline bool ck(ll x){\n\tfor(int i=1;pri[i]<=10;++i)if(fpow2(pri[i],x-1,x)!=1)return 0;\n\treturn 1;\n}\nstruct hmp{\nstatic const int mo=1999;\nint h[mo],nxt[mo],xb;ll v[mo];\ninline void insert(ll x){\n\tif(x==1)return;\n\tint z=x%mo,i=h[z];\n\tfor(;i && v[i]!=x;i=nxt[i]);\n\tif(!i)nxt[++xb]=h[z],h[z]=xb,v[xb]=x;\n}\n}ss;\nint main(){\n\tfor(int i=2;i<M;i++){\n\t\tif(!vis[i])pri[++pc]=i;\n\t\tfor(int j=1;j<=pc&&i*pri[j]<M;j++){\n\t\t\tvis[i*pri[j]]=1;\n\t\t\tif(i%pri[j]==0)break;\n\t\t}\n\t}\n\tfor(int i=1;i<=pc;++i)ediv[i]=pri[i];\n\tfor(int i=0;i<Z;++i)for(int j=0;j<Z;++j)gg[i][j]=!i || !j?i+j:(i>j?gg[i-j][j]:gg[i][j-i]);\n\tfor(io::gi(T);T--;){\n\t\tio::gi(n),io::gi(m),sqn=sqrt(n),l=0,fac.clear();\n\t\tfor(int i=1;i<=n;i++)io::gi(a[i]),bln[i]=i/sqn,v[i].clear();\n\t\tfor(int i=1;i<=m;i++)io::gi(q[i].l),io::gi(q[i].r),q[i].id=i,ans[i]=1;\n\t\tstatic int id[M];memset(id+1,0,pc<<2);\n\t\tfor(int i=1;i<=n;i++)\n\t\t\tfor(int j=1,cnt;j<=pc;j++)if(ediv[j].divide(a[i])){\n\t\t\t\tcnt=0;while(a[i]%pri[j]==0)++cnt,a[i]/=pri[j];\n\t\t\t\tif(!id[j])ls[id[j]=++l]=pri[j],el[l]=ls[l],p[l]=0;\n\t\t\t\tv[i].push_back(std::make_pair(id[j],cnt)),p[id[j]]=std::max(p[id[j]],cnt);\n\t\t\t}\n\t\tss.xb=0;memset(ss.h,0,sizeof ss.h);\n\t\tint step=8;\n\t\tstatic ll aa[N];int nn=0;\n\t\tfor(int i=1;i<=n;++i)if(a[i]>1)aa[++nn]=a[i];\n\t\tfor(int i=1;i<=nn;++i)ss.insert(aa[i]);\n\t\tfor(int i=1;i<=nn;i++){\n\t\t\tfor(int j=i+1;j<=nn;j+=step){\n\t\t\t\tll pi=1;\n\t\t\t\tfor(int k=0;k<step && j+k<=nn;++k)pi=(__int128)pi*aa[j+k]%aa[i];\n\t\t\t\tif(gcd(pi,aa[i])!=1)for(int k=0;k<step && j+k<=nn;++k){\n\t\t\t\t\tll x=gcd(aa[i],aa[j+k]);\n\t\t\t\t\tss.insert(x);ss.insert(aa[i]/x);ss.insert(aa[j+k]/x);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tfac=std::vector<ll>(ss.v+1,ss.v+ss.xb+1);\n\t\tstd::sort(fac.begin(),fac.end()),fac.erase(std::unique(fac.begin(),fac.end()),fac.end());\n\t\ttl=l;\n\t\tif(!fac.empty())for(int i=fac[0]==1?1:0,fl;fl=0,i<fac.size();i++){\n\t\t\tfl=1;\n\t\t\tif(fl)ls[++l]=fac[i],p[l]=0,el[l]=ls[l];\n\t\t}\n\t\tfor(int i=1;i<=n;i++){\n\t\t\tfor(int j=tl+1,cnt;j<=l;j++)if(el[j].divide(a[i])){\n\t\t\t\tcnt=0;while(a[i]%ls[j]==0)++cnt,a[i]/=ls[j];\n\t\t\t\tv[i].push_back(std::make_pair(j,cnt)),p[j]=std::max(p[j],cnt);\n\t\t\t}\n\t\t}\n\t\tfor(int i=1;i<=l;i++)for(int j=0;j<=p[i];j++)ipw[i][j]=fpow(pw[i][j]=fpow(ls[i]%mod,j),mod-2);\n\t\tstd::stable_sort(q+1,q+m+1);\n\t\tint ul=1,ur=0;\n\t\tfor(int i=1;i<=m;i++){\n\t\t\twhile(ul>q[i].l)add(v[--ul]);while(ur<q[i].r)add(v[++ur]);\n\t\t\twhile(ul<q[i].l)del(v[ul++]);while(ur>q[i].r)del(v[ur--]);\n\t\t\tans[q[i].id]=tot;\n\t\t}\n\t\twhile(ul<=ur)del(v[ur--]);\n\t\tfor(int i=1;i<=m;i++)io::print(ans[i]),io::putc('\\n');\n\t}\n\treturn 0;\n}\n```\n","publishedTitle":"ã€Œæ´›è°·5655ã€åŸºç¡€æ•°è®ºå‡½æ•°ç»ƒä¹ é¢˜"}},{"id":"f84245e3-ec0a-5560-a365-8d62ecf29ff1","fields":{"slug":"/oi/solution/qoj1337/","plainText":"\n> å®šä¹‰ä¸€ä¸ªæ’åˆ— $P$ ä¸Šçš„æ“ä½œ $(t,S)$ ä¸ºï¼š\n>\n> 1. æœ‰ä¸¤ä¸ªç©ºåºåˆ— $A$ å’Œ $B$ï¼›\n> 2. æšä¸¾ $S_i=1$ çš„æ¯ä¸ª $i$ï¼šå¦‚æœ $P_i$ æ˜¯å¶æ•°ï¼Œåˆ™å°†å…¶æ”¾åˆ° $A$ çš„æœ«å°¾ï¼›å¦åˆ™æ”¾åˆ° $B$ çš„æœ«å°¾ï¼›\n> 3. å¦‚æœ $t=0$ åˆ™ä»¤ $C=\\overline{AB}$ï¼Œå¦åˆ™ä»¤ $C=\\overline{BA}$ï¼›\n> 4. æšä¸¾ $S_i=1$ çš„æ¯ä¸ª $i$ï¼šå°† $P_i$ æ›¿æ¢ä¸º $C$ çš„å¼€å¤´å…ƒç´ ï¼Œåˆ å» $C$ çš„å¼€å¤´å…ƒç´ ã€‚\n>\n> ç°ç»™å®šæ’åˆ— $P$ï¼Œè¦æ±‚ä½¿ç”¨è‡³å¤š $30$ æ¬¡å¦‚ä¸Šæ“ä½œï¼Œä½¿ $P$ ä»å°åˆ°å¤§æ’åºï¼Œæ³¨æ„ä½ ä¸éœ€è¦æœ€å°åŒ–æ“ä½œæ¬¡æ•°ã€‚\n>\n> $1\\le n\\le 15000$ã€‚\n\n<!-- more -->\n\n## é¢˜æ„è¡¥å……\n\nå¯¹äº $P=\\{0,4,2,3,6,5,1\\}$ ä¸Šçš„æ“ä½œ $(1,\\texttt{1101101})$ï¼Œæœ‰ç¤ºæ„å›¾å¦‚ä¸‹\n\n![|24em](https://static.memset0.cn/img/v6/2024/02/11/bULc9hpa.png)\n\n## é¢˜è§£\n\nç”±äº $30=2\\left(\\left\\lfloor\\log n\\right\\rfloor\\right)+1$ï¼Œæˆ‘ä»¬è€ƒè™‘ $t=0$ å’Œ $t=1$ çš„æ“ä½œäº¤é”™æ‰§è¡Œã€‚\n\né¦–å…ˆå¯ä»¥ç¡®å®šæœ€åä¸€æ¬¡æ“ä½œå‰ï¼Œæ¯ä¸ªæ•°çš„ä½ç½®ï¼Œå¦‚ $n=13$ çš„æ—¶å€™ï¼Œæœ€åä¸€æ¬¡æ“ä½œå‰çš„ $p$ åº”ä¸ºï¼š\n\n```plain\n0 8 2 10 4 12 6 7 1 9 3 11 5\n```\n\næ•…å¯¹äºæ¯ä¸ªæ•°ï¼Œæˆ‘ä»¬æ±‚å‡ºæ­¤æ—¶æœŸæœ›çš„ä½ç½® $rk$ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œç°åœ¨æˆ‘ä»¬è¦æŠŠæ¯ä¸ª $p_i$ï¼Œç§»åŠ¨åˆ° $rk_{p_i}$ çš„ä½ç½®ä¸Šã€‚\n\nè€ƒè™‘ä»ä½ä½åˆ°é«˜ä½ï¼Œæ¯æ¬¡æŠŠè¿™ä¸€ä½æ˜¯ $1$ çš„æ•°ä¸æ”¹å˜ç›¸å¯¹é¡ºåºåœ°ä¸¢åˆ°æœ€åé¢ï¼Œ$\\log$ æ¬¡åå³å¯å®Œæˆæ’åºã€‚\n\nå…ˆè¿›è¡Œä¸€æ¬¡ $(0,111\\ldots 1)$ æ“ä½œåï¼Œæ‰€æœ‰å¶æ•°éƒ½åœ¨å¥‡æ•°å‰é¢ï¼Œæˆ‘ä»¬å¯ä»¥è®¤ä¸ºæ˜¯ä¸¤ä¸ªåºåˆ—ï¼›æŠŠå¶æ•°ä¸­éœ€è¦æ”¾åé¢çš„æ•°å’Œå¥‡æ•°ä¸­éœ€è¦æ”¾å‰é¢çš„æ•°æ‰§è¡Œ $t=1$ æ“ä½œå³å¯ã€‚ä½† $n$ æ—¶å¯èƒ½ä¸¤ä¾§çš„æ•°å­—ä¸ªæ•°ä¸åŒï¼Œè¿™æ—¶å€™ç»™å¶æ•°åºåˆ—ä¸­å¤šä¸¢ä¸€ä¸ª $0$ å°±å¥½äº†ã€‚\n\n## ä»£ç \n\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\nconst int N = 1.5e5 + 9;\nint n, m, t, p[N], rk[N];\nstring s;\nvector<int> a, b, c;\nvector<pair<bool, string>> ans;\nvoid apply(bool t, const string &s) {\n  a.clear(), b.clear();\n  for (int i = 0; i < n; i++)\n    if (s[i] == '1') (p[i] & 1 ? b : a).push_back(p[i]);\n  if (t) swap(a, b);\n  c = a, c.insert(c.end(), b.begin(), b.end());\n  reverse(c.begin(), c.end());\n  for (int i = 0; i < n; i++)\n    if (s[i] == '1') p[i] = c.back(), c.pop_back();\n  ans.push_back(make_pair(t, s));\n}\nvoid solve() {\n  int s00 = ((n + 1) / 2 + 1) / 2, s01 = (n + 1) / 4, s10 = s01, s11 = n / 2 - s10;\n  assert(s00 + s01 + s10 + s11 == n);\n  for (int i = 0; i < s00; i++) rk[i << 1] = i << 1;\n  for (int i = 0; i < s10; i++) rk[(i + s00) << 1] = i << 1 | 1;\n  for (int i = 0; i < s01; i++) rk[i << 1 | 1] = (i + s00) << 1;\n  for (int i = 0; i < s11; i++) rk[(i + s10) << 1 | 1] = (i + s10) << 1 | 1;\n  for (int i = 1; i < n; i += 2) rk[i] = n - 1 - rk[i] + (n & 1);\n  for (int k = 0; k < 14; k++) {\n    apply(0, string(n, '1'));\n    s = string(n, '0');\n    int t = 0;\n    for (int i = 0; i < n; i++)\n      if (p[i] % 2 == 0 && (rk[p[i]] >> k) % 2 == 1) s[i] = '1';\n    for (int i = 0; i < n; i++)\n      if (p[i] % 2 == 1 && (rk[p[i]] >> k) % 2 == 1) s[i] = '1';\n    apply(1, s);\n  }\n  apply(0, string(n, '1'));\n  s = string(n, '0');\n  for (int i = 0; i < n; i++)\n    if (p[i] != i) s[i] = '1';\n  apply(1, s);\n  for (int i = 0; i < n; i++) assert(p[i] == i);\n}\nint main() {\n#ifdef memset0\n  freopen(\"1.in\", \"r\", stdin);\n#endif\n  cin.tie(0)->sync_with_stdio(0);\n  cin >> n;\n  for (int i = 0; i < n; i++) cin >> p[i];\n  solve();\n  cout << ans.size() << endl;\n  for (const auto &it : ans) cout << (it.first ? 1 : 0) << \" \" << it.second << endl;\n}\n```\n","publishedTitle":"ã€ŒPetrozavodsk Summer 2020ã€Parity Sort"}},{"id":"22e8f7d7-cbe6-5f39-ac9e-813c3f91d270","fields":{"slug":"/oi/solution/uoj120/","plainText":"\n> ç»™å®š $n$ å’Œ $\\{c_{i}\\}_{i=0}^n$ï¼Œè¡¨ç¤º $n+1$ æ¡é™åˆ¶å½¢å¦‚å¯¹äº $f(x)$ æ»¡è¶³ $1 \\leq f(i) \\leq c_i$ å¯¹äºæ‰€æœ‰ $0\\le i\\le n$ã€‚\n>\n> å…¶ä¸­ $f(x) = \\sum_{i=0}^{n} a_i x^i$ï¼Œè¿™é‡Œ $\\{a_i\\}_{i=0}^n$ éƒ½æ˜¯æ•´æ•°ï¼Œå³ $f(x)$ æ˜¯ä¸€ä¸ªä¸è¶…è¿‡ $n$ æ¬¡çš„æ•´ç³»æ•°å¤šé¡¹å¼ã€‚\n>\n> é—®æ»¡è¶³é™åˆ¶çš„ $f(x)$ æœ‰å¤šå°‘ä¸ªï¼Œç­”æ¡ˆå¯¹ $998244353$ å–æ¨¡ã€‚\n>\n> $0\\le n\\le 6$ï¼Œ$1\\le c_i\\le 10^9$ã€‚\n\n<!-- more -->\n\n## é¢˜è§£\n\nè€ƒè™‘æŠŠ $1 \\leq f(i) \\leq c_i$ çš„é™åˆ¶è½¬æ¢ä¸º $0 \\leq f(i) < c_i$ï¼Œä¸”å°† $f(x)$ è½¬åŒ–ä¸ºä¸‹é™å¹‚å¤šé¡¹å¼ã€‚æ³¨æ„åˆ°è¿™äº›è½¬åŒ–ä¸ä¼šå½±å“åˆ°ç­”æ¡ˆã€‚\n\næˆ‘ä»¬ä»¤ $a_i = x_i (n-i)! + y_i$ï¼Œè€ƒè™‘æšä¸¾ $y_i$ åæ€ä¹ˆè®¡ç®—ç­”æ¡ˆã€‚\n\næˆ‘ä»¬æå‡ºå…¶ä¸­ä¸€é¡¹å¼å­ï¼š\n\n$$\n0 \\leq a_0 + k a_1 + k^{\\underline 2}a_2 + k^{\\underline 3} a_3 + \\cdots + k! a_k < c_k\n$$\n\næŠŠå‰åŠéƒ¨åˆ†è®¾ä¸º $d_k$ï¼Œåˆ™æœ‰ï¼š\n\n$$\n0 \\leq d_k + k!a_k < c_k\n$$\n\nä»£å…¥ $a_k = x_k (n-k)! + y_k$ å¾—ï¼š\n\n$$\n0 \\leq d_k + k!(x_k (n-k)! + y_k) < c_k\n$$\n\nå…¶ä¸­ $y_k$ æ˜¯æˆ‘ä»¬å·²ç»æšä¸¾çš„æ•´æ•°ï¼Œæ•…åªéœ€è¦è€ƒè™‘å¯¹ $x_k$ è®¡æ•°å³å¯ã€‚\n\n$$\n-d_k - k! y_k \\leq k!(n-k)! x_k < c_k - d_k - k! y_k\n$$\n\nç­”æ¡ˆæ˜¾ç„¶æ˜¯åœ¨ $\\frac {c_k} {k!(n-k)!}$ çš„çº§åˆ«ï¼Œä½†æ˜¯ä¼šæœ‰ $\\pm 1$ çš„åå·®ï¼Œå–å†³äºä¸ç­‰å¼ä¸¤è¾¹åœ¨æ¨¡æ„ä¹‰ä¸‹çš„å¤§å°ï¼Œå…·ä½“åœ°ï¼ˆä»¤ $C=d_k+ k!y_k ,\\ M = k!(n-k)!$ï¼‰ï¼š\n\n$$\n\\operatorname{count}(x_k)= \\begin{cases}\n\t\\lfloor \\frac {c_k} {M} \\rfloor & (C \\bmod M \\leq c_k + C \\bmod M) \\\\\n\t\\lfloor \\frac {c_k} {M} \\rfloor +1 & (C \\bmod M > c_k + C \\bmod M) \\\\\n\\end{cases}\n$$\n\næˆ‘ä»¬ç°åœ¨è€ƒå¯Ÿ $C\\bmod M$ çš„å…³ç³»ï¼Œ$k!y_k$ çš„è´¡çŒ®æ˜¯å·²çŸ¥å¸¸æ•°ï¼Œè€ƒè™‘ï¼š\n\n$$\nd_k\n= \\sum_{i=0}^{k-1} a_i k^{\\underline i}\n= \\sum_{i=0}^{k-1} (x_i(n-i)! + y_i) k^{\\underline i}\n$$\n\næ³¨æ„åˆ° $(n-i)!k^{\\underline i}$ æ˜¯ $M$ çš„å€æ•°ï¼Œæ•… $C \\bmod M$ åªå’Œ $y_{0 \\ldots k}$ æœ‰å…³ã€‚\n\nå¯ä»¥é€šè¿‡æšä¸¾ $y_{0 \\ldots n}$ åè®¡ç®—ï¼Œæ—¶é—´å¤æ‚åº¦ $O(n \\times n! \\times (n-1)! \\times \\cdots \\times 1!)$ã€‚\n\nè™½ç„¶ç†è®ºä¸Šæ¥è¯´æ˜¯ä¸èƒ½è¿‡çš„ä½†æ˜¯å¯ä»¥é€šè¿‡å·¨å¤§å¤šå¸¸æ•°ä¼˜åŒ–è‰è¿‡å»ï¼Œå®é™…è¡¨ç°è¿˜æ˜¯è·‘çš„æŒºå¿«çš„ã€‚ï¼ˆç«Ÿç„¶æ¯”ä»¥å°å¸¸æ•°è‘—åçš„ zx2003 å­¦é•¿å¿«ï¼ï¼‰\n\n## ä»£ç \n\n```cpp\n#pragma GCC optimize(\"Ofast,no-stack-protector,unroll-loops\")\n#pragma GCC target(\"sse,sse2,sse3,ssse3,sse4,sse4.1,sse4.2,popcnt,abm,mmx,avx,avx2,fma,tune=native\")\n#include <bits/stdc++.h>\nusing namespace std;\nconst int N = 10, F = 10000, mod = 998244353;\nconst int fac[N] = {1, 1, 2, 6, 24, 120, 720, 5040, 40320, 362880};\nconst int ifac[N] = {1, 1, 499122177, 166374059, 291154603, 856826403, 641926577, 376916469, 421456191, 712324701};\nconst int down[N][N] = {{1, 0, 0, 0, 0, 0, 0, 0, 0, 0}, {1, 1, 0, 0, 0, 0, 0, 0, 0, 0}, {1, 2, 2, 0, 0, 0, 0, 0, 0, 0}, {1, 3, 6, 6, 0, 0, 0, 0, 0, 0}, {1, 4, 12, 24, 24, 0, 0, 0, 0, 0}, {1, 5, 20, 60, 120, 120, 0, 0, 0, 0}, {1, 6, 30, 120, 360, 720, 720, 0, 0, 0}, {1, 7, 42, 210, 840, 2520, 5040, 5040, 0, 0}, {1, 8, 56, 336, 1680, 6720, 20160, 40320, 40320, 0}, {1, 9, 72, 504, 3024, 15120, 60480, 181440, 362880, 362880}};\nint n, q, c[N], d[N], y[N], fit[N][F];\nstruct z {\n  int x;\n  z(int x = 0) : x(x) {}\n  inline void operator*=(z r) { x = (long long)x * r.x % mod; }\n  inline void operator+=(z r) { (x += r.x) >= mod && (x -= mod); }\n  friend inline z operator*(z a, z b) { return (long long)a.x * b.x % mod; }\n  friend inline z operator-(z a, z b) { return (a.x -= b.x) < 0 ? a.x + mod : a.x; }\n  friend inline z operator+(z a, z b) { return (a.x += b.x) >= mod ? a.x - mod : a.x; }\n} ans, cur[1 << 7];\nvoid dfs(int u) {\n  if (u > n) {\n    int x = 0;\n    for (int i = 0; i <= n; i++) {\n      x |= fit[i][d[i]] << i;\n    }\n    ans += cur[x];\n    return;\n  }\n  for (int i = 0; i < fac[n - u]; i++) {\n    y[u] = i;\n    for (int i = u; i <= n; i++) d[i] += y[u] * down[i][u];\n    dfs(u + 1);\n    for (int i = u; i <= n; i++) d[i] -= y[u] * down[i][u];\n  }\n}\nvoid mainVI() {\n  long long ans = 0;\n  y[5] = y[6] = 0;\n  for (y[0] = 0; y[0] < fac[6]; y[0]++) {\n    for (int i = 0; i <= 6; i++) d[i] += y[0];\n    for (y[1] = 0; y[1] < fac[5]; y[1]++) {\n      for (int i = 1; i <= 6; i++) d[i] += y[1] * down[i][1];\n      for (y[2] = 0; y[2] < fac[4]; y[2]++) {\n        for (int i = 2; i <= 6; i++) d[i] += y[2] * down[i][2];\n        for (y[3] = 0; y[3] < fac[3]; y[3]++) {\n          for (int i = 3; i <= 6; i++) d[i] += y[3] * down[i][3];\n          for (y[4] = 0; y[4] < fac[2]; y[4]++) {\n            for (int i = 4; i <= 6; i++) d[i] += y[4] * down[i][4];\n            int x = 0;\n            for (int i = 0; i <= 6; i++) x |= fit[i][d[i]] << i;\n            ans += cur[x].x;\n            for (int i = 4; i <= 6; i++) d[i] -= y[4] * down[i][4];\n          }\n          for (int i = 3; i <= 6; i++) d[i] -= y[3] * down[i][3];\n        }\n        for (int i = 2; i <= 6; i++) d[i] -= y[2] * down[i][2];\n      }\n      for (int i = 1; i <= 6; i++) d[i] -= y[1] * down[i][1];\n    }\n    for (int i = 0; i <= 6; i++) d[i] -= y[0];\n  }\n  ::ans.x = ans % mod;\n}\nint main() {\n#ifdef memset0\n  freopen(\"1.in\", \"r\", stdin);\n#endif\n  cin.tie(0)->sync_with_stdio(0);\n  for (cin >> q; q--; ans = 0) {\n    cin >> n;\n    for (int i = 0; i <= n; i++) cin >> c[i];\n    for (int i = 0; i <= n; i++)\n      for (int d = 0; d < F; d++) {\n        fit[i][d] = (c[i] + d) % (fac[i] * fac[n - i]) < d % (fac[i] * fac[n - i]);\n      }\n    for (int x = 0; x < (1 << (n + 1)); x++) {\n      cur[x] = 1;\n      for (int i = 0; i <= n; i++)\n        if ((x >> i) & 1) {\n          cur[x] *= c[i] / (fac[i] * fac[n - i]) + 1;\n        } else {\n          cur[x] *= c[i] / (fac[i] * fac[n - i]);\n        }\n    }\n    (n == 6) ? mainVI() : dfs(0);\n    cout << ans.x << endl;\n  }\n}\n```\n","publishedTitle":"ã€ŒUR #8ã€å®¿å‘½å¤šé¡¹å¼"}},{"id":"2bfcaaa7-ab16-54d7-bf9f-748aa9a0c621","fields":{"slug":"/oi/solution/uoj172/","plainText":"\n> ç»™å®šä¸€ä¸ªå­—ç¬¦ä¸² $s$ï¼Œå‡è®¾å…¶ border é›†åˆä¸º $S$ï¼Œåˆ™æ¯æ¬¡ä½ å¯ä»¥åœ¨ $s$ åé¢æ¥ä¸Šä¸€ä¸ªé•¿åº¦ä¸º $|s| - x$ çš„å­—ç¬¦ä¸²ï¼Œå…¶ä¸­ $x \\in S$ã€‚é—®åœ¨æ€»é•¿åº¦ $\\leq w$ çš„æƒ…å†µä¸‹æœ‰å¤šå°‘ç§å¯èƒ½çš„æœ¬è´¨ä¸åŒçš„é•¿åº¦ã€‚\n>\n> $n \\leq 5 \\times 10^5,\\ w \\leq 10^{18}$ã€‚\n\n<!-- more -->\n\n## é¢˜è§£\n\n> Updateï¼šè¿™ä¸ªåšæ³•å·²ç»è¢« lyx è€å¸ˆ [Hack](https://uoj.ac/hack/9813)ã€‚\n\nborder çš„è´¡çŒ®æ˜¯è‹¥å¹²ç«¯ç­‰å·®æ•°åˆ—ï¼Œä¸å¦¨è®¾å…¶ä¸­ä¸€æ®µä¸º $kx + b$ï¼Œå…¶ä¸­ $x \\in [0,l]$ï¼Œè€ƒè™‘å…¶äº§ç”Ÿçš„è´¡çŒ®æ•´ç†åå¯ä»¥ç†è§£ä¸ºä¸‰ç§ï¼š\n\n- é•¿åº¦ä¸º $b$ çš„è´¡çŒ®ï¼Œå¯ä»¥é€‰æ‹© $\\inf$ æ¬¡ï¼›\n- é•¿åº¦ä¸º $lk + b$ çš„è´¡çŒ®ï¼Œå¯ä»¥é€‰æ‹© $\\inf$ æ¬¡ï¼›\n- é•¿åº¦ä¸º $(0...l)k + b$ çš„è´¡çŒ®ï¼Œå¯ä»¥é€‰æ‹© $1$ æ¬¡ã€‚\n\nè€ƒè™‘å‰ä¸¤ç§è´¡çŒ®ï¼Œå°±æ˜¯æœ´ç´ çš„åŒä½™æœ€çŸ­è·¯é—®é¢˜ã€‚è€ƒè™‘å…ˆè®¡ç®—å‡ºä»–ä»¬çš„ dis æ•°ç»„ï¼Œå†è½¬ç§»ä¸Šç¬¬ä¸‰ç±»è´¡çŒ®ã€‚\n\nå¯¹äºæ¯ä¸€ç§ç­‰å·®æ•°åˆ—åˆ†å¼€å¤„ç†ï¼Œåˆ†æ¨¡ $k$ çš„ä½™æ•°è®¨è®ºï¼Œå®¹æ˜“å‘ç°å¯ä»¥ç›´æ¥ç”¨å•è°ƒé˜Ÿåˆ—ç»´æŠ¤ä¸‹è½¬ç§»ã€‚\n\nåŒä½™æœ€çŸ­è·¯è·‘ spfa æ˜¯çº¿æ€§çš„ï¼Œå¯ä»¥ç›´æ¥ç”¨ï¼ˆã€‚\n\næ—¶é—´å¤æ‚åº¦ $O(n \\log w)$ã€‚\n\n## ä»£ç \n\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\nconst int N = 5e5 + 10;\nint T, n, fl, mod;\nchar s[N];\nlong long w, ans, t[N], dis[2][N];\nvector<int> key;\nstruct atom {\n  int b, k, l;\n};\nvector<atom> res;\nint nod;\nstruct node {\n  int pre, nxt, i;\n  long long x;\n} e[N << 1];\ninline void init() { nod = 0; }\nstruct myset {\n  int lim, hed, til;\n  inline void reset(int l) { hed = til = 0, lim = l; }\n  inline void pop_front() {\n    if (hed == til) hed = til = 0;\n    else {\n      e[e[til].pre].nxt = 0;\n      til = e[til].pre;\n    }\n  }\n  inline void pop_back() {\n    if (hed == til) hed = til = 0;\n    else {\n      e[e[hed].nxt].pre = 0;\n      hed = e[hed].nxt;\n    }\n  }\n  inline void push_back(int i, long long x) {\n    e[++nod].i = i, e[nod].x = x;\n    if (!hed) {\n      hed = til = nod;\n      e[nod].pre = e[nod].nxt = 0;\n    } else {\n      e[nod].nxt = hed, e[hed].pre = nod;\n      hed = nod;\n    }\n  }\n  inline void insert(int i, long long x) {\n    while (hed && e[hed].x > x) pop_back();\n    push_back(i, x);\n    while (e[til].i < i - lim) pop_front();\n  }\n  inline long long query() { return e[til].x; }\n};\nmyset st[N];\nnamespace h {\nconst int b = 131131, p1 = 998244353, p2 = 1e9 + 7;\nint f[N], g[N], pf[N], pg[N];\nvector<int> vet;\ninline int query(int l, int r, int *a, int *pa, int p) {\n  int res = (a[r] - (long long)a[l - 1] * pa[r - l + 1]) % p;\n  return res < 0 ? res + p : res;\n}\nvoid solve(int n) {\n  pf[0] = pg[0] = 1, vet.clear(), res.clear();\n  for (int i = 1; i <= n; i++) {\n    pf[i] = (long long)pf[i - 1] * b % p1;\n    pg[i] = (long long)pg[i - 1] * b % p2;\n    f[i] = ((long long)f[i - 1] * b + s[i] - 'a') % p1;\n    g[i] = ((long long)g[i - 1] * b + s[i] - 'a') % p2;\n  }\n  for (int i = n - 1; i >= 1; i--)\n    if (query(1, i, f, pf, p1) == query(n - i + 1, n, f, pf, p1) && query(1, i, g, pg, p2) == query(n - i + 1, n, g, pg, p2)) vet.push_back(n - i);\n  vet.push_back(n);\n  int first = vet[0], delta = 0, cnt = 0;\n  for (int i = 1; i < vet.size(); i++)\n    if (!delta) {\n      delta = vet[i] - vet[i - 1], cnt = 1;\n    } else {\n      if (vet[i] - vet[i - 1] == delta) ++cnt;\n      else {\n        res.push_back((atom){first, delta, cnt});\n        first = vet[i], delta = 0, cnt = 0;\n      }\n    }\n  res.push_back((atom){first, delta, cnt});\n}\n} // namespace h\nvoid spfa(vector<int> &key, long long *dis) {\n  static int l, r, q[N << 3];\n  static bool inq[N];\n  mod = *max_element(key.begin(), key.end());\n  memset(dis, 63, mod << 3);\n  q[l = r = 1] = dis[0] = 0;\n  while (l <= r) {\n    int u = q[l++];\n    inq[u] = 0;\n    for (int w : key) {\n      int c = (u + w) / mod;\n      int v = u + w - c * mod;\n      if (dis[u] + c < dis[v]) {\n        dis[v] = dis[u] + c;\n        if (!inq[v]) inq[v] = 1, q[++r] = v;\n      }\n    }\n  }\n}\nvoid trans(long long *f, long long *g, const atom &it) {\n  if (!it.l) {\n    for (int i = 0; i < mod; i++) {\n      g[i] = min(f[i], f[(i - it.b + mod) % mod]);\n    }\n    return;\n  }\n  memset(t, 63, mod << 3), init();\n  for (int i = 0; i < it.k; i++) st[i].reset(it.l);\n  for (int i = -mod; i < mod; i++) {\n    auto &st = ::st[(i + mod) % it.k];\n    st.insert((i + mod) / it.k, i < 0 ? f[i + mod] + 1 : f[i]);\n    if (i >= 0) t[i] = st.query();\n  }\n  for (int i = 0; i < mod; i++) {\n    g[i] = min(f[i], i < it.b ? t[i - it.b + mod] + 1 : t[i - it.b]);\n  }\n}\nint main() {\n  for (cin >> T; T--; ans = 0, key.clear()) {\n    scanf(\"%d%lld%s\", &n, &w, s + 1);\n    if (w < n) {\n      puts(\"0\");\n      continue;\n    }\n    h::solve(n);\n    for (auto x : res) {\n      key.push_back(x.b);\n      if (x.l) key.push_back(x.b + x.k * x.l);\n    }\n    spfa(key, dis[fl]);\n    for (auto x : res) {\n      trans(dis[fl], dis[fl ^ 1], x);\n      fl ^= 1;\n    }\n    for (int i = 0; i < mod; i++)\n      if (dis[fl][i] != 4557430888798830399) {\n        ans += max(0ll, (w - n - i) / mod + 1 - dis[fl][i]);\n      }\n    printf(\"%lld\\n\", ans);\n  }\n}\n```\n","publishedTitle":"ã€ŒWC2016ã€è®ºæˆ˜æ†ç«¹ç«¿"}},{"id":"ec58d998-a2d4-5cca-9b91-297a564d6062","fields":{"slug":"/oi/solution/uoj226/","plainText":"\n> ç»™å®šä¸€å¼  $n$ ä¸ªç‚¹çš„æ ‘æˆ–åŸºç¯æ ‘ï¼Œæ ‘ä¸Šçš„æ¯æ¡è¾¹ $(u_i, v_i, w_i)$ ä»£è¡¨ $(u_i, v_i)$ é—´æœ‰ $w_i$ é“è·¯ç›¸è¿ã€‚\n>\n> ä½ éœ€è¦ç»Ÿè®¡æœ‰å¤šå°‘ç§ä»ä»»æ„ç‚¹å‡ºå‘çš„æœ¬è´¨ä¸åŒè·¯å¾„ï¼Œä½¿å¾—ç»è¿‡æ‰€æœ‰é“è·¯æ°å¥½ä¸€æ¬¡ã€‚\n>\n> è·¯å¾„å¯ä»¥è®¤ä¸ºæ˜¯ä¸€ä¸ªä»æŸä¸ªç‚¹å‡ºå‘ï¼Œç”±ç»è¿‡é“è·¯ç¼–å·å’Œæ–¹å‘ç»„æˆçš„åºåˆ—ã€‚ä¸¤æ¡è·¯çº¿è¢«è®¤ä¸ºæ˜¯ç›¸åŒçš„å½“ä¸”ä»…å½“ä¸¤åºåˆ—ç›¸åŒï¼Œæˆ–æ›´æ¢èµ·å§‹è¾¹åä¸¤åºåˆ—ç›¸åŒã€‚\n>\n> $n, w_i \\leq 1000$ã€‚\n\n<!-- more -->\n\n## é¢˜è§£\n\nBEST å®šç†çš„ç®€å•åº”ç”¨ã€‚\n\næˆ‘ä»¬å¯ä»¥æŠŠè¿™ä¸ªé—®é¢˜è½¬åŒ–ä¸ºä¸¤éƒ¨åˆ†ï¼š\n\n1. ä¸ºæ— å‘è¾¹å®šå‘\n2. å¥—ç”¨ BEST å®šç†è®¡ç®—ï¼ˆç”Ÿæˆæ ‘å½¢å›¾è®¡æ•°ï¼‰\n\nå‰ä¸€éƒ¨åˆ†æˆ‘ä»¬å¯ä»¥ä»æ ‘çš„æƒ…å†µæ¨å¹¿ã€‚å¦‚æœ $m=n-1$ï¼Œé‚£ä¹ˆæ˜¾ç„¶ä¸¤ç‚¹ä¹‹é—´çš„æ— å‘è¾¹ï¼Œè½¬åŒ–æˆæœ‰å‘è¾¹åˆšå¥½ä¸€åŠä¸€åŠã€‚å¯¹äºåŸºç¯æ ‘çš„æƒ…å†µï¼Œæˆ‘ä»¬æšä¸¾èµ°æ•´ä¸ªç¯çš„æ¬¡æ•°ï¼Œé‚£ä¹ˆä¹Ÿå¯ä»¥è®¡ç®—å‡ºæœ‰å‘è¾¹ã€‚\n\nåä¸€éƒ¨åˆ†ï¼Œæˆ‘ä»¬è€ƒè™‘åŸºç¯æ ‘å¯ä»¥æšä¸¾ä¸€æ¡æ–­è¾¹ï¼Œç„¶åå°±æ˜¯æŠŠæ‰€æœ‰æŒ‡å‘æ ¹çš„é‡è¾¹æ¡æ•°ä¸€æ¬¡ä¹˜èµ·æ¥ï¼ˆé€‰ä»»æ„ä¸€æ¡ä½œä¸ºå¤–å‘æ ‘çš„ä¸€éƒ¨åˆ†ï¼‰ã€‚å®ç°ä¸­éœ€è¦å¤„ç†å‰ç¼€å’Œä¿è¯å¤æ‚åº¦ã€‚\n\n## å‘\n\n1. å¯¹äºæˆ‘çš„å®ç°ï¼Œéœ€è¦ä¿è¯ç¯ä¸€è·¯è¿‡å»çš„ç«¯ç‚¹ä¾æ¬¡æŒ‰ç…§ç»è¿‡é¡ºåºæ’åºã€‚ä¹Ÿå°±æ˜¯å­˜æ— å‘è¾¹çš„æ•°ç»„å¯èƒ½éœ€è¦æŠŠ $(u,v,w)$ swap æˆ $(v,u,w)$ã€‚ä¸è¿‡æˆ‘å€’æ˜¯å†™çš„æ—¶å€™å°±æ³¨æ„åˆ°äº†ã€‚\n2. è¿™é¢˜é¢„å¤„ç†é˜¶ä¹˜çš„èŒƒå›´æœ‰å‘å•Šæœ‰å‘ï¼ˆx\n\n## ä»£ç \n\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\nconst int N = 1e3 + 9, mod = 998244353, L = 1e4 + 9;\nint n, m, ans, tot, top, cir[N], w0[N], w1[N], deg[N], u[N], v[N], w[N], pre[N], suf[N], stk[N], hed[N], to[N << 1], val[N << 1], nxt[N << 1], fac[N * L], ifac[L];\nbool vis[N], onc[N], inc[N];\nvoid initgraph() {\n  tot = 0;\n  memset(hed, -1, sizeof(hed));\n}\nvoid initfac() {\n  fac[0] = ifac[0] = ifac[1] = 1;\n  for (int i = 1; i < N * L; i++) fac[i] = (long long)fac[i - 1] * i % mod;\n  for (int i = 2; i < L; i++) ifac[i] = (long long)(mod - mod / i) * ifac[mod % i] % mod;\n  for (int i = 1; i < L; i++) ifac[i] = (long long)ifac[i - 1] * ifac[i] % mod;\n}\ninline int C(int n, int m) { return n < m ? 0 : (long long)fac[n] * ifac[m] % mod * ifac[n - m] % mod; }\ninline void link(int u, int v, int w) { nxt[tot] = hed[u], to[tot] = v, val[tot] = w, hed[u] = tot++; }\ninline int calc_fac(int x) {\n  int res = 1;\n  for (int i = 1; i <= x; i++) res = (long long)res * i % mod;\n  return res;\n}\nvoid solve_tree() {\n  int ans = 1;\n  for (int u, v, w, i = 1; i <= m; i++) {\n    cin >> u >> v >> w;\n    if (w & 1) {\n      cout << 0 << endl;\n      return;\n    }\n    deg[u] += w >> 1, deg[v] += w >> 1;\n    ans = (long long)ans * C(w, w >> 1) % mod * (w >> 1) % mod;\n  }\n  for (int i = 1; i <= n; i++) ans = (long long)ans * fac[deg[i] - 1] % mod;\n  cout << ans << endl;\n}\nvoid dfs(int u, int fa) {\n  stk[++top] = u, vis[u] = 1;\n  for (int i = hed[u]; ~i; i = nxt[i])\n    if (to[i] != fa) {\n      if (vis[to[i]]) {\n        if (*cir) continue;\n        cir[++*cir] = val[i];\n        for (int x = u; x != to[i]; x = to[pre[x] ^ 1]) {\n          cir[++*cir] = val[pre[x]];\n        }\n      } else {\n        pre[to[i]] = i;\n        dfs(to[i], u);\n      }\n    }\n  --top;\n}\nvoid ordered_circle() {\n  int same = -1;\n  if (u[cir[1]] == u[cir[2]]) same = u[cir[1]];\n  if (u[cir[1]] == v[cir[2]]) same = u[cir[1]];\n  if (v[cir[1]] == u[cir[2]]) same = v[cir[1]];\n  if (v[cir[1]] == v[cir[2]]) same = v[cir[1]];\n  assert(~same);\n  int s = u[cir[1]] + v[cir[1]] - same;\n  for (int i = 1; i <= *cir; i++) {\n    if (u[cir[i]] != s) swap(u[cir[i]], v[cir[i]]);\n    s = v[cir[i]];\n  }\n}\nint calc(int cur) {\n  memset(deg, 0, sizeof(deg));\n  int ans = 1, sum = 0, ano = 1;\n  for (int i = 1; i <= m; i++) {\n    if (inc[i]) {\n      if ((w[i] + cur) & 1) return 0;\n      w0[i] = (w[i] + cur) >> 1;\n      w1[i] = (w[i] - cur) >> 1;\n    } else {\n      w0[i] = w1[i] = w[i] >> 1;\n    }\n    deg[u[i]] += w1[i];\n    deg[v[i]] += w0[i];\n    ans = (long long)ans * C(w[i], w0[i]) % mod;\n  }\n  for (int i = 1; i <= n; i++) ans = (long long)ans * fac[deg[i] - 1] % mod;\n  for (int i = 1; i <= m; i++)\n    if (!inc[i]) ano = (long long)ano * w0[i] % mod;\n  for (int k = 1; k <= *cir; k++) pre[k] = (long long)pre[k - 1] * w0[cir[k]] % mod;\n  for (int k = *cir; k >= 1; k--) suf[k] = (long long)suf[k + 1] * w1[cir[k]] % mod;\n  for (int k = 1; k <= *cir; k++) {\n    sum = (sum + (long long)pre[k - 1] * suf[k + 1] % mod * ano) % mod;\n  }\n  return (long long)sum * ans % mod;\n}\nint main() {\n#ifdef mmeset0\n  freopen(\"1.in\", \"r\", stdin);\n#endif\n  cin.tie(0)->sync_with_stdio(0);\n  initfac();\n  initgraph();\n  cin >> n >> m;\n  if (n == m + 1) return solve_tree(), 0;\n  for (int i = 1; i <= m; i++) {\n    cin >> u[i] >> v[i] >> w[i];\n    link(u[i], v[i], i);\n    link(v[i], u[i], i);\n    deg[u[i]] += w[i];\n    deg[v[i]] += w[i];\n  }\n  for (int i = 1; i <= n; i++)\n    if (deg[i] & 1) {\n      cout << 0 << endl;\n      return 0;\n    }\n  dfs(1, 0);\n  ordered_circle();\n  int mn = INT_MAX;\n  for (int i = 1; i <= *cir; i++) {\n    inc[cir[i]] = onc[u[cir[i]]] = onc[v[cir[i]]] = true;\n    mn = min(mn, w[cir[i]]);\n  }\n  pre[0] = suf[0] = pre[*cir + 1] = suf[*cir + 1] = 1;\n  for (int d = -mn; d <= mn; d++) ans = (ans + calc(d)) % mod;\n  cout << ans << endl;\n}\n```\n","publishedTitle":"ã€ŒUR #15ã€å¥¥æ—åŒ¹å…‹ç¯åŸé©¬æ‹‰æ¾"}},{"id":"7b8ec711-07c9-5ff3-b9ea-fa53d79d1fab","fields":{"slug":"/oi/solution/uoj372/","plainText":"\n> ç»™å®šä¸€ä¸ª $n$ ä¸ªç‚¹ $m$ æ¡è¾¹çš„æ— å‘å›¾ï¼Œå…¶ä¸­æ¯ä¸ªç‚¹çš„ç‚¹æƒæ˜¯ $[0;1]$ èŒƒå›´å†…ç”Ÿæˆçš„è¿ç»­å‹éšæœºå˜é‡ï¼Œæ±‚ï¼š\n>\n> $$\n> \\max \\{ \\max_{i \\in V} x_i + \\max_{(u,v) \\in E} (x_u + x_v) \\}\n> $$\n>\n> çš„æœŸæœ›ï¼Œç­”æ¡ˆå¯¹ $998244353$ å–æ¨¡ã€‚\n>\n> $n \\leq 25$ã€‚ï¼ˆå®é™…ä¸Šå¯ä»¥è·‘ $n \\leq 30$ã€‚ã€‚ã€‚\n\n<!-- more -->\n\n## é¢˜è§£\n\n$$\nans = \\int_0^2 Pr[\\lambda = x] x \\text dx = 2 - \\int_0^2 Pr[\\lambda \\leq x] \\text dx\n$$\n\nè€ƒè™‘å¦‚ä½•è®¡ç®— $Pr[\\lambda \\leq x]$ï¼Œè®¾ $g(s,y,t)$ è¡¨ç¤ºå¯¹äºç‚¹é›† $s$ï¼Œç‚¹æƒæœ€å¤§å€¼ $\\leq y$ï¼Œç­”æ¡ˆ $\\leq t$ çš„æ¦‚ç‡ã€‚è€ƒè™‘å…¶çŠ¶æ€è½¬ä¹‰ï¼š\n\n- å¦‚æœç”Ÿæˆçš„æ‰€æœ‰æ•°éƒ½ $\\leq \\frac t 2$ï¼Œåˆ™è´¡çŒ®ä¸º $(\\frac t 2)^{|s|}$\n- å¯¹äºå…¶ä»–æƒ…å†µï¼Œè€ƒè™‘æœ€å¤§å€¼ç‚¹ $i$ï¼Œå¹¶é€’å½’ã€‚\n\n$$\ng(s,y,t) = (\\tfrac t 2)^{|s|} + \\sum_{i \\in s} \\int_{\\tfrac t 2}^y g(s_i, x, t) (t - x)^{|s| - |s_i| - 1}\\text dx\n$$\n\nå…¶ä¸­ $s_i$ è¡¨ç¤ºä» $s$ ä¸­åˆ é™¤ $i$ ä»¥åŠæ‰€æœ‰å’Œ $i$ ç›¸é‚»çš„ç‚¹å¾—åˆ°çš„ç‚¹é›†ã€‚\n\nå¦‚æœæˆ‘ä»¬ç›´æ¥æš´åŠ›çŠ¶å‹ç»´æŠ¤äºŒå…ƒå¤šé¡¹å¼è½¬ç§»æ˜¾ç„¶éº»çƒ¦çš„ä¸€æ¯”ï¼Œè€Œä¸”å¸¸æ•°è¿˜è´¼ä»–å¦ˆå¤§ï¼Œè€ƒè™‘ç†æ€§ä¸€ç‚¹çš„æ–¹å¼ã€‚\n\né¦–å…ˆï¼Œå¦‚æœå½“å‰çš„çŠ¶æ€æ˜¯è‹¥å¹²ç‹¬ç«‹çš„è”é€šå—ï¼Œå¯ä»¥ç›´æ¥æŠŠæ¯ä¸ªè”é€šå—çš„ç­”æ¡ˆç›¸ä¹˜ï¼Œè¿™å¯ä»¥å¤§å¤§å‡å°çŠ¶æ€æ•°ã€‚\n\nå¦å¤–ï¼Œæˆ‘ä»¬å¯ä»¥æ³¨æ„åˆ°ï¼Œå¯¹äºäºŒå…ƒå¤šé¡¹å¼çš„æ¯ä¸€é¡¹ $y^i t^j$ï¼Œéƒ½æ»¡è¶³ $i+j$ æ˜¯å®šå€¼ï¼Œå³äºŒå…ƒå¤šé¡¹å¼ $g(s)$ æ¯é¡¹çš„å¹‚æ¬¡å’Œéƒ½æ˜¯ $|s|$ã€‚ç”±äºŒé¡¹å¼å®šç†çš„ç³»æ•°å¯ä»¥æ–¹ä¾¿å¾—åˆ°ã€‚\n\næœ€åï¼Œæˆ‘ä»¬éœ€è¦æ³¨æ„ $g(s,y,t)$ çš„å–å€¼èŒƒå›´ $\\tfrac t 2 \\leq y \\leq \\min(1, t)$ï¼Œæ‰€ä»¥ç­”æ¡ˆæ˜¯\n\n$$\nans = 2 - \\int_0^1 f(t,t) \\text dt  - \\int_1^2 f(1,t) \\text dt\n$$\n\n## ä»£ç \n\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\nconst int N = 30, mod = 998244353, inv2 = (mod + 1) >> 1;\nint n, m, tim, G[N], vis[N];\nstruct z {\n  int x;\n  z(int x = 0) : x(x) {}\n  friend inline z operator*(z a, z b) { return (long long)a.x * b.x % mod; }\n  friend inline z operator-(z a, z b) { return (a.x -= b.x) < 0 ? a.x + mod : a.x; }\n  friend inline z operator+(z a, z b) { return (a.x += b.x) >= mod ? a.x - mod : a.x; }\n} ans, inp[N], inv[N], C[N][N];\nunordered_map<int, vector<z>> mp;\ninline vector<z> operator*(const vector<z> &a, const vector<z> &b) {\n  vector<z> c(a.size() + b.size() - 1);\n  for (int i = 0; i < a.size(); i++)\n    for (int j = 0; j < b.size(); j++) c[i + j] = c[i + j] + a[i] * b[j];\n  return c;\n}\ninline vector<z> inte(vector<z> f) {\n  vector<z> g(f.size() + 1);\n  for (int i = 1; i <= f.size(); i++) g[i] = f[i - 1] * inv[i];\n  return g;\n}\ninline z eval(vector<z> a, int l, int r) {\n  a = inte(a);\n  z p, s;\n  int i;\n  for (p = 1, i = 0; i < a.size(); i++) s = s + a[i] * p, p = p * r;\n  for (p = 1, i = 0; i < a.size(); i++) s = s - a[i] * p, p = p * l;\n  return s;\n}\nvoid initfac(int n) {\n  inp[0] = inv[0] = inv[1] = 1;\n  for (int i = 2; i < n; i++) inv[i] = (mod - mod / i) * inv[mod % i];\n  for (int i = 1; i < n; i++) inp[i] = inp[i - 1] * inv2;\n  for (int i = 0; i < n; i++) {\n    C[i][0] = 1;\n    for (int j = 1; j <= i; j++) C[i][j] = C[i - 1][j] + C[i - 1][j - 1];\n  }\n}\nint dfs(int u, int s) {\n  int res = 1 << u;\n  vis[u] = tim;\n  for (int v = 0; v < n; v++)\n    if (((s >> v) & 1) && ((G[u] >> v) & 1) && vis[v] != tim) res |= dfs(v, s);\n  return res;\n}\nvoid update(vector<z> &s, vector<z> a, int k) {\n  vector<z> b(k + 1);\n  for (int i = 0; i <= k; i++) b[i] = C[k][i] * (i & 1 ? mod - 1 : 1);\n  a = inte(a * b);\n  for (int i = 0; i < a.size(); i++) s[i] = s[i] + a[i], s[0] = s[0] - inp[i] * a[i];\n}\nvector<z> solve(int s) {\n  if (mp.count(s)) return mp[s];\n  int l = __builtin_popcount(s);\n  vector<z> res;\n  vector<int> set;\n  for (int t, i = 0; i < n; i++)\n    if ((s >> i) & 1) {\n      ++tim;\n      t = dfs(i, s), s ^= t;\n      set.push_back(t);\n    }\n  for (int x : set) s |= x;\n  if (set.size() > 1) {\n    res = {1};\n    for (auto t : set) res = res * solve(t);\n  } else {\n    res.resize(l + 1), res[0] = inp[l];\n    for (int i = 0; i < n; i++)\n      if ((s >> i) & 1) {\n        int t = s ^ (s & (G[i] | (1 << i)));\n        update(res, solve(t), __builtin_popcount(s & G[i]));\n      }\n  }\n  return mp[s] = res;\n}\nint main() {\n  cin >> n >> m;\n  initfac(N), mp[0] = {1};\n  for (int u, v, i = 0; i < m; i++) {\n    cin >> u >> v, --u, --v;\n    G[u] |= 1 << v, G[v] |= 1 << u;\n  }\n  vector<z> s = solve((1 << n) - 1), a(n + 1);\n  for (int i = 0; i < s.size(); i++) a[n] = a[n] + s[i];\n  reverse(s.begin(), s.end());\n  cout << (2 - eval(s, 1, 2) - eval(a, 0, 1)).x << endl;\n}\n```\n","publishedTitle":"ã€ŒUR #17ã€æ»‘ç¨½æ ‘å‰åšæ¸¸æˆ"}},{"id":"b2002f5d-fef2-5a62-ae93-b214126a1681","fields":{"slug":"/oi/solution/uoj498/","plainText":"\n> å®šä¹‰ä¸¤ä¸ªç®€å•æ— å‘å›¾ $G_{1} =( V_{1} , E_{1}) , G_{2} =( V_{2} , E_{2})$ çš„ä¹˜ç§¯ä¸ºä¸€ä¸ªæ–°çš„å›¾ $G_{1} \\times G_{2} =\\left( V^{\\star} , E^{\\star} \\right)$ï¼Œå…¶ä¸­\n>\n> $$\n> \\begin{aligned}\n> V^{\\star} &= \\left\\{ {(a, b)| a \\in V_{1}, b \\in V_{2} }\\right\\},\\\\ E^{\\star} &=\\left\\{\\left(( u_{1} , v_{1}) , ( u_{2} , v_{2})\\right) \\mid ( u_{1} , u_{2}) \\in E_{1}, ( v_{1} , v_{2}) \\in E_{2}\\right\\}.\n> \\end{aligned}\n> $$\n>\n> å¯¹äºæ­£æ•´æ•° $n$ ï¼Œä»¥åŠç»™å®šçš„å›¾ $G_{1} , G_{2} , \\dotsc , G_{n}$ ï¼Œæˆ‘ä»¬ä»¤\n>\n> $$\n> \\displaystyle{H = (((G_1 \\times G_2) \\times G_3) \\times \\cdots) \\times G_n}.\n> $$\n>\n> è‹¥æ¯ä¸ª $G_k$ ä¸­æ¯ä»»æ„ä¸¤ç‚¹éƒ½æœ‰ $\\frac12$ çš„æ¦‚ç‡æœ‰è¾¹ï¼Œæ±‚ $H$ çš„è¿é€šå—ä¸ªæ•°çš„æœŸæœ›ã€‚\n>\n> $1\\le n, m_k\\le 10^5$ ã€‚ç­”æ¡ˆå¯¹ $998244353$ å–æ¨¡ã€‚\n\n<!-- more -->\n\n## é¢˜è§£\n\nå¤§æ¦‚æ˜¯ä¸€ä¸ªäºŒåˆä¸€çŠ¶ç‰©ï¼Œæˆ‘ä»¬æå‡ºç”Ÿæˆå‡½æ•°ä»¥åé€ä¸ªåˆå¹¶ã€‚\n\nè€ƒè™‘ $k=1$ æ€ä¹ˆåšï¼Œå‡è®¾ $G$ ä¸ºæ— æ ‡å·æ— å‘å›¾ç”Ÿæˆå‡½æ•°ï¼š\n\n$$\nG = \\sum_{i\\ge 0} \\frac {2^{\\binom i 2} x^i} {i!}\n$$\n\nåˆ™ $\\ln G$ ä¸ºæ— æ ‡å·è”é€šæ— å‘å›¾ç”Ÿæˆå‡½æ•°ï¼Œ $n! [x^n] G \\ln G$ å³ä¸ºç­”æ¡ˆã€‚\n\nè€ƒè™‘ $k=2$ æ€ä¹ˆåšï¼Œæˆ‘ä»¬éœ€è¦ç‰¹åˆ¤ä¸‹å­¤ç«‹ç‚¹çš„æƒ…å†µã€‚åˆå¹¶çš„ç»“æœå’Œä¸¤è¾¹çš„å›¾æ˜¯å¦ä¸ºäºŒåˆ†å›¾ï¼ˆå³é¢˜è§£æ‰€è°“æ²¡æœ‰å¥‡ç¯ï¼‰æ˜¯æœ‰å…³çš„ï¼Œå½“ä¸”ä»…å½“ä¸¤ä¾§éƒ½æ˜¯äºŒåˆ†å›¾æ—¶ä¼šä½¿å¾—ç”Ÿæˆçš„å›¾å¯¹åº”ä¸¤ä¸ªè”é€šå—ã€‚\n\nè€ƒè™‘æ— æ ‡å·äºŒåˆ†å›¾ç”Ÿæˆå‡½æ•° $B$ ï¼ˆå¯ä»¥å·ç§¯è§£å†³ï¼‰ï¼š\n\n$$\nB = \\sum_{i \\ge 0} \\sum_{j \\ge 0} \\frac {2^{ij} x^{i+j}} {i! j!} = \\sum_{i \\ge 0} \\sum_{j \\ge 0} \\frac {2^{\\binom {i+j} 2 - \\binom  i 2 - \\binom j 2} x^{i+j}} {i! j!}\n$$\n\næ•…éå¹³å‡¡äºŒåˆ†å›¾è”é€šå—ç”Ÿæˆå‡½æ•°ä¸º $G (\\frac {\\ln B} 2 - 1)$ ï¼Œéå¹³å‡¡éäºŒåˆ†å›¾è”é€šå—ç”Ÿæˆå‡½æ•°ä¸º $G (\\ln G - \\frac {\\ln B} 2)$ ï¼Œéå¹³å‡¡è”é€šå—ç”Ÿæˆå‡½æ•°ä¸º $G (\\ln G - 1)$ ã€‚å­¤ç«‹ç‚¹è”é€šå—ç”Ÿæˆå‡½æ•°ä¸º $x G$ ï¼ˆè¿™å‡ ä¸ªå‡ä¸ºæ— æ ‡å·\n\nè€ƒè™‘è®°å½•ä¸‹æœŸæœ›ç‚¹æ•°ï¼ŒæœŸæœ›éå¹³å‡¡äºŒåˆ†å›¾è”é€šå—ï¼ŒæœŸæœ›éå¹³å‡¡éäºŒåˆ†å›¾è”é€šå—ï¼ŒæœŸæœ›å­¤ç«‹ç‚¹ä¸ªæ•°ï¼Œå³å¯åˆå¹¶ä¸¤ä¸ªå›¾çš„ä¿¡æ¯ï¼Œåšä¸‹å»å³å¯ï¼ˆ\n\n## ä»£ç \n\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\nconst int N = 1e5 + 10, mod = 998244353;\nint n, l, lim, m[N], rev[N << 2];\nstruct z {\n  int x;\n  z(int x = 0) : x(x) {}\n  inline int half() { return x & 1 ? (x + mod) >> 1 : x >> 1; }\n  friend inline z operator*(z a, z b) { return (long long)a.x * b.x % mod; }\n  friend inline z operator-(z a, z b) { return (a.x -= b.x) < 0 ? a.x + mod : a.x; }\n  friend inline z operator+(z a, z b) { return (a.x += b.x) >= mod ? a.x - mod : a.x; }\n} a[N], b[N], c[N], d[N], fac[N], inv[N], ifac[N], t1[N], w[N << 2];\nusing poly = vector<z>;\ninline z fpow(z a, int b) {\n  z s = 1;\n  for (; b; b >>= 1, a = a * a)\n    if (b & 1) s = s * a;\n  return s;\n}\nint polyInit(int l) {\n  int lim = 1, k = 0;\n  while (lim < l) lim <<= 1, ++k;\n  for (int i = 0; i < lim; i++) rev[i] = (rev[i >> 1] >> 1) | ((i & 1) << (k - 1));\n  static int len = 1;\n  for (; len < lim; len <<= 1) {\n    z wn = fpow(3, (mod - 1) / (len << 1));\n    w[len] = 1;\n    for (int i = 1; i < len; i++) w[i + len] = w[i + len - 1] * wn;\n  }\n  return lim;\n}\nvoid dft(poly &a, int lim) {\n  a.resize(lim);\n  for (int i = 0; i < lim; i++)\n    if (i < rev[i]) swap(a[i], a[rev[i]]);\n  for (int len = 1; len < lim; len <<= 1)\n    for (int i = 0; i < lim; i += (len << 1))\n      for (int j = 0; j < len; j++) {\n        z x = a[i + j], y = a[i + j + len] * w[j + len];\n        a[i + j] = x + y, a[i + j + len] = x - y;\n      }\n}\nvoid idft(poly &a, int lim) {\n  dft(a, lim), reverse(&a[1], &a[lim]);\n  z inv = fpow(lim, mod - 2);\n  for (int i = 0; i < lim; i++) a[i] = a[i] * inv;\n}\npoly polyInc(poly a, const poly &b) {\n  a.resize(max(a.size(), b.size()));\n  for (int i = 0; i < b.size(); i++) a[i] = a[i] + b[i];\n  return a;\n}\npoly polyDec(poly a, const poly &b) {\n  a.resize(max(a.size(), b.size()));\n  for (int i = 0; i < b.size(); i++) a[i] = a[i] - b[i];\n  return a;\n}\npoly polyMul(poly a, poly b) {\n  int lim = polyInit(a.size() + b.size() - 1);\n  dft(a, lim), dft(b, lim);\n  for (int i = 0; i < lim; i++) a[i] = a[i] * b[i];\n  idft(a, lim), a.resize(l);\n  return a;\n}\npoly polyInv(poly f, int len = -1) {\n  if ((len = ~len ? len : f.size()) == 1) return {fpow(f[0], mod - 2)};\n  poly a(&f[0], &f[len]), b = polyInv(f, (len + 1) >> 1);\n  int lim = polyInit((len << 1) - 1);\n  dft(a, lim), dft(b, lim);\n  for (int i = 0; i < lim; i++) a[i] = b[i] * (2 - a[i] * b[i]);\n  idft(a, lim), a.resize(len);\n  return a;\n}\npoly polyDer(poly f) {\n  for (int i = 0; i <= f.size() - 2; i++) f[i] = f[i + 1] * (i + 1);\n  *--f.end() = 0;\n  return f;\n}\npoly polyInt(poly f) {\n  for (int i = f.size() - 1; i >= 1; i--) f[i] = f[i - 1] * inv[i];\n  *f.begin() = 0;\n  return f;\n}\npoly polyLn(poly f) { return polyInt(polyMul(polyInv(f), polyDer(f))); }\npoly A, B, C, D, E, F, G, H;\nstruct info {\n  z n, a, b, c;\n  inline z dump() { return a + b + c; }\n  inline void load(int x) { n = G[x] * fac[x] * x, a = C[x] * fac[x], b = D[x] * fac[x], c = G[x - 1] * fac[x]; }\n  friend inline info operator^(const info &a, const info &b) {\n    static info s;\n    s.n = a.n * b.n;\n    s.a = 2 * a.a * b.a + a.a * b.b + a.b * b.a;\n    s.b = a.b * b.b;\n    s.c = a.c * b.c + a.c * (b.n - b.c) + b.c * (a.n - a.c);\n    return s;\n  }\n} ans, tmp;\nint main() {\n#ifdef memset0\n  freopen(\"1.in\", \"r\", stdin);\n#endif\n  cin.tie(0)->sync_with_stdio(0);\n  cin >> n;\n  for (int i = 1; i <= n; i++) cin >> m[i], l = max(l, m[i] + 1);\n  fac[0] = ifac[0] = inv[0] = inv[1] = 1;\n  for (int i = 1; i <= l; i++) fac[i] = fac[i - 1] * i;\n  for (int i = 2; i <= l; i++) inv[i] = (mod - mod / i) * inv[mod % i];\n  for (int i = 1; i <= l; i++) ifac[i] = ifac[i - 1] * inv[i];\n  G.resize(l), B.resize(l);\n  for (int i = 0; i < l; i++) t1[i] = fpow(2, (long long)i * (i - 1) / 2 % (mod - 1));\n  for (int i = 0; i < l; i++) G[i] = t1[i] * ifac[i];\n  for (int i = 0; i < l; i++) B[i] = ifac[i] * fpow(t1[i], mod - 2);\n  B = polyMul(B, B), B.resize(l);\n  for (int i = 0; i < l; i++) B[i] = B[i] * t1[i];\n  F = polyLn(G), H = G, F[1] = 0, A = polyLn(B), A[1] = 0;\n  for (int i = 0; i < l; i++) A[i] = A[i].half();\n  C = polyMul(G, A), C.resize(l), E = polyMul(G, F), E.resize(l), D = polyDec(E, C);\n  ans.load(m[1]);\n  for (int i = 2; i <= n; i++) ans = ans ^ (tmp.load(m[i]), tmp);\n  cout << ans.dump().x << endl;\n}\n```\n","publishedTitle":"ã€ŒUOJ Goodbye Jihaiã€æ–°å¹´çš„è¿½é€æˆ˜"}},{"id":"2af2d579-aaab-5231-92af-540fe83541d4","fields":{"slug":"/oi/solution/uoj500/","plainText":"\n> ç»™å®š $n$ æ¬¡å¤šé¡¹å¼\n>\n> $$\n> f(x) = \\sum_{i=0}^n a_i x^i\n> $$\n>\n> $Q$ æ¬¡è¯¢é—®ï¼Œç¬¬ $i$ æ¬¡è¯¢é—® $f(q_i)$ å¯¹ $998244353$ å–æ¨¡çš„å€¼ã€‚\n>\n> å…¶ä¸­ $q_i$ æ˜¯ä¸€ä¸ªä¸€é˜¶çº¿æ€§é€’æ¨ï¼Œç»™å®š $q_0, x, y$ ï¼Œæ»¡è¶³\n>\n> $$\n> q_n = x q_{n-1} + y\n> $$\n>\n> $1 \\leq n \\leq 2.5 \\times 10^5, \\ 1 \\leq Q \\leq 10^6, \\ 2 \\leq x < 998244353, \\ 0 \\leq q_0, y < 998244353$ ã€‚\n\n<!-- more -->\n\n## Solution Part1\n\né¦–å…ˆè¿™ç©æ„å„¿è‚¯å®šæ²¡æ³•ä¸¤ä¸ª $\\log$ å¤šç‚¹æ±‚å€¼ï¼Œé™¤éä½ æ˜¯é’±å“¥å“¥ã€‚\n\n![22em](https://static.memset0.cn/img/v6/2024/02/11/3Mgly16W.png)\n\n## Solution Part2\n\nè™½ç„¶è¿™ä¸œè¥¿å¥½åƒå°å­¦ç”Ÿéƒ½ä¼šï¼Œä½†æˆ‘è‡ªå·±æ¨çš„æ—¶å€™æ€ä¹ˆè«åæåˆ°ç‰¹å¾å¤šé¡¹å¼é‚£ä¸ªæ–¹å‘å»äº†ï¼Œè¶Šå­¦è¶Šå‚»é€¼äº†ã€‚ã€‚ã€‚\n\n$$\n\\left\\{ \\begin{aligned}\ng_{n+1} = x g_n + y \\\\\ng_n = x g_{n-1} + y \\\\\n\\end{aligned} \\right.\n$$\n\nä¸¤å¼ç›¸å‡å¾—åˆ°\n\n$$\n(g_{n+1}-g_n) = x (g_n - g_{n-1})\n$$\n\nä¸å¦¨è®¾\n\n$$\nh_n = g_{n+1} - g_n\n$$\n\nå¯ä»¥å¾—åˆ° $h$ çš„é€šé¡¹å…¬å¼\n\n$$\nh_n = x^n h_0 = x^n ((x-1) g_0 + y)\n$$\n\nä»è€Œå¾—åˆ° $g$ çš„é€šé¡¹å…¬å¼\n\n$$\ng_n = g_0 + \\sum_{i=0}^{n-1} h_i = g_0 + \\frac {x^n-1} {x-1} ((x-1)g_0 + y)\n$$\n\nä¸å¦¨è¡¨ç¤ºæˆ $ax^n + b$ çš„å½¢å¼ï¼Œå…¶ä¸­\n\n$$\n\\begin{cases}\na = \\dfrac {(x-1) g_0 + y} {x-1} \\\\\nb = \\dfrac {y} {x-1} \\\\\n\\end{cases}\n$$\n\n## Solution Part3\n\nä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬è¦å¯¹äºæ‰€æœ‰ $i \\in [1, Q]$ æ±‚å‡º $f(a x^i + b)$ çš„å€¼ï¼Œä¸å¦¨è®¾å¤šé¡¹å¼ $g(x) = f(ax + b)$ ï¼Œä¹Ÿå°±æ˜¯ä¸€ä¸ªå¤šé¡¹å¼å¹³ç§»ã€‚\n\n$$\n\\begin{aligned}\ng(x)\n&= f(ax + b) \\\\\n&= \\sum_{i=0}^n a_i (ax + b)^i \\\\\n&= \\sum_{i=0}^n a_i \\sum_{j=0}^i \\frac {i!} {j! (i-j)!} (ax)^j b^{i-j} \\\\\n&= \\sum_{i=0}^n a_i i! \\sum_{j=0}^i \\frac {(ax)^j} {j!} \\cdot \\frac {b^{i-j}} {(i-j)!} \\\\\n\\end{aligned}\n$$\n\nå®¹æ˜“å‘ç°å¯ä»¥å·ç§¯ç»´æŠ¤ï¼Œéœ€è¦åè½¬ä¸€ä¸ªå¤šé¡¹å¼ã€‚\n\n## Solution Part4\n\nå›åˆ°ä¹‹å‰çš„å¼å­ï¼Œç°åœ¨æˆ‘ä»¬åªéœ€è¦å¯¹äºæ‰€ä»¥ $i \\in [1, Q]$ æ±‚å‡º $g(x^i)$ çš„å€¼ï¼Œç›¸å½“äºæ±‚\n\n$$\n\\begin{aligned}\nG(z)\n&= \\sum_{i=0}^Q z^i \\sum_{j=0}^n a_j x^{ij} \\\\\n&= \\sum_{i=0}^Q z^i \\sum_{j=0}^n a_j x^{\\binom {i+j} 2 - \\binom i 2 - \\binom j 2} \\\\\n&= \\sum_{i=0}^Q z^i x^{-\\binom i2} \\sum_{j=0}^n a_j x^{-\\binom j2} \\cdot x^{\\binom {i+j} 2} \\\\\n\\end{aligned}\n$$\n\nå®¹æ˜“å‘ç°å¯ä»¥å·ç§¯ç»´æŠ¤ï¼Œéœ€è¦åè½¬ä¸€ä¸ªå¤šé¡¹å¼ã€‚\n\n> é¢˜å¤–è¯ï¼š\n>\n> ä¸€å¼€å§‹æƒ³è¿‡æŠŠ $ij$ æ‹†æˆ $\\binom i 2 + \\binom j 2 - \\binom {i-j} 2$ ï¼Œç»“æœ $i-j$ çš„å€¼åŸŸæœ‰æ­£æœ‰è´Ÿï¼Œåè€Œéš¾å¤„ç†ï¼Œå°½é‡è¿˜æ˜¯é¿å…è¿™ç§æƒ…å†µã€‚\n\n## Code\n\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\nconst int N = 2.1e6 + 10, mod = 998244353;\nint n, q, rev[N];\nstruct z {\n  int x;\n  z(int x = 0) : x(x) {}\n  friend inline z operator*(z a, z b) { return (long long)a.x * b.x % mod; }\n  friend inline z operator-(z a, z b) { return (a.x -= b.x) < 0 ? a.x + mod : a.x; }\n  friend inline z operator+(z a, z b) { return (a.x += b.x) >= mod ? a.x - mod : a.x; }\n} q0, qx, qy, qc, w[N], f[N], g[N], t1[N], t2[N], t3[N], t4[N], fac[N], ifac[N];\ninline z fpow(z a, int b) {\n  z s = 1;\n  for (; b; b >>= 1, a = a * a)\n    if (b & 1) s = s * a;\n  return s;\n}\nvoid initFac(int n) {\n  fac[0] = ifac[0] = ifac[1] = 1;\n  for (int i = 1; i <= n; i++) fac[i] = fac[i - 1] * i;\n  for (int i = 2; i <= n; i++) ifac[i] = (mod - mod / i) * ifac[mod % i];\n  for (int i = 2; i <= n; i++) ifac[i] = ifac[i - 1] * ifac[i];\n}\nvoid initPow(z c, int n, z *a, z *b) {\n  a[0] = b[0] = 1;\n  for (int i = 1; i < n; i++) a[i] = a[i - 1] * c;\n  for (int i = 1; i < n; i++) b[i] = b[i - 1] * a[i - 1];\n}\nint init(int n) {\n  static int wk = 1;\n  int k = -1, l = 1;\n  while (l < n) l <<= 1, ++k;\n  for (int i = 0; i < l; i++) rev[i] = (rev[i >> 1] >> 1) | ((i & 1) << k);\n  for (int &k = wk; k < l; k <<= 1) {\n    z c = fpow(3, (mod - 1) / k / 2);\n    w[k] = 1;\n    for (int i = 1; i < k; i++) w[i + k] = w[i + k - 1] * c;\n  }\n  return l;\n}\nvoid ntt(z *a, z *b, int l) {\n  for (int i = 0; i < l; i++) b[rev[i]] = a[i];\n  for (int k = 1; k < l; k <<= 1)\n    for (int i = 0; i < l; i += (k << 1))\n      for (int j = 0; j < k; j++) {\n        z x = b[i + j], y = b[i + j + k] * w[j + k];\n        b[i + j] = x + y, b[i + j + k] = x - y;\n      }\n}\nvoid mul(z *a, z *b, z *c, int n, int m) {\n  static z t[N];\n  int l = init(n + m - 1);\n  z v = fpow(l, mod - 2);\n  ntt(a, c, l), ntt(b, t, l);\n  for (int i = 0; i < l; i++) t[i] = t[i] * c[i];\n  reverse(t + 1, t + l), ntt(t, c, l);\n  for (int i = 0; i < l; i++) c[i] = c[i] * v;\n}\nint main() {\n#ifdef memset0\n  freopen(\"1.in\", \"r\", stdin);\n#endif\n  cin.tie(0)->sync_with_stdio(0);\n  cin >> n >> q;\n  initFac(max(n, q));\n  for (int i = 0; i <= n; i++) cin >> f[i].x;\n  cin >> q0.x >> qx.x >> qy.x;\n  qc = (q0 * (qx - 1) + qy) * fpow(qx - 1, mod - 2);\n  const auto move = [&](z *a, z c, z k, int n) {\n    int i;\n    z t;\n    for (i = 0, t = 1; i < n; i++) t1[i] = a[i] * fac[i], t2[n - i - 1] = ifac[i] * t, t = t * c;\n    mul(t1, t2, t3, n, n);\n    for (i = 0, t = 1; i < n; i++) a[i] = t3[n - 1 + i] * ifac[i] * t, t = t * k;\n  };\n  memset(t1, 0, sizeof(t1)), memset(t2, 0, sizeof(t2));\n  move(f, q0 - qc, qc, n + 1);\n  memset(t1, 0, sizeof(t1)), memset(t2, 0, sizeof(t2));\n  const auto czt = [&](z *a, z *b, z c, int n, int q) {\n    initPow(c, n + q, t3, t1);\n    reverse(t1, t1 + n + q);\n    initPow(fpow(c, mod - 2), max(n, q), t3, t4);\n    for (int i = 0; i < n; i++) t2[i] = a[i] * t4[i];\n    mul(t1, t2, t3, n + q, n);\n    for (int i = 0; i < q; i++) b[i] = t3[n + q - 1 - i] * t4[i];\n  };\n  czt(f, g, qx, n + 1, q + 1);\n  cout << accumulate(g + 1, g + q + 1, 0, [](int a, z b) { return a ^ b.x; }) << endl;\n}\n```\n","publishedTitle":"ã€ŒUOJ500ã€ä»»æ„åŸºDFT"}},{"id":"97ef5ad5-d0d0-5ed6-a167-e014ff5f8efe","fields":{"slug":"/course/oop/review/","plainText":"\n> æœ¬ç¯‡ç¬”è®°å…¨é¢æ€»ç»“äº†é¢å‘å¯¹è±¡ç¨‹åºè®¾è®¡è¯¾ç¨‹çš„æ ¸å¿ƒå†…å®¹ï¼ŒåŒ…æ‹¬ C++ çš„åŸºç¡€ç‰¹æ€§ï¼ˆå¼•ç”¨ã€å¸¸é‡ã€å†…å­˜ç®¡ç†ï¼‰ã€ç±»çš„æ¦‚å¿µï¼ˆæ„é€ ã€ç»§æ‰¿ã€å¤šæ€ï¼‰ã€è¿ç®—ç¬¦é‡è½½ã€æ¨¡æ¿ç¼–ç¨‹å’Œå¼‚å¸¸å¤„ç†æœºåˆ¶ã€‚ç¬”è®°é‡ç‚¹å…³æ³¨äº†ä¸€äº›æ˜“é”™ç»†èŠ‚ï¼Œå¦‚æ„é€ é¡ºåºã€è™šå‡½æ•°æœºåˆ¶ã€ç±»å‹è½¬æ¢ç­‰ï¼Œå¹¶æä¾›äº†å¤§é‡å®ç”¨çš„ä»£ç ç¤ºä¾‹å’Œè€ƒè¯•è¦ç‚¹æç¤ºã€‚é€‚åˆæœ‰ C++ åŸºç¡€çš„åŒå­¦å¿«é€ŸæŒæ¡ OOP çš„æ ¸å¿ƒæ¦‚å¿µå’Œé‡è¦ç»†èŠ‚ã€‚<small style=\"font-style: italic; opacity: 0.5\">ï¼ˆç”± claude-3.5-sonnet ç”Ÿæˆæ‘˜è¦ï¼‰</small>\n\n<!-- more -->\n\n> [!warning] æ³¨æ„\n>\n> ä»…æ¨èæœ‰ä¸€å®š C++ åŸºç¡€ï¼ˆä½†æ²¡æœ‰ OOP åŸºç¡€ï¼‰çš„åŒå­¦é˜…è¯»æ­¤ç¬”è®°ï¼Œå¦åˆ™ä½ å¯èƒ½ä¼šé”™è¿‡ä¸€äº›è¯­è¨€ç»†èŠ‚ã€‚\n\n## 1. C++ Features\n\n- å¼•ç”¨&\n  - å¿…é¡»ç«‹å³è¿›è¡Œåˆå§‹åŒ–ï¼Œä¸èƒ½å£°æ˜å®Œåå†èµ‹å€¼ã€‚\n  - å¼•ç”¨ä¸èƒ½é‡æ–°èµ‹å€¼ï¼Œå³ä¸èƒ½å†æŠŠè¯¥å¼•ç”¨åä½œä¸ºå…¶ä»–å˜é‡åçš„åˆ«åã€‚\n  - ä¸èƒ½åˆ›å»ºå¼•ç”¨çš„å¼•ç”¨\n  - ä¸èƒ½åˆ›å»ºå¼•ç”¨çš„æŒ‡é’ˆï¼ˆ`int &*` illegalï¼‰\n  - å¯ä»¥åˆ›å»ºæŒ‡é’ˆçš„å¼•ç”¨ï¼ˆ`int *&` okï¼‰\n  - ä¸èƒ½åˆ›å»ºâ€œå¼•ç”¨â€çš„æ•°ç»„\n- å¸¸é‡\n  - å¸¸é‡çš„å€¼ï¼ˆç¼–è¯‘å™¨ç¡®å®šï¼‰è®°å½•åœ¨ç¬¦å·è¡¨é‡Œ\n    - ä½† `extern` çš„å¸¸é‡ä¸ä¼šè®°åˆ°ç¬¦å·è¡¨é‡Œ\n  - ==`*` åçš„ `const` ,è¡¨ç¤ºä¸èƒ½ç§»åŠ¨æŒ‡å‘çš„ä½ç½®ï¼ˆ`std::string* const`ï¼‰ï¼›`*` å‰çš„ `const`ï¼Œè¡¨ç¤ºä¸èƒ½ä¿®æ”¹æŒ‡å‘çš„å¯¹è±¡çš„å†…å®¹ã€‚ï¼ˆ`const std::string *` æˆ– `std::string const *`ï¼‰==\n  - String Literals\n    - `char *s = \"Hello World!\";` å¯ä»¥ç§»åŠ¨ï¼Œä¸èƒ½ä¿®æ”¹ï¼ˆå› ä¸ºå®é™…ä¸Šæ˜¯ `const char*`ï¼‰\n    - `char s[] = \"Hello World!\";` ä¸èƒ½ç§»åŠ¨ï¼Œå¯ä»¥ä¿®æ”¹\n  - å¯¹è±¡çš„å¸¸é‡ä¸æ˜¯ç¼–è¯‘æœŸå¸¸é‡\n    - `class Array{ const int size = 10; int array[size]; };` ä¸èƒ½é€šè¿‡ç¼–è¯‘\n    - å¯ä»¥å£°æ˜ä¸º `static`ï¼š`static const int size = 10;`\n    - å¯ä»¥ä½¿ç”¨ `enum`ï¼š`enum {size = 10};`\n  - æ³¨æ„ä¸€ä¸‹ï¼š![|410](https://img.memset0.cn/2025/01/10/P6qrYh1P.png)\n- `new` & `delete`\n  - å¯¹ç©ºåœ°å€ `nullptr` ä½¿ç”¨ `delete` æ˜¯å®‰å…¨çš„\n  - å¯¹ä¸æ˜¯ `new` åˆ†é…çš„ç©ºé—´æˆ–å·²ç» delete çš„æŒ‡é’ˆä½¿ç”¨ `delete` ä¼šå¼•å‘é”™è¯¯ã€‚\n  - `new int[10]()` æˆ– `new int[10]{}` è¿™ç§å†™æ³•ä¼šåˆå§‹åŒ–ï¼ˆPitfallï¼šä¸èƒ½å†™æˆ `new int[10](0)`ï¼‰\n- ![|647](https://img.memset0.cn/2025/01/11/Aof9NG9F.png)\n\n## 2. Class\n\n- æ„é€ é¡ºåºï¼š==é™æ€æˆå‘˜ã€è™šåŸºç±»ã€åŸºç±»ã€æˆå‘˜å˜é‡ã€ï¼ˆè‡ªå·±çš„ï¼‰æ„é€ å‡½æ•°==\n- **ä»£ç†æ„é€ (delegating constructor)**ï¼šå¯ä»¥åœ¨æ„é€ å‡½æ•°ä¸­è°ƒç”¨å¦ä¸€ä¸ªæ„é€ å‡½æ•°\n  - `clazz(int a, int b) : clazz(a) { }`\n  - å¸¸é‡æ•°æ®æˆå‘˜ç›´æ¥èµ‹å€¼æˆ–è€…åœ¨ä»£ç†æ„é€ ä¸­è¿›è¡Œåˆå§‹åŒ–ï¼Œä¹‹åä¸èƒ½ä¿®æ”¹ï¼Œä¸èƒ½åœ¨æ„é€ å‡½æ•°ä¸­åˆå§‹åŒ–\n- é™æ€æˆå‘˜å˜é‡ï¼š\n  - `static` çš„é™æ€æˆå‘˜å˜é‡ä¸èƒ½ç›´æ¥èµ‹åˆå€¼ï¼Œé™¤éå£°æ˜ä¸º `static const` çš„ã€‚\n  - å¯ä»¥å…ˆå£°æ˜ç„¶ååœ¨å¤–é¢ç”¨ `int Class::size = 10;` çš„è¯­æ³•ä¾‹åŒ–ã€‚\n- é™æ€å†…å®¹ï¼š\n  - ä½¿ç”¨ `<class name>::<static member>` æˆ– `<object name>.<static member` çš„æ–¹æ³•è®¿é—®é™æ€æ–¹æ³•æˆ–è€…é™æ€æˆå‘˜å˜é‡\n- é‡è½½\n  - overload æ—¶==å…ˆè€ƒè™‘æ˜¯å¦æœ‰å®Œå…¨åŒ¹é…çš„å‡½æ•°ï¼Œæ‰¾ä¸åˆ°å†è€ƒè™‘æ¨¡æ¿ï¼Œè¿˜æ˜¯æ‰¾ä¸åˆ°å†è€ƒè™‘éšå¼ç±»å‹è½¬æ¢ï¼ˆå…¶ä¸­å…ˆè€ƒè™‘æå‡å†è€ƒè™‘å¼ºåˆ¶ç±»å‹è½¬åŒ–ï¼‰==ã€‚\n- ç»§æ‰¿ï¼š\n  - æƒé™æ§åˆ¶\n    - `private` ç»§æ‰¿ï¼šåªæœ‰å­ç±»å¯ä»¥è°ƒç”¨çˆ¶ç±»æ–¹æ³•ï¼›\n    - `protected` ç»§æ‰¿ï¼šåªæœ‰å­ç±»åŠå…¶æ´¾ç”Ÿç±»å¯ä»¥è°ƒç”¨çˆ¶ç±»æ–¹æ³•ï¼›\n    - `public` ç»§æ‰¿ï¼šå­ç±»ã€æ´¾ç”Ÿç±»ã€å¤–éƒ¨ç±»å¯ä»¥è°ƒç”¨çˆ¶ç±»æ–¹æ³•ã€‚\n  - Constructors, Destructors å’Œ Assignment operationï¼ˆ=ï¼‰ æ˜¯ä¸ä¼šç»§æ‰¿çš„\n- **name hiding**ï¼šå¦‚æœå­ç±»é‡è½½äº†çˆ¶ç±»å‡½æ•°ï¼Œé‚£ä¹ˆçˆ¶ç±»æ‰€æœ‰åŒåçš„é‡è½½å‡ä¼šå¤±æ•ˆã€‚å¯ä»¥ä½¿ç”¨ `using Base::f` å¼•å…¥çˆ¶ç±»çš„è¿™äº›æ–¹æ³•ã€‚\n- è™šå‡½æ•° `virtual`\n  - ä¸€ä¸ªçˆ¶ç±»çš„æˆå‘˜å‡½æ•°è¢«å£°æ˜ä¸ºè™šå‡½æ•°åï¼Œæ‰€æœ‰å­ç±»çš„åŒåå‡½æ•°éƒ½è¢«==éšå¼==åœ°å£°æ˜ä¸ºè™šå‡½æ•°ã€‚\n  - è™šææ„å‡½æ•°ï¼šä¸ºäº†èƒ½è°ƒç”¨å­ç±»çš„ææ„ï¼Œç†è®ºä¸Šæ¥è¯´æˆ‘ä»¬åº”è¯¥å°†çˆ¶ç±»çš„ææ„å‡½æ•°å£°æ˜ä¸ºè™šå‡½æ•°ï¼Œå³æ‰€æœ‰çš„ææ„å‡½æ•°éƒ½åº”è¯¥å£°æ˜ä¸ºè™šå‡½æ•°ã€‚\n    - å¦‚æœä¸è¿™ä¹ˆåšï¼Œ`delete` çˆ¶ç±»æŒ‡é’ˆæ—¶å°±åªä¼šè°ƒç”¨é™æ€ç»‘å®šçš„çˆ¶ç±»ææ„å‡½æ•°\n    - å¦‚æœè¿™ä¹ˆåšï¼Œä¼šè°ƒç”¨å­ç±»çš„ææ„å‡½æ•°ï¼Œå¹¶åœ¨ä¹‹å==è‡ªåŠ¨==è°ƒç”¨çˆ¶ç±»çš„ææ„å‡½æ•°ã€‚\n    - è¿›ä¸€æ­¥,æ‰€æœ‰çš„ç±»éƒ½åº”è¯¥å­˜åœ¨ vptr ,è¿™æ˜¯ RTTI çš„åŸºç¡€ã€‚\n- å¤šç»§æ‰¿ï¼š\n  - è±å½¢ç»§æ‰¿ï¼šA åŒæ—¶è¢« B ã€ C ç»§æ‰¿, D ç»§æ‰¿ B å’Œ Cã€‚ é‚£ä¹ˆå½“æˆ‘ä»¬æŠŠ A çš„æŒ‡é’ˆæŒ‡å‘ D çš„å¯¹è±¡æ—¶,å°±ä¸çŸ¥é“åº”è¯¥æŒ‡å‘ B::A è¿˜æ˜¯ C::A ,å‡ºç°å†²çªã€‚ åŒç†ï¼Œå¦‚æœ D è®¿é—® A çš„æˆå‘˜æ—¶,ä¸çŸ¥é“åº”è¯¥è®¿é—® B::A è¿˜æ˜¯ C::A ã€‚\n    - é‡åçš„å˜é‡åŒæ—¶å­˜åœ¨ï¼Œé€šè¿‡ `B::a` æˆ–è€… `C::a` è®¿é—®ï¼Œå¦‚æœç›´æ¥è®¿é—® `a` ä¼šæŠ¥é”™\n  - è™šç»§æ‰¿ï¼šåœ¨ç»§æ‰¿æ—¶æ·»åŠ  `virtual` å…³é”®å­—å®ç°ã€‚è™šç»§æ‰¿æ—¶å­ç±»ä¸­ä¸å­˜åœ¨çˆ¶ç±»çš„å¯¹è±¡,è€Œæ˜¯ä¿æœ‰çˆ¶ç±»çš„æŒ‡é’ˆã€‚ä¸è®ºè™šåŸºç±»åœ¨ç»§æ‰¿ä½“ç³»ä¸­å‡ºç°äº†å¤šå°‘æ¬¡ï¼Œåœ¨æ´¾ç”Ÿç±»ä¸­éƒ½åªåŒ…å«ä¸€ä»½è™šåŸºç±»çš„æˆå‘˜ã€‚\n- æ‹·è´æ„é€ \n  - åœºæ™¯ï¼šå‡½æ•°ä¼ å‚ï¼ˆç‰¹ä¾‹ï¼šæ„é€ å‡½æ•°ä¼ å‚ï¼š`Class a = c;`ï¼Œæ³¨æ„ `Class a; a = c` å¹¶ä¸ä¼šæ‹·è´æ„é€ ï¼‰ã€‚\n  - å¦‚æœä¸éœ€è¦æ‹·è´æ„é€ ï¼Œå¯ä»¥å°†å…¶å£°æ˜ä¸º privateï¼Œåœ¨å¤–éƒ¨è°ƒç”¨æ—¶å°±ä¼šæŠ¥é”™ã€‚è¿™ç§æƒ…å†µä¸‹ä¸éœ€è¦å‡½æ•°å®ç°ï¼ˆ`private: Person(const Person &);`ï¼‰\n\n## 3. Overload & Casting\n\n- é‡è½½\n  - ä¸èƒ½è¢«é‡è½½çš„è¿ç®—ç¬¦ï¼š`.`ã€`.*`ã€`::`ã€`?:`ã€`sizeof`ã€`typeid`ã€å››ç§ castï¼ˆæ³¨æ„ `,` æ˜¯å¯ä»¥é‡è½½çš„ï¼‰\n  - åªèƒ½ä½œä¸ºæˆå‘˜é‡è½½è€Œä¸èƒ½ä½œä¸ºå‹å…ƒå‡½æ•°é‡è½½çš„ï¼š`=`ã€`()`ã€`[]`ã€`->`ã€`->*`\n  - æˆå‘˜å‡½æ•° VS è‡ªç”±å‡½æ•°\n    - `=`ã€`()`ï¼ˆç”¨äºç±»å‹è½¬æ¢ï¼‰ã€`[]`ã€`->`ã€`->*` å¿…é¡»æ˜¯æˆå‘˜\n  - é‡è½½è‡ªå¢è¿ç®—ç¬¦å’Œè‡ªå‡è¿ç®—ç¬¦ï¼š\n    ```cpp\n    const Integer& Integer::operator++() { // ++prefix\n      *this += 1; return *this; }\n    const Integer Integer::operator++(int/* unnamed */) { // postfix++\n      Integer old(*this); ++(*this); return old; }\n    ```\n  - å‡½æ•°åŸå‹ï¼š\n    - `+ - * / % ^ & | ~`\n      - `const _Tp operator X(const _Tp& l, const _Tp& r);`\n    - `== != < > <= >= `\n      - `bool operator X(const _Tp& l, const _Tp& r);`\n    - `[]`\n      - `_Tp& operator X(int index); `\n    - `= += -= *= /= <<= >>=`\n      - `_Tp& operator X(_Tp& l, const _Tp& r);`\n- ç±»å‹è½¬æ¢\n  - è‡ªå®šä¹‰ç±»å‹è½¬æ¢ï¼šé€šè¿‡é‡è½½ `operator _Tp() const;`\n  - è‡ªå®šä¹‰ç±»çš„é»˜è®¤ç±»å‹è½¬æ¢ï¼š\n    - `T => T& T& => T T => (const T)`\n    - `T[] => T* T* => T[] T* => void*`\n  - ï¼ˆéšå¼ï¼‰è½¬æ¢çš„åŒ¹é…è§„åˆ™ï¼ˆå°† `A` è½¬åŒ–ä¸º `B`ï¼‰\n    - ç²¾ç¡®çš„ç±»å‹åŒ¹é…ï¼ˆ`A` å°±æ˜¯ `B`ï¼‰\n    - å†…ç½®ç±»å‹è½¬æ¢\n    - è‡ªå®šä¹‰çš„ç±»å‹è½¬æ¢\n      - å¦‚æœæœ‰ `B(A)` çš„ä¸ä¸º `explicit` çš„æ„é€ å‡½æ•°ï¼Œåˆ™ä½¿ç”¨\n        - æ³¨æ„è¯­ä¹‰ï¼š`explicit` è¡¨æ˜ä¸èƒ½è¿›è¡Œéšå¼ç±»å‹è½¬æ¢\n        - å¦‚æœä½¿ç”¨ `static_cast<B>`ï¼Œé‚£ä¹ˆæ˜ç¡®ä½¿ç”¨æ„é€ å‡½æ•°ï¼ˆè§£å†³ `explicit` çš„é—®é¢˜ï¼‰\n      - å¦‚æœæœ‰ `A` åˆ° `B` çš„è‡ªå®šä¹‰ç±»å‹è½¬æ¢ï¼Œåˆ™ä½¿ç”¨\n    - å¯¹äºæ¨¡æ¿å‡½æ•°çš„å‚æ•°ï¼Œå¦‚æœä¸Šè¿°æ¡ä»¶å‡ä¸æ»¡è¶³ï¼Œåˆ™ç¼–è¯‘å™¨ä¼šè€ƒè™‘ä½¿ç”¨å…¶ä»–ç‰ˆæœ¬çš„å‡½æ•°ã€‚\n- cast\n  - `static_cast`ï¼šåœ¨ç›¸å…³ç±»å‹ä¹‹é—´è½¬æ¢ï¼Œ==ç¼–è¯‘æ—¶==ã€‚\n    - åŸºæœ¬ç±»å‹çš„è½¬æ¢ï¼ˆéµå¾ªä¸Šé¢çš„è§„åˆ™ï¼‰\n    - å­ç±»æŒ‡é’ˆ/å¼•ç”¨å‘çˆ¶ç±»æŒ‡é’ˆ/å¼•ç”¨çš„è½¬æ¢ï¼ˆup-castingï¼Œå®‰å…¨ï¼‰\n    - çˆ¶ç±»æŒ‡é’ˆ/å¼•ç”¨å‘å­ç±»æŒ‡é’ˆ/å¼•ç”¨çš„è½¬æ¢ï¼ˆdown-castingï¼Œä¸å®‰å…¨ï¼Œå¯èƒ½å¯¼è‡´ UBï¼‰\n    - `void*` å’Œå…¶ä»–ç±»å‹æŒ‡é’ˆçš„è½¬æ¢ï¼ˆå®‰å…¨ï¼Œç”±å¼€å‘è€…ç¡®ä¿æ­£ç¡®ï¼‰\n    - å¦åˆ™ä¼šåœ¨ç¼–è¯‘å™¨æŠ¥é”™ã€‚\n  - `dynamic_cast`ï¼šç”¨äº==å¤šæ€ç±»å‹==ï¼ˆæœ‰è™šå‡½æ•°çš„ç±»ï¼‰çš„ down-castingï¼Œåœ¨è¿è¡Œæ—¶åˆ»æ£€æŸ¥ç±»å‹å®‰å…¨\n    - çˆ¶ç±»æŒ‡é’ˆ/å¼•ç”¨å‘å­ç±»æŒ‡é’ˆ/å¼•ç”¨çš„è½¬æ¢ã€‚\n      - å¼•ç”¨ç±»å‹è½¬æ¢å¤±è´¥ï¼šæŠ›å‡º `std::bad_cast` å¼‚å¸¸ï¼›\n      - æŒ‡é’ˆç±»å‹è½¬æ¢å¤±è´¥ï¼šè¿”å› `nullptr`ï¼›\n    - ç¼–è¯‘æœŸé”™è¯¯ï¼šä¸æ˜¯å¤šæ€ç±»å‹ï¼ˆåŸºç±»æ²¡æœ‰è™šå‡½æ•°ï¼Œ==é™¤é==æœ¬èº«æ˜¯ up-casting è¿™ç§ç¼–è¯‘å™¨å¯ç¡®å®šçš„ï¼‰ã€ç±»å‹ä¹‹é—´æ²¡æœ‰ç»§æ‰¿å…³ç³»ã€‚\n  - `const_cast`ï¼šç”¨äºä¿®æ”¹ç±»å‹çš„ `const` æˆ– `volatile` å±æ€§ã€‚\n    - å»é™¤ `const` å±æ€§ï¼Œä½¿å˜é‡å¯ä»¥ä¿®æ”¹ï¼ˆä¼ ç»™å¦ä¸€ä¸ªæŒ‡é’ˆæ¥ä¿®æ”¹ï¼‰`const int x = 0; const_cast<int*>(&x)`\n    - `volatile` å±æ€§æŒ‡çš„æ˜¯å˜é‡ä¸èƒ½è¢«ä¼˜åŒ–åœ¨å¯„å­˜å™¨ä¸­ï¼Œæ¯æ¬¡ä¿®æ”¹å¿…é¡»è®¿é—®å†…å­˜\n  - `reinterpret_cast`ï¼šä½çº§åˆ«çš„ã€æ— ç±»å‹æ£€æŸ¥çš„è½¬æ¢ã€‚å¯ä»¥åœ¨å‡ ä¹ä»»ä½•ç±»å‹é—´è½¬æ¢ï¼Œä½†æ˜¯éå¸¸å±é™©ã€‚\n\n## 4. Template\n\n- æ¨¡æ¿å¯ä»¥ä»å®ä¾‹ç±»ç»§æ‰¿ï¼Œå¯ä»¥ä»ç±»æ¨¡æ¿ç»§æ‰¿ã€‚å®ä¾‹ç±»åªèƒ½ä»å®ä¾‹ç±»ç»§æ‰¿ã€‚\n- å¯¹äºé™æ€æˆå‘˜å˜é‡ï¼ŒåŒæ ·åœ¨ç±»é‡Œåªèƒ½å…ˆå£°æ˜ï¼Œç„¶åä½¿ç”¨ `template<typename T> int Derived<T>::size = 10;` åˆ›å»ºã€‚è¿™æ ·å®é™…è°ƒç”¨æ—¶ï¼Œä¼šä¸ºæ¯ä¸ªä¸åŒçš„ `T` ç”Ÿæˆä¸€ä¸ª `size` å˜é‡ã€‚\n- æ¨¡æ¿å‡½æ•°å’Œæ™®é€šå‡½æ•°åŒæ—¶å­˜åœ¨çš„æƒ…å†µï¼šæ¨¡æ¿å‡½æ•°ä¸èƒ½è¿›è¡Œè‡ªåŠ¨ç±»å‹è½¬æ¢ä½†æ™®é€šå‡½æ•°å¯ä»¥ã€‚\n\n## 5. Exception\n\n- `catch` çš„æ‹¬å·å†… `ErrorType& e` è¡¨ç¤ºæ•è· `ErrorType` åŠå…¶å­ç±»ï¼ˆå¦‚æœæ˜¯åŸºæœ¬ç±»å‹å°±ä¸è€ƒè™‘å­ç±»ï¼‰ã€‚ä½¿ç”¨ `...` è¡¨ç¤ºæ•æ‰ä»»ä½•å¼‚å¸¸ã€‚\n  - ![|700](https://img.memset0.cn/2025/01/10/QZSWliuV.png)\n- å¯ä»¥ç›´æ¥å†™ `throw` è¡¨ç¤ºå†æŠ›å‡ºã€‚\n- å¼‚å¸¸è§„èŒƒï¼šå£°æ˜å‡½æ•°å¯èƒ½è¿”å›ä½•ç§å¼‚å¸¸\n  - `void print(Document& p) throw(PrintOffLine, BadDocument);`\n  - `void goodguy() throw();// throw no exceptions, until C++11`\n  - `void alloc() throw(...);// can throw any exception`\n  - `void abc() noexcept;// throw no exceptions, since C++11`\n  - (\\*) å¦‚æœåœ¨å‡½æ•°ä¸­è¿”å›äº†è§„èŒƒä¹‹å¤–çš„å¼‚å¸¸ï¼Œç³»ç»Ÿä¼šè°ƒç”¨ [`std::unexpected()`](https://en.cppreference.com/w/cpp/error/unexpected) æ¥å¤„ç†ã€‚\n    - `std::unexpected()` é»˜è®¤è°ƒç”¨ `std::terminate()` æ¥ç»ˆæ­¢ç¨‹åºã€‚\n    - å¯ä»¥ç”¨ `std::set_unexpected(func)`å°† `std::unexpected()` é‡è½½ä¸º `func()`ï¼›\n    - ä¹Ÿå¯ä»¥ç”¨ `std::set_terminate(func)` å°† `std::terminate()` é‡è½½ä¸º `func()`ã€‚\n    - å¦‚æœ `std::unexpected()` è¢«è°ƒç”¨åï¼ŒæŠ›å‡ºçš„å¼‚å¸¸ä»ç„¶ä¸ç¬¦åˆå¼‚å¸¸è§„èŒƒï¼Œåˆ™ä¼šæŠ›å‡º `std::bad_exception` å¼‚å¸¸ã€‚\n    - C++17 ä¹‹åï¼Œå¼‚å¸¸è§„èŒƒè¯´æ˜å·²è¢«å¼ƒç”¨ã€‚ä½¿ç”¨ `noexcept` è¯´æ˜å‡½æ•°ä¸ä¼šæŠ›å‡ºä»»ä½•å¼‚å¸¸æ—¶ï¼Œè‹¥æŠ›å‡ºäº†å¼‚å¸¸ï¼Œåˆ™ä¼šç›´æ¥è°ƒç”¨ `std::terminate()`ã€‚\n- [`exception`](https://en.cppreference.com/w/cpp/error/exception)ï¼šæ‰€æœ‰å¼‚å¸¸çš„å…¬å…±åŸºç±»\n  - bad ç³»åˆ—\n    - `bad_alloc`ï¼š`new` æ— æ³•åˆ†é…ç©ºé—´æŠ›å‡ºçš„å¼‚å¸¸\n      - `malloc` åœ¨æœªæˆåŠŸåˆ†é…ç©ºé—´æ—¶ä¼šè¿”å› `NULL`ã€‚\n    - `bad_cast`ï¼š`dynamic_cast` å¯¹å¼•ç”¨çš„ç±»å‹æ£€æŸ¥å‡ºé”™ï¼ŒæŠ›å‡ºçš„å¼‚å¸¸\n    - `bad_typeid`ï¼šå¯¹å¤šæ€ç±»å‹çš„ç©ºæŒ‡é’ˆä½¿ç”¨ `typeid` æŠ›å‡ºçš„å¼‚å¸¸\n    - `bad_exception`ï¼šå½“å‰æŠ›å‡ºå¼‚å¸¸çš„æ‹·è´æ„é€ å‡ºé”™æ—¶ï¼ŒæŠ›å‡ºçš„å¼‚å¸¸\n  - `runtime_error`ï¼šäº‹ä»¶è¶…å‡ºç¨‹åºèŒƒå›´æŠ›å‡ºçš„å¼‚å¸¸\n    - `overflow_error`ï¼šç®—æ•°ä¸Šæº¢æŠ›å‡ºçš„å¼‚å¸¸ï¼ˆSTL ä¸­ä»… `std::bitset::to_ulong`ï¼‰\n    - `range_error`ï¼šç®—æ•°è¶…ç•ŒæŠ›å‡ºçš„å¼‚å¸¸\n  - `logic_error`ï¼šç¨‹åºé€»è¾‘é”™è¯¯å¼•å‘çš„å¼‚å¸¸ï¼Œå¹¶ä¸”å¯èƒ½æ˜¯å¯ä»¥é¢„é˜²çš„\n    - `domain_error`ï¼šå½“è¾“å…¥è¶…å‡ºäº†å…¶ç±»å‹çš„å®šä¹‰åŸŸæ—¶æŠ›å‡ºçš„å¼‚å¸¸\n    - `length_error`ï¼šå½“å¯¹å®¹å™¨çš„æ“ä½œä½¿å…¶è¶…å‡ºäº†é¢„å®šä¹‰çš„é•¿åº¦ä¸Šé™æ—¶æŠ›å‡ºçš„å¼‚å¸¸\n    - `out_of_range`ï¼šå½“å¯¹å®¹å™¨çš„æ“ä½œè¶…å‡ºäº†å…¶å½“å‰èŒƒå›´æ—¶æŠ›å‡ºçš„å¼‚å¸¸\n    - `invalid_argument`ï¼šå½“ä¼ å…¥å‚æ•°ä¸åˆæ³•æ—¶æŠ›å‡ºçš„å¼‚å¸¸\n- ç©ºé—´å®‰å…¨ï¼šä½¿ç”¨ä¸¤æ­¥æ„é€ ï¼ˆä¸è¦ç›´æ¥åœ¨æ„é€ å‡½æ•°é‡Œç”³è¯·ç©ºé—´ï¼Œå¦åˆ™æŠ›å‡ºå¼‚å¸¸æ—¶ä¸ä¼šè°ƒç”¨ææ„å‡½æ•°ï¼‰\n  - åœ¨æ„é€ å‡½æ•°å†…å¯¹åŸºæœ¬å˜é‡èµ‹å€¼\n  - ä»»ä½•éœ€è¦ç”³è¯·èµ„æºå’Œç©ºé—´çš„æ“ä½œï¼Œåœ¨æ˜¾å¼çš„ `init()` å‡½æ•°å†…æ‰§è¡Œ\n\n## 6. Others\n\n- `class` ä¸­çš„æƒé™æ§åˆ¶é»˜è®¤ä¸º `private`ã€`struct` ä¸­çš„æƒé™æ§åˆ¶é»˜è®¤ä¸º `public`\n- æ„é€ å’Œææ„çš„é¡ºåºæ˜¯ç›¸åçš„ã€‚\n  - æ— è®ºæ˜¯ç›´æ¥åˆ›å»ºæ•°ç»„è¿˜æ˜¯ä½¿ç”¨ `new` & `delete`ï¼Œæ„é€ çš„é¡ºåºéƒ½æ˜¯ä»å°åˆ°å¤§ï¼Œææ„çš„é¡ºåºéƒ½æ˜¯ä»å¤§åˆ°å°\n- `malloc` ä¸æ‰§è¡Œç±»çš„æ„é€ å‡½æ•°ï¼Œè€Œ `new` å‡ºæ–°çš„å¯¹è±¡çš„æ—¶å€™ä¼šæ‰§è¡Œå¯¹è±¡çš„æ„é€ å‡½æ•°ã€‚\n- åœ¨ç±»å†…å®šä¹‰çš„æ–¹æ³•éƒ½ä¼šè¢«è‡ªåŠ¨å£°æ˜ä¸º `inline`ï¼Œä½†æ˜¯æ˜¯å¦ä¼šè¢«å†…è”ç”±ç¼–è¯‘å™¨å†³å®šã€‚\n- `extern` è¯´æ˜å…¨å±€å˜é‡æˆ–å‡½æ•°ä¼šåœ¨å¦ä¸€ä¸ªæ–‡ä»¶ä¸­æœ‰ï¼ˆå¹¶é“¾æ¥è¿‡æ¥ï¼‰ï¼›`static` ä¿®é¥°çš„å…¨å±€å˜é‡æˆ–å‡½æ•°åªèƒ½åœ¨å½“å‰æ–‡ä»¶ä¸­ä½¿ç”¨ã€‚\n- volatileï¼šè¡¨ç¤ºå˜é‡æˆ–å¯¹è±¡çš„å€¼å¯èƒ½ä¼šåœ¨ç¨‹åºæ§åˆ¶ä¹‹å¤–è¢«æ”¹å˜ï¼Œä¾‹å¦‚ç”±ç¡¬ä»¶æˆ–æ“ä½œç³»ç»Ÿä¿®æ”¹ã€‚å®ƒç”¨äºå‘Šè¯‰ç¼–è¯‘å™¨ä¸è¦å¯¹æ¶‰åŠ volatile å˜é‡çš„ä»£ç è¿›è¡Œä¼˜åŒ–ï¼Œä»¥ç¡®ä¿æ¯æ¬¡è®¿é—® volatile å˜é‡æ—¶éƒ½ä»å†…å­˜ä¸­è¯»å–å…¶å€¼.\n\n## 7. Pitfalls\n\n- å‡ ä¸ªåè¯\n  - **å°è£…(encapsulation)**\n  - **ç»§æ‰¿(inheritance)**\n  - **å¤šæ€(polymorphism)**\n- ==è‡ªå·±å†™çš„ä»£ç åˆ«å’ŒæŒ–ç©ºä¹‹å¤–çš„éƒ¨åˆ†é‡å¤äº†==\n- å…³æ³¨ï¼šæƒé™ï¼Œ==æ˜¯å¦æœ‰ const==ï¼›ä»è€Œè®¨è®ºåˆ°åº•æ˜¯ overriding è¿˜æ˜¯ name hiding\n- æ„é€ å‡½æ•°å…ˆ==çˆ¶ç±»==å†è‡ªå·±ï¼Œææ„å‡½æ•°å…ˆè‡ªå·±å†==çˆ¶ç±»==ä¸è¦æ¼äº†ã€‚\n- æ— è®ºæ˜¯è‡ªå·±å†™ç¨‹åºè¿˜æ˜¯è¯»ä»–å†™çš„ç¨‹åºï¼Œæ³¨æ„ä¸€ä¸‹ç”¨ `delete` è¿˜æ˜¯ `delete[]`\n  ![|490](https://img.memset0.cn/2025/01/11/e9RJGJIY.png)\n- Pitfallï¼š\n  - æ„é€ å‡½æ•°ä»”ç»†çœ‹ï¼šç»§æ‰¿ã€æˆå‘˜å˜é‡ï¼Ÿå…¨å±€å˜é‡ï¼Ÿ\n  - ææ„å‡½æ•°ä»”ç»†çœ‹ï¼šé™¤äº† delete å¤–è¿˜æœ‰å› ç”Ÿå‘½å‘¨æœŸç»“æŸå¯¼è‡´çš„ææ„ã€‚\n    ![|214](https://img.memset0.cn/2025/01/11/WOpk6I1c.png)\n  - const çš„è¯ç”¨ä¸äº†é const çš„æ–¹æ³•ï¼›é™æ€ä¼šå’Œæˆå‘˜çš„å‡½æ•°ä¸€èµ·é‡è½½ï¼Œçœ‹å“ªä¸ªæ›´åŒ¹é…ã€‚\n    ![|427](https://img.memset0.cn/2025/01/11/YtDCfqcw.png)\n- ![|629](https://img.memset0.cn/2025/01/10/223RecdN.png)\n- ![|630](https://img.memset0.cn/2025/01/10/37j2UAOz.png)\n- ![|639](https://img.memset0.cn/2025/01/10/3znSJrBg.png)\n- throw å¦‚æœå¸¦æ‹¬å·å°±æ˜¯åˆ›å»ºä¸€ä¸ªå¯¹è±¡ï¼Œ\n  - throw Type()//æ–°å»ºä¸€ä¸ªï¼Œç»“æŸåææ„\n  - throw sth // ç”Ÿå‘½å‘¨æœŸä¼šä¿è¯ç»´æŒåˆ° catch ç»“æŸ\n- ![|434](https://img.memset0.cn/2025/01/10/izN4l72t.png)\n","publishedTitle":"ã€Œé¢å‘å¯¹è±¡ç¨‹åºè®¾è®¡ã€æœŸæœ«å¤ä¹ "}},{"id":"f3bbe74f-5713-5ce2-bab0-d7c4385f182c","fields":{"slug":"/blog/high-school/math/approximants/","plainText":"\n> æœ¬ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬å°†ä»å¸¸ç”¨çš„åˆ‡çº¿æ”¾ç¼©å’Œæ³°å‹’å±•å¼€å‡ºå‘ï¼Œæ¢è®¨ä¸€äº›åœ¨é«˜ä¸­æ•°å­¦ä¸­å¸¸ç”¨çš„é€¼è¿‘ä¸æ”¾ç¼©æ–¹æ³•ï¼Œå¹¶ç®€å•ä»‹ç»ä»–ä»¬çš„åº”ç”¨ã€‚\n>\n> 2022 å¹´æ–°é«˜è€ƒ I å·ä¸­å‡ºç°çš„æ¯”è¾ƒ $a=0.1e^{0.1}$ï¼Œ$b=\\dfrac 19$ï¼Œ$c=-\\ln 0.9$ ä¸‰ä¸ªæ•°å¤§å°çš„é€‰æ‹©é¢˜å³ä¸ºè¿™ç§æ–¹æ³•çš„å…¸å‹ä¾‹é¢˜ã€‚\n\n<!-- more -->\n\n## 1. åˆ‡çº¿æ”¾ç¼©\n\né«˜ä¸­é˜¶æ®µæœ‰ä¸€ç±»å¸¸ç”¨çš„ä¸ç­‰å¼ï¼š\n\n$$\n\\begin{aligned}\ne^x\\ge x+1 &\\Leftrightarrow \\ln(x+1) \\le x \\\\\n\\ln x\\le x-1 &\\Leftrightarrow e^x\\ge ex\n\\end{aligned}\n$$\n\nè¿™äº›ä¸ç­‰å¼éƒ½æ˜¯ç”±åŸå¼åœ¨æŸç‚¹çš„åˆ‡çº¿æ–¹ç¨‹å¾—åˆ°çš„ï¼Œåˆ‡çº¿æ–¹ç¨‹å’ŒåŸå‡½æ•°çš„åœ¨è¯¥ç‚¹çš„å€¼å’Œä¸€é˜¶å¯¼éƒ½ç›¸åŒã€‚é€šè¿‡æ³°å‹’å±•å¼€ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠè¿™ç§æ€æƒ³ä»ä¸€é˜¶æ¨å¹¿åˆ° $n$ é˜¶ç”šè‡³ä»»æ„é˜¶ã€‚\n\n## 2. æ³°å‹’å±•å¼€\n\nå¯¹äºå¤šé¡¹å¼ $f(x)$ï¼Œæˆ‘ä»¬å®šä¹‰ $T_n(x)=\\sum\\limits_{i=0}^n\\dfrac{f^{(i)}(x_0)(x-x_0)^i}{i!}$ ä¸ºå…¶ $n$ é˜¶æ³°å‹’çº§æ•°ï¼ˆTaylor Seriesï¼‰ã€‚$T_n(x)$ ä¸åŸå‡½æ•°åœ¨ $x_0$ å¤„æœ‰ç›¸åŒçš„ $n$ é˜¶å¯¼æ•°ï¼Œå³å¯¹äºä»»æ„ $k\\in [0,n]$ï¼Œ$f^{(k)}(x_0) = T_n^{(k)}(x_0)$ã€‚ç‰¹åˆ«åœ°ï¼Œå½“ $x_0=0$ æ—¶ï¼Œè¯¥çº§æ•°åˆç§°ä½œåŸå‡½æ•°çš„éº¦å…‹åŠ³æ—çº§æ•°ï¼ˆMaclaurin Seriesï¼‰ã€‚\n\n#### 2.1.1. åº”ç”¨ï¼šå¾—åˆ°å¸¸ç”¨ä¸ç­‰å¼\n\nå¯¹ä¸€äº›å‡½æ•°è¿›è¡Œæ³°å‹’å±•å¼€ï¼Œæˆ‘ä»¬å¯ä»¥å¾—åˆ°ä¸€äº›å¸¸ç”¨çš„ä¸ç­‰å¼ï¼Œå¦‚ï¼š\n\nç”± $e^x=1+x+\\dfrac{x^2}{2!}+\\dfrac{x^3}{3!}+\\dfrac{x^4}{4!}+\\cdots$ æˆ‘ä»¬å¯ä»¥å¾—åˆ° $e^x\\ge x+1,\\quad e^x\\ge \\dfrac{x^2}{2} +x+1$ ç­‰ä¸ç­‰å¼ã€‚\n\nç±»ä¼¼çš„ï¼Œç”± $\\ln (x+1)=x-\\dfrac{x^2}{2}+\\dfrac{x^3}{3}-\\cdots$ å¯ä»¥å¾—åˆ° $\\ln(x+1)\\ge x-\\dfrac{x^2}2(x\\ge 0)$ï¼Œ$\\ln(x+1)\\le x-\\dfrac{x^2}2(x\\le 0)$ ç­‰ï¼Œæ³¨æ„åœ¨ $0$ çš„ä¸¤ä¾§ä¸ç­‰å·çš„æ–¹å‘æ˜¯ç›¸åçš„ã€‚\n\nç®€å•ä¸‰è§’å‡½æ•°ä¹Ÿå¯é€šè¿‡æ³°å‹’å±•å¼€å¾—åˆ°ä¸€äº›å¸¸ç”¨çš„ä¸ç­‰å¼ï¼Œç”± $\\sin x = x-\\dfrac{x^3}{6}+\\dfrac{x^5}{120}+\\cdots$ å¯ä»¥å¾—åˆ° $\\sin x \\leq x(x\\ge 0)$ï¼Œ$\\sin x\\geq x(x\\le0)$ï¼Œ$\\sin x \\ge x - \\dfrac {x^3}{6}(x\\ge 0)$ï¼Œ$\\sin x\\ge x-\\dfrac{x^3}{6}(x\\le 0)$ ç­‰ã€‚ç±»ä¼¼çš„ï¼Œç”± $\\cos x = 1-\\dfrac{x^2}{2}+\\dfrac{x^4}{24}-\\cdots$ å¯ä»¥å¾—åˆ° $\\cos x \\ge 1 - \\dfrac{x^2}2$ ç­‰ã€‚\n\nè¿™ç§æ–¹æ³•å¹¶ä¸æ€»èƒ½æˆåŠŸï¼Œæˆ‘ä»¬éœ€è¦å¦å¤–éªŒè¯ä¸ç­‰å¼æˆç«‹çš„èŒƒå›´ã€‚\n\n## 3. å¸•å¾·é€¼è¿‘\n\nå¸•å¾·é€¼è¿‘ä¸æ³°å‹’å±•å¼€çš„æƒ³æ³•ç±»ä¼¼ï¼Œå¯¹äºå‡½æ•° $f(x)$ï¼Œæˆ‘ä»¬æ„é€ ä¸€ä¸ªåˆ†å¼ $R_{n,m}(x)=\\dfrac{p_n(x)}{q_m(x)}$ï¼Œå…¶ä¸­ $p_n(x),\\;q_m(x)$ åˆ†åˆ«ä¸º $n$ã€$m$ æ¬¡å¤šé¡¹å¼ã€‚æˆ‘ä»¬éœ€è¦æ‰¾åˆ°è¿™æ ·çš„åˆ†å¼ï¼Œæ»¡è¶³åœ¨ $x_0$ å¤„ä¸åŸå‡½æ•°æœ‰ç›¸åŒçš„ $n+m$ é˜¶å¯¼æ•°ï¼Œå³å¯¹äºä»»æ„ $k\\in [0,n+m]$ï¼Œ$f^{(k)}(x_0) = R_{n,m}^{(n+m)}(x_0)$ã€‚è¿™æ ·çš„ $R_{n,m}(x)$ å°±æ˜¯åŸå‡½æ•°åœ¨ $x_0$ å¤„çš„ $[n,m]$ é˜¶å¸•å¾·é€¼è¿‘ã€‚\n\nå¸¸è§å‡½æ•°çš„å¸•å¾·é€¼è¿‘å‚è§ä¸‹è¡¨ï¼Œå¯ç”±ä»£ç  [pade.py](https://github.com/memset0/naive-toys/blob/master/pade-approximants/pade.py) éªŒè¯ã€‚\n\n| $e^x$ | $m=0$                                      | $m=1$                                             | $m=2$                                              |\n| ----- | ------------------------------------------ | ------------------------------------------------- | -------------------------------------------------- |\n| $n=0$ | $1$                                        | $\\dfrac{x+1}{1}$<small>ï¼ˆæ’å°äºï¼‰</small>         | $\\dfrac{x^2+2x+2}{2}$                              |\n| $n=1$ | $\\dfrac{1}{-x+1}$<small>ï¼ˆæ’å¤§äºï¼‰</small> | $\\dfrac{x+2}{-x+2}$                               | $\\dfrac{x^2+4x+6}{-2x+6}$<small>ï¼ˆæ’å¤§äºï¼‰</small> |\n| $n=2$ | $\\dfrac{2}{x^2-2x+2}$                      | $\\dfrac{2x+6}{x^2-4x+6}$<small>ï¼ˆæ’å°äºï¼‰</small> | $\\dfrac{x^2+6x+12}{x^2-6x+12}$                     |\n\n| $\\ln(x+1)$ | $m=1$                                      | $m=2$                                           |\n| ---------- | ------------------------------------------ | ----------------------------------------------- |\n| $n=0$      | $x$<small>ï¼ˆæ’å°äºï¼‰</small>               | $\\dfrac{2x-x^2}{2}$                             |\n| $n=1$      | $\\dfrac{2x}{x+2}$                          | $\\dfrac{x^2+6x}{4x+6}$<small>ï¼ˆæ’å¤§äºï¼‰</small> |\n| $n=2$      | $\\dfrac{2x}{x+2}$<small>ï¼ˆæ’å¤§äºï¼‰</small> | $\\dfrac{3x^2+6x}{x^2+6x+6}$                     |\n\n#### 3.1.1. åº”ç”¨ï¼šä¸€ç±»â€œæ¯”å¤§å°â€é—®é¢˜\n\n> [!example] ä¾‹ï¼š2022 å¹´æ–°é«˜è€ƒå…¨å›½ I å· 7.\n>\n> è®¾ $a=0.1e^{0.1}$ï¼Œ$b=\\dfrac 19$ï¼Œ$c=-\\ln 0.9$ï¼Œåˆ™ï¼ˆ$\\quad$ï¼‰\n>\n> A. $a<b<c\\quad$ B. $c<b<a\\quad$ C. $c<a<b\\quad$ D.$a<c<b\\quad$\n\nä¸€èˆ¬çš„åšæ³•è‚¯å®šæ˜¯æ„é€ å‡½æ•°ï¼Œä½†è¿™é‡Œæˆ‘ä»¬è¯•å›¾ç”¨ $[2,2]$ é˜¶å¸•å¾·é€¼è¿‘çš„ç»“æœä»£å…¥ä¸€ä¸‹ï¼š\n\n$$\n\\left\\{\\begin{aligned}\n10\\cdot a &= \\frac{0.01+0.6+12}{0.01-0.6+12} = \\frac{12.61}{11.41} \\\\\n10\\cdot b &= \\frac{10}{9} \\\\\n10\\cdot c &= \\frac{0.6-0.03}{0.01-0.6+6} = \\frac{5.7}{5.41} \\\\\n\\end{aligned}\\right.\n$$\n\nå…ˆæ¯”è¾ƒç®€å•çš„ä¸¤ä¸ªï¼Œå‘ç° $a<b$ ä¸” $c<b$ï¼Œè¿˜éœ€è¦ä¸€ä¸ªä¸‰ä½æ•°ä¹˜å››ä½æ•°çš„ä¹˜æ³•å°±å¯ä»¥å¾—åˆ°ç­”æ¡ˆï¼Œç›¸æ¯”ç›´æ¥æ„é€ è¿˜æ˜¯èƒ½çœä¸‹ä¸å°‘æ—¶é—´ã€‚\n\nä¸‹å›¾ç”± Geogebra ç»˜åˆ¶ï¼Œå¯ä»¥å‘ç°æˆ‘ä»¬çš„ç²¾åº¦åœ¨ $x=0.1$ å¤„å¯è°“ç»°ç»°æœ‰ä½™ã€‚\n\n![](https://img.memset0.cn/2024/02/11/mx5MafKR.png)\n\n#### 3.1.2. åº”ç”¨ï¼šæ‰‹ç®— $\\ln(x)$ çš„å€¼\n\nå°† $x$ æ‹†åˆ†æˆ $x=2\\cdot \\dfrac{c_1+1}{c_1}\\cdot \\dfrac{c_2+1}{c_2}\\cdot \\dfrac{c_3+1}{c_3} \\cdots$ çš„å½¢å¼ï¼Œç„¶åä»£å…¥ $\\ln 2=0.693$ï¼Œ$\\ln\\left(\\dfrac{n+1}{n}\\right)\\sim\\dfrac{2}{2n+1}\\quad (n\\ge 3)$ å¾—è¿‘ä¼¼å€¼ã€‚\n\n> [!example] ä¾‹ï¼šæ±‚ ln(11)\n>\n> $$\n> \\begin{aligned}\n> \\ln 11\n> &= \\ln \\dfrac {11}{10} + \\ln 5 + \\ln 2 \\\\\n> &= \\ln \\dfrac {11}{10} + \\ln {5}{4} + 3\\ln 2 \\\\\n> &\\approx \\frac {2}{21} +\\frac {2}{9}+3\\times 0.693 \\approx 2.3964)\n> \\end{aligned}\n> $$\n>\n> è®¡ç®—ç»“æœä¸çœŸå®å€¼ $\\ln (11) = 2.397895\\ldots$ è¾ƒä¸ºæ¥è¿‘ã€‚\n\næ³¨æ„åˆ° $\\ln\\left(\\dfrac{n+1}{n}\\right)\\sim\\dfrac{2}{2n+1}$ è¿™ä¸€è¿‘ä¼¼å®é™…ä¸Šå°±æ˜¯ $\\ln(x+1)$ çš„ $[1,1]$ é˜¶å¸•å¾·é€¼è¿‘ã€‚\n\nè¿™ç§æ–¹æ³•ä¸€èˆ¬æƒ…å†µä¸‹å¯ç²¾ç¡®åˆ° $2$ è‡³ $3$ ä½ï¼Œ$x\\le 1000$ æ—¶æœ€å¤§è¯¯å·®çº¦ä¸º $0.0071$ï¼ˆå‚è€ƒä»£ç ï¼š[ln-x.py](https://github.com/memset0/naive-toys/blob/master/pade-approximants/ln-x.py)ï¼‰ã€‚æ¯”ç›´æ¥ä½¿ç”¨å¸•å¾·é€¼è¿‘ç²¾åº¦æ›´é«˜ï¼Œä¸”è®¡ç®—é‡è¾ƒå°ï¼Œé€‚åˆç¬”å¤´è®¡ç®—ã€‚\n\n> [!quote] å‚è€ƒèµ„æ–™\n>\n> - [æ³°å‹’çº§æ•° - Wikipedia](https://zh.wikipedia.org/wiki/%E6%B3%B0%E5%8B%92%E7%BA%A7%E6%95%B0)\n> - [å¸•å¾·è¿‘ä¼¼ - Wikipedia](https://zh.m.wikipedia.org/zh-hans/%E5%B8%95%E5%BE%B7%E8%BF%91%E4%BC%BC)\n> - [å¸•å¾·é€¼è¿‘ (PadÃ© approximation) - æ•°å€¼åˆ†æå¤§å·´](https://numanal.com/pade-approximants/)\n> - [ä¸‰æ­¥æ‰‹æ’•ä»»æ„ lnx - ç«æ˜Ÿè¯¾å ‚, bilibili.com](https://www.bilibili.com/video/BV1Hr4y1Q7Zf)\n> - [å¸•å¾·é€¼è¿‘ï¼ˆPadeâ€™s Approximant) - çºä¹‹, zhihu.com](https://zhuanlan.zhihu.com/p/92873681)\n> - [å¸•å¾·è¿‘ä¼¼å¦‚ä½•æ“ä½œï¼Ÿ - æå€¾å°˜, zhihu.com](https://www.zhihu.com/question/465913059/answer/1948539534)\n> - [ã€å¯¼æ•°é—®é¢˜ã€‘å‡½æ•°é€¼è¿‘çš„ä¸€äº›æ–¹æ³• - é›¶å·çš„é¬¼, zhihu.com](https://zhuanlan.zhihu.com/p/123329716)\n> - [ç¬¬äºŒç«  : å‡½æ•°æ”¾ç¼©é—®é¢˜ â— å®æ´›æœ—çº§æ•° - é«˜è€ƒæ•°å­¦å‘†å“¥, zhihu.com](https://zhuanlan.zhihu.com/p/339473156)\n> - [ã€å‡çº§ã®é«˜ä¸­æ•°å­¦ï¼å¯¼æ•°ã€‘å‡½æ•°é€¼è¿‘çš„ä¸‰ç§æ–¹æ³•â€”â€”æ³°å‹’å±•å¼€ã€å¸•å¾·é€¼è¿‘ä¸æ´›æœ—çº§æ•° - éœœå¤, zhihu.com](https://zhuanlan.zhihu.com/p/530933700)\n","publishedTitle":"æµ…è°ˆé«˜ä¸­æ•°å­¦ä¸­å¸¸ç”¨çš„é€¼è¿‘æ–¹æ³•"}},{"id":"de10309d-7f7d-5a0f-a800-67d0afe764f6","fields":{"slug":"/course/co/note/3/","plainText":"\n> æœ¬ç¯‡ç¬”è®°å›´ç»• RISC-V æ¶æ„ä»‹ç»äº†è®¡ç®—æœºæŒ‡ä»¤ç³»ç»Ÿçš„åŸºæœ¬æ¦‚å¿µã€‚é¦–å…ˆä»‹ç»äº† RISC-V çš„ 32 ä¸ªé€šç”¨å¯„å­˜å™¨åŠå…¶çº¦å®šç”¨é€”ï¼ŒåŒ…æ‹¬é›¶å¯„å­˜å™¨ã€è¿”å›åœ°å€å¯„å­˜å™¨ã€å †æ ˆæŒ‡é’ˆç­‰ã€‚æ¥ç€è®¨è®ºäº†å†…å­˜ç³»ç»Ÿçš„ç‰¹ç‚¹ï¼ŒåŒ…æ‹¬å­—èŠ‚å¯»å€ã€å°ç«¯å­˜å‚¨ç­‰æ¦‚å¿µã€‚é‡ç‚¹é˜è¿°äº† RISC-V çš„æŒ‡ä»¤æ ¼å¼(R/I/S/B/U/J å‹)åŠå…¶ç¼–ç æ–¹å¼ï¼Œè¯¦ç»†ä»‹ç»äº†åˆ†æ”¯æŒ‡ä»¤ã€è¿‡ç¨‹è°ƒç”¨æŒ‡ä»¤ã€æ•°æ®åŠ è½½å­˜å‚¨æŒ‡ä»¤ã€è·³è½¬æŒ‡ä»¤ç­‰å¸¸ç”¨æŒ‡ä»¤çš„ä½¿ç”¨æ–¹æ³•å’Œå®ç°ç»†èŠ‚ã€‚<small style=\"font-style: italic; opacity: 0.5\">ï¼ˆç”± claude-3.5-sonnet ç”Ÿæˆæ‘˜è¦ï¼‰</small>\n\n<!-- more -->\n\næˆ‘ä»¬çš„è¯¾ç¨‹å’Œæ•™æå›´ç»• RISC-V æ¶æ„ç¼–å†™ï¼Œå› è€Œæœ¬ç« ä¹Ÿå°†å›´ç»• RISC-V ä¸­çš„è®¾è®¡å±•å¼€ã€‚\n\n> [!faq] Why RISC-V Architecture?\n>\n> - å¼€æ”¾ã€‚\n> - å…·æœ‰ç°ä»£ **æŒ‡ä»¤é›†æ¶æ„(Instruction Set Architecture, ISA)** çš„ç‰¹å¾ã€‚\n> - ç±»ä¼¼çš„ ISA åœ¨å¸‚åœºä¸Šå æ®å¾ˆå¤§ä»½é¢ã€‚\n\n## 1. Register\n\nRISC-V æ¶æ„æä¾› ==32 ä¸ª== æ•°æ®å¯„å­˜å™¨ï¼Œæ¯ä¸ªå¯„å­˜å™¨çš„å¤§å°æ˜¯ ==64 ä½==ã€‚ï¼ˆ_è®¾è®¡åŸåˆ™ï¼šsmaller is faster_ï¼Œå¯„å­˜å™¨çš„ç©ºé—´è¿œå°äºå†…å­˜ï¼‰\n\nRISC-V ä¸­å¯¹å¯„å­˜å™¨çš„çº¦å®šå¦‚ä¸‹ï¼ˆä¸è¿‡ï¼Œå¯¹äºå…¶ä¸­çš„ä¸€äº›å¯„å­˜å™¨ï¼Œæˆ‘ä»¬åœ¨è‡ªå·±åšé¢˜çš„æ—¶å€™ä¹Ÿä¸æ˜¯ä¸èƒ½æ··ç”¨ï¼‰ï¼š\n\n- $\\texttt{x0}$ ($\\texttt{zero}$) å¸¸é‡ 0ã€‚è¿™ä¸€å¯„å­˜å™¨çš„å€¼ä¸€ç›´æ˜¯ 0ã€‚\n- $\\texttt{x1}$ ($\\texttt{ra}$) ä¿å­˜ **è¿”å›åœ°å€(return address)**ï¼Œå³å®Œæˆè¿‡ç¨‹è°ƒç”¨å PC éœ€è¦å›åˆ°çš„ä½ç½®ã€‚\n  - æ‰€ä»¥è¯´ä¼ªæŒ‡ä»¤ `ret` å…¶å®å°±æ˜¯ `jalr x0, 0(x1)`ã€‚\n- $\\texttt{x2}$ ($\\texttt{sp}$) æ˜¯ **å †æ ˆæŒ‡é’ˆ(stack pointer)**ï¼Œå§‹ç»ˆæŒ‡å‘==æ ˆé¡¶å…ƒç´ ==ã€‚\n  - æ ˆ==ä»é«˜åœ°å€å‘ä½åœ°å€å¢é•¿==ï¼Œä¾‹ï¼š`addi sp, sp, -24`Â ,Â `sd x5, 16(sp)`Â ,Â `sd x6, 8(sp)`Â ,Â `sd x20, 0(sp)`Â  å¯ä»¥å®ç°å°† x5, x6, x20 å‹æ ˆã€‚\n- $\\texttt{x5} \\sim \\texttt{x7}$ ($\\texttt{t0} \\sim \\texttt{t2}$) - $\\texttt{x7}$($\\texttt{t2}$) å’Œ $\\texttt{x28} \\sim \\texttt{x31}$ ($\\texttt{t3} \\sim \\texttt{t6}$) æ˜¯ **ä¸´æ—¶å¯„å­˜å™¨(temporary register)**ï¼Œä¸ä¿è¯åœ¨ç»è¿‡è¿‡ç¨‹è°ƒç”¨ä¹‹åä¸´æ—¶å¯„å­˜å™¨çš„å€¼ä¸å˜ï¼Œéœ€è¦çš„è¯åº”ç”± caller ä¿å­˜ã€‚\n- $\\texttt{x8} \\sim \\texttt{x9}$ ($\\texttt{s0} \\sim \\texttt{s1}$) å’Œ $\\texttt{x18} \\sim \\texttt{x27}$ ($\\texttt{s2} \\sim \\texttt{s11}$) æ˜¯ **ä¿ç•™å¯„å­˜å™¨(saved register)**ï¼Œä¿è¯è¿‡ç¨‹è°ƒç”¨å‰åè¿™äº›å¯„å­˜å™¨çš„å€¼ä¸å˜ã€‚å¦‚æœ callee éœ€è¦ä¿®æ”¹è¿™äº›å¯„å­˜å™¨ï¼Œå°±éœ€è¦å†å †æ ˆä¸­ä¿å­˜ä¸€ä»½ï¼Œä»¥ä¾¿åœ¨è¿”å›å‰æ¢å¤ã€‚\n- $\\texttt{x10} \\sim \\texttt{x17}$ ($\\texttt{a0} \\sim \\texttt{a7}$) ç”¨äºå­˜å‚¨è¿‡ç¨‹å‚æ•°æˆ–è€…æ•°è¿”å›å€¼ã€‚\n  - å‡½æ•°è°ƒç”¨çš„å‰ 8 ä¸ªå‚æ•°ä¼šæ”¾åœ¨è¿™äº›å¯„å­˜å™¨ä¸­ï¼›å¦‚æœå‚æ•°è¶…è¿‡ 8 ä¸ªåˆ™éœ€è¦æ”¾åˆ°æ ˆä¸Šï¼ˆä¾‹ï¼šæ”¾åœ¨ Â $\\texttt{fp}$Â  ä¸Šæ–¹ï¼ŒÂ $\\texttt{fp} + 8$Â  æ˜¯ç¬¬ 9 ä¸ªå‚æ•°ï¼ŒÂ $\\texttt{fp} + 16$Â  çš„ç¬¬ 10 ä¸ªâ€¦â€¦ï¼‰ã€‚\n  - åœ¨è¿‡ç¨‹è°ƒç”¨ç»“æŸåï¼Œè¿‡ç¨‹çš„è¿”å›å€¼ä¹Ÿåº”è¢«æ”¾åœ¨è¿™äº›å¯„å­˜å™¨ä¸­ã€‚åƒ C è¯­è¨€ä¸€èˆ¬æ¥è¯´åªæœ‰ä¸€ä¸ªï¼Œå°±æ”¾åœ¨ $\\texttt{x10}$ ($\\texttt{a0}$) å¯„å­˜å™¨ä¸­ã€‚\n\n> [!note]- Read More\n>\n> - ä¸€äº› RISC-V ç¼–è¯‘å™¨ä¿ç•™å¯„å­˜å™¨ Â `x3`Â  ç”¨æ¥æŒ‡å‘é™æ€å˜é‡åŒºï¼Œç§°ä¸º global pointerÂ `gp`Â ã€‚\n> - ä¸€äº› RISC-V ç¼–è¯‘å™¨ä½¿ç”¨ Â `x8`Â  æŒ‡å‘ activation record çš„ç¬¬ä¸€ä¸ª dwordï¼Œæ–¹ä¾¿è®¿é—®å±€éƒ¨å˜é‡ï¼›å› æ­¤ Â `x8`Â  ä¹Ÿç§°ä¸º frame pointerÂ `fp`Â ã€‚åœ¨è¿›å…¥å‡½æ•°æ—¶ï¼Œç”¨ Â `sp`Â  å°† Â `fp`Â  åˆå§‹åŒ–ã€‚\n>   - `fp`Â  çš„æ–¹ä¾¿æ€§åœ¨äºåœ¨æ•´ä¸ªç¨‹ä¸­å¯¹å±€éƒ¨å˜é‡è¿‡çš„æ‰€æœ‰å¼•ç”¨ç›¸å¯¹äº Â `fp`Â  çš„åç§»éƒ½æ˜¯å›ºå®šçš„ï¼Œä½†æ˜¯å¯¹ Â `sp`Â  ä¸ä¸€å®šã€‚å½“ç„¶ï¼Œå¦‚æœè¿‡ç¨‹ä¸­æ²¡æœ‰ä»€ä¹ˆæ ˆçš„å˜åŒ–æˆ–è€…æ ¹æœ¬æ²¡æœ‰å±€éƒ¨å˜é‡ï¼Œé‚£å°±æ²¡æœ‰å¿…è¦ç”¨ Â `fp`Â  äº†ã€‚\n> - RISC-V æ¶æ„è¿˜æä¾›ä¸€ç³»åˆ—æµ®ç‚¹æ•°å¯„å­˜å™¨ `f0` ~ `f31`ï¼Œä¸è¿‡è¿™å¹¶ä¸æ˜¯è¿™é‡Œæˆ‘ä»¬è®¨è®ºçš„é‡ç‚¹ã€‚\n\n> [!summary] Cheetsheet\n>\n> ![|538](https://img.memset0.cn/2024/11/04/HVDSFt0e.png)\n\n## 2. Memory\n\nRISC-V ç»“æ„çš„å†…å­˜æŒ‰ç…§ ==8 ä½== ä¸ºä¸€ä¸ª **å­—èŠ‚(byte)** å­˜å‚¨ï¼Œåœ°å€å®½åº¦ä¸º ==64 ä½==ã€‚æ­¤å¤–ï¼Œä¸€ä¸ª word ä¸º 32 ä½ï¼Œä¸€ä¸ª **åŒå­—(doubleword)** ä¸º 64 ä½ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼ŒRISC-V æ¶æ„çš„æŒ‡ä»¤æ€»å…±å¯ä»¥å¯»å€ $2^{64}$ ä¸ªå­—èŠ‚ï¼Œä¹Ÿå³ $2^{67}$ ä¸ª bit æˆ–è€… $2^{61}$ ä¸ª dwordã€‚\n\nRISC-V æ¶æ„ä½¿ç”¨ **å°ç«¯å­˜å‚¨(Little Endian)**ï¼Œå³æœ€ä½æœ‰æ•ˆä½æ”¾åœ¨å†…å­˜æœ€ä½å¤„ã€‚æŒ‰ç…§å°ç«¯å­˜å‚¨çš„æ–¹å¼å­˜å‚¨ 0x12345678 å¾—ï¼š(low) 78 56 34 12 (high)ï¼ˆå¦‚æœæŒ‰ç…§ä¸€èˆ¬é€»è¾‘ï¼Œä»å·¦åˆ°å³è¿›è¡Œä¹¦å†™ï¼Œå®é™…ä¸Šæ˜¯æ˜¯å¯¹åº” **å¤§ç«¯å­˜å‚¨(Big Endian)**ï¼‰ã€‚\n\n> [!info] Memort Alignment\n>\n> CPU ä¸€æ¬¡åªèƒ½è¯»å‡º 4 å­—èŠ‚å†…å­˜ä¸­çš„ä¸€è¡Œï¼Œæ‰€ä»¥ä¸ºäº†ä¸€æ¬¡æ€§è¯»å‡ºä¸‹å›¾ç»“æ„ä½“ä¸­çš„ `float e`ï¼Œéœ€è¦ä½¿ç”¨ **å†…å­˜å¯¹é½(memory alignment)** çš„æŠ€æœ¯ã€‚\n>\n> ![|280](https://img.memset0.cn/2024/11/11/LrRHT6l4.png)\n\n> [!info] Constant vs Immediate Operandsï¼Ÿ\n> ç¼–è¯‘å™¨å¯ä»¥é€šè¿‡ä»æŒ‡å®šåœ°å€å–å€¼çš„æ–¹å¼æ¥å®ç° **å¸¸é‡(constant)**ï¼Œä¸ºäº†è®©æ“ä½œæ›´å¿«ï¼Œæˆ‘ä»¬å¸Œæœ›å¼•å…¥ **ç«‹å³æ•°(immediate operands)**ï¼Œä»è€Œçœæ‰å¯»å€çš„æ—¶é—´ã€‚ï¼ˆ_è®¾è®¡åŸåˆ™ï¼šmake common case fast_ï¼‰\n\nRISC-V æ”¯æŒå››ç§ **å¯»å€(addressing)** æ–¹å¼ï¼š\n\n- **ç«‹å³æ•°å¯»å€(immediate addressing)**\n- **å¯„å­˜å™¨å¯»å€(register addressing)**\n- **åŸºå€å¯»å€(base addressing)**ï¼šä¾‹ï¼š`8(sp)`\n- **PC-relative å¯»å€(PC-relative addressing)**\n\n![|684](https://img.memset0.cn/2024/11/12/cKPQXFYu.png)\n\n> [!info] Memory Layout\n>\n> ![|457](https://img.memset0.cn/2024/11/12/HgSNu9rL.png)\n\n## 3. Instructions\n\næ ¹æ®å­˜å‚¨ç¨‹åºåŸç†ï¼Œæˆ‘ä»¬äºŒè¿›åˆ¶å¯¹æ¯ä¸€æ¡æŒ‡ä»¤ç¼–ç è¡¨ç¤ºï¼Œå«ä½œ **æœºå™¨ç (machine code)**ã€‚\n\n> [!note] Note\n>\n> ï¼ˆç²¾ç®€æŒ‡ä»¤é›†çš„ï¼‰ä¸€æ¡æŒ‡ä»¤åªç”¨æ¥å®ç°ä¸€ä¸ªè¿ç®—ã€‚ï¼ˆ_è®¾è®¡åŸåˆ™ï¼šSimplicity favors regularity_ï¼‰\n\n### 3.1. Instruction Formats\n\nåœ¨ RISC-V æ¶æ„ä¸­ï¼Œæ‰€æœ‰æŒ‡ä»¤çš„é•¿åº¦éƒ½å›ºå®šä¸º 32 ä½ã€‚ï¼ˆ_è®¾è®¡åŸåˆ™ï¼šgood design demands good compromises_ï¼‰\n\nè¿™é‡Œæ¯ç§æŒ‡ä»¤ format çš„ç©ºé—´åˆ†å¸ƒéœ€è¦è®°å¿†ï¼Œéƒ¨åˆ†éœ€è¦ç”¨åˆ°çš„æŒ‡ä»¤çš„ opcode å’Œ funct ä¼šåœ¨è€ƒè¯•æ—¶ç»™å‡ºã€‚\n\n![|737](https://img.memset0.cn/2024/11/12/KcGbrnLp.png)\n\nç¼©å†™è§£é‡Šï¼š\n\n- rsï¼š**æºå¯„å­˜å™¨(register source)**\n- rdï¼š**ç›®æ ‡å¯„å­˜å™¨(register destination)**\n- immï¼š**ç«‹å³æ•°(immediate operands)**\n- opcodeï¼š**æ“ä½œç¼–ç (operation code)**\n- functï¼š**å‡½æ•°ç¼–ç (function code)**ï¼Œç”¨æ¥å’Œ `opcode` å…±åŒè¡¨ç¤ºè¿ç®—ã€‚\n\næŒ‡ä»¤ç±»å‹ï¼š\n\n- **R-type**ï¼šä½¿ç”¨å¯„å­˜å™¨è¿›è¡Œæ•°å­—é€»è¾‘è¿ç®—çš„æŒ‡ä»¤æ ¼å¼ï¼Œå…·ä½“è¿ç®— op ç”± opcode funct3 funct7Â  å…±åŒå†³å®šï¼ŒåŠŸèƒ½ä¸ºï¼š`rd = rs1 op rs2`ã€‚\n- **I-type**ï¼šå¯„å­˜å™¨ä¸ç«‹å³æ•°çš„è¿ç®—ï¼Œæˆ–è€… load ç±»æŒ‡ä»¤ç­‰åªéœ€è¦ç”¨åˆ°ä¸€ä¸ªæºå¯„å­˜å™¨çš„æŒ‡ä»¤ï¼ŒåŠŸèƒ½ä¸ºï¼š`rd = rs1 op imm`ã€‚è¿™é‡Œè™½ç„¶ç«‹å³æ•° `imm` åªæœ‰ 12 ä½ï¼Œä½†ä¼šå…ˆç¬¦å·æ‰©å……åˆ° 64 ä½å†å‚ä¸è¿ç®—ï¼Œæ•…ç«‹å³æ•°å®é™…ä¸Šä¸ºï¼š`{{52{inst[31]}}, inst[31:20]}`ã€‚\n  - ç«‹å³æ•° **ç§»ä½(shift)** æ“ä½œï¼ˆ`slli`ã€`srai` ç­‰ï¼‰æ˜¯ä¸€ç±»ç‰¹æ®Šçš„ I å‹æŒ‡ä»¤ï¼Œå› ä¸ºå¯¹ä¸€ä¸ª 64 ä½æ•°è¿›è¡Œ $\\ge 64$ ä½çš„ç§»ä½æ“ä½œæ²¡æœ‰æ„ä¹‰ï¼Œæ‰€ä»¥å°†å…¶ imm çš„ 12 ä½åˆ†æˆ 6 ä½çš„ funct6 å’Œ 6 ä½çš„ç«‹å³æ•° immedï¼Œå…¶ä¸­ immed ç”¨æ¥è¡¨ç¤ºç§»ä½ä½æ•°ã€‚\n- **S-type**ï¼šstore ç±»æŒ‡ä»¤ã€‚è¿™é‡Œ `rs1` å­˜å‚¨ **åŸºå€(base address)** å¯„å­˜å™¨ç¼–å·ï¼Œ`rs2` å­˜å‚¨æºæ“ä½œæ•°å¯„å­˜å™¨ç¼–å·ã€‚\n  - `sd` æŒ‡ä»¤ä¾‹ï¼š`sd x9, 64(x22)`ï¼Œåˆ™ `rs1` ä¸º 22ã€`rs2` ä¸º 9ã€`imm` ä¸º 64ã€‚\n- **U-type**ï¼š\n\n> [!hint] ä¸ºä»€ä¹ˆ `SB` å’Œ `UJ` ç±»å‹æŒ‡ä»¤éƒ½ä¸å­˜å‚¨ç«‹å³æ•°çš„æœ€ä½ä½ï¼ˆ`imm[0]`ï¼‰å‘¢ï¼Ÿ\n>\n> å› ä¸ºè¿™ä¸¤ç§æŒ‡ä»¤çš„ç«‹å³æ•°éƒ½æ˜¯æŒ‡åç§»ï¼Œè€Œæˆ‘ä»¬çš„åœ°å€æ˜¯ 2 å­—èŠ‚å¯¹é½çš„ï¼Œå› æ­¤æœ€åä¸€ä½ä¸€å®šæ˜¯ $0$ï¼Œä¸éœ€è¦å­˜å‚¨ã€‚\n\n> [!summary] Cheatsheet\n>\n> ![|800](https://img.memset0.cn/2024/11/12/Iygimvey.png)\n>\n> ![Pesudo Instructions|468](https://img.memset0.cn/2024/11/12/ABLaJ0cn.png)\n\n### 3.2. Branch & Loop\n\n**åŸºäºç›¸ç­‰çš„è·³è½¬è¯­å¥**ï¼š\n\n- $\\texttt{\\color{blue}beq {\\color{blue}rs1}, {\\color{blue}rs2}, {\\color{blue}label}}$ (B-type)ï¼šç›¸ç­‰åˆ™è·³è½¬ã€‚\n- $\\texttt{\\color{blue}bne {\\color{blue}rs1}, {\\color{blue}rs2}, {\\color{blue}label}}$ (B-type)ï¼šä¸ç›¸ç­‰åˆ™è·³è½¬ã€‚\n\n**åŸºäºæ¯”è¾ƒçš„è·³è½¬è¯­å¥**ï¼šæ³¨æ„è¿™é‡Œçš„æ¯”è¾ƒéƒ½æ˜¯==æœ‰ç¬¦å·æ•°==çš„æ¯”è¾ƒï¼Œå¦‚æœéœ€è¦æ— ç¬¦å·æ•°çš„æ¯”è¾ƒï¼Œè¯·ä½¿ç”¨ `bltu`ã€`bgeu` ç­‰æŒ‡ä»¤ã€‚\n\n- $\\texttt{\\color{blue}blt rs1, rs2, label}$ (B-type)ï¼š$\\text{if (}\\texttt{rs1} < \\texttt{rs2}\\text{) branch to instruction labeled }\\texttt{label}\\text{.}$\n- $\\texttt{\\color{blue}bgt rs1, rs2, label}$ (B-type)ï¼š$\\text{if (}\\texttt{rs1} > \\texttt{rs2}\\text{) branch to instruction labeled }\\texttt{label}\\text{.}$\n- $\\texttt{\\color{blue}ble rs1, rs2, label}$ (B-type)ï¼š$\\text{if (}\\texttt{rs1} \\leq \\texttt{rs2}\\text{) branch to instruction labeled }\\texttt{label}\\text{.}$\n- $\\texttt{\\color{blue}bge rs1, rs2, label}$ (B-type)ï¼š$\\text{if (}\\texttt{rs1} \\geq \\texttt{rs2}\\text{) branch to instruction labeled }\\texttt{label}\\text{.}$\n\n> [!note] æœ€çƒ­é—¨çš„æ¯”è¾ƒè¿ç®—\n>\n> - $\\texttt{\\color{blue}slt {\\color{blue}rd}, {\\color{blue}rs1}, {\\color{blue}rs2}}$ï¼šset on less thenï¼Œå½“ $\\texttt{rs1} < \\texttt{rs2}$ æ—¶ä»¤ $\\texttt{rd}=1$ã€‚\n>   - å¯ä»¥å°†æ¯”è¾ƒç»“æœæ­é… `beq` æˆ– `bne` è¯­å¥ä½¿ç”¨ã€‚\n\nå¦‚æœåˆ†æ”¯ä½“/å¾ªç¯ä½“æ¯”è¾ƒé•¿ï¼Œæˆ‘ä»¬å¯èƒ½éœ€è¦ branching åˆ°ä¸€ä¸ªæ¯”è¾ƒè¿œçš„ä½ç½®ï¼Œè¿™æ—¶éœ€è¦ä½¿ç”¨ `jal` æˆ– `jalr` æŒ‡ä»¤ï¼Œå¿…è¦æ—¶å¯ä»¥åè½¬æ¡ä»¶ï¼Œå¦‚ä¸‹é¢è¿™ä¸ªä¾‹å­ï¼š\n\n![|456](https://img.memset0.cn/2024/11/12/bUcump8l.png)\n\n### 3.3. Procedure\n\nä¸€äº›çº¦å®šï¼š\n\n- ç”¨ $\\texttt{a0} \\sim \\texttt{a7}\\text{ }(\\texttt{x10} \\sim \\texttt{x17})$ è¿™å…«ä¸ªå‚æ•°å¯„å­˜å™¨ä¿å­˜ **è¿‡ç¨‹å‚æ•°(procedure parameter)** å’Œ **è¿”å›å€¼(return value)**ã€‚\n- ç”¨ $\\texttt{ra}\\text{ }(\\texttt{x1})$ æ¥å­˜å‚¨è¿”å›åœ°å€ã€‚\n  - é€šè¿‡ $\\texttt{jal x1, label}$ æŒ‡ä»¤è¿›å…¥å‡½æ•°ä½“ï¼›åœ¨è¿‡ç¨‹æœ€åç”¨ $\\texttt{jalr x0, 0(x1)}$ æŒ‡ä»¤ï¼ˆç­‰ä»·äºä¼ªæŒ‡ä»¤ `ret`ï¼‰è¿”å›ã€‚\n  - å¦‚æœè¿‡ç¨‹ä½“ä¸­è¿˜éœ€è¦è°ƒç”¨å…¶ä»–è¿‡ç¨‹ï¼Œè®°å¾—æŠŠ $\\texttt{ra}$ ä¿å­˜åˆ°å †æ ˆä¸­ã€‚\n- åœ¨è¿‡ç¨‹ä½“ä¸­ï¼Œæœ€å¥½ä½¿ç”¨ $\\texttt{t0} \\sim \\texttt{t6}$ è¿™ 7 ä¸ªä¸´æ—¶å¯„å­˜å™¨ï¼›å°½é‡ä¸è¦ä½¿ç”¨ $\\texttt{s0} \\sim \\texttt{s11}$ è¿™äº›ä¿ç•™å¯„å­˜å™¨ã€‚å¦‚æœéè¦ä½¿ç”¨ï¼Œéœ€è¦æ‰‹åŠ¨å‹æ ˆå‡ºæ ˆä¿è¯ä¿ç•™å¯„å­˜å™¨çš„å€¼åœ¨è¿‡ç¨‹è°ƒç”¨å‰åä¿æŒä¸å˜ã€‚\n\næˆ‘ä»¬å¯ä»¥é€šè¿‡å¯¹æ ˆæŒ‡é’ˆå¯„å­˜å™¨ $\\texttt{sp}$ çš„æ§åˆ¶å®ç° push å’Œ pop åŠŸèƒ½ã€‚\n\n- **push**ï¼š$\\texttt{addi sp, sp, -8; sd ..., 8(sp)}$\n- **pop**ï¼š$\\texttt{ld ..., 8(sp); addi sp, sp, 8}$\n\n![|208](https://img.memset0.cn/2024/11/12/sFba4Dmg.png)\n\nè€Œå¸§æŒ‡é’ˆå¯„å­˜å™¨ $\\texttt{fp}$ åˆ™å§‹ç»ˆæŒ‡å‘æ ˆé¡¶ï¼Œå…¶åœ¨å‡½æ•°è°ƒç”¨è¿‡ç¨‹ä¸­ä¿æŒä¸å˜ï¼ˆä¸€äº› RISC-V ç¼–è¯‘å™¨åœ¨è¿›å…¥è¿‡ç¨‹æ—¶ä¼šè‡ªåŠ¨ç”¨ $\\texttt{sp}$ åˆå§‹åŒ– $\\texttt{fp}$ï¼‰ï¼Œå¯ä»¥é€šè¿‡ $\\texttt{fp}$ å¯„å­˜å™¨æ–¹ä¾¿åœ°è®¿é—®å±€éƒ¨å˜é‡ã€ä¿å­˜çš„å‚æ•°ç­‰ã€‚\n\n![|524](https://img.memset0.cn/2024/11/12/ut3O9gGP.png)\n\n> [!example]- Example: Compile a recursive factorial function\n> ![|580](https://img.memset0.cn/2024/11/12/XYw3FYUD.png)\n\n### 3.4. Load & Store Instructions\n\nload å’Œ store æ˜¯å”¯äºŒä¸¤ä¸ªåœ¨å¯„å­˜å™¨å’Œå†…å­˜ä¹‹é—´è¿›è¡Œ **æ•°æ®ä¼ è¾“(data transfer)** çš„æŒ‡ä»¤ã€‚\n\næˆ‘ä»¬çš„å¯„å­˜å™¨æ˜¯ 64 ä½çš„ï¼ˆdwordï¼‰ï¼Œä½†æœ‰æ—¶æˆ‘ä»¬éœ€è¦ä»å†…å­˜/å †æ ˆä¸­è¯»å–å°äº 64 ä½çš„ï¼ˆbyte/halfword/wordï¼‰æ•°æ®ï¼Œè¿™æ—¶å€™å°±ä¼šæ¶‰åŠåˆ°æ‰©å……çš„é—®é¢˜ï¼Œä»¥ä¸‹ load æŒ‡ä»¤éƒ½æ˜¯ **ç¬¦å·æ‰©å……(sign extend)** çš„ï¼Œ\n\n- $\\texttt{\\color{blue}lb rd, offset(rs1)}$ï¼šload byteï¼Œä» $\\texttt{offset(rs1)}$ åœ°å€å¼€å§‹è¯»å– 8 ä½å¹¶ç¬¦å·æ‰©å……åˆ° 64 ä½åä¿å­˜åˆ° $\\texttt{rd}$ ä¸­ã€‚\n- $\\texttt{\\color{blue}lh rd, offset(rs1)}$ï¼šload halfwordï¼Œä» $\\texttt{offset(rs1)}$ åœ°å€å¼€å§‹è¯»å– 16 ä½å¹¶ç¬¦å·æ‰©å……åˆ° 64 ä½åä¿å­˜åˆ° $\\texttt{rd}$ ä¸­ã€‚\n- $\\texttt{\\color{blue}lw rd, offset(rs1)}$ï¼šload wordï¼Œä» $\\texttt{offset(rs1)}$ åœ°å€å¼€å§‹è¯»å– 32 ä½å¹¶ç¬¦å·æ‰©å……åˆ° 64 ä½åä¿å­˜åˆ° $\\texttt{rd}$ ä¸­ã€‚\n- $\\texttt{\\color{blue}ld rd, offset(rs1)}$ï¼šload dwordï¼Œä» $\\texttt{offset(rs1)}$ åœ°å€å¼€å§‹è¯»å– 64 ä½å¹¶ä¿å­˜åˆ° $\\texttt{rd}$ ä¸­ã€‚\n\nä¸‹é¢è¿™äº› load æŒ‡ä»¤åˆ™æ˜¯éµå¾ª **é›¶æ‰©å……(0 extend)** çš„ï¼š\n\n- $\\texttt{\\color{blue}lbu rd, offset(rs1)}$ï¼šload byte unsignedï¼Œä» $\\texttt{offset(rs1)}$ åœ°å€å¼€å§‹è¯»å– 8 ä½å¹¶é›¶æ‰©å……åˆ° 64 ä½åä¿å­˜åˆ° $\\texttt{rd}$ ä¸­ï¼Œå¸¸ç”¨äºè¯»å– ASCII å­—ç¬¦ã€‚\n- $\\texttt{\\color{blue}lhu rd, offset(rs1)}$ï¼šload halfword unsignedï¼Œä» $\\texttt{offset(rs1)}$ åœ°å€å¼€å§‹è¯»å– 16 ä½å¹¶é›¶æ‰©å……åˆ° 64 ä½åä¿å­˜åˆ° $\\texttt{rd}$ ä¸­ã€‚\n- $\\texttt{\\color{blue}lwu rd, offset(rs1)}$ï¼šload word unsignedï¼Œä» $\\texttt{offset(rs1)}$ åœ°å€å¼€å§‹è¯»å– 32 ä½å¹¶é›¶æ‰©å……åˆ° 64 ä½åä¿å­˜åˆ° $\\texttt{rd}$ ä¸­ã€‚\n\nstore æŒ‡ä»¤çš„è¯å°±æ˜¯ä¿å­˜å¯„å­˜å™¨ ==æœ€å³è¾¹== çš„ï¼ˆæœ€ä½çš„ï¼‰è‹¥å¹²ä½ã€‚\n\n- $\\texttt{\\color{blue}sb rs2, offset(rs1)}$ï¼šstore byteï¼Œä¿å­˜ $\\texttt{rs2}$ å¯„å­˜å™¨çš„æœ€å³ 8 ä½åˆ° $\\texttt{offset(rs1)}$ åœ°å€ã€‚\n- $\\texttt{\\color{blue}sh rs2, offset(rs1)}$ï¼šstore halfwordï¼Œä¿å­˜ $\\texttt{rs2}$ å¯„å­˜å™¨çš„æœ€å³ 16 ä½åˆ° $\\texttt{offset(rs1)}$ åœ°å€ã€‚\n- $\\texttt{\\color{blue}sw rs2, offset(rs1)}$ï¼šstore wordï¼Œä¿å­˜ $\\texttt{rs2}$ å¯„å­˜å™¨çš„æœ€å³ 32 ä½åˆ° $\\texttt{offset(rs1)}$ åœ°å€ã€‚\n- $\\texttt{\\color{blue}sd rs2, offset(rs1)}$ï¼šstore dwordï¼Œä¿å­˜ $\\texttt{rs2}$ å¯„å­˜å™¨çš„æœ€å³ 64 ä½åˆ° $\\texttt{offset(rs1)}$ åœ°å€ã€‚\n\n> [!example]- Example: String copy\n>\n> ![|500](https://img.memset0.cn/2024/11/12/607BHJlv.png)\n\n### 3.5. Jump Instructions\n\n- $\\texttt{\\color{blue}jal rd, label}$ (UJ-type)ï¼šjump and linkï¼Œä¿å­˜ä¸‹ä¸€è¯­å¥åœ°å€ï¼ˆ$\\texttt{pc + 4}$ï¼‰åˆ°å¯„å­˜å™¨ $\\texttt{rd}$ å¹¶è·³è½¬åˆ° $\\texttt{label}$ å¤„ã€‚\n  - å®ç°ï¼š$\\texttt{rd = pc + 4, pc = pc + imm}$ã€‚\n- $\\texttt{\\color{blue}jalr rd, imm(rs1)}$ (I-type)ï¼šjump and link registerï¼Œä¿å­˜ä¸‹ä¸€è¯­å¥åœ°å€åˆ°å¯„å­˜å™¨ $\\texttt{rd}$ å¹¶è·³è½¬åˆ° $\\texttt{imm + rs1}$ åœ°å€çš„æŒ‡ä»¤ã€‚\n  - å®ç°ï¼š`rd = pc + 4, pc = (imm + rs1) & 0xFFFFFFFE`ï¼Œæ³¨æ„ $\\texttt{pc}$ çš„æœ€ä½ä½ä¸€å®šä¼šè¢«è®¾ä¸º $0$ã€‚\n\n> [!example]- Example: Jump address table\n>\n> - C code:\n>\n>   ```cpp\n>   switch (k) {\n>       case 0: f = i + j; break;\n>       case 1: f = g + h; break;\n>       case 2: f = g - h; break;\n>       case 3: f = i - j; break;\n>   }\n>   ```\n>\n> - assembly:\n>\n>   ![|400](https://img.memset0.cn/2024/11/13/cYBpIP5o.png)\n\n> [!note] Conception: Basic Blocks\n>\n> ä¸€æ®µï¼ˆé™¤äº†å¼€å¤´å¤–ï¼‰æ²¡æœ‰åˆ†æ”¯æ ‡ç­¾ä¸”ï¼ˆé™¤äº†ç»“å°¾å¤–ï¼‰æ²¡æœ‰è·³è½¬è¯­å¥çš„æŒ‡ä»¤ç§°ä¸ºä¸€ä¸ª **åŸºæœ¬å—(basic block)**ï¼Œç¼–è¾‘å™¨å¯ä»¥è¯†åˆ«åŸºæœ¬å—å¹¶è¿›è¡Œä¼˜åŒ–ã€‚\n\næˆ‘ä»¬çš„ label åœ¨è½¬åŒ–ä¸ºæœºå™¨ç æ—¶éœ€è¦æ¢ç®—æˆå…·ä½“çš„ offsetã€‚è€ƒè™‘ä¸€æ¡æŒ‡ä»¤çš„é•¿åº¦ä¸º 32 ä½ / 4 å­—èŠ‚ï¼Œæ•… offset å³ç›®æ ‡åœ°å€å‡å½“å‰åœ°å€åº”åˆšå¥½æ˜¯ç›¸å·®æŒ‡ä»¤æ•°çš„ 4 å€ï¼Œä½†æ˜¯æ³¨æ„ PC-relative å¯»å€æ˜¯æ ¹æ®åŠå­—é•¿ï¼ˆ16 ä½ / 2 å­—èŠ‚ï¼‰ä¸ºå•ä½çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬å¼ºåˆ¶ offset çš„æœ€ä½ä½ä¸º 0ï¼Œä¸”è¿™ä¸€æœ€ä½ä½ä¹Ÿä¸ä¼šè¡¨ç¤ºåˆ°æœºå™¨ç ä¸­ï¼ˆSB ç±»å‹å’Œ UJ ç±»å‹æŒ‡ä»¤çš„ç‰¹æ€§ï¼‰ã€‚\n\n> [!example] Example: Calculate offset\n>\n> - C language:\n>\n>   ```cpp\n>   while (save[i] == k) i = i + 1;\n>   ```\n>\n> - RISC-V assembler code:\n>\n>   ![|450](https://img.memset0.cn/2024/11/12/cPr6MSEe.png)\n>\n> - Machine code:\n>\n>   ![|640](https://img.memset0.cn/2024/11/12/jjYmiuAy.png)\n\n- $\\texttt{\\color{blue}lui rd, imm}$ (U-type)ï¼šload upper immediate\n  - å®ç°ï¼š`rd = imm << 12`ã€‚\n\nå¤§ç«‹å³æ•°çš„è·å–ï¼šé€šè¿‡ `lui` æŒ‡ä»¤è®¾ç½®ç«‹å³æ•°çš„é«˜ 20 ä½ï¼Œç„¶åç”¨ `addi` æŒ‡ä»¤è®¾ç½®ç«‹å³æ•°çš„ä½ 12 ä½ã€‚æ³¨æ„ï¼šç”±äº `addi` æŒ‡ä»¤æ˜¯ signed çš„ï¼Œç¬¬ 12 ä½ä¼šè¢«å½“ä½œç¬¦å·ä½ï¼›å¦‚æœæˆ‘ä»¬éœ€è¦å°†è¿™ä¸€ä½ä¹Ÿç½®æˆ $1$ çš„è¯ï¼Œä½¿ç”¨ `lui` è®¾ç½®é«˜ 20 ä½çš„å€¼æ—¶éœ€å…ˆ $+1$ã€‚\n\nä»»æ„ 32 ä½åœ°å€è·³è½¬ï¼šå¯ä»¥é€šè¿‡ $\\texttt{lui t0, address[31:12]; jalr x0, address[11:0](t0)}$ å®ç°ä»»æ„ä½ç½®è·³è½¬ï¼Œå¦‚æœä¸éœ€è¦ä¿å­˜ä¸‹ä¸€æ¡è¯­å¥åœ°å€åˆ™ä½¿ç”¨ $\\texttt{x0}$ ä½œä¸º $\\texttt{rd}$ å³å¯ã€‚\n\n## 4. References\n\n- [2 Instructions - å’¸é±¼æš„çš„ä»£ç ç©ºé—´ (xuan-insr.github.io)](https://xuan-insr.github.io/computer_organization/2_instructions/)\n- [æŒ‡ä»¤ï¼šè®¡ç®—æœºçš„è¯­è¨€ - HobbitQia çš„ç¬”è®°æœ¬](https://note.hobbitqia.cc/CO/co2/)\n- [è®¡ç®—æœºç»„æˆ | fufu é…±ã® NoteBook](https://csfufu.life/en/article/58dd7e69-4fe8-4936-948d-5eb7e492f78e)\n- [RISC-V æ‰‹å†Œ](http://riscvbook.com/chinese/RISC-V-Reader-Chinese-v2p1.pdf)\n- [RISC-V éç‰¹æƒçº§ ISA - é¹¤ç¿”ä¸‡é‡Œçš„ç¬”è®°æœ¬](https://note.tonycrane.cc/cs/pl/riscv/unprivileged/)\n- [2.Instructions - Wu-wu-u's Notebooks](https://wu-wu-u.github.io/Notebooks/cs/systems/CO/instruction/)\n","publishedTitle":"ã€Œè®¡ç®—æœºç»„æˆã€III. Instructions"}},{"id":"04a4dfb8-7594-5d94-8e09-a5f2e8b182e3","fields":{"slug":"/course/co/note/4/","plainText":"\n> æœ¬ç¯‡ç¬”è®°è¯¦ç»†ä»‹ç»äº†å¤„ç†å™¨çš„ä¸¤ç§ä¸»è¦å®ç°æ–¹å¼ï¼šå•å‘¨æœŸ CPU å’Œæµæ°´çº¿ CPUã€‚å¯¹äºå•å‘¨æœŸ CPUï¼Œè®²è§£äº†æŒ‡ä»¤æ‰§è¡Œçš„äº”ä¸ªé˜¶æ®µï¼ˆIFã€IDã€EXã€MEMã€WBï¼‰ã€æ•°æ®é€šè·¯çš„è®¾è®¡ä»¥åŠæ§åˆ¶å•å…ƒçš„å®ç°ï¼ŒåŒ…æ‹¬ä¸€çº§è¯‘ç å’ŒäºŒçº§è¯‘ç çš„è¿‡ç¨‹ã€‚åœ¨æµæ°´çº¿ CPU éƒ¨åˆ†ï¼Œé‡ç‚¹è®¨è®ºäº†ä¸‰ç§å†’é™©ï¼ˆhazardï¼‰åŠå…¶è§£å†³æ–¹æ¡ˆï¼šç»“æ„å†’é™©ï¼ˆé€šè¿‡åˆ†ç¦»æŒ‡ä»¤å’Œæ•°æ®å†…å­˜è§£å†³ï¼‰ã€æ•°æ®å†’é™©ï¼ˆé€šè¿‡å‰é€’æŠ€æœ¯å’Œå¤„ç† load-use hazardsï¼‰ä»¥åŠæ§åˆ¶å†’é™©ï¼ˆé€šè¿‡åˆ†æ”¯é¢„æµ‹å¤„ç†ï¼‰ã€‚é€šè¿‡å¯¹æ¯”è¿™ä¸¤ç§å®ç°æ–¹å¼ï¼Œæ·±å…¥ç†è§£äº†å¤„ç†å™¨çš„å·¥ä½œåŸç†ã€æ€§èƒ½ä¼˜åŒ–æ–¹æ³•ä»¥åŠå„ç§è®¾è®¡æƒè¡¡ã€‚<small style=\"font-style: italic; opacity: 0.5\">ï¼ˆç”± claude-3.5-sonnet ç”Ÿæˆæ‘˜è¦ï¼‰</small>\n\n<!-- more -->\n\n## 1. Single-Cycle CPU\n\n### 1.1. Prelude\n\n- å•å‘¨æœŸ CPUï¼šæ¯æ¡æŒ‡ä»¤éƒ½åœ¨ä¸€ä¸ªæ—¶é’Ÿå‘¨æœŸå†…å®Œæˆï¼Œæ•… $\\text{CPI}=1$ã€‚æ—¶é’Ÿå‘¨æœŸçš„é•¿åº¦å–å†³äºèŠ±è´¹æ—¶é—´æœ€é•¿çš„æŒ‡ä»¤ã€‚\n\n- å†…å­˜éœ€è¦è¢«åˆ†æˆ **æŒ‡ä»¤å†…å­˜(instruction memory)** å’Œ **æ•°æ®å†…å­˜(data memory)** ä¸¤ä¸ªéƒ¨åˆ†ï¼Œåˆ†å¼€è¿›è¡Œè¯»å†™ã€‚å› ä¸ºæˆ‘ä»¬åœ¨è¿™é‡Œé»˜è®¤çš„ memory å®ç°æ˜¯åªèƒ½åœ¨ä¸€ä¸ªæ—¶é’Ÿå‘¨æœŸå†…è¯»æˆ–å†™ä¸€ä¸ªä½ç½®çš„ï¼Œæ‰€ä»¥éœ€è¦æŠŠå¯¹ data memory çš„è®¿é—®å’Œä» instruction memory å–å‡ºæŒ‡ä»¤è¿™ä¸¤ä¸ªéƒ¨åˆ†åˆ†å¼€åˆ°ä¸¤å—å†…å­˜ä¸­è¿›è¡Œã€‚\n\n![|515](https://img.memset0.cn/2024/11/16/8m8KK7Ar.png)\n\n- æ³¨æ„ï¼šä¸èƒ½ç®€å•åœ°æŠŠçº¿è¿åœ¨ä¸€èµ·ï¼Œéœ€è¦ç”¨ MUX å®ç°é€‰æ‹©åŠŸèƒ½ã€‚â€”â€”æ§åˆ¶ä¿¡å·\n\n### 1.2. Instruction Execution Overview\n\nCPU æ‰§è¡ŒæŒ‡ä»¤ä¸€èˆ¬åˆ†ä¸ºä»¥ä¸‹äº”ä¸ªé˜¶æ®µï¼š\n\n- **å–å€(Instruction Fetch, IF)**ï¼šæ ¹æ® $\\texttt{PC}$ æ‰€ç»™åœ°å€ï¼Œä»å­˜å‚¨å™¨ä¸­å–å‡ºæŒ‡ä»¤ã€‚  \n   ![|524](https://img.memset0.cn/2024/11/16/amfocLym.png)\n- **è¯‘ç (Instruction Decode, ID)**ï¼šåˆ†ææŒ‡ä»¤å­—æ®µï¼Œä»å¯„å­˜å™¨å †ä¸­è¯»å–ä¸€ä¸ªæˆ–ä¸¤ä¸ªå¯„å­˜å™¨çš„å€¼ã€‚\n- **æ‰§è¡Œ(Execute, EX)**ï¼šå®éªŒä¸­éœ€è¦å®ç°çš„æŒ‡ä»¤åªéœ€è¦ç”¨åˆ° ALUã€‚\n  - å¯¹äº R å‹æŒ‡ä»¤ï¼šALU æ‰§è¡Œç›¸åº”çš„ç®—æ•°é€»è¾‘è¿ç®—ï¼Œå¹¶è¾“å‡ºç»“æœï¼›\n  - å¯¹äºè®¿å­˜æŒ‡ä»¤ï¼šALU è®¡ç®—åŸºåœ°å€å’Œç«‹å³æ•°çš„å’Œï¼Œå¾—åˆ°æ•°æ®çš„çœŸæ­£åœ°å€ï¼›\n  - å¯¹äºåˆ†æ”¯æŒ‡ä»¤ï¼šALU å°†ä¸¤æºæ“ä½œæ•°ç›¸å‡ï¼Œæ ¹æ®ç»“æœæ˜¯å¦ä¸º 0ï¼Œåˆ¤æ–­ä¸¤æ•°æ˜¯å¦ç›¸ç­‰ã€‚\n- **è®¿å­˜(Memory, MEM)**ï¼šä»æ•°æ®å†…å­˜ä¸­è¯»æˆ–å†™æ•°æ®ï¼Œç”¨äº load / store æŒ‡ä»¤ä¸­ã€‚ï¼ˆæ³¨æ„ï¼šä¸åŒäº x86 æŒ‡ä»¤é›†æ¶æ„ï¼ŒRisc-V æŒ‡ä»¤é›†ä¸­æ²¡æœ‰ä¸€æ¡æŒ‡ä»¤æ—¢ä»å†…å­˜ä¸­è¯»æ•°æ®æœ‰å¯¹è¯»å‡ºæ¥çš„æ•°æ®è¿›è¡Œæ“ä½œã€‚ï¼‰\n- **å†™å›(Write Back, WB)**ï¼šå°†ç»“æœå†™å›å¯„å­˜å™¨å †ä¸­ã€‚\n\né™¤äº†å‰ä¸¤ä¸ªé˜¶æ®µæ˜¯æ‰€æœ‰æŒ‡ä»¤æ‰€å…±æœ‰çš„ï¼Œå…¶ä»–é˜¶æ®µæ ¹æ®å…·ä½“æŒ‡ä»¤è€Œå®šï¼Œéƒ¨åˆ†æŒ‡ä»¤å°±ä¸éœ€è¦ MEM æˆ– WB é˜¶æ®µã€‚\n\n### 1.3. Imm Gen\n\nImm Gen æ˜¯ ID é˜¶æ®µä¸­çš„ä¸€ä¸ªæ¨¡å—ï¼Œç”¨äºå°†æŒ‡ä»¤ä¸­çš„ç«‹å³æ•°è¿›è¡Œ ==ç¬¦å·æ‹“å±•== åˆ° 32 ä½æˆ– 64 ä½ä»¥è¿›è¡Œåç»­è¿ç®—ã€‚\n\n- branch æŒ‡ä»¤çš„ç«‹å³æ•°éœ€è¦è¡¥ 0ï¼ˆShift left 1 éƒ¨åˆ†ï¼‰ï¼Œè¿™æ˜¯å› ä¸º branch æŒ‡ä»¤çš„ç«‹å³æ•°æœ€ä½ä½çš„ 0 æ˜¯çœç•¥çš„ï¼Œéœ€è¦è¡¥ä¸Šã€‚\n\n### 1.4. Datapath\n\n![|644](https://img.memset0.cn/2024/11/16/nfSQAg0L.png)\n\nå…¨æ•°æ®é€šè·¯å¦‚ä¸‹ï¼Œå®ç°äº†åŸºæœ¬éƒ½ R å‹æŒ‡ä»¤å’Œ I å‹æŒ‡ä»¤ï¼Œä»¥åŠ `ld`ã€`sd` å’Œ `beq` æŒ‡ä»¤ã€‚\n\n![|625](https://img.memset0.cn/2024/11/16/w8O0EH27.png)\n\n> [!example]- Example: åœ¨å…¨ datapath ä¸­ç”»å‡ºæ‰€ç”¨åˆ°çš„éƒ¨åˆ†\n>\n> - R-type  \n>   ![|400](https://img.memset0.cn/2025/01/16/JuhnbDJd.png)\n> - `ld`  \n>    ![|400](https://img.memset0.cn/2025/01/16/969YtfxS.png)\n> - `sd`  \n>    ![|400](https://img.memset0.cn/2025/01/16/Gttikens.png)\n> - `beq`  \n>    ![|400](https://img.memset0.cn/2025/01/16/KfSeaeqM.png)\n> - `jal`  \n>    ![|400](https://img.memset0.cn/2025/01/16/hMLEOOVs.png)\n\n### 1.5. Control Unit\n\né€šè¿‡ä¸åŒçš„ **æ§åˆ¶ä¿¡å·(control signal)** æ§åˆ¶å¤šä¸ª MUXï¼Œå¯ä»¥è®©åœ¨åŒä¸€æ¡æ•°æ®é€šè·¯ä¸Šå®ç°ä¸åŒåŠŸèƒ½çš„æŒ‡ä»¤ï¼Œä¸Šä¸€å°èŠ‚çš„é€”ä¸­è“è‰²çš„éƒ¨åˆ†å°±æ˜¯æ§åˆ¶ä¿¡å·ã€‚è€Œç”Ÿæˆè¿™äº›æ§åˆ¶ä¿¡å·çš„åŸä»¶å°±æ˜¯ **æ§åˆ¶å•å…ƒ(control unit)**ã€‚\n\n| **Signal name**                | **Effect When deasserted (=0)**                                    | **Effect when asserted (=1)**                                                                                                                               |\n| ------------------------------ | ------------------------------------------------------------------ | ----------------------------------------------------------------------------------------------------------------------------------------------------------- |\n| RegWrite                       | -                                                                  | å¯„å­˜å™¨å†™å…¥ï¼šå°†å¯„å­˜å™¨ç»„ Write data çš„è¾“å…¥å†™å…¥åˆ° Write register ($\\texttt{rd}$) ä¸­                                                                            |\n| ALUSrc                         | ALU çš„ç¬¬äºŒä¸ªæ“ä½œæ•°ä»å¯„å­˜å™¨ç¬¬äºŒä¸ªè¾“å‡ºï¼ˆRead data 2ï¼‰ä¸­æ¥            | ALU çš„ç¬¬äºŒä¸ªæ“ä½œæ•°ä»ç¬¦å·æ‹“å±•åçš„ç«‹å³æ•°ï¼ˆImm Gen ç”Ÿæˆï¼‰                                                                                                      |\n| PCSrc (Branch)                 | $\\texttt{PC}$ çš„ä¸‹ä¸€ä¸ªå€¼æ˜¯ $\\texttt{PC+4}$                         | $\\texttt{PC}$ çš„ä¸‹ä¸€ä¸ªå€¼ä¸ºåˆ†æ²»è¯­å¥çš„è¿ç®—ç»“æœ                                                                                                                |\n| Jump                           | $\\texttt{PC}$ çš„ä¸‹ä¸€ä¸ªå€¼æ˜¯ $\\texttt{PC+4}$                         | $\\texttt{PC}$ çš„ä¸‹ä¸€ä¸ªå€¼ä¸ºè®¡ç®—å‡ºæ¥çš„è·³è·ƒåœ°å€                                                                                                                |\n| MemRead                        | -                                                                  | æ•°æ®ä¼šä»æ•°æ®å†…å­˜çš„ Read data è¾“å‡ºï¼Œç„¶åäº¤ç”± MemtoReg æ‰€æ§åˆ¶çš„ MUX                                                                                           |\n| MemWrite                       | -                                                                  | åœ¨æ•°æ®å†…å­˜ Write data è¾“å…¥çš„æ•°æ®ä¼šè¢«å†™å…¥ address è¾“å…¥å¯¹åº”çš„å†…å­˜                                                                                             |\n| MemtoReg<br>==(2 ä½)==<br><br> | 00ï¼šALU çš„è®¡ç®—ç»“æœä¼šè¢«äº¤ç»™å¯„å­˜å™¨å †çš„ Write data è¾“å…¥ï¼ˆR å‹ã€I å‹ï¼‰ | 01ï¼šäº¤ç»™å¯„å­˜å™¨å †çš„æ•°æ®ä¸ºä»æ•°æ®å†…å­˜ä¸­çš„ Write data è¾“å‡ºï¼ˆload æŒ‡ä»¤ï¼‰<br>10ï¼šäº¤ç»™å†…å­˜å™¨å †çš„æ•°æ®ä¸º $\\texttt{PC+4}$ï¼ˆ$\\texttt{jal}$ã€$\\texttt{jalr}$ æŒ‡ä»¤ï¼‰<br> |\n\n#### 1.5.1. ALU Control\n\nå¤šç§æŒ‡ä»¤ä¸­éœ€è¦ç”¨åˆ° ALUã€‚æˆ‘ä»¬å¯ä»¥è¿›è¡Œ **äºŒçº§è§£ç (2-level decode)**ã€‚åœ¨ä¸€çº§è¯‘ç åï¼Œæˆ‘ä»¬å¾—åˆ° $4+3$ ä¸ªæ§åˆ¶ä¿¡å·ï¼Œå’Œ 2 ä½çš„ `ALU_op`ã€‚\n\n![|416](https://img.memset0.cn/2024/11/16/xeXC6k5s.png)\n\n![|665](https://img.memset0.cn/2024/11/16/EAWXD06S.png)\n\nåœ¨äºŒçº§è¯‘ç æ—¶ï¼Œæˆ‘ä»¬é€šè¿‡ä¸Šä¸€çº§çš„ `ALU_op` å’ŒæŒ‡ä»¤ä¸­çš„ `func7`ã€`func3` å…±åŒå†³å®š ALU æ‰€éœ€æ“ä½œã€‚\n\n![|670](https://img.memset0.cn/2024/11/16/swLHYXUw.png)\n\näºŒçº§è¯‘ç çš„æ–¹å¼ä¸æ˜¯å”¯ä¸€çš„ï¼Œè¿™é‡Œä¸»è¦èµ·åˆ°ä¸€ä¸ªæŠ›ç –å¼•ç‰çš„ä½œç”¨ã€‚\n\n> [!example] Example: ç²—ç•¥ä¼°è®¡å‘¨æœŸæ—¶é—´\n> Calculate cycle time assuming negligible delays except:\n>\n> - memory (200ps), ALU and adders (200ps), register file access (100ps)\n>\n> > [!quote]- Answer\n> >\n> > ![|558](https://img.memset0.cn/2024/11/16/NwWf9hns.png)\n\n## 2. Pipeline CPU\n\næˆ‘ä»¬ä»¥å°å­¦å°±å­¦è¿‡çš„æ´—è¡£æœä¸ºä¾‹ï¼Œå¼•å‡ºæµæ°´çº¿æŠ€æœ¯çš„æ ¸å¿ƒæ€æƒ³ï¼š\n\n![|425](https://img.memset0.cn/2024/11/04/gXlLw0vr.png)\n\næµæ°´çº¿æŠ€æœ¯å¹¶æ²¡æœ‰å‡å°‘æ‰€æœ‰å·¥ä½œçš„æ€»æ—¶é—´ï¼Œç”šè‡³å•ä¸ªå·¥ä½œçš„æ—¶é—´è¿˜ä¼šå¢åŠ ï¼Œä½†æ˜¯æˆ‘ä»¬å¯ä»¥è®©å¤šä¸ªå·¥ä½œçš„ä¸åŒé˜¶æ®µå¹¶è¡Œæ‰§è¡Œï¼Œä»è€Œæå‡æŒ‡ä»¤çš„ **ååç‡(throughput)**ï¼Œä»è€Œå‡å°‘äº†å®Œæˆæ‰€æœ‰å·¥ä½œçš„æ—¶é—´ã€‚\n\n- æµæ°´çº¿çš„å¹³è¡¡æ€§ï¼šæŒ‡ä¸åŒé˜¶æ®µçš„æ“ä½œæ‰€éœ€è¦çš„æ—¶é—´æ˜¯å¦ä¸€è‡´ã€‚å¯ä»¥é€šè¿‡å¯¹æŒ‡ä»¤é˜¶æ®µçš„é€‚å½“åˆ’åˆ†è®©æµæ°´çº¿æ›´ä¸ºå¹³è¡¡ã€‚\n- æµæ°´çº¿çš„çº§æ•°ï¼ˆæ·±åº¦ï¼‰ï¼šæµæ°´çº¿çš„çº§æ•°å¹¶ä¸æ˜¯è¶Šå¤§è¶Šå¥½ï¼Œå› ä¸ºæµæ°´çº¿å¯„å­˜å™¨ä¼šæœ‰ä¸€ä¸ªå›ºå®šå»¶è¿Ÿã€‚\n\næ‰€ä»¥è¯´ï¼Œæµæ°´çº¿çš„çº§æ•°æ˜¯ä¸€ä¸ª trade-off çš„è®¾è®¡ã€‚\n\n> [!note] RISC-V æ¶æ„æ˜¯ä¸ºæµæ°´çº¿è®¾è®¡çš„\n>\n> - æ‰€æœ‰æŒ‡ä»¤éƒ½æ˜¯ 32 ä½çš„ã€‚\n> - Few and regular instruction formats\n>   - æºå¯„å­˜å™¨å’Œç›®æ ‡å¯„å­˜å™¨çš„å­—æ®µç›¸åŒï¼Œå¯ä»¥åœ¨åŒä¸€æ­¥è¿›è¡Œè¯‘ç å’Œè¯»å¯„å­˜å™¨çš„æ“ä½œã€‚\n> - Load/store addressing\n>   - åªåœ¨ EX é˜¶æ®µè®¡ç®—åœ°å€ï¼Œåªåœ¨ MEM é˜¶æ®µè®¿é—®å†…å­˜ã€‚\n\nå¯¹äºæµæ°´çº¿ CPUï¼Œ$\\text{CPI} \\approx 1$ï¼Œå› ä¸ºåœ¨æ¯ä¸ªæ—¶é’Ÿå‘¨æœŸæˆ‘ä»¬å°†ä¸€æ¡æŒ‡ä»¤é€å…¥ IF é˜¶æ®µï¼›è€Œåœ¨ä¸‹é¢ä¼šè®²åˆ°ï¼Œå› ä¸º **å†’é™©(hazard)** çš„é—®é¢˜ï¼Œæœ‰æ—¶æˆ‘ä»¬å¿…é¡»è¦æ’å…¥ä¸€äº› bubbleã€‚\n\n### 2.1. Pipelined Datapath\n\n![|766](https://img.memset0.cn/2024/11/04/MN5uM6ID.png)\n\n- ä»å³åˆ°å·¦çš„æµå®¹æ˜“å¯¼è‡´ **å†’é™©(hazard)**ï¼Œä¹Ÿå°±æ˜¯è¿™é‡Œæ ‡å‡ºçš„ WB å’Œ Branch éƒ¨åˆ†ã€‚\n\n### 2.2. Structure Hazards\n\n**ç»“æ„å†’é™©(structure hazard)**ï¼šéœ€è¦çš„èµ„æºæ­£å¿™ã€‚\n\n- æˆ‘ä»¬å¿…é¡»å°†å†…å­˜æ‹†åˆ†ä¸ºæŒ‡ä»¤å†…å­˜å’Œæ•°æ®å†…å­˜ä¸¤ä¸ªéƒ¨åˆ†ï¼Œä¸ç„¶åœ¨åŒä¸€æ—¶åˆ»ï¼Œåˆ†åˆ«å¤„äº IF å’Œ MEM é˜¶æ®µçš„ä¸¤æ¡æŒ‡ä»¤éœ€è¦å¯¹å†…å­˜è¿›è¡Œæ“ä½œï¼Œåªèƒ½è¢«è¿«æš‚åœå…¶ä¸­ä¸€æ¡ã€‚\n  - æ‰€ä»¥æˆ‘ä»¬å°†å†…å­˜åˆ†ä¸ºäº† inst memory å’Œ data memory ä¸¤ä¸ªéƒ¨åˆ†ã€‚\n\n### 2.3. Data Hazards\n\n**æ•°æ®å†’é™©(data hazard)**ï¼šä¸€æ¡æŒ‡ä»¤ä¾èµ–å‰é¢æŒ‡ä»¤æ‰€å¾—åˆ°çš„æ•°æ®ã€‚åœ¨æœ¬è¯¾ç¨‹ä»‹ç»çš„äº”çº§æµæ°´çº¿æ¶æ„ä¸­ï¼Œæˆ‘ä»¬åªéœ€è¦è€ƒè™‘å½“å‰æŒ‡ä»¤å’Œå‰ä¸¤æ¡æŒ‡ä»¤æ˜¯å¦ä¼šäº§ç”Ÿ data hazards å³å¯ï¼›å¦ä¸€æ–¹é¢ï¼Œåœ¨æ²¡æœ‰è¿›è¡Œä»»ä½•å®ç°ä»»ä½•ä¼˜åŒ–ï¼ˆå¦‚ forwardingï¼‰çš„æµæ°´çº¿ CPU ä¸­ï¼Œå‡ºç° data hazards æ—¶åªéœ€è¦ stall è‡³å¤šä¸¤ä¸ªå‘¨æœŸã€‚\n\n> [!question] ä¸ºä»€ä¹ˆåªç”¨è€ƒè™‘ä¸Šä¸¤æ¡æŒ‡ä»¤çš„å½±å“ï¼Ÿ\n>\n> è¿™å…¶å®å…³ä¹åˆ°æˆ‘ä»¬å®ç°çš„ä¸€ä¸ªç»†èŠ‚ï¼šå¯¹å¯„å­˜å™¨ç»„çš„è¯»å†™ï¼šWB é˜¶æ®µçš„å†™å…¥å‘ç”Ÿåœ¨æ—¶é’Ÿä¸Šè¾¹æ²¿ï¼ŒID é˜¶æ®µçš„è¯»å–å‘ç”Ÿåœ¨æ—¶é’Ÿä¸‹è¾¹æ²¿ã€‚å…è®¸æˆ‘ä»¬æŠŠç›¸äº’å…³è”çš„ä¸¤æ¡æŒ‡ä»¤çš„ WB å’Œ ID æ”¾åœ¨åŒä¸€ä¸ªæ—¶é’Ÿå‘¨æœŸè¿›è¡Œã€‚å¦‚æœæ²¡æœ‰å®ç°è¿™ä¸€ä¼˜åŒ–ï¼Œä¸Šé¢çš„ 2 å°±è¦æ”¹ä¸º 3ã€‚\n>\n> è§‚å¯Ÿä¸‹ä¸€å°èŠ‚ forwarding ä¸­çš„é…å›¾ï¼Œé˜´å½±åŒºåŸŸçš„ä½ç½®ä¸åŒæ­£è¡¨ç°äº†è¿™ä¸€ç‚¹ã€‚\n\n#### 2.3.1. Forwarding\n\n![|607](https://img.memset0.cn/2024/11/04/RK45A20K.png)\n\nè€ƒå¯Ÿè¿™ä¸ªä¾‹å­ï¼Œç¬¬äºŒæ¡æŒ‡ä»¤çš„æºå¯„å­˜å™¨æ˜¯ä¸Šä¸€æ¡æŒ‡ä»¤çš„ç›®æ ‡å¯„å­˜å™¨ $\\texttt{x1}$ï¼Œæˆ‘ä»¬å¯ä»¥æå‰æŠŠæ•°æ®å–å‡ºæ¥ç»™åˆ°ç¬¬äºŒæ¡æŒ‡ä»¤ï¼Œä¹Ÿå°±æ˜¯è“è‰²çš„è¿™æ¡é€šè·¯ï¼Œè¿™ç§æŠ€æœ¯è¢«ç§°ä¸º **å‰é€’(forwarding)** æˆ– **æ—ä¼ (bypassing)**ã€‚å¦‚æœä¸è¿™æ ·åšï¼Œåˆ™éœ€è¦ç­‰ä¸¤ä¸ªæ—¶é’Ÿå‘¨æœŸï¼Œè¿™æ · EX é˜¶æ®µå¾—åˆ°çš„æ•°æ®æ‰æ˜¯å¯¹çš„ã€‚\n\né€šè¿‡ä»¥ä¸‹æ¡ä»¶å®ç°å¯¹ data hazards çš„åˆ¤æ–­ä»è€Œæä¾› forwardingï¼š\n\n![|460](https://img.memset0.cn/2024/11/04/mDBaG3zn.png)\n\n- è¿™é‡Œæ˜¯å› ä¸ºåƒ `add` è¿™ç§æŒ‡ä»¤åœ¨ EX é˜¶æ®µç»“æŸåå°±èƒ½å¾—åˆ°ç»“æœï¼Œä½†æ˜¯åƒ `load` è¿™ç§æŒ‡ä»¤è¦åˆ° MEM é˜¶æ®µç»“æŸåæ‰èƒ½å¾—åˆ°ã€‚\n- å…·ä½“åˆ¤æ–­æ—¶ï¼Œè¿˜è¦æ³¨æ„ä¸¤ä¸ªé™„åŠ æ¡ä»¶ï¼ˆå³ä¸Šé¢æˆªå›¾çš„è¿™æ®µåˆ¤æ–­æ¡ä»¶æ˜¯ä¸å®Œæ•´çš„ï¼‰ï¼š\n  - å¯¹åº”çš„ EX/MEM.RegWrite ä¿¡å·æˆ– MEM/WB.RegWrite ä¿¡å·ä¸ºçœŸï¼Œå³çœŸçš„å†™å…¥äº†é‚£ä¸ªç›®æ ‡å¯„å­˜å™¨ã€‚\n  - å¯¹åº”çš„ EX/MEM.RegisterRd ç›®æ ‡å¯„å­˜å™¨æˆ– MEM/WB.RegisterRd ç›®æ ‡å¯„å­˜å™¨ä¸ä¸º `x0`ã€‚\n\næˆ‘ä»¬ä½¿ç”¨ MUX æ¥å®ç°å¯¹ forwarding çš„æ•°æ®é€šè·¯æ§åˆ¶ã€‚åœ¨å“ªä¸ªé˜¶æ®µå¯ä»¥å¾—åˆ°ç»“æœçš„æ•°æ®ï¼Œå°±ä»é‚£ä¸ªé˜¶æ®µç›´æ¥ forwarding è¿‡æ¥ã€‚\n\n![|491](https://img.memset0.cn/2024/11/04/er4z1aL3.png)\n\nè¿˜éœ€è¦æ³¨æ„ double data hazard çš„é—®é¢˜ï¼Œè€ƒè™‘ä»¥ä¸‹ç¤ºä¾‹ï¼š\n\n$$\n\\begin{aligned}\n&\\texttt{add {\\color{blue}x1}, x1, x2}\\\\\n&\\texttt{add {\\color{blue}x1}, {\\color{blue}x1}, x3}\\\\\n&\\texttt{add x1, {\\color{blue}x1}, x4}\n\\end{aligned}\n$$\n\nåœ¨ç¬¬ä¸‰æ¡è¯­å¥æ‰§è¡Œåˆ° EX é˜¶æ®µæ—¶ï¼ŒåŒæ—¶å­˜åœ¨ä¸ç¬¬ä¸€æ¡æŒ‡ä»¤çš„ MEM Hazard å’Œä¸ç¬¬äºŒæ¡æŒ‡ä»¤çš„ EX Hazardï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨æœ€æ–°çš„ï¼ˆmost recentï¼‰ç»“æœã€‚å³ï¼Œåœ¨è¿™ä¸¤è€…åŒæ—¶å­˜åœ¨æ—¶ï¼Œåº”å¤„ç† EX Hazard çš„ forwardingï¼›ä¹Ÿå°±æ˜¯è¯´ï¼Œè¿›è¡Œå¯¹ MEM Hazard çš„ forwarding å½“ä¸”ä»…å½“ä¸èƒ½è¿›è¡Œå¯¹ EX Hazard çš„ forwarding æ—¶ã€‚\n\næœ€åå¾—åˆ°çš„åˆ¤æ–­æ¡ä»¶å¦‚ä¸‹ï¼š\n\n```cpp\n// EX hazard\nif (EX/MEM.RegWrite and (EX/MEM.RegisterRd != 0)\n    and (EX/MEM.RegisterRd == ID/EX.RegisterRs1))\n        ForwardA = 10\n\nif (EX/MEM.RegWrite and (EX/MEM.RegisterRd != 0)\n    and (EX/MEM.RegisterRd == ID/EX.RegisterRs2))\n        ForwardB = 10\n\n// MEM hazard\nif (MEM/WB.RegWrite and (MEM/WB.RegisterRd != 0)\n    and not(EX/MEM.RegWrite and (EX/MEM.RegisterRd != 0)\n        and (EX/MEM.RegisterRd == ID/EX.RegisterRs1))\n    and (MEM/WB.RegisterRd == ID/EX.RegisterRs1))\n        ForwardA = 01\n\nif (MEM/WB.RegWrite and (MEM/WB.RegisterRd != 0)\n    and not(EX/MEM.RegWrite and (EX/MEM.RegisterRd != 0)\n        and (EX/MEM.RegisterRd == ID/EX.RegisterRs2))\n    and (MEM/WB.RegisterRd == ID/EX.RegisterRs2))\n        ForwardB = 01\n```\n\n![|591](https://img.memset0.cn/2024/11/04/A1p7bxI7.png)\n\nåŠ å…¥ forwarding åå¾—åˆ°çš„æ•°æ®é€šè·¯å¦‚ä¸‹ï¼š\n\n![|692](https://img.memset0.cn/2024/11/04/jtKJEetu.png)\n\n#### 2.3.2. Load-Use Hazards Detection\n\n![|585](https://img.memset0.cn/2024/11/04/ubBcnr9y.png)\n\nè€ƒå¯Ÿè¿™ä¸ªä¾‹å­ï¼Œå½“å‰æŒ‡ä»¤ç”¨åˆ°äº†ä¸Šä¸€æ¡ load æŒ‡ä»¤è¯»å–å‡ºçš„æ•°æ®ã€‚è¿™ç§æƒ…å†µè¢«ç§°ä¸º **è½½å…¥-ä½¿ç”¨å‹æ•°æ®å†’é™©(Load-Use Data Hazard)**ã€‚å³ä½¿ä½¿ç”¨äº† forwarding çš„æŠ€æœ¯ï¼Œä¹Ÿå¿…é¡»æ’å…¥ä¸€ä¸ª bubbleâ€”â€”å› ä¸ºæˆ‘ä»¬è¦åˆ° MEM é˜¶æ®µæ‰èƒ½å¾—åˆ°ç»“æœï¼ˆè€Œä¸æ˜¯ EX é˜¶æ®µï¼‰å¹¶ forwarding ç»™ä¸‹ä¸€ä¸ª EXã€‚å› æ­¤ï¼Œæˆ‘ä»¬ä¸å…‰éœ€è¦æ§åˆ¶ forwardingï¼Œè¿˜éœ€è¦æ§åˆ¶ stall ä¸€ä¸ªå‘¨æœŸã€‚\n\n> [!example]- è€ƒè™‘æ•°æ®å†’é™©çš„åœºæ™¯ä¸‹è®¡ç®—æ—¶é’Ÿå‘¨æœŸæ•°\n>\n> å¦‚æœä¸è€ƒè™‘æ•°æ®å†’é™©çš„é—®é¢˜ï¼Œåªéœ€è¦ $7+(5-1)=11$ ä¸ªæ—¶é’Ÿå‘¨æœŸï¼Œè¿™é‡Œ $5$ æ˜¯å› ä¸ºæˆ‘ä»¬çš„ RISC-V æ¶æ„æ˜¯äº”çº§æµæ°´çº¿ã€‚ä½†æ˜¯å› ä¸ºæ•°æ®å†’é™©çš„é—®é¢˜ï¼Œæˆ‘ä»¬å¿…é¡»è¦ stall ä¸¤ä¸ªå‘¨æœŸã€‚å¯ä»¥é€šè¿‡æ‰“ä¹±æŒ‡ä»¤é¡ºåºçš„æ–¹å¼ï¼Œåœ¨æŒ‡ä»¤ç»“æœç›¸åŒçš„æƒ…å†µä¸‹ï¼Œè§„é¿æ‰ Load-Use Data Hazrad å¿…é¡» stall ä¸€ä¸ªå‘¨æœŸçš„é—®é¢˜ã€‚\n>\n> ![|600](https://img.memset0.cn/2024/11/04/msWVpgrK.png)\n\né€šè¿‡ä»¥ä¸‹æ¡ä»¶åˆ¤æ–­æ˜¯å¦å­˜åœ¨ load-use hazardï¼Œå¦‚æœç¡®å®å­˜åœ¨ï¼Œåˆ™æ’å…¥ä¸€ä¸ª bubbleã€‚ä¸ºä»€ä¹ˆè€ƒå¯Ÿçš„æ˜¯ ID/EX.RegisterRdï¼Ÿå› ä¸ºåœ¨æ£€æµ‹ load-use hazard æ—¶ï¼Œå¯¹åº”çš„ç›®æ ‡å¯„å­˜å™¨ç¼–å·åˆšå¥½ä¼ é€’åˆ°è¿™ä¸€é˜¶æ®µã€‚\n\n$$\n\\begin{aligned}\n\\text{ID/EX.MemRead}\\ \\&\\&\\ ((\\text{ID/EX.RegisterRd} &= \\text{IF/ID.RegisterRs1})\\ ||\\ \\\\\\\n(\\text{ID/EX.RegisterRd} &= \\text{IF/ID.RegisterRs2}))\n\\end{aligned}\n$$\n\né€šè¿‡å°†æŒ‡ä»¤è½¬å˜ä¸º `nop` çš„æ–¹å¼å®ç° stallï¼Œä»è€Œå°†è¿™ä¸€æŒ‡ä»¤çš„å‰©ä½™é˜¶æ®µè½¬åŒ–ä¸º bubbleï¼ˆå¯ä»¥çœ‹åšæ˜¯å°†å…¶åŒ…è£¹èµ·æ¥ï¼Œä¸è®©å…¶äº§ç”Ÿå½±å“ï¼‰ï¼Œå…·ä½“å¯ä»¥å‚è§å®éªŒè¯¾çš„è¯¾ä»¶ã€‚\n\n#### 2.3.3. Code Scheduling to Avoid Stalls\n\nå‰é¢æåˆ°äº†é‡åˆ° load-use hazards æ—¶å³ä½¿å®ç°äº† forwarding ä¹Ÿå¿…é¡»æ’å…¥ä¸€ä¸ª stallï¼Œè¿™æ˜¾ç„¶æ˜¯æˆ‘ä»¬ä¸ä¹æ„è§åˆ°çš„ï¼Œä¸€ç§æ–¹æ³•æ˜¯è¿›è¡Œ **æŒ‡ä»¤é‡æ’(code scheduling)**ï¼šåœ¨ä¸æ”¹å˜æŒ‡ä»¤æ‰§è¡Œç»“æœçš„æƒ…å†µä¸‹è°ƒæ•´æŒ‡ä»¤é¡ºåºï¼Œä»è€Œé¿å…å‘ç”Ÿ load-use hazardsã€‚\n\n![|487](https://img.memset0.cn/2025/01/16/juukFftc.png)\n\n### 2.4. Control Hazards\n\n**æ§åˆ¶å†’é™©(control hazard)**ï¼šåœ¨æœ‰åˆ†æ”¯è¯­å¥æ—¶ï¼Œä¸‹ä¸€æ¡æ‰§è¡Œçš„æŒ‡ä»¤æ˜¯ä»€ä¹ˆå¿…é¡»ä¾èµ–äºä¸Šä¸€æ¡æŒ‡ä»¤çš„è®¡ç®—ç»“æœã€‚ä¹Ÿå› æ­¤ï¼Œæ§åˆ¶å†’é™©ä¹Ÿè¢«å«åš **åˆ†æ”¯å†’é™©(branch hazard)**ã€‚\n\n![|574](https://img.memset0.cn/2024/11/04/lcqgxCgf.png)\n\nè§£å†³ control hazard çš„æ–¹æ³•æ˜¯ä½¿ç”¨ **åˆ†æ”¯é¢„æµ‹(branch prediction)**ï¼Œå³æå‰é¢„è¯»ä¸€æ¡æŒ‡ä»¤è¿‡æ¥å¤„ç†çš„ã€‚å½“ç„¶é¢„æµ‹å¯èƒ½æœ‰é”™è¯¯çš„æ—¶å€™ï¼Œè¿™æ—¶åˆ™éœ€è¦æŠŠé”™è¯¯æŒ‡ä»¤å¸¦æ¥çš„å½±å“ flush æ‰ï¼Œæ­¤æ—¶å¿…é¡» stall å¹¶é‡æ–°è·å–æ­£ç¡®çš„æŒ‡ä»¤ã€‚\n\n**é™æ€çš„(static)** åˆ†æ”¯é¢„æµ‹æ–¹æ³•æ¯”å¦‚åŸºäºå…¸å‹åˆ†æ”¯è¡Œä¸ºï¼ˆå¾ªç¯å¤§æ¦‚ç‡ä¼šè·³å›å»æ¥ç€å¾ªç¯ï¼‰ï¼›**åŠ¨æ€çš„(dynamic)** åˆ†æ”¯é¢„æµ‹æ–¹æ³•æ¯”å¦‚é€šè¿‡ç¡¬ä»¶æµ‹é‡å®é™…åˆ†æ”¯è¡Œä¸ºï¼ˆè®°å½•è·³è½¬æŒ‡ä»¤æ˜¯å¦è·³è½¬çš„æ¬¡æ•°ï¼‰ï¼Œè¿™ä¸€éƒ¨åˆ†å°†åœ¨ã€Šè®¡ç®—æœºä½“ç³»ç»“æ„ã€‹è¯¾ç¨‹ä¸­è¿›ä¸€æ­¥è®¨è®ºã€‚\n\n> [!question] å‘ç”Ÿ control hazards æ—¶éœ€è¦æ’å…¥å‡ ä¸ª bubbleï¼Ÿ\n>\n> ç±»ä¼¼äºå¯¹ data hazards çš„å¤„ç†ï¼Œå‘ç”Ÿ control hazards æ—¶éœ€è¦æ’å…¥å‡ ä¸ª stall å’Œæ§åˆ¶è¯­å¥çš„è·³è½¬åœ¨å“ªä¸ªé˜¶æ®µå†³å®šæ˜¯æœ‰å…³çš„ã€‚è§‚å¯Ÿä¸‹é¢è¯¾æœ¬ç»™å‡ºçš„ datapath å¯ä»¥å‘ç°ï¼Œé»˜è®¤è®¤ä¸ºå¯¹ branch çš„å†³ç­–ï¼ˆå³å†³å®šæ˜¯å¦éœ€è¦è·³è½¬ï¼‰æ˜¯åœ¨ MEM é˜¶æ®µå¤„ç†çš„ã€‚è¿™ç§æ—¶å€™ï¼Œä¸€èˆ¬è®¤ä¸ºéœ€è¦æ·»åŠ  stall ä½¿å¾—ä¸‹ä¸€æ¡æŒ‡ä»¤çš„ IF é˜¶æ®µåœ¨è¿™æ¡æŒ‡ä»¤çš„ MEM é˜¶æ®µä¹‹åè¿›è¡Œï¼Œå³éœ€è¦æ’å…¥ 3 ä¸ª bubbleã€‚\n>\n> ä½†å®¹æ˜“å‘ç°ï¼Œæˆ‘ä»¬å…¶å®å¯ä»¥æ›´æ—©åœ°çŸ¥é“è·³è½¬ç»“æœï¼Œæ¯”å¦‚åœ¨ EX é˜¶æ®µï¼Œæˆ‘ä»¬æ ¹æ® ALU çš„ Zero è¾“å‡ºå°±å·²ç»çŸ¥é“æ˜¯å¦éœ€è¦è·³è½¬ã€‚ç”šè‡³ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡æ·»åŠ ä¸€ä¸ª ALU çš„æ–¹å¼å°†è¿™ä¸€åˆ¤æ–­æå‰åˆ° ID é˜¶æ®µè¿›è¡Œã€‚ç›¸å…³çš„å†…å®¹åœ¨ä¹¦ä¸Šæœ‰ä¸“é—¨çš„ä¸€å°èŠ‚ä½œä»‹ç»ï¼Œæ„Ÿå…´è¶£çš„è¯»è€…å¯ä»¥è‡ªè¡Œé˜…è¯»ã€‚æ‰€ä»¥ä¸¥è°¨çš„é¢˜ç›®åº”è¯¥ç»™å‡ºè·³è½¬å‘ç”Ÿçš„é˜¶æ®µï¼Œæˆ‘ä»¬æ®æ­¤æ‰èƒ½æ¨å®šéœ€è¦æ’å…¥çš„ bubble æ•°ã€‚\n\n### 2.5. Pipelined Datapath & Control\n\næ§åˆ¶ä¿¡å·åœ¨ ID é˜¶æ®µå…¨éƒ¨è¯‘å‡ºï¼Œéšåé€çº§ä¼ é€’ä¸‹å»ã€‚å½“ä¸€ä¸ªä¿¡å·åœ¨ä¹‹åä¸å†ç”¨åˆ°æ—¶å°±ä¸éœ€è¦ä¼ é€’äº†ã€‚\n\n![|850](https://img.memset0.cn/2024/11/04/NIrsoPGm.png)\n\n## 3. References\n\n- æ„Ÿè°¢ 514imb åŒå­¦æä¾›å¸®åŠ©ã€‚\n- [4 Processor - å’¸é±¼æš„çš„ä»£ç ç©ºé—´ (xuan-insr.github.io)](https://xuan-insr.github.io/computer_organization/4_processor/)\n- [Chap 4: The Processor - NoughtQ çš„ç¬”è®°æœ¬](https://note.noughtq.top/system/co/4)\n","publishedTitle":"ã€Œè®¡ç®—æœºç»„æˆã€IV. Processor"}},{"id":"51807d27-808f-5640-a002-efe438a563d9","fields":{"slug":"/course/co/note/5/","plainText":"\n> æœ¬ç¯‡ç¬”è®°ä»‹ç»äº†è®¡ç®—æœºç³»ç»Ÿä¸­çš„å†…å­˜å±‚æ¬¡ç»“æ„åŠå…¶å…³é”®æŠ€æœ¯ã€‚é¦–å…ˆè®¨è®ºäº† SRAM å’Œ DRAM ä¸¤ç§åŸºæœ¬çš„å†…å­˜æŠ€æœ¯ï¼Œå¹¶å¼•å…¥å†…å­˜å±‚æ¬¡çš„æ¦‚å¿µã€‚éšåè¯¦ç»†é˜è¿°äº† Cache çš„å·¥ä½œåŸç†ï¼ŒåŒ…æ‹¬ç›´æ¥æ˜ å°„ã€å…¨ç›¸è¿å’Œç»„ç›¸è¿ä¸‰ç§æ˜ å°„ç­–ç•¥ï¼Œä»¥åŠå¤„ç† Cache å‘½ä¸­ä¸ç¼ºå¤±çš„å„ç§ç­–ç•¥ã€‚æœ€åä»‹ç»äº†è™šæ‹Ÿå†…å­˜æŠ€æœ¯ï¼Œé‡ç‚¹è®¨è®ºäº†é¡µè¡¨çš„æ¦‚å¿µå’Œ TLB çš„åº”ç”¨ï¼Œä»¥åŠå®ƒä»¬åœ¨åœ°å€è½¬æ¢è¿‡ç¨‹ä¸­çš„ä½œç”¨ã€‚é€šè¿‡è¿™äº›æŠ€æœ¯çš„ç»“åˆï¼Œè®¡ç®—æœºç³»ç»Ÿå¾—ä»¥åœ¨ä¿è¯æ€§èƒ½çš„åŒæ—¶æœ‰æ•ˆç®¡ç†å†…å­˜èµ„æºã€‚<small style=\"font-style: italic; opacity: 0.5\">ï¼ˆç”± claude-3.5-sonnet ç”Ÿæˆæ‘˜è¦ï¼‰</small>\n\n<!-- more -->\n\n## 1. Memory Hierarchy\n\nåœ¨å‰æ–‡ä¸­ï¼Œæˆ‘ä»¬å°† instruction å’Œ data å­˜å‚¨åœ¨å†…å­˜ä¸­ï¼Œè€Œå†…å­˜çš„è¯»å†™ä¹Ÿæœ‰å¿«æ…¢ä¹‹åˆ†ï¼Œè¿™é‡Œä»‹ç»ä¸¤ç§å¸¸ç”¨çš„å†…å­˜æŠ€æœ¯ï¼š\n\n- **é™æ€éšæœºè®¿é—®å­˜å‚¨å™¨(Static Random Access Memory, SRAM)**ï¼š\n  - æ•°æ®å­˜å‚¨åœ¨æ™¶ä½“ç®¡ä¸­ï¼ˆé€šå¸¸ç”¨ 6-8 ä¸ªæ™¶ä½“ç®¡è¡¨ç¤ºä¸€ä¸ªä½ï¼‰ï¼Œæ— éœ€åˆ·æ–°ã€‚\n  - è¯»å†™é€Ÿåº¦å¿«ï¼Œä½†æ˜¯ç©ºé—´ï¼ˆæŒ‡å ç”¨çš„ç‰©ç†ç©ºé—´ï¼‰å ç”¨é«˜ã€‚\n- **åŠ¨æ€éšæœºè®¿é—®å­˜å‚¨å™¨(Dynamic Random Access Memory, DRAM)**ï¼š\n  - æ•°æ®å­˜å‚¨åœ¨ç”µå®¹ä¸­ï¼Œéœ€è¦å®šæœŸåˆ·æ–°ã€‚\n  - è¯»å†™é€Ÿåº¦æ…¢ï¼ˆä¸€èˆ¬æ˜¯ SRAM çš„ 5-10 å€ï¼‰ï¼Œä½†æ˜¯ç©ºé—´å ç”¨ä½ã€‚\n\næ˜¾ç„¶ï¼Œæˆ‘ä»¬ä¸å¯èƒ½æŠŠæ‰€æœ‰å†…å­˜æ•°æ®éƒ½ç”¨ SRAM å­˜å‚¨ï¼Œåªèƒ½å°†å…¶ä¸­ä¸€å°éƒ¨åˆ†æ”¾åœ¨ SRAM ä¸­ï¼ˆ**ä¸€èˆ¬æ˜¯ç¼“å­˜(cache)**ï¼‰ï¼Œè€Œå¤§éƒ¨åˆ†æ”¾åœ¨ DRAM ä¸­ï¼ˆä¸€èˆ¬æ˜¯ **ä¸»å­˜(main memory)**ï¼‰ï¼Œè¿™å°±æ˜¯ **å†…å­˜å±‚çº§(memory hierarchy)** çš„æ¦‚å¿µã€‚\n\n![|517](https://img.memset0.cn/2024/12/09/ZcczK4K0.png)\n\n## 2. Cache\n\nç”±äº CPU çš„æ‰§è¡Œé€Ÿåº¦è¿œå¿«äºä¸»å­˜ï¼ˆä½¿ç”¨äº† DRAMï¼‰çš„é€Ÿåº¦ï¼Œå¦‚æœç›´æ¥ä» DRAM ä¸­è¯»å†™æ•°æ®ï¼ŒCPU å°±å¿…é¡»ä¸ºäº†ç­‰å¾…ä¸»å­˜è€Œæš‚åœè‹¥å¹²ä¸ªæ—¶é’Ÿå‘¨æœŸï¼Œè¿™å°±æ˜¯ CPU ä¸ä¸»å­˜é€Ÿåº¦ä¸åŒ¹é…äº§ç”Ÿçš„çŸ›ç›¾ã€‚ä¸ºæ­¤æˆ‘ä»¬éœ€è¦å¼•å…¥ cache æŠ€æœ¯ã€‚å¯ä»¥å…³æ³¨åˆ°ç¨‹åºå¯¹å†…å­˜çš„è®¿é—®æœ‰å¦‚ä¸‹ç‰¹ç‚¹ï¼š\n\n- **æ—¶é—´å±€éƒ¨æ€§(temporal locality)**ï¼Œå³è¿‘æœŸè®¿é—®çš„é¡¹ç›®å¾ˆæœ‰å¯èƒ½ä¼šåœ¨çŸ­æ—¶é—´å†…å†æ¬¡è¢«è®¿é—®ã€‚ä¾‹å¦‚å¾ªç¯ä¸­çš„æŒ‡ä»¤ã€induction variables (å¾ªç¯ä¸­ç”¨æ¥è®¡æ•°çš„å˜é‡) ç­‰ã€‚\n- **ç©ºé—´å±€éƒ¨æ€§(spatial locality)**ï¼Œå³è¿‘æœŸè®¿é—®é¡¹ç›®é™„è¿‘çš„é¡¹ç›®ä¹Ÿæœ‰å¯èƒ½ä¼šåœ¨çŸ­æ—¶é—´å†…å†æ¬¡è¢«è®¿é—®ã€‚ä¾‹å¦‚è¿ç»­çš„æŒ‡ä»¤æ‰§è¡Œï¼Œæˆ–è€…æ•°ç»„å˜é‡ç­‰ã€‚\n\nåˆ©ç”¨å¥½è¿™äº›æ€§è´¨ï¼Œæˆ‘ä»¬å¯ä»¥è®¾è®¡ cache æ¥åœ¨åˆç†æˆæœ¬çš„ä»£ä»·ä¸‹å¤§å¹…ä¼˜åŒ–å¯¹å†…å­˜çš„è¯»å†™é€Ÿåº¦ã€‚\n\n### 2.1. Cache Mapping Strategies\n\n![|522](https://img.memset0.cn/2024/12/09/XQHOmHlB.png)\n\n| **é—®é¢˜**                     | **ç›´æ¥æ˜ å°„**                                              | **å…¨ç›¸è¿**                                                  | **ç»„ç›¸è¿**                                                                           |\n| ---------------------------- | --------------------------------------------------------- | ----------------------------------------------------------- | ------------------------------------------------------------------------------------ |\n| **Q1: Block Placement**      | æ¯ä¸ªå—åªèƒ½æ˜ å°„åˆ°ç¼“å­˜ä¸­çš„==ä¸€ä¸ªä½ç½®==ï¼šåœ°å€ MOD ç¼“å­˜å—æ•°é‡ | å—å¯ä»¥æ”¾ç½®åœ¨ç¼“å­˜ä¸­çš„==ä»»æ„ä½ç½®==                            | å—å¯ä»¥æ”¾ç½®åœ¨ä¸€ä¸ªç»„ä¸­çš„ä»»æ„ä½ç½®ï¼Œåœ°å€ MOD ç»„æ•°é‡ï¼›$n$-è·¯ç»„ç›¸è¿ç¼“å­˜ä¸­ï¼Œæ¯ç»„æœ‰ $n$ ä¸ªå— |\n| **Q2: Block Identification** | ä½¿ç”¨ç´¢å¼•å­—æ®µé€‰æ‹©å—ï¼ˆç›´æ¥æ˜ å°„ï¼‰                            | ä½¿ç”¨æ ‡ç­¾å­—æ®µåŒ¹é…å—åœ°å€                                      | ä½¿ç”¨ç´¢å¼•å­—æ®µé€‰æ‹©ç»„ï¼Œä½¿ç”¨æ ‡ç­¾å­—æ®µåŒ¹é…ç»„å†…å—åœ°å€                                       |\n| **Q3: Block Replacement**    | ä¸å­˜åœ¨æ›¿æ¢é—®é¢˜ï¼Œå› ä¸ºæ¯ä¸ªå—åªèƒ½æ˜ å°„åˆ°ä¸€ä¸ªå›ºå®šä½ç½®          | æ›¿æ¢ç­–ç•¥åŒ…æ‹¬éšæœºæ›¿æ¢ã€LRUï¼ˆæœ€è¿‘æœ€å°‘ä½¿ç”¨ï¼‰ã€FIFOï¼ˆå…ˆè¿›å…ˆå‡ºï¼‰ | åœ¨ç»„å†…è¿›è¡Œæ›¿æ¢ï¼Œæ›¿æ¢ç­–ç•¥åŒ…æ‹¬éšæœºæ›¿æ¢ã€LRUï¼ˆæœ€è¿‘æœ€å°‘ä½¿ç”¨ï¼‰ã€FIFOï¼ˆå…ˆè¿›å…ˆå‡ºï¼‰          |\n\n#### 2.1.1. Direct Map\n\n> [!note] Block\n>\n> å°†ç›¸é‚»çš„è‹¥å¹²ä¸ª byte åˆå¹¶ä¸ºä¸€ä¸ª **å—(block)**ï¼Œä¸‹æ–‡å…³äº cache çš„è®¨è®ºéƒ½æ˜¯ä»¥ block ä½œä¸ºåŸºæœ¬å•å…ƒè¿›è¡Œçš„ã€‚æˆ‘ä»¬å°† byte address çš„ä½è‹¥å¹²ä½ï¼ˆç§°ä¸º **å—å†…åç§»(byte offset)**ï¼‰æ‹¿æ‰ï¼Œå°±å¯ä»¥å¾—åˆ°å¯¹åº”çš„ block addressã€‚åˆ™ä¸€ä¸ª block ä¸­åŒ…å« $2^{\\text{\\#(byte offset)}}$ ä¸ª bytesã€‚\n\n**ç›´æ¥æ˜ å°„(direct map)** çš„ç­–ç•¥æ˜¯å°†æ¯ä¸ªå†…å­˜ä¸­çš„ block å”¯ä¸€æ˜ å°„åˆ°ä¸€ä¸ªç¼“å­˜çš„ block ä¸­ã€‚\n\n![|582](https://img.memset0.cn/2024/12/09/PCNbpY7S.png)\n\nå¦‚ä¸Šå›¾æ‰€ç¤ºï¼šmemory æœ‰ $2^{5} = 32$ ä¸ª blockï¼Œcache æœ‰ $2^{3}=8$ ä¸ª blockï¼Œç›´æ¥æ ¹æ® memory åœ°å€çš„ä½ 3 ä½ä½œä¸º cache åœ°å€ã€‚æˆ‘ä»¬å°†è¿™ä¸ªä½ 3 ä½ç§°ä¸º **ç´¢å¼•(index)**ã€‚\n\nä¸ºäº†çŸ¥é“ cache ä¸­å®é™…å­˜æ”¾çš„åˆ°åº•æ˜¯ memory ä¸­çš„å“ªä¸ª blockï¼Œæˆ‘ä»¬åœ¨ cache ä¸­è¿˜éœ€è¦å­˜å‚¨ memory åœ°å€çš„é«˜å‡ ä½ï¼ˆä¸Šå›¾ä¸­å°±æ˜¯é«˜ 2 ä½ï¼‰ã€‚æˆ‘ä»¬å°†è¿™ä¸ªé«˜ 2 ä½æˆä¸º **æ ‡ç­¾(tag)**ã€‚\n\nå¦å¤–ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ä¸ª **æœ‰æ•ˆä½(valid bit)** æ¥åˆ¤æ–­ cache ä¸­å­˜å‚¨çš„è¿™ä¸ª block æ˜¯å¦æ˜¯æœ‰æ•ˆçš„ã€‚åˆå§‹æ—¶å…¨éƒ¨æ— æ•ˆï¼Œvalid bit ä¸º 0ï¼›å½“ä»å†…å­˜ä¸­å–å‡ºä¸€ä¸ª block åï¼Œå°±å˜æˆæœ‰æ•ˆçš„äº†ï¼Œvalid bit ä¸º 1ã€‚cache hit å½“ä¸”ä»…å½“ valid bit ä¸º 1 ä¸” tag ä¸ç›®æ ‡åœ°å€ä¸€è‡´ã€‚\n\n![|398](https://img.memset0.cn/2024/12/09/PTUhlfoQ.png)\n\n- tagï¼šç”¨äºæ ‡è¯†å¯¹åº”å†…å­˜å—çš„å”¯ä¸€æ€§\n- indexï¼šç”¨äºå®šä½ç¼“å­˜ä¸­å—çš„ä½ç½®\n- offset / byte offsetï¼šç”¨äºå®šä½å—å†…å…·ä½“çš„æ•°æ®\n\n> [!tip] Tip: direct map cache ç›¸å…³è®¡ç®—é¢˜\n>\n> 1.  æ ¹æ®ä¸€ä¸ª block æœ‰å¤šå°‘ä¸ª byte/word ç®—å‡º offsetï¼›\n> 2.  æ ¹æ® cache åŒ…å«å¤šå°‘ä¸ª blockï¼ˆæˆ–è€…å«åš cache è¡Œï¼‰ç®—å‡º indexï¼›\n> 3.  åœ°å€å‰©ä¸‹çš„ä½ä¸º tagï¼›\n> 4.  ä¸è¦å¿˜äº† cache ä¸­è¿˜éœ€è¦ valid bitã€data bitsã€tag bitã€dirty bitï¼ˆå¯é€‰ï¼‰ï¼Œæ³¨æ„ index bit å¹¶ä¸åœ¨ cache é‡Œé¢ã€‚\n\n#### 2.1.2. Fully Associative\n\n**å…¨ç›¸è¿(fully associative)** ç­–ç•¥ç®€å•æ¥è¯´å°±æ˜¯ block å¯èƒ½å­˜æ”¾åˆ° cache ä¸­çš„æ¯ä¸€ä¸ªä½ç½®ï¼ˆå› ä¸ºå®ƒä»¬éƒ½æœ‰è¿çº¿ï¼‰ï¼Œä½†åå¤„æ˜¯æˆ‘ä»¬åœ¨åˆ¤æ–­ hit æ—¶çš„å¤æ‚åº¦å¤§å¤§å¢åŠ ï¼ˆéœ€è¦ä¸€æ¬¡è·Ÿæ‰€æœ‰ cache ä¸­çš„ block æ¯”è¾ƒçœ‹æ˜¯å¦ hitï¼‰ã€‚\n\n- ==æ³¨æ„ï¼Œå…¨ç›¸è¿çš„å®ç°ä¸­æ²¡æœ‰ index==ï¼Œæ— è®ºåœ¨åœ°å€åˆ’åˆ†è¿˜æ˜¯åœ¨ cache ç©ºé—´ä¸­ã€‚\n\n![|455](https://img.memset0.cn/2024/12/16/jYFHq6QI.png)\n\nå¦å¤–ï¼Œåœ¨æ›¿æ¢ cache block æ—¶ä¹Ÿæœ‰å¤šç§ç­–ç•¥å¯ä»¥é‡‡ç”¨ï¼š\n\n- **éšæœºæ›¿æ¢(random replacement)**ï¼šéšæœºä¸€ä¸ª cache ä¸­çš„ block è¿›è¡Œæ›¿æ¢ï¼ˆéœ€è¦å®ç°ä¸€ä¸ªéšæœºæ•°ç”Ÿæˆç®—æ³•ï¼‰ã€‚\n- **å…ˆè¿›å…ˆå‡º(first in first out, FIFO)**ï¼šå³é€‰æ‹©è¿›å…¥æ—¶é—´æœ€å°‘çš„ block è¦†ç›–æ‰ã€‚\n- **æœ€è¿‘æœ€å°‘ä½¿ç”¨(least recently used, LRU)**ï¼šé€‰æ‹©ä¸Šä¸€æ¬¡ä½¿ç”¨æ—¶é—´è·ç¦»ç°åœ¨æœ€è¿œçš„ block è¦†ç›–æ‰ï¼ˆéœ€è¦ä¸€äº›é¢å¤–çš„ä½è®°å½•ä¿¡æ¯ï¼‰ã€‚\n\n#### 2.1.3. Set Associative\n\n**ç»„ç›¸è¿(set associative)** ç­–ç•¥æ˜¯ä¸€ç§ä»‹äºç›´æ¥æ˜ å°„ç­–ç•¥å’Œå…¨ç›¸è¿ç­–ç•¥çš„ç­–ç•¥ã€‚å³æ¯ä¸ª block æ ¹æ®å…¶ block address å¯ä»¥å¯¹åº”åˆ°ä¸€ç»„ cache blocks ä¸­ã€‚å…¶ä¸­æ¯ä¸€ç»„ä¸­éƒ½é‡‡ç”¨å…¨ç›¸è¿ä¸­ä»‹ç»è¿‡çš„æ›¿æ¢ç®—æ³•ã€‚\n\n![|612](https://img.memset0.cn/2024/12/16/tVrBA8zf.png)\n\nåƒä¸Šå›¾å°±æ˜¯ä¸€ä¸ª 2-way set associative çš„ç¤ºæ„å›¾ï¼Œå±•ç¤ºäº†æ•°æ®åœ¨ set-associative çš„ cache ä¸­çš„å»å‘ã€‚æ›´ä¸¥è°¨çš„ï¼Œæˆ‘ä»¬å¯ä»¥ç”»å‡ºå…¶åŸç†å›¾ï¼Œä»¥ 4-way set associative çš„ cache ä¸ºä¾‹ï¼ˆè§ä¸‹å›¾ï¼‰ï¼Œæˆ‘ä»¬ç”¨ä¸€è¡Œè¡¨ç¤ºä¸€ä¸ªç»„ï¼Œå¹¶ä½¿ç”¨ MUX åœ¨ç»„ä¸­é€‰æ‹©åŒ¹é…çš„ lineã€‚\n\n![|563](https://img.memset0.cn/2025/01/16/HTghKphL.png)\n\nç‰¹åˆ«åœ°ï¼Œæˆ‘ä»¬ç§°ç»„çš„å¤§å°ä¸º **associativity**ï¼Œåˆ™åˆ¤æ–­ hit æ—¶éœ€è¦æ¯”è¾ƒçš„æ¬¡æ•°å°±ç­‰äº associativityã€‚\n\n### 2.2. Handling Hits & Misses\n\næˆ‘ä»¬æ ¹æ® read / writeã€hit / missã€inst / data çš„æƒ…å†µè¿›è¡Œåˆ†ç±»è®¨è®ºï¼Œè¿™ä¸€éƒ¨åˆ†çš„ç†è§£ä¼šåœ¨åæ–‡å…³ç³»åˆ°æ€§èƒ½è®¡ç®—ã€‚\n\n- Read\n  - Hitï¼šç›´æ¥å°±ä» cache é‡Œè¯»å°±å¥½äº†\n  - Miss\n    - Dataï¼šä» memory é‡ŒæŠŠå¯¹åº” block æ‹¿åˆ° cacheï¼Œå†è¯»å–ç›¸åº”å†…å®¹ã€‚\n    - Instï¼šæš‚åœ CPU è¿è¡Œï¼Œä» memory é‡ŒæŠŠå¯¹åº”çš„ block æ‹¿åˆ° cacheï¼Œä»ç¬¬ä¸€ä¸ª step å¼€å§‹é‡æ–°è¿è¡Œå½“å‰è¿™æ¡æŒ‡ä»¤ã€‚\n- Write\n  - Hit\n    - **å†™ç©¿(write-through)** ç­–ç•¥ï¼šæ¯æ¬¡å†™æ•°æ®æ—¶æ—¢å†™åœ¨ cache ä¸­ï¼Œä¹Ÿå†™åˆ° main memory ä¸­ã€‚å¥½å¤„æ˜¯ cache å’Œ main memory å§‹ç»ˆæ˜¯ä¸€è‡´çš„ã€‚\n      - ä¸€ä¸ªå¸¸è§çš„æ”¹è¿›æ˜¯å¼•å…¥ **write buffer**â€”â€”å³éœ€è¦å†™å…¥ main memory æ—¶å…ˆåŠ å…¥åˆ°ç¼“å†²é˜Ÿåˆ—ä¸­ï¼Œå¹¶å…è®¸ CPU ç»§ç»­è¿è¡Œäº†ã€‚å½“ write buffer æ»¡äº†çš„æ—¶å€™ï¼Œä¹Ÿéœ€è¦æš‚åœå¤„ç†å™¨æ¥åšå†™å…¥ main memory çš„å·¥ä½œï¼Œç›´åˆ° buffer ä¸­æœ‰ç©ºé—²çš„ entryã€‚ï¼ˆå› æ­¤ï¼Œå¦‚æœ main memory çš„å†™å…¥é€Ÿç‡ä½äº CPU äº§ç”Ÿå†™æ“ä½œçš„é€Ÿç‡ï¼Œå¤šå¤§çš„ç¼“å†²éƒ½æ— æµäºäº‹ã€‚ï¼‰\n    - **å†™å›(write-back)** ç­–ç•¥ï¼šåªå°†è¦ä¿®æ”¹çš„å†…å®¹å†™åœ¨ cache é‡Œï¼Œå½“è¿™ä¸ª block è¦è¢«æ›¿æ¢æ‰çš„æ—¶å€™æ‰å°†å¯¹åº”çš„ä¿®æ”¹å†™å› main memoryã€‚è¿™ç§æƒ…å†µéœ€è¦åœ¨ cache ä¸­é¢å¤–åˆ›å»ºä¸€ä¸ª **è„ä½(dirty bit)** ç”¨äºè®°å½•è¯¥ block æ˜¯å¦å‘ç”Ÿæˆ–ä¿®æ”¹ã€‚è¿™å¯¹äºåœ¨åŒä¸€ä¸ª block ä¸­è¿ç»­æœ‰å¤šæ¬¡ä¿®æ”¹æƒ…å†µä¼˜åŒ–æ˜¯å·¨å¤§çš„ã€‚\n  - Miss\n    - **write-around** ç­–ç•¥ï¼šç›´æ¥åœ¨ main memory ä¸­è¿›è¡Œä¿®æ”¹ï¼Œä¸ç”¨æ‹¿åˆ° cache é‡Œäº†ã€‚ä¸€èˆ¬æ­é… write-through ç­–ç•¥ã€‚\n    - **write-allocate** ç­–ç•¥ï¼šå…ˆå°†å¯¹åº” block æ‹¿åˆ° cache ä¸­å†å†™å…¥ã€‚==å¯¹äº write-back ç­–ç•¥ï¼Œå¿…é¡»æ­é…è¿™ä¸€ç­–ç•¥ã€‚==\n\n![|667](https://img.memset0.cn/2025/01/02/kBa9D2g0.png)\n\n### 2.3. Cache Performance\n\næ³¨æ„åˆ°æ— è®ºæˆ‘ä»¬é‡‡ç”¨ä»€ä¹ˆç­–ç•¥ï¼Œéƒ½ä¸èƒ½ä¿è¯ cache çš„æ¯æ¬¡è®¿é—®éƒ½ hitã€‚è€Œä¸€æ—¦ missï¼Œå°±éœ€è¦ç­‰å¾…è‹¥å¹²æ—¶é’Ÿå‘¨æœŸå»è®¿é—®ä¸»å­˜ï¼Œè¿™ä¸€ä»£ä»·æˆä¸º **miss penalty**ã€‚åœ¨è®¡ç®— cache æ€§èƒ½æ—¶ï¼Œå¿…é¡»è¦è€ƒè™‘è¿™ä¸€éƒ¨åˆ†ã€‚\n\n**å¹³å‡å†…å­˜è®¿é—®æ—¶é—´(average memory access time)** å®šä¹‰ä¸ºï¼š\n\n$$\n\\text{Average Memory Access Time} = \\text{Hit Time} + \\text{Miss Rate} \\times \\text{Memory Time}\n$$\n\nä¸€èˆ¬ç”¨ CPU æ—¶é—´æ¥è¡¡é‡ cache æ€§èƒ½ï¼Œå³åœ¨ CPU æ‰§è¡Œæ—¶é—´çš„åŸºç¡€ä¸ŠåŠ ä¸Šå› ä¸º cache miss è€Œæƒ©ç½šçš„æ—¶é—´ï¼š\n\n$$\n\\begin{aligned}\n\\text{CPU Time} = (\\text{CPU execution clock cycles} + \\text{memory-stall clock cycles}) \\times \\text{clock cycle time}\\\\\n\\end{aligned}\n$$\n\n- è¯»å»¶è¿Ÿå‘¨æœŸï¼š$\\displaystyle{\\text{Read-stall cycles} = \\frac{\\text{Read}}{\\text{Program}} \\times \\text{Read Miss Rate} \\times \\text{Read Miss Penalty}}$\n- å†™å»¶è¿Ÿå‘¨æœŸï¼š$\\displaystyle{\\text{Write-stall cycles} = \\frac{\\text{Write}}{\\text{Program}} \\times \\text{Write Miss Rate} \\times \\text{Write Miss Penalty} + \\text{Write Buffer Stalls}}$\n  - å¦‚æœ write buffer penalty å¾ˆå°ï¼Œå¯ä»¥å¿½ç•¥ä¸è®¡ã€‚\n  - å¦‚æœ block size ä¸º $1$ï¼Œåˆ™ write miss penalty è¿‘ä¹äº $0$ã€‚\n- åœ¨ write-through çš„ cache ä¸­ï¼Œread penalty å’Œ write penalty å¯è¿‘ä¼¼ä¸ºç›¸åŒçš„ï¼Œç”±æ­¤å¾—åˆ°ï¼š$\\displaystyle{\\text{Memory-stall clock cycles} = \\frac{\\text{Memory Accesses}}{\\text{Program}} \\times \\text{Miss Rate} \\times \\text{Miss Penalty} }$ã€‚\n\n## 3. Virtual Memory\n\nä¸ºäº†è®©å¤šä¸ªç¨‹åºå¯ä»¥å…±ç”¨ä¸€ä¸ªåœ°å€ï¼ŒåŒæ—¶æé«˜å†…å­˜å¯»å€ç©ºé—´ï¼Œæˆ‘ä»¬å¯ä»¥å¼•å…¥ **è™šæ‹Ÿå†…å­˜(virtual memory)** çš„æ¦‚å¿µï¼Œè¿™æ˜¯ç›¸å¯¹äº **ç‰©ç†å†…å­˜(physical memory)** çš„è€Œè¨€çš„ã€‚å½“ç„¶ï¼Œï¼ˆéœ€è¦ç”¨åˆ°çš„ï¼‰æ•°æ®è¿˜æ˜¯éœ€è¦è¢«åŠ è½½åˆ°ç‰©ç†å†…å­˜ä¸­ï¼Œæœ¬å°èŠ‚ä¸»è¦å…³æ³¨çš„æ˜¯ **è™šæ‹Ÿåœ°å€(virtual address)** å’Œ **ç‰©ç†åœ°å€(physical address)** è¿›è¡Œ==è½¬æ¢==çš„æŠ€æœ¯ã€‚\n\n### 3.1. Page Table\n\n**é¡µ(page)** æ˜¯è™šæ‹Ÿå†…å­˜å’Œç‰©ç†å†…å­˜çš„åŸºæœ¬å•å…ƒï¼Œå¯ä»¥ç±»æ¯” cache ä¸­ block / line çš„æ¦‚å¿µã€‚ä¸€æ–¹é¢ï¼Œæˆ‘ä»¬åˆ©ç”¨äº†å†…å­˜è®¿é—®çš„è¿ç»­æ€§ï¼›å¦ä¸€æ–¹é¢ï¼Œæˆ‘ä»¬å¯ä»¥å‡å°‘å¯¹é¡µè¡¨å¤§å°çš„è¦æ±‚ï¼Œå› ä¸ºè™šæ‹Ÿåœ°å€å’Œç‰©ç†åœ°å€çš„ page offset éƒ¨åˆ†æ˜¯ç›¸åŒçš„ï¼Œä¸éœ€è¦è½¬æ¢ã€‚\n\né€šè¿‡è™šæ‹Ÿå†…å­˜æŠ€æœ¯ï¼Œæˆ‘ä»¬å¯ä»¥è®©ç¨‹åºè®¿é—®è¶…è¿‡ç‰©ç†å†…å­˜æœ¬èº«é™åˆ¶çš„å†…å­˜ï¼Œè¿™æ˜¯é€šè¿‡å’Œç£ç›˜ çš„äº¤äº’å¾—åˆ°çš„ï¼Œè¿™å…¶å®æ¯”è¾ƒç±»ä¼¼äºæ“ä½œç³»ç»Ÿä¸­ swap å†…å­˜çš„æ¦‚å¿µï¼ˆä½†å…¶å®æ˜¯ä¸¤ä¸ªä¸œè¥¿ï¼‰ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œç¨‹åºæ‰€éœ€è¦çš„å†…å­˜æ•°æ®ä¸€å¼€å§‹åœ¨ç£ç›˜ä¸­ï¼Œå¹¶é€šè¿‡è™šæ‹Ÿåœ°å€çš„æ–¹å¼ç´¢å¼•ã€‚ç­‰åˆ°ç¨‹åºç”¨åˆ°æ—¶æ‰ä»ç£ç›˜ä¸­å–å‡ºåŠ è½½åˆ°ç‰©ç†å†…å­˜é‡Œï¼Œç”±äºè¿™ä¸€ç‰©ç†å†…å­˜åœ°å€æ˜¯å®æ—¶åˆ†é…çš„ï¼Œæˆ‘ä»¬éœ€è¦é€šè¿‡ä¸€ä¸ª **é¡µè¡¨(page table)** è®°å½•è™šæ‹Ÿå†…å­˜åˆ°åº•è¢«å¯¹åº”åˆ°äº†ç‰©ç†å†…å­˜çš„å“ªä¸€åœ°å€ï¼Œæ ¹æ®è¿™ä¸€ç‰©ç†åœ°å€æˆ‘ä»¬æ‰èƒ½åœ¨ä¸»å­˜ä¸­æŸ¥æ‰¾æ•°æ®ã€‚\n\n![|407](https://img.memset0.cn/2024/12/16/yyoQ90oT.png)\n\nå½“æˆ‘ä»¬åœ¨ page table ä¸­ miss æ—¶ï¼Œå®é™…ä¸Šå°±æ˜¯å‘ç”Ÿäº† **é¡µé”™è¯¯(page fault)**ï¼Œå³æˆ‘ä»¬è¯·æ±‚çš„é¡µå¹¶ä¸åœ¨ä¸»å­˜ä¸­ï¼Œè€Œåœ¨ disk ä¸­ã€‚å½“ page fault å‘ç”Ÿæ—¶ï¼Œä¸€èˆ¬ç”±æ“ä½œç³»ç»Ÿè´Ÿè´£å°†å¯¹åº”é¡µä»ç£ç›˜ä¸­å–å‡ºï¼Œå¹¶è½½å…¥åˆ°ä¸»å­˜ä¸­ã€‚è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆä½¿ç”¨è™šæ‹Ÿå†…å­˜æŠ€æœ¯æ—¶ï¼Œä¸€èˆ¬åªèƒ½ä½¿ç”¨ write back ç­–ç•¥è€Œä¸èƒ½ä½¿ç”¨ write through ç­–ç•¥ï¼Œå› ä¸ºå¯¹ disk çš„å†™æ˜¯ææ…¢çš„ï¼Œä¸èƒ½æ¥å—ä¸€æ—¦ miss å°±åªèƒ½ç­‰å¾… disk å†™ã€‚\n\n> [!question] Page table æ˜¯ DRAM åˆ° disk çš„ç¼“å­˜ï¼Ÿ\n>\n> æœ‰äººæŠŠ cache ç†è§£æˆ SRAM å±‚å’Œä¸»å­˜ï¼ˆDRAM å±‚ï¼‰çš„ç¼“å­˜ï¼Œè€ŒæŠŠ page table ç†è§£æˆ DRAM å±‚å’Œ disk çš„ç¼“å­˜ã€‚è¿™ç§è¯´æ³•å¤§ä½“ä¸Šæ˜¯è¯´å¾—é€šçš„ï¼Œä½†å¹¶ä¸æ˜¯å¾ˆä¸¥è°¨ã€‚å°±æ¯”å¦‚ï¼Œåœ¨ page table ä¸­æˆ‘ä»¬å¹¶ä¸å®é™…å­˜å‚¨æ•°æ®ï¼Œè€Œæ˜¯åªå­˜æ”¾è™šæ‹Ÿåœ°å€å’Œç‰©ç†åœ°å€çš„è½¬æ¢å…³ç³»ï¼Œæ•°æ®ä»æ˜¯å­˜å‚¨åœ¨ç‰©ç†å†…å­˜ï¼ˆä¸»å­˜ï¼›DRAM å±‚ï¼‰ä¸­ã€‚\n\n> [!question] Page table æ˜¯ fully-associative è¿˜æ˜¯ direct mappedï¼Ÿ\n>\n> å› ä¸º page table ä¸­çš„æ¯ä¸€ä¸ªä½ç½®éƒ½å¯ä»¥å­˜æ”¾ä»»æ„ä¸€ä¸ªç‰©ç†åœ°å€ï¼ˆå³æ¯ä¸ªè™šæ‹Ÿåœ°å€éƒ½å¯èƒ½å¯¹åº”ä»»ä¸€ä¸ªç‰©ç†åœ°å€ï¼‰ï¼Œè€Œè¯¾ä»¶æŠŠ page table çœ‹æˆä¸€ç§ DRAM å±‚åˆ°å¤–éƒ¨å­˜å‚¨çš„ cacheï¼Œä»è€Œè¯´ page table æ˜¯ fully-associative çš„ã€‚ä½†è¿™ç§å…¨ç›¸è¿çš„å®ç°æ–¹æ³•æ˜¯é€šè¿‡åœ°å€è½¬æ¢+æ ¹æ®ç‰©ç†åœ°å€å¯»å€å®ç°çš„ï¼Œè€Œä¸æ˜¯ cache çš„é‚£ç§ç›´æ¥è¿çº¿ï¼Œä¸¤è€…è¿˜æ˜¯æœ‰ä¸å°çš„åŒºåˆ«çš„ã€‚ä¸è¿‡å…±åŒç‚¹æ˜¯æˆ‘ä»¬éƒ½å¯ä»¥å®ç° LRU ç­–ç•¥ç­‰ç­‰ï¼ˆå–å†³äºåœ¨ page faults å‘ç”Ÿæ—¶æ€ä¹ˆæ“ä½œï¼‰ã€‚\n>\n> è€Œå¦‚æœæ¢ä¸€ä¸ªç†è§£ï¼ŒæŠŠ page table çœ‹ä½œæ˜¯è™šæ‹Ÿåœ°å€åˆ°ç‰©ç†åœ°å€çš„è½¬æ¢å‡½æ•°ï¼ˆå‡è£…æ˜¯å¦ä¸€ç§å®šä¹‰åœ°ä¸å¤ªä¸¥è°¨çš„ cacheï¼Ÿï¼‰ï¼Œé‚£åˆå¯ä»¥è¯´ page table æ˜¯ direct mapped çš„ã€‚å› ä¸ºæˆ‘ä»¬å…¶å®æ˜¯ç›´æ¥æ ¹æ®è™šæ‹Ÿåœ°å€åœ¨ page table ä¸­æŸ¥è¡¨ï¼Œè¿™å’Œ direct mapped cache çš„å®ç°ç±»ä¼¼ã€‚\n>\n> å› æ­¤æˆ‘è§‰å¾—è¿™ä¸ªæ€ä¹ˆè¯´å–å†³äºå…·ä½“è¯­å¢ƒï¼Œå–å†³äºä½ æ€ä¹ˆç†è§£ã€‚ä¸ªäººè®¤ä¸ºä¸å¿…å¤ªçº ç»“è¿™ä¸ªã€‚\n\n### 3.2. Translation-lookahead Buffer\n\næ³¨æ„åˆ° page table å¾ˆå¤§ï¼Œéœ€è¦å­˜å‚¨åœ¨ DRAM ä¸­ã€‚å³å’Œä¸»å­˜ä¸€æ ·ï¼Œå¯¹ page table çš„è®¿é—®å…¶å®æ˜¯è¾ƒæ…¢çš„ï¼Œé‚£æœ‰æ²¡æœ‰ä»€ä¹ˆåŠæ³•ç»™ page table å†å®ç°ä¸€ä¸ªç¼“å­˜å‘¢ï¼Ÿè¿™å°±æ˜¯ **å¿«è¡¨(Translation-lookahead Buffer, TLB)** æ‰®æ¼”çš„å·¥ä½œã€‚TLB æ”¾åœ¨ SRAM ä¸­ï¼Œä¸€èˆ¬é‡‡ç”¨ç»„ç›¸è¿çš„ç­–ç•¥ï¼ˆä¹Ÿå¯ä»¥æ˜¯å…¶ä»–ä¸¤ç§ï¼‰ï¼Œä½œä¸º page table çš„ cacheã€‚å½“ TLB å‘½ä¸­æ—¶ï¼Œèƒ½ç›´æ¥è¿”å› physical addressï¼Œå¦åˆ™æ‰éœ€è¦åœ¨ page table ä¸­é‡æ–°æŸ¥æ‰¾ã€‚\n\nå¦‚æœæŠŠ TLB å’Œ page table ç»“åˆèµ·æ¥ï¼Œå¹¶ä¸”è€ƒè™‘æ ¹æ®ç‰©ç†åœ°å€ä» cache å’Œä¸»å­˜ä¸­æ‰¾æ•°æ®çš„æ­¥éª¤ï¼Œå°±å¯ä»¥å¾—åˆ°ä¸‹é¢è¿™å¼ æµç¨‹å›¾ï¼Œæ®æ­¤ä¹Ÿå¾ˆå¥½åˆ†æè¯¾ä»¶ä¸­ç»™å‡ºçš„ possible / impossible åˆ¤æ–­ã€‚\n\n![|621](https://img.memset0.cn/2025/01/03/VT7hwrqh.png)\n\n- å¦‚æœ page table ä¸­ missï¼Œåˆ™ä¸å¯èƒ½åœ¨ TLB ä¸­ hitã€‚å› ä¸º TLB ä¸­çš„æ•°æ®æ˜¯ä» page table ä¸­å–å‡ºå¹¶æ”¾å…¥çš„ã€‚\n- å¦‚æœåœ¨ page table å’Œ tlb ä¸­ missï¼Œåˆ™ä¸å¯èƒ½åœ¨ cache ä¸­ hitï¼Œå› ä¸ºé¡µå¦‚æœåœ¨ cache ä¸­è¯´æ˜å…¶æœ‰è¢«åˆ†é…ç‰©ç†åœ°å€ï¼Œè¿™ç§æƒ…å†µä¸‹ä¸€å®šèƒ½åœ¨ page table ä¸­æŸ¥åˆ°ã€‚\n\n![|654](https://img.memset0.cn/2025/01/16/IwvSuBr8.png)\n\nä¸€èˆ¬åœ¨ç»„ç›¸è¿çš„ TLB ä¸­ä½¿ç”¨ LRU ç­–ç•¥ï¼Œä½†å®Œæ•´çš„ LRU ç­–ç•¥å®ç°å¼€é”€è¾ƒå¤§ï¼Œä¸€èˆ¬é‡‡ç”¨ä¸€ç§è¿‘ä¼¼çš„ LRU ç­–ç•¥ã€‚å³åœ¨ TLB ä¸­åŠ å…¥ä¸€ä¸ª rel bitã€‚CPU æ¯éš”ä¸€æ®µæ—¶é—´å°† rel bit ç½® 0ï¼Œå¦‚æœè¿›è¡Œäº†è®¿é—®å°±å°† rel bit ç½® 1ã€‚å½“éœ€è¦ä» TLB ä¸­ç§»å‡º line æ—¶ï¼Œé€‰æ‹©ä¸€ä¸ª rel bit ä¸º 0 çš„è¡Œå³å¯ã€‚\n\n> [!question] TLB éœ€è¦ dirty bit å—ï¼Ÿ\n>\n> å¦‚æœè¦å®ç°å†™æ“ä½œï¼Œæˆ‘ä»¬åœ¨ TLB ä¸­ä¹Ÿéœ€è¦å®ç° dirty bitã€‚è¿™æ˜¯å› ä¸ºæ ¹æ® write-back ç­–ç•¥ï¼Œæˆ‘ä»¬å¦‚æœå¯¹ä¸€ä¸ªé¡µè¿›è¡Œäº†ä¿®æ”¹ï¼Œå°±å¿…é¡»æŠŠå…¶ dirty bit è®¾ç½®ä¸º 1ã€‚è€Œæ ¹æ® write-back ç­–ç•¥ï¼Œè¿™ä¸ªé¡µè‚¯å®šå·²ç»è¢«åŠ è½½åˆ° TLB ä¸­ï¼Œæ‰€ä»¥æˆ‘ä»¬åªéœ€è¦åœ¨ TLB ä¸­è®²å…¶ dirty bit è®¾ç½®ä¸º 1ï¼Œå¹¶ä¸”åœ¨è¿™ä¸ªé¡µè¢«ç§»å‡º TLB æ—¶æŠŠä¿®æ”¹åº”ç”¨åˆ° page table ä¸­å³å¯ã€‚\n>\n> è®¾æƒ³å¦‚æœæˆ‘ä»¬æ²¡æœ‰åœ¨ TLB ä¸­å®ç° dirty bitï¼Œåˆ™æ¯æ¬¡æ ‡è®° dirty bit éƒ½éœ€è¦å¯¹ page table è¿›è¡Œæ“ä½œï¼Œè¿™æ˜¾ç„¶ä¼šå¸¦æ¥é¢å¤–çš„æ—¶é—´å¼€é”€ï¼›è€Œå¦‚æœä¸æ“ä½œçš„è¯ï¼Œæ•°æ®ä¸€è‡´æ€§å°±ä¸èƒ½ä¿è¯ã€‚\n\n## 4. References\n\n- æ„Ÿè°¢ 514imb åŒå­¦æä¾›å¸®åŠ©ã€‚\n- [5 Cache - å’¸é±¼æš„çš„ä»£ç ç©ºé—´ (xuan-insr.github.io)](https://xuan-insr.github.io/computer_organization/5_cache/)\n- [5 Memory - æ—¶é›¨çš„ç¬”è®°æœ¬](https://birchtree2.github.io/%E5%A4%A7%E4%BA%8C%E4%B8%8B/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90/5_Memory.html)\n- [Chap 5: Memory Hierarchy - NoughtQ çš„ç¬”è®°æœ¬](https://note.noughtq.top/system/co/5)\n","publishedTitle":"ã€Œè®¡ç®—æœºç»„æˆã€V. Memory"}},{"id":"18032122-3ba7-5f89-9a2f-896fbea22a7d","fields":{"slug":"/course/dd/note/1/","plainText":"\n> æœ¬ç¯‡ç¬”è®°æ¦‚è¿°äº†æ•°å­—ç³»ç»Ÿå’Œä¿¡æ¯çš„åŸºæœ¬æ¦‚å¿µï¼ŒåŒ…æ‹¬æ•°å­—ç”µè·¯ã€æ•°å­—ä¿¡å·ä¸æ¨¡æ‹Ÿä¿¡å·çš„åŒºåˆ«ï¼Œé€»è¾‘ç³»ç»Ÿçš„åˆ†ç±»ï¼ˆç»„åˆç”µè·¯ä¸æ—¶åºç”µè·¯ï¼‰ï¼Œä»¥åŠæ•°å­—è®¡ç®—æœºå’ŒåµŒå…¥å¼ç³»ç»Ÿçš„ç»“æ„ä¸è®¾è®¡è¿‡ç¨‹ã€‚æ­¤å¤–ï¼Œè¿˜ä»‹ç»äº†æ•°å­—ç³»ç»Ÿä¸­çš„è¿›åˆ¶ã€ç¼–ç æ–¹å¼ï¼ˆå¦‚ BCD ç ã€æ ¼é›·ç å’Œå¥‡å¶æ ¡éªŒç ï¼‰ç­‰å†…å®¹ï¼Œå¸®åŠ©è¯»è€…ç†è§£æ•°å­—é€»è¾‘è®¾è®¡çš„åŸºç¡€çŸ¥è¯†ã€‚<small style=\"font-style: italic; opacity: 0.5\">ï¼ˆç”± gpt-4o-mini ç”Ÿæˆæ‘˜è¦ï¼‰</small>\n\n<!-- more -->\n\n> [!quote]- Word Table\n>\n> - æ•°å­—ç”µè·¯(digital circuit)\n> - æ•°å­—ç³»ç»Ÿ(digital system)\n> - **æ¨¡æ‹Ÿä¿¡å·(analog signal)**\n> - **é€»è¾‘è¿ç®—(logical operator)**\n> - **æ³¢å½¢å›¾(waveform)**\n> - ä¸­å¤®å¤„ç†å•å…ƒ(Central Processing Unit, CPU)\n> - æ•°å­—ä¿¡å·å¤„ç†å™¨(Digital Signal Processor, DSP)\n> - **åµŒå…¥å¼ç³»ç»Ÿ(embedded system)**\n> - å¤„ç†å™¨(processor)\n> - **æœ€é«˜æœ‰æ•ˆä½(most significant digit, MSD)**\n\n## 1. æ•°å­—ç³»ç»Ÿ Digital Systems\n\n### 1.1. ä¿¡æ¯è¡¨è¾¾ Information Representation\n\n![|450](https://img.memset0.cn/2024/02/29/EKlm3n1t.png)\n\n- **æ¨¡æ‹Ÿä¿¡å·(analog signal)**ï¼šå–å€¼æ˜¯**è¿ç»­(continous)** çš„ã€‚\n- **æ•°å­—ä¿¡å·(digital signal)**ï¼šå–å€¼æ˜¯**ç¦»æ•£(discrete)** çš„ã€‚\n  - **å¼‚æ­¥(asynchronous)**ï¼šåœ¨å˜åŒ–çš„æ—¶é—´ç‚¹ä¸Šæ˜¯**è¿ç»­**çš„ã€‚\n  - **åŒæ­¥(synchronous)**ï¼šåœ¨å˜åŒ–çš„æ—¶é—´ç‚¹ä¸Šä¹Ÿæ˜¯**ç¦»æ•£**çš„ï¼›ç”±**æ—¶é’Ÿè„‰å†²**æ§åˆ¶ã€‚\n\n![|500](https://img.memset0.cn/2024/02/29/iwTGPXzI.png)\n\n- HIGH å’Œ LOW æ˜¯å™ªå£°å®¹é™ã€‚\n- å›¾ä¸­ HIGH å’Œ LOW çš„æ¥å—èŒƒå›´å†…å­˜åœ¨ä¸€æ®µé˜ˆå€¼åŒºé—´ï¼Œè½åœ¨è¿™ä¸€éƒ¨åˆ†çš„ç”µå¹³æ˜¯**æœªå®šä¹‰(undefined)**Â  çš„ï¼Œä¹Ÿè¢«ç§°ä¸ºæ˜¯**æµ®åŠ¨(floating)**Â  çš„ã€‚å¦‚æœè¾“å‡ºçš„ç”µå¹³æ˜¯åœ¨æµ®åŠ¨åŒºé—´çš„ï¼Œé‚£ä¹ˆå…¶è®¤å®šå€¼å°†æ˜¯éšæœºçš„ã€‚\n- ç¡¬ä»¶å±‚é¢ä¸Šï¼Œå°†æ¨¡æ‹Ÿä¿¡å·è½¬åŒ–ä¸ºæ•°å­—ä¿¡å·çš„å·¥ä½œä¸€èˆ¬é€šè¿‡**æ™¶ä½“ç®¡(transistors)**Â  å®ç°ã€‚\n\n> [!important] â€œå®½è¿›ä¸¥å‡ºâ€è§„åˆ™\n> ==è¾“å‡ºæ—¶çš„æ¥å—èŒƒå›´ä¼šæ¯”è¾“å…¥æ—¶çš„ç•¥å°ä¸€äº›==ã€‚å…¶ç›®çš„æ˜¯ä¸ºäº†è¿›ä¸€æ­¥æé«˜ç”µè·¯åœ¨å™ªéŸ³ç­‰å¼‚å¸¸å½±å“ä¸‹ä¹Ÿèƒ½æ­£å¸¸è¡¨ç°çš„èƒ½åŠ›ã€‚\n\n> [!quote]- Positive Logic\n> äº‹å®ä¸Šï¼Œåœ¨ä¿¡æ¯çš„å¯¹åº”ä¸Šï¼Œè™½ç„¶å°†é«˜ä½ç”µå¹³åŒ HIGH/LOW è”ç³»æ˜¯å¾ˆè‡ªç„¶çš„ï¼Œä½†æ˜¯å°†ä»–ä»¬åŒ true/false æˆ–è€… 1/0 è”ç³»å…¶å®å¹¶ä¸å”¯ä¸€ã€‚ä½†æ˜¯åœ¨ä¸€èˆ¬æƒ…å†µä¸‹ï¼ˆæˆ‘ä»¬ç§°ä¹‹ä¸º positive logicï¼‰ï¼Œæˆ‘ä»¬éƒ½è®¤ä¸º HIGH ~ true ~ 1ï¼Œ LOW ~ false ~ 0ã€‚\n\n### 1.2. é€»è¾‘ç³»ç»Ÿ Logic System\n\n![|292](https://img.memset0.cn/2024/02/29/9GqTsPkI.png)\n\n- ç»„åˆç”µè·¯å’Œæ—¶åºç”µè·¯çš„ä¸»è¦åŒºåˆ«åœ¨äºæœ‰æ²¡æœ‰**ç³»ç»ŸçŠ¶æ€(system state)**ã€‚\n\n#### 1.2.1. ç»„åˆç”µè·¯ Combinational Logic System\n\n- æ²¡æœ‰çŠ¶æ€ No state present\n- åªéœ€è¦æ¨å¯¼å‡ºä¸€ä¸ªå‡½æ•°å³å¯ Output Function: Output = Function(Input)\n\n#### 1.2.2. æ—¶åºç”µè·¯ Sequential Logic System\n\n- å­˜åœ¨çŠ¶æ€ State present\n  - Synchronous Sequential System <=> State updated at discrete times\n  - Asynchronous Sequential System <=> State updated at any time\n- **æ¬¡æ€æ–¹ç¨‹** State Equation: Next State = Function(Current State, Input)\n- **è¾“å‡ºæ–¹ç¨‹** Output Function: Output = Function(State, Input(optional))\n\n### 1.3. æ•°å­—è®¡ç®—æœº Digital Computer\n\n**æ•°å­—è®¡ç®—æœº(digital computer)**ï¼šA general-purpose system used to process the discrete values\n\n**åµŒå…¥å¼ç³»ç»Ÿ(embedded system)**ï¼šComputers as integral parts of other products\n\n![|498](https://img.memset0.cn/2024/02/29/p6SvckWy.png)\n\n- æ˜¯å…¸å‹çš„ **Synchronous** Sequential Systemã€‚\n\n#### 1.3.1. è®¡ç®—æœºç³»ç»Ÿç»“æ„\n\n![|471](https://img.memset0.cn/2024/02/29/1OmqXAwc.png)\n\n- Algorithm\n- Programming Language\n- Operation System\n- **æŒ‡ä»¤é›†ç»“æ„** Instruction Set Architecture (ISA)\n- Microarchitecture\n- Register Transfer\n- Logic Circuit\n- Transistor Circuit\n\n#### 1.3.2. è®¾è®¡è¿‡ç¨‹ Design Procedure\n\nå¦‚ä½•è®¾è®¡ä¸€ä¸ªç¨‹åºï¼Ÿ\n\n1. Specification\n2. Formulation\n3. Optimization\n   - Apply 2-level and multiple-level optimization\n   - Draw a logic diagram or provide a netlist for the resulting circuit using ANDs, ORs, and inverters\n4. Technology Mapping\n   - ç”¨å·²æœ‰çš„åŸä»¶å®ç°åŠŸèƒ½ï¼ˆeg. å®ç° XOR Gate\n5. Verification\n   - éªŒè¯ç»“æœæ˜¯å¦æ­£ç¡®\n\n## 2. æ•°å­—ç³»ç»Ÿ Number System\n\n### 2.1. è¿›åˆ¶ Base\n\n| Decimal | Binary | Octal  | Hexadecimal |\n| :-----: | :----: | :----: | :---------: |\n| base 10 | base 2 | base 8 |   base 16   |\n\n- **è¿›åˆ¶(radix/base)**ï¼šcollection of numberal symbols used to represent numbers in number system\n- æƒé‡(digit weight): the counting unit value of basic digital symbols in different position. ie, weight $W$\n- **è¡¨ç¤º(representation)**ï¼šdigits of a number $N$ are listed From left to right, length $n+m$ï¼ˆæœ‰æ•´æ•°éƒ¨åˆ†å’Œå°æ•°éƒ¨åˆ†ï¼‰\n  - String of Digits: $(N)_R = (A_{n-1} A_{n-2} \\ldots A_1 A_0 \\cdot A_{-1} A_{-2} \\ldots A_{-m+1} A_{-m})_R$\n  - **å…¨å±•å¼€å¼(Power Series)**: $(N)_R = \\left(\\displaystyle\\sum_{i=-m}^{n-1} A_i R^i\\right)_R$\n\n![|408](https://img.memset0.cn/2024/02/29/W6SstT31.png)\n\n### 2.2. è¿›åˆ¶è½¬æ¢\n\nç•¥ã€‚\n\n- åˆ«å¿˜äº†å°æ•°æ€ä¹ˆæã€‚\n- **èˆå…¥(rounding)** çš„é—®é¢˜ã€‚\n\n## 3. ç¼–ç  Coding\n\n### 3.1. ç‹¬å†·ç  & ç‹¬çƒ­ç  One-Hot & One-Cold Code\n\n**ç‹¬çƒ­ç (one-hot)**Â  è¦æ±‚æ¯”ç‰¹å‘é‡ä¸­åªæœ‰ä¸€ä½æ˜¯ Â `1`ï¼Œä¾‹å¦‚ Â `0001`ï¼Œ`0010`ï¼Œ`0100`ï¼Œ`1000`Â  ç­‰ï¼›å¯¹åº”çš„è¿˜æœ‰**ç‹¬å†·ç (one-cold)**ã€‚\n\nä½¿ç”¨è¿™ç§ç¼–ç çš„å¥½å¤„æ˜¯ï¼Œå†³å®šæˆ–æ”¹å˜çŠ¶æ€æœºç›®å‰çš„çŠ¶æ€çš„æˆæœ¬ç›¸å¯¹è¾ƒä½ï¼Œå®¹æ˜“è®¾è®¡ä¹Ÿå®¹æ˜“æ£€æµ‹éæ³•è¡Œä¸ºç­‰ã€‚\n\nä½†æ˜¯ç›¸å¯¹åº”çš„ï¼Œç¼ºç‚¹æ˜¯ä¿¡æ¯è¡¨ç¤ºç‡è¾ƒä½ï¼Œéæ³•çŠ¶æ€éå¸¸å¤šè€Œæœ‰æ•ˆçŠ¶æ€å¾ˆå°‘ã€‚\n\n### 3.2. BCD ç  Binary Coded Decimal Code\n\n#### 3.2.1. 8421 Code\n\næœ€ç»å…¸çš„ BCD ç æ˜¯ 8421 ç ï¼Œç”¨ 4 ä½äºŒè¿›åˆ¶è¡¨ç¤ºä¸€ä¸ª**åè¿›åˆ¶**ä½ï¼Œweight åˆ†åˆ«ä¸º 8421ï¼Œæ‰€ä»¥ BCD ç ä¹Ÿå«åš 8421 ç ã€‚\n\n- BCD ç åœ¨åšåŠ æ³•æ—¶ï¼Œç±»æ¯”åè¿›åˆ¶åŠ æ³•ä¸€æ ·æŒ‰ 4 ä½ä¸€ç»„è®¡ç®—ã€‚\n- å½“ä¸¤ä½ç›¸åŠ çš„ç»“æœå¤§äº 10 æ—¶éœ€è¦åšä¸€ä¸ª +6 çš„ä¿®æ­£ã€‚\n\n![|300](https://img.memset0.cn/2024/02/29/WFiHh2bR.png)\n\n#### 3.2.2. Excess3 Code\n\n**ä½™ä¸‰ç (Excess3)** æ˜¯ BCD ç çš„ä¸€ä¸ªæ”¹è¿›ï¼Œå…¶æ ¸å¿ƒæ€è·¯æ˜¯åœ¨ BCD ç çš„åŸºç¡€ä¸Šï¼Œ**å¢åŠ ä¸€ä¸ªå¤§å°ä¸º 3 çš„åç§»é‡**ã€‚ï¼ˆæ¯ä¸€ä½éƒ½æ˜¯å…ˆ +3 å†è½¬åŒ–æˆäºŒè¿›åˆ¶ï¼‰\n\n- **è¿›ä½æ£€æµ‹**ï¼šæ³¨æ„åˆ° $3=\\dfrac{16-10}{2}$ï¼Œè¿™æ ·åè¿›åˆ¶ä¸‹èƒ½è¿›ä½çš„ä¸¤ä¸ªæ•°ä½ï¼Œåœ¨ä½™ä¸‰ç ä¸‹ä¹Ÿåˆšå¥½èƒ½è¿›ä½ã€‚\n\n#### 3.2.3. 2421 Code\n\n2421 ç ä¸ 8421 ç ç±»ä¼¼ï¼Œä½†æ˜¯æ¯ä¸€ä½çš„æƒå€¼åˆ†åˆ«ä¸º 2421ã€‚$0\\sim 9$ ä¸­çš„æ¯ä¸€ä¸ªæ•°éƒ½å¯¹åº”ä¸€ä¸ªå”¯ä¸€çš„ 2421 ç ï¼Œä½†å°†ä¸åœ¨è¿™ä¸€å¯¹åº”è¡¨ä¸­çš„äºŒè¿›åˆ¶ç¼–ç è½¬æ¢å›åè¿›åˆ¶æ—¶ä¹Ÿèƒ½å¯¹åº”åˆ° $0\\sim 9$ ä¸­çš„æ•°å­—ã€‚\n\n- 2421 ç çš„ä¸€ä¸ªç‰¹æ€§æ˜¯ $x$ å’Œ $9-x$ çš„ 2421 ç äº’è¡¥ï¼Œå…¶ä¸­ $x=0 \\sim 4$ æ—¶çš„ 2421 ç å°±æ˜¯å…¶äºŒè¿›åˆ¶ï¼Œè€Œ $x=5\\sim 9$ çš„ 2421 ç å°±æ˜¯ $9-x$ ä¸ $1111_{(2)}$ å¼‚æˆ–åçš„ç»“æœã€‚\n\n### 3.3. æ ¼é›·ç  Gray Code\n\n**æ ¼é›·ç (gray code)** æ˜¯ä¸€ç§**å¯é æ€§ç¼–ç (reliable code)**ã€‚ç›¸é‚»çš„ä¸¤ä¸ªæ•°å­—çš„æ ¼é›·ç åªæœ‰ä¸€ä¸ª bit ä¸Šçš„ 0/1 ä¸åŒã€‚\n\n> [!info] å¯é æ€§ç¼–ç \n> Reliable codes are codes that can reduce error, detect error and correct error are called reliable code.\n\n![ä»å…‰å­¦é€é•œçš„è§’åº¦ç†è§£æ ¼é›·ç |252](https://img.memset0.cn/2024/03/07/stANosFs.png)\n\n> [!important] äºŒè¿›åˆ¶åå°„æ ¼é›·ç (Binary Reflected Gray Code, BRGC)\n>\n> æ•°å­— $x$ å¯¹åº”çš„æ ¼é›·ç ä¸ºï¼š\n> $$x \\text{ XOR } (x \\text{ SHR } 1)$$\n\n### 3.4. å¥‡å¶æ ¡éªŒç  Parity Code\n\n**å¥‡å¶æ ¡éªŒç (parity code)** ä¹Ÿæ˜¯ä¸€ç§å¯é æ€§ç¼–ç ï¼Œåˆ†ä¸ºå¶æ ¡éªŒç å’Œå¥‡æ ¡éªŒç ä¸¤ç§ã€‚**å¶æ ¡éªŒç (even parity code)** ä¿è¯æ•°æ®ä¸­ä¸º 1 çš„ bit æ•°ä¸ºå¶æ•°ï¼Œ**å¥‡æ ¡éªŒç (odd parity code)** ä¿è¯ä¸ºå¥‡æ•°ã€‚\n\n![å¥‡å¶æ ¡éªŒç ç¤ºä¾‹|398](https://img.memset0.cn/2024/03/07/ffltccLq.png)\n\n- éœ€è¦æ³¨æ„æ˜¯å¥‡æ ¡éªŒè¿˜æ˜¯å¶æ ¡éªŒ\n- éœ€è¦æ³¨æ„æ˜¯è¡¥åœ¨æœ€é«˜ä½è¿˜æ˜¯æœ€ä½ä½\n","publishedTitle":"ã€Œæ•°å­—é€»è¾‘è®¾è®¡ã€Chapter 1. Digital Systems and Information"}},{"id":"d0d34f16-85d9-5b53-843a-655a0df4f58e","fields":{"slug":"/course/dd/note/2/","plainText":"\n> æœ¬ç¯‡ç¬”è®°ä¸»è¦ä»‹ç»äº†ç»„åˆé€»è¾‘ç”µè·¯çš„åŸºæœ¬æ¦‚å¿µï¼ŒåŒ…æ‹¬é€»è¾‘è¿ç®—ã€é€»è¾‘é—¨çš„ç±»å‹åŠå…¶ç‰¹æ€§ã€å¸ƒå°”ä»£æ•°çš„åŸºæœ¬æ³•åˆ™ã€è§„èŒƒå½¢å¼ä»¥åŠå¡è¯ºå›¾çš„ä½¿ç”¨æ–¹æ³•ã€‚æ­¤å¤–ï¼Œè¿˜æ¢è®¨äº†ç”µè·¯ä¼˜åŒ–çš„ç›®æ ‡å’Œæ–¹æ³•ï¼Œå¸®åŠ©è¯»è€…ç†è§£å¦‚ä½•åœ¨è®¾è®¡ä¸­å®ç°é«˜æ•ˆçš„é€»è¾‘ç”µè·¯ã€‚<small style=\"font-style: italic; opacity: 0.5\">ï¼ˆç”± gpt-4o-mini ç”Ÿæˆæ‘˜è¦ï¼‰</small>\n\n<!-- more -->\n\n> [!quote]- Word Table\n>\n> - é›†æˆç”µè·¯(integreated circuit)\n> - é€»è¾‘é—¨(logic gate)\n> - å–å(complement)\n\n## 1. é€»è¾‘å’Œé€»è¾‘é—¨ Binary Logic and Gates\n\n### 1.1. Logical Operators\n\nä¸‰ç§åŸºæœ¬çš„**é€»è¾‘è¿ç®—(logical operator)**ï¼š\n\n- **å’Œ(and)** is denoted by $\\cdot$ or $\\land$ï¼›\n- **æˆ–(or)** is denoted by $+$ or $\\lor$ï¼›\n- **é(not)** is denoted by $\\overline{\\,\\,}$ or $\\sim$ã€‚\n\n![è®¤è¯†åŸºæœ¬çš„é€»è¾‘é—¨|717](https://img.memset0.cn/2024/03/07/V0JNs4Cc.png)\n\n- åœ¨ä¸é—¨å’Œæˆ–é—¨ä¸çº¿è¿æ¥å¤„ç”»å°åœ†åœˆå¯ä»¥è¡¨è¾¾éçš„æ„æ€ã€‚\n- é€»è¾‘é—¨åœ¨ä» 01 ç›´æ¥è·ƒè¿æ—¶éœ€è¦æ—¶é—´ï¼Œåœ¨è®¾è®¡æ—¶åºç”µè·¯æ—¶å¯èƒ½éœ€è¦è€ƒè™‘ã€‚\n\n![ç”¨ç”µè·¯è¡¨ç¤ºçš„é€»è¾‘è¿ç®—|551](https://img.memset0.cn/2024/03/07/HD2quX1U.png)\n\n### 1.2. Logic Gates\n\n**é€»è¾‘é—¨(logic gate)** æ˜¯åœ¨ç¡¬ä»¶å±‚é¢ä¸Šå®ç°å¸ƒå°”ä»£æ•°çš„é€»è¾‘å•å…ƒã€‚å…¶æ“ä½œå¯¹è±¡ä¸ºé«˜ä½ç”µå¹³ã€‚ä½†æ˜¯ç”±äºæ˜¯ç‰©ç†å±‚é¢çš„å®ç°ï¼Œæ‰€ä»¥ä¼šæœ‰ä¸€äº›é€»è¾‘è¿ç®—å±‚é¢ä¸ä¼šå‡ºç°çš„é—®é¢˜ï¼Œæ¯”å¦‚ Â **å»¶æ—¶(delay)**ã€‚\n\n| CMOS   | TTL    |\n| ------ | ------ |\n| åŠŸè€—å° | æ•ˆç‡é«˜ |\n\n### 1.3. Universal Gates\n\nNAND å’Œ NOR é—¨æ˜¯**é€šç”¨é—¨(universal gate)**ã€‚\n\n## 2. Additional Gates and Circuits\n\n### 2.1. NAND Gates\n\nPROS:\n\n- æ˜¯å®ç°èµ·æ¥æœ€ç®€å•æœ€å¿«çš„ç”µè·¯é—¨ã€‚The NAND gate is the natural implementation for the simplest and fastest electronic circuits\n- æ˜¯é€šç”¨é—¨â€”â€”å¯ä»¥é€šè¿‡ä¸éé—¨çš„ç»„åˆè¡¨ç¤ºä»»æ„å¸ƒå°”è¿ç®—ã€‚Universal gate - a gate type that can implement any Boolean function.\n\n### 2.2. Buffer\n\n**ç¼“å†²å™¨(buffer)**ï¼š\n\n![oOztBCsR.png|642](https://img.memset0.cn/2024/03/14/oOztBCsR.png)\n\nPROS:\n\n- å¯ä»¥æŠ¬é«˜ç”µè·¯ç”µå‹ã€‚A buffer is an electronic amplifier used to improve circuit voltage levels\n- å¯ä»¥åŠ é€Ÿç”µè·¯æ“ä½œã€‚To increase the speed of circuit operation.\n\n### 2.3. 3-State Buffer\n\n**ä¸‰å‘ç¼“å†²å™¨(3-state buffer)**ï¼šé™¤äº†è¾“å…¥å’Œè¾“å‡ºï¼Œå®ƒè¿˜æœ‰ä¸€ä¸ª**ä½¿èƒ½ç«¯(enable)** æ¥æ§åˆ¶è¾“å‡ºã€‚\n\n![OMyeNuBx.png|674](https://img.memset0.cn/2024/03/14/OMyeNuBx.png)\n\n- Hi-Z é«˜é˜»æ€ï¼ˆå¯ä»¥ç†è§£ä¸ºæ‚¬ç©ºï¼‰\n\n## 3. å¸ƒå°”ä»£æ•° Boolean Algebra\n\n### 3.1. åŸºæœ¬æ³•åˆ™ Basic Laws\n\n| Law               | Formulas                                                                                                                |\n| ----------------- | ----------------------------------------------------------------------------------------------------------------------- |\n| 0-1 Law           | $\\begin{aligned}&X+0=X\\quad X\\cdot 1=X\\\\ &X+1=1\\quad X \\cdot 0 = 0\\end{aligned}$                                        |\n| Overlapping Law   | $X+X=X\\quad X \\cdot X = X$                                                                                              |\n| Complementary Law | $X+\\overline{X}=1\\quad X\\cdot \\overline{X} = 0$                                                                         |\n| Involution Law    | $\\overline{\\overline{X}}=X$                                                                                             |\n| Commutative Law   | $X+Y=Y+X \\quad XY=YX$                                                                                                   |\n| Associative Law   | $X+(Y+Z)=(X+Y)+Z\\quad X(YZ)=(XY)Z$                                                                                      |\n| Distributive Law  | $X(Y+Z)=XY+XZ\\quad X+YZ=(X+Y)(X+Z)$                                                                                     |\n| DeMorgan's Law    | $\\overline{X+Y}=\\overline{X}\\cdot\\overline{Y}\\quad \\overline{X \\cdot Y}=\\overline{X}\\cdot \\overline{Y}$                 |\n| Absorptive Law    | $\\begin{aligned}&A(A+B)=A\\quad A+AB=A\\\\ &A(\\overline{A}+B)=AB\\quad A+\\overline{A}B=A+B\\end{aligned}$                    |\n| Including Law     | $\\begin{aligned}&(A+B)(\\overline{A}+C)(B+C)=(A+B)(\\overline{A}+C)\\\\ &AB+\\overline{A}C+BC=AB+\\overline{A}C\\end{aligned}$ |\n\n> ä¹Ÿå¯ä»¥è€ƒè™‘ä½¿ç”¨**äº¦æˆ–(xor)** è¿›è¡ŒåŒ–ç®€ï¼Œå› ä¸ºäº¦æˆ–è¿ç®—æœ‰å¾ˆå¥½çš„ç»“åˆå¾‹ã€‚\n\n#### 3.1.1. Merge Terms\n\nApplying formula: $\\color{blue}A+\\overline{A}=1$.\n\n$$\n\\begin{aligned}\nF & =ABC+A\\overline{BC}+AB\\overline{C}+A\\overline{BC}\\\\\n & =AB(C+\\overline{C})+A\\overline{B}(C+\\overline{C}) \\\\\n & =AB+A\\overline{B}=A(B+\\overline{B})=A\n\\end{aligned}\n$$\n\n#### 3.1.2. Absorb Terms\n\nApplying Absorptive law: $\\color{blue}A+AB=A$.\n\n$$\n\\begin{aligned}\nL & =A\\overline{B}+A\\overline{B}C+A\\overline{B}DE \\\\\n & =A\\overline{B}(1+C+DE)=A\\overline{B}\n\\end{aligned}\n$$\n\n#### 3.1.3. Match Terms\n\nApplying formula: $\\color{blue}A+\\overline{A}=1$, $\\color{blue}A\\overline{A}=0$, add new terms.\n\n$$\n\\begin{aligned}\nL &=AB+\\overline{A}C+BCD=AB+\\overline{A}C+BCD(A+\\overline{A}) \\\\\n & =AB+\\overline{A}C+ABCD+\\overline{A}BCD=AB+\\overline{A}C\n\\end{aligned}\n$$\n\n#### 3.1.4. Eliminate Terms\n\nApplying Absorptive law: $\\color{blue}A+\\overline{A}B=A+B$.\n\n$$\n\\begin{aligned}\nL &=\\overline{A}+AB+\\overline{B}E=\\overline{A}+B+\\overline{B}E=\\overline{A}+B+E\n\\end{aligned}\n$$\n\n### 3.2. è§„èŒƒå½¢å¼ Canonical Form\n\nå¯¹äºä¸€ä¸ªé€»è¾‘å˜é‡ $X_i$ï¼Œæˆ‘ä»¬ç§° $X_i$ ä¸ºå®ƒçš„ true formï¼Œ$\\overline{X_i}$ ä¸ºå®ƒçš„ complemented formã€‚\n\n**æœ€å°é¡¹(minterm)**ï¼šMinterms are **AND** terms with every variable present just once in either true or complemented form.\n\n- æ‰€æœ‰ $n$ ä¸ªå˜é‡éƒ½éœ€è¦å‡ºç°åœ¨æœ€å°é¡¹ä¸­ï¼Œä¸€ä¸ªæœ€å°é¡¹ä¸çœŸå€¼è¡¨çš„ä¸€è¡Œç›¸å¯¹åº”ã€‚\n- ç”¨ $m_i$ è¡¨ç¤ºç¬¬ $i$ ä¸ªæœ€å°é¡¹ï¼Œå¦‚ $n=3$ æ—¶ $m_0=\\overline{ABC}$ï¼Œ$m_4=A\\overline{BC}$ã€‚\n- å¯¹äºä¸€ç»„å˜é‡çš„å–å€¼ï¼Œåªæœ‰ä¸€ä¸ªæœ€å°é¡¹ä¸º $1$ã€‚\n- ä»»æ„ä¸¤ä¸ªæœ€å°é¡¹çš„ç§¯ä¸€å®šæ˜¯ $0$ï¼š$m_i \\cdot m_j = 0 \\quad(i\\neq j)$ã€‚\n- æ‰€æœ‰æœ€å°é¡¹çš„å’Œä¸º $1$ï¼š$\\displaystyle{\\sum_{i=0}^{2^n-1} m_i} = 1$ã€‚\n- å¯¹äºä»»æ„ä¸€ä¸ªé€»è¾‘å‡½æ•° $F$ï¼Œ$m_i$ è¦ä¹ˆåœ¨ $F$ çš„ DNF ä¸­è¦ä¹ˆåœ¨ $\\overline{F}$ çš„ DNF ä¸­ã€‚\n\n**æœ€å¤§é¡¹(maxterm)**ï¼šMaxterms are **OR** terms with every variable\nappearing just once in true or complemented form.\n\n- ç”¨ $M_i$ è¡¨ç¤ºç¬¬ $i$ ä¸ªæœ€å°é¡¹ï¼Œå¦‚ $n=3$ æ—¶ $M_4 = \\overline{A} + B + C$ï¼ˆæ³¨æ„è¿™é‡Œå¯¹åº” literal çš„æ–¹å¼å’Œæœ€å°é¡¹æ˜¯ç›¸åçš„ï¼‰ã€‚\n- å¯¹äºä¸€ç»„å˜é‡çš„å–å€¼ï¼Œåªæœ‰ä¸€ä¸ªæœ€å¤§é¡¹ä¸º $0$ã€‚\n- ä»»æ„ä¸¤ä¸ªæœ€å¤§é¡¹çš„å’Œä¸€å®šæ˜¯ $1$ï¼š$M_i+M_j = 1 \\quad (i\\neq j)$ã€‚\n- æ‰€æœ‰æœ€å¤§é¡¹çš„ç§¯ä¸º $0$ï¼š$\\displaystyle{\\prod_{i=0}^{2^n-1} M_i= 0}$ã€‚\n- å¯¹äºä»»æ„ä¸€ä¸ªé€»è¾‘å‡½æ•° $F$ï¼Œ$M_i$ è¦ä¹ˆåœ¨ $F$ çš„ CNF ä¸­è¦ä¹ˆåœ¨ $\\overline{F}$ çš„ CNF ä¸­ã€‚\n\n**æœ€å°é¡¹ä¹‹å’Œ(sum of minterm, SOM)** ä¹Ÿè¢«ç§°ä¸º DNFï¼Œ**æœ€å¤§é¡¹ä¹‹ç§¯(product of maxterm, POM)** ä¹Ÿè¢«ç§°ä¸º CNFã€‚æ‰€æœ‰å‘½é¢˜å‡½æ•°éƒ½å¯ä»¥è¢«åŒ–ç®€æˆè¿™ç§å½¢å¼ï¼Œè¿™ä¸¤ç§å½¢å¼è¢«ç§°ä¸º**è§„èŒƒå½¢å¼(canonical form)**ã€‚\n\n> [!note] Comment\n>\n> - è¦å­¦ä¼š DNF/CNF çš„åŒ–ç®€ï¼Œå‰è€…å¯ä»¥ç›´æ¥ä»çœŸå€¼è¡¨ä¸­æ‰£å‡ºæ¥ï¼Œåè€…å…ˆå–ååšç„¶åç”¨å¾·æ‘©æ ¹å®šå¾‹å¾—åˆ°ã€‚å…·ä½“å‚è§ç¦»æ•£æ•°å­¦ç¬”è®°ã€‚\n>\n> - è¦æ³¨æ„æœ€å°é¡¹å’Œæœ€å¤§é¡¹çš„ç¼–å·é¡ºåºï¼Œä»–ä»¬ä¹‹ä¸­å¯¹åº”é¡¹çš„å•ä¸ª literal æ°å¥½æ˜¯**ç›¸åçš„**ã€‚\n\n![YgHQXOr3.png|651](https://img.memset0.cn/2024/05/11/YgHQXOr3.png)\n\n### 3.3. æ ‡å‡†å½¢å¼ Normal Form\n\nå¯ä»¥é€šè¿‡å¡è¯ºå›¾åŒ–ç®€å¾—åˆ°**ç§¯ä¹‹å’Œ(sum-of-product, SOP)** æˆ–**å’Œä¹‹ç§¯(product-of-sum)**ã€‚\n\nåŸºäº SOP/POSï¼ˆæˆ–è€…é€€ä¸€æ­¥çš„ SOM/POMï¼‰çš„ç”µè·¯è¢«ç§°ä¸ºäºŒçº§ç”µè·¯ã€‚äºŒçº§ç”µè·¯ä¸å¤šçº§ç”µè·¯ç›¸æ¯”ï¼Œå¥½å¤„æ˜¯æ—¶å»¶å°‘ï¼Œä»£ä»·æ˜¯ä½¿ç”¨çš„é€»è¾‘é—¨å¤šã€‚\n\næ›´å¤šç®€åŒ–æ–¹æ³•ï¼š\n\n- â€œAND - ORâ€ Simplification\n- â€œOR - ANDâ€ Simplification\n\n## 4. å¡è¯ºå›¾ Karnaugh Maps\n\n### 4.1. ä½¿ç”¨å¡è¯ºå›¾åŒ–ç®€ Simplifying using Karnaugh Maps\n\nä»¥åˆ©ç”¨ä¸‰å˜é‡**å¡è¯ºå›¾(karnaugh map, K-map)** æ±‚ SOP ä¸ºä¾‹ï¼šå°† F æ‰€æœ‰ä¸º 1 çš„æœ€å°é¡¹å¡«å…¥è¡¨ä¸­ï¼Œå¯ä»¥å¾—åˆ°å¯¹åº”çš„å¡è¯ºå›¾ã€‚å¦‚æœè¦æ±‚ POSï¼Œåˆ™å¯å…ˆæ±‚ SOPï¼Œå†åº”ç”¨ä¸€æ¬¡å¾·æ‘©æ ¹å®šå¾‹è½¬ä¸º POSã€‚\n\n![dcN7g5ue.png|588](https://img.memset0.cn/2024/03/14/dcN7g5ue.png)\n\nç”»å®Œå¡è¯ºå›¾åï¼Œæˆ‘ä»¬éœ€è¦åˆ†æå…¶ä¸»è•´å«é¡¹ï¼Œå³å°±æ˜¯ç”»å°½å¯èƒ½å¤§çš„æ¡†ã€‚\n\n- **è•´å«é¡¹(implicant)**ï¼šå¯¹æ¯ä¸€ä¸ªæœ€å°é¡¹å–å€¼éƒ½ä¸º 1 çš„ä¹˜ç§¯é¡¹ã€‚å¯¹åº”å¡è¯ºå›¾ä¸­å…¨ä¸º 1 æ–¹æ ¼ä¸”å¤§å°ä¸º 2 çš„å¹‚æ¬¡çš„æ–¹æ¡†ã€‚\n- **ä¸»è•´å«é¡¹(prime implicant)**ï¼šå¦‚æœä»è•´å«é¡¹ä¸­ç§»å»ä»»æ„ä¸€ä¸ªå˜é‡ï¼Œæ‰€å¾—çš„ä¹˜ç§¯é¡¹å°±ä¸æ˜¯è•´å«é¡¹ï¼Œåˆ™ç§°ä¸ºè´¨è•´å«é¡¹ã€‚å¯¹åº”å¡è¯ºå›¾ä¸­ä¸€ä¸ªä¸èƒ½å†å‘ä»»ä½•æ–¹å‘æ‹“å±•çš„æ–¹æ¡†ã€‚\n- **è´¨ä¸»è•´å«é¡¹(essential prime implicant)**ï¼šå¦‚ä¸€ä¸ª 1 æ–¹æ ¼ä»…å­˜åœ¨äºæŸä¸ªè´¨è•´å«é¡¹å†…ï¼Œåˆ™ç§°è¿™æ ·çš„ä¸»è•´å«é¡¹æ˜¯**å¿…è¦(essential)** çš„ï¼Œç§°ä¸ºè´¨ä¸»è•´å«é¡¹æˆ–å¿…è¦ä¸»è•´å«é¡¹ã€‚\n\n![JgNKlCkA.png|547](https://img.memset0.cn/2024/03/14/JgNKlCkA.png)\n\nåœ¨ä½¿ç”¨å¡è¯ºå›¾æ‰¾åˆ°å¸ƒå°”å‡½æ•°çš„ä¸»è•´å«é¡¹åï¼Œå¯ä»¥åˆ©ç”¨ä¸»è•´å«é¡¹è¿›è¡ŒåŒ–ç®€ã€‚å¯ä»¥å…ˆé€‰æ‹©æ‰€æœ‰çš„è´¨ä¸»è•´å«é¡¹ï¼Œå†ä½¿ç”¨ä¸€äº›ä¸»è•´å«é¡¹æ¥è¦†ç›–æœªè¢«è¦†ç›–çš„æ–¹æ ¼ 1ã€‚æ‰€ä»¥ä¼˜åŒ–åçš„æœ€ä¼˜ç»“æœå¯èƒ½ä¸æ˜¯å”¯ä¸€çš„ã€‚æœ‰ä¸€äº›ç»†èŠ‚éœ€è¦æ³¨æ„ï¼š\n\n- æ‰¾ä¸»è•´å«é¡¹æ—¶ï¼Œä¸è¦å¿˜äº†è€ƒè™‘è·¨è¶Šè¾¹ç•Œè€Œè”é€šçš„æƒ…å†µã€‚å¦‚æœæœ€åé€‰åˆ°äº†ä¸€ä¸ªéä¸»è•´å«é¡¹ï¼Œé‚£ä¹ˆè¿™ä¸€ä¼˜åŒ–ç»“æœä¸€å®šä¸æ˜¯æœ€ä¼˜çš„ã€‚\n- é€‰æ‹©å¤šä¸ªä¸»è•´å«é¡¹æ—¶ï¼Œç›¸äº’ä¹‹é—´å¯ä»¥é‡å ï¼Œæ³¨æ„ç”µè·¯ä¼˜åŒ–çš„ç›®æ ‡å‡å°‘ä»£ä»·ã€‚\n\n> [!important] å¡è¯ºå›¾çš„ç®€ç•¥ç”»æ³•\n>\n> æ ‡è®°å‡º $X$ çš„ä¸¤ä¸ªä½ç½®ï¼Œ$\\overline{X}$ çš„è®°å·å¯å¿½ç•¥ã€‚\n>\n> ![|260](https://img.memset0.cn/2024/03/28/vMIr8Pwp.png)\n\n### 4.2. ä¸å®šé¡¹ Donâ€™t Care Conditions\n\n**ä¸å®šé¡¹(don't-care condition)** æ˜¯æŒ‡ç”µè·¯ä¼˜åŒ–è¿‡ç¨‹ä¸­ï¼Œæ²¡æœ‰ç»™å‡ºå®šä¹‰çš„é¡¹ï¼Œä»–ä»¬å¯èƒ½æ˜¯ï¼š\n\n- è¾“å…¥ç»„åˆä¸ä¼šå‡ºç°ï¼›\n- è¾“å…¥ç»„åˆçš„è¾“å‡ºä¸è¢«ä½¿ç”¨ï¼›\n\nå¯¹äºè¿™ç§é¡¹ï¼Œåœ¨å¡è¯ºå›¾ä¸­ç”¨ X æ¥è¡¨ç¤ºï¼Œåœ¨æœ€å°é¡¹ä¹‹å’Œä¸­ç”¨ $\\sum d(\\ldots)$ è¡¨ç¤ºã€‚æˆ‘ä»¬å¯ä»¥éšæ„å®šä¹‰å®ƒä»¬çš„è¾“å‡ºï¼Œæ­¤æ—¶å°±å¯ä»¥åˆ©ç”¨è¿™äº›é¡¹æ¥æ–¹ä¾¿æˆ‘ä»¬çš„ä¼˜åŒ–â€”â€”å½“æˆ‘ä»¬ç”»å‡ºæ¥çš„æå¤§çŸ©é˜µè¶Šå¤§ï¼Œæˆæœ¬å°±è¶Šä½ã€‚\n\n> [!example] ä¾‹ï¼šå½“ BCD ç æ•°å€¼å¤§äºç­‰äº 5 æ—¶è¿”å› 1\n> å¯ä»¥é€šè¿‡è¿›è¡Œå¦‚ä¸‹æ–¹æ³•ä¼˜åŒ–ï¼š\n>\n> ![|260](https://img.memset0.cn/2024/03/14/Pry8PSNZ.png)\n>\n> æ ¹æ®ç»“æœï¼Œå†™å‡ºä¼˜åŒ–åçš„è¡¨è¾¾å¼ä¸ºï¼š$F(W,X,Y,Z) = W+XY+XZ$ã€‚\n\n## 5. ç”µè·¯ä¼˜åŒ– Circuit Optimization\n\n**ç”µè·¯ä¼˜åŒ–(circuit optimization)** çš„ç›®æ ‡æ˜¯åœ¨æ‰¾åˆ°ç»™å®šæˆæœ¬è®¡ç®—æ–¹å¼ä¸‹çš„æœ€ä¼˜ç”µè·¯ã€‚\n\n- **Literal Cost**(L)ï¼šthe number of literal appearances in a Boolean expression corresponding to the logic circuit diagram\n- **é—¨è¾“å…¥ä»£ä»·(gate input cost)**(G)ï¼šthe number of inputs to the gates in the implementation corresponding exactly to the given equation or equations.\n- **å¸¦éé—¨çš„é—¨è¾“å…¥ä»£ä»·(gate input cost with NOTs, GN)**: G with inverters counted\n\n$$\nF = BD + A \\overline{B}C + A\\overline{C}\\overline{D}\n\\quad\\Rightarrow\\quad\n\\text{L} = 8,\\ \\text{G} = 11,\\ \\text{GN} = 14\n$$\n\nä¸€èˆ¬æ¥è¯´ï¼Œæˆæœ¬å‡½æ•°æ˜¯ä¸€ä¸ªå…³äº $\\text{L, G, GN}$ çš„å‡½æ•°ã€‚\n\n> [!note] Comments\n>\n> é—¨è¾“å…¥ä»£ä»·éœ€è¦å­¦ä¼šè®¡ç®—ï¼Œé‡è¦ï¼\n","publishedTitle":"ã€Œæ•°å­—é€»è¾‘è®¾è®¡ã€Chapter 2. Combinational Logic Circuits"}},{"id":"c6e4dedc-dd7f-5022-9faf-e7fae9d393ef","fields":{"slug":"/course/dd/note/3/","plainText":"\n> æœ¬ç¯‡ç¬”è®°æ¦‚è¿°äº†ç»„åˆé€»è¾‘è®¾è®¡çš„åŸºæœ¬æ¦‚å¿µä¸è‡ªåŠ¨åŒ–è¿‡ç¨‹ï¼ŒåŒ…æ‹¬é€»è¾‘è¡¨ç¤ºæ–¹æ³•ã€è®¾è®¡è¿‡ç¨‹ã€å·¥è‰ºæ˜ å°„ã€é›†æˆç”µè·¯çš„åˆ†ç±»ã€åŸºæœ¬é€»è¾‘å‡½æ•°ã€è¯‘ç å™¨ä¸ç¼–ç å™¨çš„åŠŸèƒ½ï¼Œä»¥åŠåŠ æ³•å™¨å’Œå‡æ³•å™¨çš„å®ç°ã€‚é€šè¿‡åˆ†å±‚è®¾è®¡å’Œä¸åŒçš„è®¾è®¡æ–¹æ³•ï¼Œç¬”è®°è¯¦ç»†æ¢è®¨äº†å¦‚ä½•ä¼˜åŒ–å’ŒéªŒè¯é€»è¾‘è®¾è®¡ï¼Œç¡®ä¿å…¶åœ¨å®é™…åº”ç”¨ä¸­çš„æœ‰æ•ˆæ€§å’Œæ•ˆç‡ã€‚<small style=\"font-style: italic; opacity: 0.5\">ï¼ˆç”± gpt-4o-mini ç”Ÿæˆæ‘˜è¦ï¼‰</small>\n\n<!-- more -->\n\n> [!quote]- Word Table\n>\n> - **ç»„åˆé€»è¾‘(combinational logic)**\n> - **ç†ç”±(justification)**\n\n## 1. è®¾è®¡æ¦‚å¿µä¸è‡ªåŠ¨åŒ– Design Concepts and Automation\n\n### 1.1. è¡¨ç¤ºé€»è¾‘çš„æ–¹æ³•\n\n- çœŸå€¼è¡¨\n- å¸ƒå°”å‡½æ•°\n- å¡è¯ºå›¾\n- **æ—¶åºå›¾(timing diagram)**\n- **é€»è¾‘ç”µè·¯å›¾(logic circuit)**\n\n## 2. è®¾è®¡è¿‡ç¨‹ Design Procedure\n\n1. **ç³»ç»Ÿæè¿°(specification)**: æŒ‡å®šæ‰€éœ€çš„è¡Œä¸ºã€‚\n2. **å½¢å¼åŒ–(formalization)**ï¼šä»¥å¸ƒå°”æ–¹ç¨‹æˆ–çœŸå€¼è¡¨çš„æ–¹å¼å¯¹ç³»ç»Ÿçš„è¾“å…¥è¾“å‡ºå…³ç³»è¿›è¡Œå½¢å¼åŒ–\n3. **ä¼˜åŒ–(optimization)**ï¼šä¼˜åŒ–é€»è¾‘çš„è¡¨ç¤ºï¼Œå‡å°‘æˆæœ¬ã€‚\n4. **å·¥è‰ºæ˜ å°„(technology mapping)**ï¼šå°†ä¼˜åŒ–åçš„é€»è¾‘è®¾è®¡å·¥è‰ºæ˜ å°„åˆ°å¯ä»¥å®ç°çš„å·¥è‰ºä¸Šã€‚\n5. **éªŒè¯(verification)**ï¼šéªŒè¯è®¾è®¡çš„æ­£ç¡®æ€§ã€‚\n\n> [!quote]- **èŠ¯ç‰‡å®šåˆ¶(chip design)**\n>\n> - **å…¨å®šåˆ¶è®¾è®¡(full customized)**: ä»·æ ¼è´µï¼Œæ€§èƒ½é«˜ï¼Œå¯†åº¦é«˜ï¼Œé€‚åˆå¤§è§„æ¨¡ç”Ÿäº§ã€‚the entire design of the chip down to the details of the layout is finished\n>   - Expensive\n>   - Justifiable only for dense, fast chips with high sales volume\n> - **æ ‡å‡†å•å…ƒè®¾è®¡(standard cell design)**: blocks have been designed ahead of time or as part of previous designs\n>   - Intermediate cost\n>   - Less density and speed compared to full customized\n> - **é—¨é˜µåˆ—è®¾è®¡(gate array design)**: å¯†åº¦ä½ï¼Œæ€§èƒ½ä½ï¼Œä»·æ ¼ä¾¿å®œã€‚regular patterns of gate and transistors that can be used in many designs built into chip - only the interconnections between gates are specific to a design\n>   - Lowest cost\n>   - Less **å¯†åº¦(density)** compared to full customized and standard cell\n\n### 2.1. åˆ†å±‚è®¾è®¡ Hierarchical Design\n\nå¯¹äºå¤æ‚çš„æ•°å­—ç³»ç»Ÿï¼Œä¸€ç§å…¸å‹çš„è®¾è®¡æ–¹æ³•ä¸º**åˆ†å±‚è®¾è®¡(hierarchical design)**ï¼Œå³å°†å¤æ‚é—®é¢˜æ¨¡å—åŒ–åˆ†è§£ä¸ºè‹¥å¹²å±‚æ¬¡ï¼Œç„¶åé€ä¸ªæŠ½è±¡è§£å†³ã€‚\n\n- æœ€å°å±‚çš„**æ¨¡å—(block)** å«åš**åŸå­æ¨¡å—(primitive block)**ã€‚Any block that cannot be further decomposed is called a primitive block.\n- ç”±ä¸åŒå±‚çº§çš„åŸºæœ¬å—ç»„æˆçš„é›†åˆå«åš**å±‚æ¬¡ç»“æ„(hierarchy)**ã€‚The collection of all blocks including the decomposed ones is a hierarchy.\n\n> [!quote]- ä¾‹ï¼šHierarchy for 9-Input Parity Checker\n> ![|600](https://img.memset0.cn/2024/03/21/xyn98LEW.png)\n\nåˆ†å±‚è®¾è®¡çš„è®¾è®¡æ–¹æ³•å¯ä»¥åˆ†ä¸º\n\n- **è‡ªé¡¶å‘ä¸‹çš„è®¾è®¡(top-down design)**ï¼šåˆ†è§£åŠŸèƒ½è®¾è®¡ã€‚A top-down design proceeds from an abstract, high-level specification to a more and more detailed design by decomposition and successive refinement. Top-down design answers: What are we building?\n- **è‡ªåº•å‘ä¸Šçš„è®¾è®¡(bottom-up design)**ï¼šæ ¹æ®ç°æœ‰çš„å…ƒä»¶å»ç»„åˆæˆç›®æ ‡åŠŸèƒ½ã€‚A bottom-up design starts with detailed primitive blocks and combines them into larger and more complex functional blocks. Bottom-up design answers: How do we build it?\n\nä¸€èˆ¬ä»ä¸¤ä¸ªæ–¹å‘åŒæ—¶è¿›è¡Œè®¾è®¡ã€‚ä¸€èˆ¬ top-down è®¾è®¡æ§åˆ¶å¤æ‚åº¦ï¼Œbottom-up è®¾è®¡èšç„¦äºç»†èŠ‚ã€‚\n\n### 2.2. å·¥è‰ºæ˜ å°„ Technology Mapping\n\nå·¥è‰ºæ˜ å°„æ˜¯æŒ‡å°†ä¼˜åŒ–åçš„é€»è¾‘è®¾è®¡å·¥è‰ºæ˜ å°„åˆ°æœ‰é™çš„å·¥è‰ºä¸Šã€‚\n\næ¯”å¦‚ï¼šå› ä¸º NAND é—¨å’Œ NOR é—¨æ˜¯**é€šç”¨é—¨(universal gate)**ï¼Œæˆ‘ä»¬å¯ä»¥å°†ä»»æ„é€»è¾‘ç”µè·¯æ˜ å°„åˆ°ä»…ä½¿ç”¨ NAND é—¨æˆ–ä»…ä½¿ç”¨ NOR é—¨çš„ç”µè·¯ä¸Šã€‚\n\n#### 2.2.1. æ— ä¼ æ’­å»¶è¿Ÿå­ç”µè·¯ Fan-out Free Subcircuit\n\n**ä¼ æ’­å»¶è¿Ÿ(fan-out)**ï¼šä¸€ä¸ªé€»è¾‘é—¨çš„è¾“å‡ºè¿æ¥åˆ°å¤šä¸ªå…¶ä»–é€»è¾‘é—¨çš„è¾“å…¥æ—¶ï¼Œè´Ÿè½½å¢åŠ å°†å¯¼è‡´çš„å»¶è¿Ÿå¢åŠ ã€‚\n\n**æ— ä¼ æ’­å»¶è¿Ÿå­ç”µè·¯(fan-out free subcircuit)**ï¼šå¯„å­˜å™¨çš„è¾“å‡ºä¸ç›´æ¥è¿æ¥åˆ°å…¶ä»–é€»è¾‘é—¨çš„è¾“å…¥ï¼Œè€Œæ˜¯é€šè¿‡ä¸€ä¸ªä¸“é—¨çš„æ•°æ®æ€»çº¿æˆ–ä¿¡å·çº¿è¿æ¥åˆ°å…¶ä»–éƒ¨åˆ†ã€‚a circuit in which a single output cell drives only one other cell.\n\n> è¯¾ä»¶ P38ï¼Œè¿˜æ²¡å¤ªæ‡‚è¿™ä¸€éƒ¨åˆ†æƒ³å¹²å˜›\n\n## 3. é›†æˆç”µè·¯ Integrated Circuits\n\n**é›†æˆç”µè·¯(integrated circuit)**ï¼Œå³**èŠ¯ç‰‡(chip)**ï¼Œåˆ†ä¸ºå¦‚ä¸‹è‹¥å¹²ç­‰çº§ï¼š\n\n- å°è§„æ¨¡é›†æˆç”µè·¯(small-scale integrated, SSI)ï¼šå†…å«ä¸åˆ° 10 ä¸ªé—¨ï¼›\n- ä¸­ç­‰è§„æ¨¡é›†æˆç”µè·¯(medium-scale integrated, MSI)ï¼šå†…å« 10 ~ 100 ä¸ªé—¨ï¼›\n- **å¤§è§„æ¨¡é›†æˆç”µè·¯(large-scale integrated, LSI)**ï¼šå†…å«æˆç™¾ä¸Šåƒä¸ªé—¨ï¼›\n- **è¶…å¤§è§„æ¨¡é›†æˆç”µè·¯(very large-scale integrated, VLSI)**ï¼šå†…å«æˆåƒä¸Šäº¿ä¸ªé—¨ã€‚\n\n## 4. åŸºæœ¬é€»è¾‘å‡½æ•° Rudimentary Logic Functions\n\nå››ä¸ªåˆç­‰ç»„åˆé€»è¾‘å‡½æ•°ï¼š\n\n- **å®šå€¼å‡½æ•°(value-fixing function)**ï¼š$F=1$ or $F=0$, no Boolean operator. å¯ä»¥è¡¨ç¤ºæ¥ç”µæºæˆ–æ¥åœ°ã€‚\n- **(transfering)**ï¼š$F=X$, no Boolean operator.\n- **(inverting)**ï¼š$F=\\overline{X}$, involves one logical gate.\n- **ä½¿èƒ½å‡½æ•°(enabling function)**ï¼š$F=X\\cdot EN$ or $F=X+\\overline{EN}$, involves one or two logic gates.è¿™é‡Œ $F=X\\cdot EN$ åœ¨ä½¿èƒ½ä¿¡å· $EN$ ä¸º $1$ æ˜¯è¢«æ¿€æ´»ï¼Œå¦åˆ™æ’ä¸º $0$ã€‚$F=X+\\overline{EN}$ åŒæ ·éœ€è¦ä½¿èƒ½ä¿¡å· $EN$ ä¸º $1$ æ¥æ¿€æ´»ï¼Œä½†æœªæ¿€æ´»æ—¶æ’ä¸º $1$ã€‚\n\n## 5. è¯‘ç å™¨ Decoder\n\n**è¯‘ç (decoding)**ï¼šæŠŠ $n$ ä½äºŒè¿›åˆ¶è¾“å…¥è½¬åŒ–åˆ° $m$ ä½äºŒè¿›åˆ¶è¾“å‡ºçš„è¿‡ç¨‹ã€‚ä¿è¯ $n\\le m\\le 2^n$ ä½¿å¾—æ¯ä¸€ä¸ªåˆæ³•è¾“å…¥éƒ½æœ‰ä¸€ä¸ªä¸åŒçš„è¾“å‡ºã€‚\n\n### 5.1. äºŒè¿›åˆ¶è¯‘ç å™¨ Binary Decoder\n\nç»™å®š $n$ ä½äºŒè¿›åˆ¶ä»£ç ï¼Œå°† decode ä¸ºå…¶å¯¹åº”çš„æœ€å°é¡¹ã€‚\n\n![m7rSGsWc.png|620](https://img.memset0.cn/2024/03/28/m7rSGsWc.png)\n\nå› ä¸ºä»»æ„ç»„åˆé€»è¾‘å‡½æ•°éƒ½å¯ä»¥å†™æˆ sum of minterms çš„å½¢å¼ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨äºŒè¿›åˆ¶è¯‘ç å™¨+æˆ–é—¨æ¥è¡¨ç¤º**ä»»æ„**ç»„åˆé€»è¾‘\n\n![B3baxDn9.png|631](https://img.memset0.cn/2024/06/19/B3baxDn9.png)\n\n### 5.2. è¯‘ç å™¨ä¸ä½¿èƒ½ç»“åˆ Decoder with Enable\n\nåœ¨æ™®é€šè¯‘ç å™¨çš„åŸºç¡€ä¸Šå¤šä¸€ä¸ª**ä½¿èƒ½ä¿¡å·(enable)** EN æ¥æ§åˆ¶ï¼Œå½“ EN ä¸º 0 æ—¶æ— è®º $A_{0}\\sim A_{n-1}$ ä»€ä¹ˆå€¼éƒ½è¾“å‡ºå…¨é›¶ï¼Œå¦åˆ™è¾“å‡ºå¯¹åº”çš„æœ€å°é¡¹ã€‚\n\n### 5.3. å¤šè·¯åˆ†é…å™¨ Demultiplexer\n\n> cmï¼šä¸è€ƒã€‚\n\næˆ‘ä»¬å¯ä»¥é€šè¿‡å¸¦ä½¿èƒ½ä¿¡å·çš„è¯‘ç å™¨ï¼Œå°†æ¥è‡ªä¸€æ¡è¾“å…¥çº¿ä¸Šçš„ä¿¡æ¯ä¼ é€åˆ° $2^n$ æ¡è¾“å…¥çº¿ä¸­çš„æŒ‡å®šä¸€æ¡ï¼Œå®ç°**åˆ†é…(distribution)** åŠŸèƒ½ã€‚\n\nå®ç°è¿™ä¸€åŠŸèƒ½çš„ç”µè·¯ç§°ä¸º**å¤šè·¯åˆ†é…å™¨(demultiplexer = demux)**ã€‚ä¸€ä¸ªå¸¦ä½¿èƒ½çš„ $n$-$2^n$ è¯‘ç å™¨åˆæ˜¯ä¸€ä¸ª 1-$2^n$ å¤šè·¯åˆ†é…å™¨ã€‚å…¶ä¸­ 1 æŒ‡çš„æ˜¯è¾“å…¥ä¿¡å·çš„**ä½å®½(bit width)** æ˜¯ 1ï¼Œè¿™ä¸€è¾“å…¥ç›´æ¥æ¥åˆ° EN è¾“å…¥å¤„ã€‚\n\n### 5.4. 7 ä½æ•°ç ç®¡è¯‘ç å™¨ BCD-to-Segment Decoder\n\nå®ç° 7 ä½æ•°ç ç®¡è¯‘ç å™¨ï¼Œå¯ä»¥é€šè¿‡é€»è¾‘é—¨å®ç°å¸ƒå°”å‡½æ•°ï¼Œä¹Ÿå¯ä»¥ç›´æ¥ç”¨ä¸Šé¢å®ç°å¤šè·¯åˆ†é…å™¨ã€‚\n\nå…³äº 7 ä½æ•°ç ç®¡å†…éƒ¨æ„é€ ï¼Œå¯é‡‡ç”¨**å…±é˜³æ(common anode)** æ¥æ³•æˆ–**å…±é˜´æ(common cathode)** æ¥æ³•ï¼Œå…¶ä¸­å‰è€…æ˜¯ 0 è§¦å‘ï¼Œåè€…æ˜¯ 1 è§¦å‘ã€‚å‚è§ä¸‹å›¾ï¼š\n\n![e3eZevAk.png|487](https://img.memset0.cn/2024/03/28/e3eZevAk.png)\n\n## 6. ç¼–ç å™¨ Encoder\n\n**ç¼–ç (encoding)**ï¼šthe conversion of an $m$-bit input code to a $n$-bit output code with $n\\le m\\le 2^n$ such that each valid code word produces a unique output code.\n\n### 6.1. ä¼˜å…ˆç¼–ç å™¨ Priority Encoder\n\n**ä¼˜å…ˆç¼–ç å™¨(priority encoder)** çš„ä½œç”¨æ˜¯çš„å½“å¤šä¸ªè¾“å…¥åŒæ—¶ä¸º 1 æ—¶ï¼Œä¼˜å…ˆçº§æœ€é«˜çš„è¾“å…¥éœ€è¦è¢«ä¼˜å…ˆå¤„ç†ã€‚æ‰€ä»¥æˆ‘ä»¬éœ€è¦å®ç°ä¸€ä¸ªç¼–ç å™¨ï¼Œè¾“å‡ºä¼˜å…ˆçº§æœ€é«˜çš„ä¸º 1 çš„è¾“å…¥æ˜¯å¤šå°‘ã€‚å…¶çœŸå€¼è¡¨å¦‚ä¸‹ï¼š\n\n![0zpC1tD1.png|526](https://img.memset0.cn/2024/03/28/0zpC1tD1.png)\n\nå¯ä»¥æä¾›ä¸å°‘æ— å…³é¡¹ç”¨äºåŒ–ç®€ã€‚\n\n> [!tip] åˆ«å¿˜äº†æ€ä¹ˆåŒ–ç®€\n> e.g. $A_0 = \\overline{D_4} D_3 + \\overline{D_4 D_3 D_2} D_1 = \\overline{D_4} (D_3 + \\overline{D_2} D_1)$ã€‚\n\n### 6.2. å¤šè·¯é€‰æ‹©å™¨ Multiplexer\n\nç”¨ä¸€ç»„ $n$ ä½çš„è¾“å…¥ä¿¡å·ï¼ˆç§°ä¸º**é€‰æ‹©è¾“å…¥(selection input)**ï¼‰é€‰æ‹© $2^n$ ä½çš„è¾“å…¥ä¿¡å·ä¸­çš„ä¸€è·¯åˆ°è¾“å‡ºï¼Œå®ç°è¿™ä¸€åŠŸèƒ½çš„ç”µè·¯ç§°ä¸º**å¤šè·¯é€‰æ‹©å™¨(multiplexer = mux)**ï¼Œä¹Ÿè¢«å«ä½œå¤šè·¯åˆ†é…å™¨ã€‚\n\n![|385](https://img.memset0.cn/2025/01/17/XmTxHOMI.png)\n\nä¸€èˆ¬æ¥è¯´ï¼Œä¸€ä¸ª $2^{n}$-to-$1$ line MUX éœ€è¦æœ‰ $n$-to-$2^{n}$ line decoder å’Œ $2^n$ ä¸ª AND ä»¥åŠä¸€ä¸ª ORï¼š\n\n![|420](https://img.memset0.cn/2025/01/17/qMcBWS5s.png)\n\nè¿™é‡Œä»‹ç»çš„ MUX è¿˜æ˜¯ 1bit çš„ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ä¸€æ¬¡æ€§åšå¤šä½ï¼Œè¿™æ ·çš„è¯åªéœ€è¦ä¸€ä¸ªé€‰æ‹©æ¨¡å—ã€‚ä¸‹é¢ä»¥ 4bits 4-to-1 MUX ä¸ºä¾‹ï¼š\n\n![|355](https://img.memset0.cn/2025/01/17/7wPsLVxs.png)\n\n## 7. äºŒè¿›åˆ¶åŠ æ³•å™¨ Adder\n\n### 7.1. åŠåŠ å™¨ Half-Adder\n\n**åŠåŠ å™¨(half-adder)**ï¼šå®ç°ä¸¤ä½ç›¸åŠ çš„ç»„åˆç”µè·¯ã€‚\n\n![2OCFQL2p.png|527](https://img.memset0.cn/2024/04/11/2OCFQL2p.png)\n\n|                             çœŸå€¼è¡¨                             |                         å¡è¯ºå›¾                         |                          é€»è¾‘å‡½æ•°                          |\n| :------------------------------------------------------------: | :----------------------------------------------------: | :--------------------------------------------------------: |\n| ![150](https://img.memset0.cn/2024/04/11/KI1OCXix.png)<br><br> | ![300](https://img.memset0.cn/2024/04/11/WG7ps2LP.png) | ![300](https://img.memset0.cn/2024/04/11/oR6fZIVR.png)<br> |\n\nå¦‚æœæˆ‘ä»¬é€‰ç”¨ä¸åŒçš„é€»è¾‘å‡½æ•°ï¼Œå°±å¯ä»¥æœ‰ä¸åŒçš„ç”µè·¯å®ç°ã€‚å…¶ä¸­ï¼Œæœ€å¸¸è§çš„åŠåŠ å™¨å®ç°å¦‚ä¸‹ï¼š\n\n![|400](https://img.memset0.cn/2024/04/11/aBytdNoi.png)\n\nä¸€ä¸ªåªä½¿ç”¨ NAND é—¨çš„åŠåŠ å™¨å®ç°å¦‚ä¸‹ï¼š\n\n![|400](https://img.memset0.cn/2024/04/11/bBxUeuql.png)\n\n### 7.2. å…¨åŠ å™¨ Full-Adder\n\n**å…¨åŠ å™¨(full-adder)**ï¼šå®ç°ä¸‰ä½ç›¸åŠ ï¼ˆä¸¤ä½åŠä¸€ä½**è¿›ä½(carry-in bit)**ï¼‰çš„ç»„åˆç”µè·¯ã€‚\n\n|                           çœŸå€¼è¡¨                           |                                                          å¡è¯ºå›¾                                                          |\n| :--------------------------------------------------------: | :----------------------------------------------------------------------------------------------------------------------: |\n| ![200](https://img.memset0.cn/2024/04/11/zYMENIav.png)<br> | ![200](https://img.memset0.cn/2024/04/11/MyU5i2Na.png)<br><br>![200](https://img.memset0.cn/2024/04/11/Bb7xCh5R.png)<br> |\n\n![7gbovvlo.png|587](https://img.memset0.cn/2024/04/11/7gbovvlo.png)\n\n- **è¿›ä½äº§ç”Ÿå‡½æ•°(carry generate function)** - $X\\cdot Y$ï¼šå½“ $X$ å’Œ $Y$ éƒ½æ˜¯ $1$ æ—¶å°±ä¼šå‘ç”Ÿè¿›ä½ã€‚ä¸€èˆ¬ç®€å†™æˆ $G$ã€‚\n\n- **è¿›ä½ä¼ é€’å‡½æ•°(carry propagate function)** - $X \\oplus Y$ï¼šå½“ $X$ å’Œ $Y$ ä¸­æ°æœ‰ä¸€ä¸ªæ˜¯ $1$ çš„è¯ï¼Œå¦‚æœæ”¶åˆ°ä¸€ä¸ªæ¥è‡ªä½ä½çš„è¿›ä½ï¼Œå°±ä¸€å®šä¼šä¼ é€’ç»™é«˜ä½ã€‚ä¸€èˆ¬ç®€å†™æˆ $P$ã€‚\n\n![yEVXwpWi.png|184](https://img.memset0.cn/2024/04/11/yEVXwpWi.png)\n\nä¸€ä¸ªå…¨åŠ å™¨ç›¸å½“äºç”±ä¸¤ä¸ªåŠåŠ å™¨ç»„æˆï¼Œå› ä¸ºå®é™…ä¸Šä½ å°±æ˜¯æŠŠ $X,Y,C$ ä¸‰ä¸ªæ•°åŠ èµ·æ¥ï¼Œç”¨äº†ä¸¤ä¸ªåŠåŠ ï¼š\n\n![3HSMTGfd.png|483](https://img.memset0.cn/2024/04/11/3HSMTGfd.png)\n\n### 7.3. è¡Œæ³¢åŠ æ³•å™¨ Ripple-Carry Binary Adders\n\n![6RdC6Rmk.png|519](https://img.memset0.cn/2024/04/11/6RdC6Rmk.png)\n\n### 7.4. è¶…å‰è¿›ä½åŠ æ³•å™¨ Carry Lookahead Adder\n\n> è¿™é‡Œä»…åšäº†è§£ï¼Œåœ¨ã€Šè®¡ç®—æœºç»„æˆã€‹è¯¾ç¨‹ä¸­ä¼šè¿›ä¸€æ­¥ä»‹ç»ã€‚\n\né€šè¿‡æŠŠè¿›ä½å±•å¼€ï¼Œæˆ‘ä»¬ç›´æ¥è®¡ç®—æœ€åäº§ç”Ÿçš„è¿›ä½ï¼Œè¿™é‡Œä»¥ 4bit çš„è¶…å‰è¿›ä½åŠ æ³•å™¨ä¸ºä¾‹ï¼š\n\n![JDRTsfRU.png|496](https://img.memset0.cn/2024/04/11/JDRTsfRU.png)\n\nå…¶ç”µè·¯å®ç°å¦‚ä¸‹ï¼š\n\n![|751](https://img.memset0.cn/2024/04/11/ZyGVEkTZ.png)\n\nè€ƒå¯Ÿè¶…å‰è¿›ä½åŠ æ³•å™¨çš„æ€§èƒ½ï¼š\n\n- å…¨åŠ å™¨éƒ¨åˆ†ï¼šä» $A_i,B_i$ å˜æˆ $G_i$ï¼Œåªéœ€è¦ç»è¿‡ä¸€ä¸ªå¼‚æˆ–é—¨ï¼Œæ¶ˆè€— 3 å•ä½æ—¶é—´ã€‚\n- CLA éƒ¨åˆ†ï¼šè™½ç„¶çœ‹èµ·æ¥æœ‰å¾ˆå¤šä¸ª ANDã€çœ‹èµ·æ¥ç”µè·¯å¾ˆå¤æ‚ï¼Œä½†æ˜¯æ³¨æ„åˆ°ä¸é—¨å¯ä»¥å¤šè¾“å…¥åŒæ—¶åšï¼Œæ•…å®é™…ä¿¡å·åªç»è¿‡äº†ä¸€ä¸ªä¸é—¨å’Œä¸€ä¸ªæˆ–é—¨ï¼Œæ¶ˆè€— 2 å•ä½æ—¶é—´ã€‚\n- å†å›åˆ°å…¨åŠ å™¨éƒ¨åˆ†ï¼šåƒ $C_1,C_2,C_3$ ä¿¡å·ï¼Œä¸åƒ $C_4$ å¯ä»¥ç›´æ¥è¾“å‡ºï¼Œéœ€è¦å›åˆ°å…¨åŠ å™¨éƒ¨åˆ†å†ç»è¿‡ä¸€ä¸ªå¼‚æˆ–é—¨ï¼Œæ¶ˆè€— $3$ å•ä½æ—¶é—´ã€‚\n\nè¿™æ ·æˆ‘ä»¬å°±å¾—åˆ°äº†ä¸€ä¸ªæœ€å¤§å»¶è¿Ÿåªæœ‰ $3+2+3=8$ ä¸ªå•ä½çš„ 4bit è¶…å‰è¿›ä½åŠ æ³•å™¨ã€‚\n\né‚£å¦‚æœæˆ‘ä»¬éœ€è¦ 16-bit çš„è¶…å‰è¿›ä½åŠ æ³•å™¨å‘¢ï¼Ÿæ³¨æ„åˆ°ä¸­é—´é—¨ç”µè·¯çš„è¾“å…¥æ•°é‡æ˜¯ $O(n^2)$ çº§åˆ«çš„ï¼Œå¦‚æœä¸€å‘³å¢å¤§ CLAï¼Œæ¶ˆè€—çš„æˆæœ¬å¤ªé«˜ã€‚å®é™…ä¸Šï¼Œåªéœ€è¦æŠŠä¸Šé¢ç”µè·¯å›¾ä¸­çš„å…¨åŠ å™¨æ›¿æ¢æˆ CLAï¼Œå°±æ˜¯ä¸€ä¸ª 16 ä½çš„è¶…å‰è¿›ä½åŠ æ³•å™¨ã€‚ï¼ˆ4-bitï¼šå…¨åŠ å™¨ $\\rightarrow$ CLAï¼›16-bitï¼šå…¨åŠ å™¨ $\\rightarrow$ CLA $\\rightarrow$ CLAï¼‰\n\nè®¡ç®—æ­¤å®ç°ä¸‹çš„ 16-bit è¶…å‰è¿›ä½çš„æ€§èƒ½ï¼š\n\n$$\n\\text{Longest Delay} = 3 + 3 \\times 2 + 3 = 12 \\sim O(\\log n)\n$$\n\n![1PadKTUQ.png|353](https://img.memset0.cn/2024/04/11/1PadKTUQ.png)\n\n## 8. äºŒè¿›åˆ¶å‡æ³•å™¨ Subtractor\n\n- **è¢«å‡æ•°(minuend)**\n- **å‡æ•°(subtrahend)**\n\n> [!info]- **åç (one's complement)**\n>\n> å¯ä»¥é€šè¿‡äºŒè¿›åˆ¶æŒ‰ä½å–åå¾—åˆ°ã€‚\n>\n> ![|500](https://img.memset0.cn/2024/04/11/iuE11HK5.png)\n\n> [!info] **è¡¥ç (two's complement)**\n>\n> å¯ä»¥é€šè¿‡åç åŠ  1 å¾—åˆ°ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œæˆ‘ä»¬ç›´æ¥ç”¨è¡¥ç æ¥å­˜å‚¨è´Ÿæ•°ï¼Œç›¸å½“äºæ˜¯ä¸€ä¸ªç¡¬ä»¶å±‚é¢çš„çº¦å®šã€‚\n>\n> ![|500](https://img.memset0.cn/2024/04/11/WtUbWMe7.png)\n\n### 8.1. æ— ç¬¦å·å‡æ³• Unsigned Subtraction\n\næ–¹æ³•å¦‚ä¸‹ï¼š\n\n![|540](https://img.memset0.cn/2024/04/11/oenJ08il.png)\n\n![mnJGRsj4.png|745](https://img.memset0.cn/2024/06/19/mnJGRsj4.png)\n\n> [!warning] Clarification\n> è¿™é‡Œæ— ç¬¦å·å‡æ³•çš„è¯´æ³•å…¶å®æ¯”è¾ƒè¿·ç³Šï¼Œæˆ‘ä»¬æš‚ä¸”ä¸æ‰¿è®¤ç¬¦å·ä½ï¼ˆä¹Ÿå°±æ˜¯ç”¨è¡¥ç è¡¨ç¤ºè´Ÿæ•°ï¼‰è¿™ä¸€äº‹å®ã€‚ä»¥ 4-bit ä¸ºä¾‹ï¼Œç›¸å½“äºå¤„ç†ä¸¤ä¸ª $[0,15]$ å€¼åŸŸçš„æ•° $M,N$ çš„ $M-N$ã€‚å¦‚æœç»“æœæ˜¯è´Ÿæ•°ï¼ˆåœ¨å€¼åŸŸå¤–ï¼‰ï¼Œå°±åº”å¾—åˆ°è´Ÿæ•°å–åçš„ç»“æœï¼Œç„¶åå†â€œæ‰‹åŠ¨â€å¡«ä¸Šä¸€ä¸ªè´Ÿå·ã€‚å³è®¡ç®— $3-5$ æ—¶æˆ‘ä»¬å¸Œæœ›å¾—åˆ° $2$ å’Œä¸€ä¸ªè´Ÿå·ï¼Œè€Œä¸æ˜¯ç›´æ¥å¾—åˆ° $-2$ï¼Œè¿™å°±æ˜¯ä¸ºä»€ä¹ˆä¸Šæ–‡ $M<N$ æ—¶éœ€è¦å¤šå–ä¸€æ¬¡è¡¥ç ã€‚\n\n### 8.2. æœ‰ç¬¦å·å‡æ³• Signed Subtraction\n\n> [!info] **æœ‰ç¬¦å·æ•´æ•°(signed integer)** çš„è¡¨ç¤ºæ–¹æ³•\n>\n> æœ€é«˜ä½éƒ½æ˜¯ç¬¦å·ä½ï¼Œç„¶åï¼š\n>\n> - Signed-Magnitudeï¼šè´Ÿæ•°æ—¶ï¼Œä½ $n-1$ ä½è¡¨ç¤ºå…¶ç»å¯¹å€¼\n> - Signed 1's Complementï¼šè´Ÿæ•°æ—¶ï¼Œä½ $n-1$ ä½è¡¨ç¤ºå…¶ç»å¯¹å€¼çš„åç \n> - Signed 2's Complementï¼šè´Ÿæ•°æ—¶ï¼Œä½ $n-1$ ä½è¡¨ç¤ºå…¶ç»å¯¹å€¼çš„è¡¥ç \n>\n> ä½¿ç”¨å‰ä¸¤ç§æ–¹æ³•ä¼šå‡ºç° $+0$ å’Œ $-0$ çš„ä¸¤ç§è¡¨ç¤ºã€‚ä¸€èˆ¬æ¥è¯´ï¼Œå‰ä¸¤ç§æ–¹æ³•æ¯”å¤§å°æ—¶æ¯”è¾ƒæ–¹ä¾¿ï¼Œç¬¬ä¸‰ç§æ–¹æ³•åšåŠ å‡æ³•æ¯”è¾ƒæ–¹ä¾¿ï¼Œè¿™ä¹Ÿæ˜¯æˆ‘ä»¬è¦ä»‹ç»çš„ã€‚\n>\n> ![|360](https://img.memset0.cn/2024/04/11/qg5AekT2.png)\n\n### 8.3. æº¢å‡ºæ£€æµ‹ Overflow Detection\n\nåœ¨åŒç¬¦å·æ•°å­—ç›¸åŠ ã€å¼‚ç¬¦å·æ•°ç›¸å‡æ—¶å¯èƒ½å‘ç”Ÿæº¢å‡ºã€‚\n","publishedTitle":"ã€Œæ•°å­—é€»è¾‘è®¾è®¡ã€Chapter 3. Combinational Logic Design"}},{"id":"6d747d89-5423-51f9-8806-986d76ccb97a","fields":{"slug":"/course/dd/note/4/","plainText":"\n> æœ¬ç¯‡ç¬”è®°ä»‹ç»äº†æ—¶åºç”µè·¯çš„åŸºæœ¬æ¦‚å¿µå’Œåˆ†ææ–¹æ³•ï¼ŒåŒ…æ‹¬æ—¶åºç”µè·¯çš„åˆ†ç±»ï¼ˆMealy å‹å’Œ Moore å‹ï¼‰ã€ç¦»æ•£äº‹ä»¶æ¨¡æ‹Ÿã€é”å­˜å™¨å’Œè§¦å‘å™¨çš„å·¥ä½œåŸç†åŠå…¶æ—¶åºå‚æ•°ã€‚è¯¦ç»†è®¨è®ºäº†é”å­˜å™¨çš„æ—¶åºé—®é¢˜åŠå…¶è§£å†³æ–¹æ¡ˆï¼Œè§¦å‘å™¨çš„æ ‡å‡†ç¬¦å·å’Œæè¿°æ–¹æ³•ï¼Œä»¥åŠæ—¶åºç”µè·¯çš„è®¾è®¡æ­¥éª¤å’ŒçŠ¶æ€èµ‹å€¼æ–¹æ³•ã€‚é€šè¿‡çŠ¶æ€è¡¨å’ŒçŠ¶æ€å›¾çš„å½¢å¼ï¼Œå¸®åŠ©ç†è§£æ—¶åºç”µè·¯çš„è¡Œä¸ºå’Œè®¾è®¡è¿‡ç¨‹ã€‚<small style=\"font-style: italic; opacity: 0.5\">ï¼ˆç”± gpt-4o-mini ç”Ÿæˆæ‘˜è¦ï¼‰</small>\n\n<!-- more -->\n\n## 1. æ—¶åºç”µè·¯åˆ†æ Sequential Circuit Analysis\n\n### 1.1. æ—¶åºç”µè·¯ä»‹ç» Introduction to Sequential Circuit\n\næˆ‘ä»¬å°†æŸä¸€æ—¶åˆ»å­˜å‚¨**å­˜å‚¨å…ƒä»¶(storage element)** ä¸­çš„äºŒè¿›åˆ¶ä¿¡æ¯ç§°ä¸ºè¯¥æ—¶åˆ»æ—¶åºç”µè·¯çš„**çŠ¶æ€(state)**ã€‚\n\n![gyONWRkQ.png|515](https://img.memset0.cn/2024/04/18/gyONWRkQ.png)\n\næŒ‰ç…§è¾“å‡ºé™¤äº†åŸºäºå½“å‰çŠ¶æ€ä¹‹å¤–æ˜¯å¦ä¾èµ–äºè¾“å…¥ï¼Œå¯ä»¥å°†è§†æ—¶åºç”µè·¯åˆ†ä¸ºï¼š\n\n- **Mealy å‹ç”µè·¯(Mealy model circuit)**ï¼šè¾“å‡ºåªå’Œå‰ä¸€ä¸ªçŠ¶æ€æœ‰å…³\n- **Moore å‹ç”µè·¯(Moore model circuit)**ï¼šè¾“å‡ºå’Œè¾“å…¥åŠå½“å‰è¾“å…¥æœ‰å…³\n\næ ¹æ®è¾“å…¥ä¿¡å·çš„æ—¶é—´å’Œå†…éƒ¨çŠ¶æ€æ”¹å˜çš„æ—¶é—´ï¼Œå¯ä»¥å°†æ—¶åºç”µè·¯åˆ†ä¸ºï¼š\n\n- **åŒæ­¥æ—¶åºç”µè·¯(synchronous sequential circuit)**ï¼š\n  - åŒæ­¥æ—¶åºç”µè·¯æ˜¯é€šè¿‡**æ—¶é’Ÿå‘ç”Ÿå™¨(clock generator)** äº§ç”Ÿå‘¨æœŸæ€§çš„**æ—¶é’Ÿè„‰å†²(clock pulse)** æ¥å®ç°çš„ã€‚\n  - æŠŠæ—¶é’Ÿè„‰å†²ä½œä¸ºå­˜å‚¨å…ƒä»¶è¾“å…¥ä¿¡å·çš„åŒæ­¥æ—¶åºç”µè·¯ç§°ä¸º**é’Ÿæ§æ—¶åºç”µè·¯(clocked sequential circuit)**ã€‚\n- **å¼‚æ­¥æ—¶åºç”µè·¯(asynchronous sequential circuit)**ï¼š\n  - Behavior defined by knowledge of inputs at any instant of time and the order in continuous time in which inputs change\n  - If clock is regarded as another input, all circuits are asynchronous!\n  - Nevertheless, the synchronous abstraction makes complex designs tractable!\n\n### 1.2. ç¦»æ•£äº‹ä»¶æ¨¡æ‹Ÿ Discrete Event Simulation\n\nå¯ä»¥é€šè¿‡**ç¦»æ•£äº‹ä»¶æ¨¡æ‹Ÿ(discrete event simulation)** æ¥æ›´å¥½çš„ç†è§£æ—¶åºç”µè·¯çš„æ—¶é—´è¡Œä¸ºã€‚ç¦»æ•£äº‹ä»¶æ¨¡æ‹Ÿçš„è§„åˆ™å¦‚ä¸‹ï¼š\n\n![fal07yxB.png|397](https://img.memset0.cn/2024/04/18/fal07yxB.png)\n\næˆ‘ä»¬ä»¥ä¸€ä¸ªäºŒè·¯é€‰æ‹©å™¨ä¸ºä¾‹ï¼š\n\n![nYKitFyS.png|429](https://img.memset0.cn/2024/04/18/nYKitFyS.png)\n\n- **æ¯›åˆº(glitch)**ï¼šæˆ–ç§°ç¬æ€é”™è¯¯ã€‚å½“ $S$ ä» $1$ å˜ä¸º $0$ æ—¶ï¼Œç”±äºéé—¨æœ‰ 0.2ns çš„å»¶è¿Ÿï¼Œç”± $A \\overline{S}$\n\nå¦‚æœæŠŠé€‰æ‹©å™¨çš„è¾“å‡º $Y$ ç›´æ¥è¿åˆ°è¾“å…¥ $A$ ä¸Šå‘¢ï¼Ÿ\n\n![JR6iiTsg.png|489](https://img.memset0.cn/2024/04/18/JR6iiTsg.png)\n\n- è¿™é‡Œçš„ Y ä¸ä»…æ˜¯è¾“å‡ºï¼Œè¿˜å¯ä»¥è®°å¿†ç”µè·¯çš„**çŠ¶æ€(state)**ã€‚\n\nå¦‚æœå†å¤šåŠ ä¸€ä¸ª**åç›¸å™¨(inverter)** å‘¢ï¼Ÿ\n\næ—¶é’Ÿå‘ç”Ÿå™¨\n\n## 2. é”å­˜å™¨ Latchs\n\n### 2.1. SR é”å­˜å™¨ä¸ S'R'é”å­˜å™¨ S-R Latch and $\\overline{S}$-$\\overline{R}$ Latch\n\nSR é”å­˜å™¨é€šè¿‡ä¸¤ä¸ªæˆ–éé—¨å®ç°ã€‚\n\n![bwbO3cDX.png|576](https://img.memset0.cn/2024/06/12/bwbO3cDX.png)\n\nåœ¨ SR é”å­˜å™¨ä¸­ï¼Œ$S=1,\\ R=1$ çš„è¾“å…¥æ˜¯**ç¦æ­¢çš„(forbidden)** æˆ–è€…è¯´**æœªå®šä¹‰çš„(undefined)**ï¼Œæ­¤æ—¶è¾“å‡ºç«¯ $Q=0$ å’Œ $\\overline{Q}=0$ åŒæ—¶æˆç«‹ã€‚ä¸€èˆ¬ä¸ä½¿ç”¨è¿™ç§çŠ¶æ€ã€‚\n\nS'R' é”å­˜å™¨é€šè¿‡ä¸¤ä¸ªä¸éé—¨å®ç°ã€‚\n\n![n2u8p5CN.png|537](https://img.memset0.cn/2024/06/12/n2u8p5CN.png)\n\n- S'R' é”å­˜å™¨æ˜¯ $0$ è§¦å‘çš„ï¼Œå³ $\\overline{S}=0$ æ—¶å°† $Q$ ç½® $1$ï¼›è€Œ SR é”å­˜å™¨å“ˆæ–¯ $1$ è§¦å‘çš„ï¼Œå³ $S= 1$ æ—¶å°† $Q$ ç½® $1$ã€‚ä¸è¿‡ä»ç»“æœä¸Šæ¥è¯´ï¼Œç½®ä¸ºæ—¶ $Q$ çš„å€¼ä¸ $S$ çš„å€¼åº”ç›¸åŒã€‚\n\n- å¦‚æœ $R$ å’Œ $S$ åŒæ—¶ä» 0 å˜æˆ 1ï¼Œåˆ™è¾“å‡ºæ˜¯**ä¸ç¨³å®šçš„(unstable)**ã€‚å¦‚æœä¸¤ä¸ªä¸éé—¨çš„æ—¶å»¶å®Œå…¨ç›¸åŒï¼Œåˆ™è¾“å‡ºä¼šåœ¨ 01 ä¹‹é—´éœ‡è¡ï¼Œå¦åˆ™ä¼šç¨³å®šåœ¨ $Q=0$ æˆ– $Q=1$ ä¸­çš„ä¸€ä¸ªçŠ¶æ€ï¼Œå–å†³äºä¸¤ä¸ªä¸éé—¨çš„æ—¶å»¶ã€‚\n\n### 2.2. å¸¦æ—¶é’Ÿä¿¡å·çš„ SR é”å­˜å™¨ Clocked S-R Latch\n\nå¤šè¾“å…¥ä¸€è·¯ä¿¡å· $C$ ä¸ $S,R$ ä¿¡å·ä½œä¸æˆ–ï¼Œè¿™é‡Œ $C$ å¯ä»¥ç†è§£ä¸º **æ§åˆ¶(control)** æˆ–**æ—¶é’Ÿ(clock)**ã€‚åªæœ‰ $C=1$ æ—¶è¾“å…¥æ‰è¢«æ¥å—ï¼›$C=0$ æ—¶æ— è®ºè¾“å…¥å¦‚ä½•æ”¹å˜é”å­˜å™¨éƒ½ä¸ºä¿æŒçŠ¶æ€ã€‚\n\n![BkfC3qgA.png|291](https://img.memset0.cn/2024/04/18/BkfC3qgA.png)\n\n### 2.3. D é”å­˜å™¨ D Latch\n\nç»™ Clocked S-R Latch æ·»åŠ ä¸€ä¸ªåç›¸å™¨å¯ä»¥å¾—åˆ° **D é”å­˜å™¨(D latch)**ï¼Œè¿™æ · $S$ çš„å€¼å’Œ $R$ çš„å€¼ä¸€å®šç›¸åï¼Œè€Œæˆ‘ä»¬é€šè¿‡æ§åˆ¶ä¿¡å· $C$ æ¥æ§åˆ¶æ˜¯å¦åº”å¤„äºä¿æŒçŠ¶æ€ã€‚å½“æ§åˆ¶è¾“å…¥ä¿¡å·æœ‰æ•ˆï¼ˆ$C=1$ï¼‰æ—¶è¾“å‡º $Q$ ä¼šæ ¹æ®è¾“å…¥ $D$ çš„æ”¹å˜è€Œæ”¹å˜ï¼Œä»è¿™ç§æ„ä¹‰ä¸Šæ¥è®²ï¼Œé”å­˜å™¨æ˜¯**é€æ˜(transparent)** çš„ã€‚\n\n> [!warning] é€æ˜çš„é—®é¢˜â€”â€”**ç©ºç¿»(the latch timing problem)**\n>\n> å¦‚æœç›´æ¥æŠŠè¾“å‡º $\\overline{Q}$ æ¥åˆ° $D$ ä¸Šæ—¶ï¼Œè‹¥ $C=1$ï¼Œåˆ™ D é”å­˜å™¨çš„å€¼å°†ä¸æ–­è·³å˜ï¼Œè¿™å°±æ˜¯ç©ºç¿»é—®é¢˜ã€‚è¿™ä¸»è¦æ˜¯å› ä¸º D é”å­˜å™¨çš„è¾“å…¥å’Œè¾“å‡ºæ˜¯åŒæ—¶å…è®¸å˜åŒ–çš„ï¼ˆä¸æ˜¯åŒæ—¶å˜åŒ–ï¼Œæ˜¯æŒ‡åœ¨è¾“å‡ºå¯ä»¥å˜åŒ–çš„æ—¶å€™è¾“å‡ºä¹Ÿèƒ½å˜ï¼‰\n>\n> ç©ºç¿»çš„é—®é¢˜ä¸å…‰åœ¨ D é”å­˜å™¨ä¸­å­˜åœ¨ï¼Œè€Œæ˜¯é”å­˜å™¨çš„æ™®éé—®é¢˜ã€‚\n\n![BBAcru61.png|593](https://img.memset0.cn/2024/06/12/BBAcru61.png)\n\n| $C$ | $D$ | $Q_{t+1}$ | æè¿°       |\n| --- | --- | --------- | ---------- |\n| 0   | X   | $Q_{t}$   | è¾“å‡ºä¸æ”¹å˜ |\n| 1   | 0   | 0         | å¤ä½       |\n| 1   | 1   | 1         | ç½®ä½       |\n\n### 2.4. é”å­˜å™¨çš„æ—¶åºé—®é¢˜ The Latch Timing Problem\n\né”å­˜å™¨å­˜åœ¨**é”å­˜å™¨çš„æ—¶åºé—®é¢˜(the latch timing problem)**ï¼šåœ¨æ—¶é’Ÿè„‰å†²æœ‰æ•ˆï¼ˆ$C=1$ï¼‰æ—¶ï¼Œè¾“å…¥ä¿¡å·çš„æ”¹å˜éšæ—¶ä¼šå¼•èµ·è¾“å‡ºçš„æ”¹å˜ï¼Œå³ä¸Šæ–‡æ‰€è¯´çš„é€æ˜æ€§ã€‚é‚£ä¹ˆå½“æ—¶é’Ÿè„‰å†²ä¿æŒä¸º 1 æ—¶ï¼Œé”å­˜å™¨çš„è¾“å…¥ä¿¡å·å¯èƒ½å› ä¸ºå…¶ä½™é”å­˜å™¨çš„è¾“å‡ºä¿¡å·çš„æ”¹å˜è€Œæ”¹å˜ï¼Œä»è€Œåœ¨ä¸€ä¸ªæ—¶é’Ÿå‘¨æœŸå†…å‘å¤šæ¬¡å˜åŒ–ï¼Œè¿™æ˜¯æˆ‘ä»¬è¦å¼•å…¥è§¦å‘å™¨çš„åŸå› ã€‚\n\nå¦‚è€ƒè™‘è¿™ä¸€ç”µè·¯ä¸­ï¼Œ$C=1$ çš„æ—¶é—´å†… $Y$ çš„å€¼ä¼šåå¤æŒ¯è¡ï¼Œä¸”æœ€åç»“æœä¸ç¡®å®šã€‚è€Œæˆ‘ä»¬æœŸæœ›çš„åŠŸèƒ½æ—¶ï¼Œä¸€æ•´æ®µ $C=1$ åªä¼šå¯¼è‡´ $Y$ çš„å€¼æ”¹å˜ä¸€æ¬¡ã€‚\n\n![bHO3VS6o.png|493](https://img.memset0.cn/2024/05/10/bHO3VS6o.png)\n\nä¸€ç§å¯è¡Œçš„è§£å†³æ–¹æ¡ˆæ˜¯ï¼š$C=1$ æ—¶ï¼ˆè¾“å…¥çš„æ—¶å€™ï¼‰å…ˆä¸æ”¹å˜è¾“å‡ºï¼Œç­‰åˆ° $C=0$ æ—¶åœ¨æ”¹å˜ï¼Œè¿™å°±æ˜¯ä¸»ä»è§¦å‘å™¨çš„åŸç†ã€‚\n\n### 2.5. é”å­˜å™¨çš„æ ‡å‡†ç¬¦å· Standard Symbols for Latches\n\n![iFJ7MCYp.png|490](https://img.memset0.cn/2024/04/18/iFJ7MCYp.png)\n\n## 3. è§¦å‘å™¨ Flip-Flop\n\n### 3.1. ä¸»ä»è§¦å‘å™¨ Master-Slave Flip-Flop\n\n![2ksxJEq7.png|313](https://img.memset0.cn/2024/04/18/2ksxJEq7.png)\n\n**ä¸»ä»è§¦å‘å™¨(master-slave flip-flop)** ä¸€èˆ¬é€šè¿‡å°†ä¸¤ä¸ª SR é”å­˜å™¨å…ˆåè¿æ¥èµ·æ¥æ‰€å¾—åˆ°ï¼Œå…¶ä¸­å‰è€…ç§°ä¸º**ä¸»é”å­˜å™¨(master latch)**ï¼Œåè€…ç§°ä¸º**ä»é”å­˜å™¨(slave latch)**ï¼Œä¸¤è€…çš„æ§åˆ¶ä¿¡å·æ˜¯ç›¸åçš„ã€‚\n\n> [!warning] ä¸»ä»è§¦å‘å™¨çš„ç¼ºæ†¾â€”â€”**ä¸€æ¬¡æ€§é‡‡æ ·é—®é¢˜(1s catching problem)**ï¼š\n>\n> å¦‚æœ $C=0$ æ—¶è§¦å‘å™¨çš„è¾“å…¥æ˜¯ $S=0$ï¼Œ$R=0$ï¼Œä½†æ˜¯ç”±äºç”µè·¯é—®é¢˜å‡ºç°äº† $S=1$ æˆ– $R=1$ çš„**æ¯›åˆº(glitch)**ï¼Œå°±ä¼šæ”¹å˜ä¸»é”å­˜å™¨çš„å€¼ï¼ˆè€Œä¸æ˜¯åƒæœŸæœ›çš„é‚£æ ·å¤„äºä¿æŒçŠ¶æ€ï¼‰ï¼Œå¹¶å°†è¿™ä¸€æœ‰é—®é¢˜çš„ä¿®æ”¹åœ¨ä¸‹ä¸€ä¸ªæ—¶é’Ÿä¸Šå‡æ²¿åˆ°æ¥æ—¶ä¼ é€’ç»™ä»é”å­˜å™¨ã€‚\n>\n> ![WoIhiZRM.png|569](https://img.memset0.cn/2024/04/18/WoIhiZRM.png)\n>\n> ä¸ºäº†é¿å…å‘ç”Ÿä¸€æ¬¡æ€§é‡‡æ ·é—®é¢˜ï¼Œä¸»ä»è§¦å‘å™¨è¦æ±‚å…¶çš„è¾“å…¥ä¿¡å·åœ¨åŠä¸ªæ—¶é’Ÿå‘¨æœŸå†…ä¸èƒ½æ”¹å˜ï¼ˆå³ $C=0$ çš„æ—¶é—´å†…ï¼‰ã€‚\n\n### 3.2. è¾¹ç¼˜è§¦å‘å¼è§¦å‘å™¨ Edge-Triggered Filp-Flop\n\n**è¾¹ç¼˜è§¦å‘å¼(edge-triggered)** è§¦å‘å™¨å¿½ç•¥äº†ä¿æŒé˜¶æ®µçš„æ—¶é’Ÿè„‰å†²ï¼Œåªæœ‰åœ¨æ—¶é’Ÿä¿¡å·å‘ç”Ÿè·³å˜æ—¶ï¼ˆæ­£è¾¹æ²¿åˆ°æ¥æ—¶æˆ–è´Ÿè¾¹æ²¿åˆ°æ¥æ—¶ï¼‰è§¦å‘ã€‚\n\nå…¶é€»è¾‘ç»“æ„å¯ä»¥çœ‹ä½œæŠŠä¸»ä»è§¦å‘å™¨ä¸­çš„ä¸»é”å­˜å™¨æ¢æˆ D é”å­˜å™¨ï¼Œ\n\n### 3.3. JK è§¦å‘å™¨ J-K Flip-Flop\n\n| $J$ | $K$ | $Q_{t+1}$        | æè¿° |\n| --- | --- | ---------------- | ---- |\n| 0   | 0   | $Q_t$            | ä¿æŒ |\n| 0   | 1   | 0                | å¤ä½ |\n| 1   | 0   | 1                | è®¾å®š |\n| 1   | 1   | $\\overline{Q_t}$ | ç¿»è½¬ |\n\n### 3.4. T è§¦å‘å™¨ T Flip-Flop\n\n| $T$ | $Q_{t+1}$        | æè¿° |\n| --- | ---------------- | ---- |\n| 0   | $Q_t$            | ä¿æŒ |\n| 1   | $\\overline{Q_t}$ | ç¿»è½¬ |\n\n### 3.5. è§¦å‘å™¨çš„æ—¶åºå‚æ•° Flip-Flop Timing Parameters\n\n$t_s$ - **å»ºç«‹æ—¶é—´(setup time)**ï¼šè¾“å…¥æ•°æ®åœ¨æ—¶é’Ÿä¿¡å·çš„ä¸Šå‡æ²¿æˆ–ä¸‹é™æ²¿åˆ°æ¥ä¹‹å‰ï¼Œéœ€è¦ä¿æŒç¨³å®šçš„æ—¶é—´ã€‚\n\n- å¯¹äºä¸»ä»è§¦å‘å™¨ï¼Œä¸ºäº†é¿å…ä¸€æ¬¡æ€§é‡‡æ ·é—®é¢˜ï¼Œå…¶ setup time åº”ä¸ºåŠä¸ªæ—¶é’Ÿå‘¨æœŸã€‚å³å¯¹äºé«˜ç”µå¹³æ¿€æ´»çš„ç”µè·¯ï¼Œå…¶åœ¨æ—¶é’Ÿä¿¡å·ç»´æŒé«˜ç”µå¹³æœŸé—´ä¸èƒ½æ”¹å˜è¾“å‡ºã€‚\n- å¯¹äºè¾¹ç¼˜è§¦å‘å™¨ï¼Œå…¶æ‰€éœ€è¦çš„ setup time æ¯”ä¸»ä»è§¦å‘å™¨å°å¾ˆå¤šï¼Œä½†ä¹Ÿå¹¶ä¸æ˜¯ $0$ã€‚\n\n$t_h$ - **ä¿æŒæ—¶é—´(hold time)**ï¼šè¾“å…¥æ•°æ®åœ¨æ—¶é’Ÿä¿¡å·çš„ä¸Šå‡æ²¿æˆ–ä¸‹é™æ²¿åˆ°æ¥ä¹‹åï¼Œéœ€è¦ä¿æŒç¨³å®šçš„æ—¶é—´ã€‚\n\n- ç»å¸¸ç­‰äº $0$ï¼Œå³æ—¶é’Ÿè„‰å†²ä¹‹åå¯¹è¾“å…¥ä¿¡å·æ˜¯å¦ä¿æŒæ²¡æœ‰è¦æ±‚ã€‚\n\n![hsbdV5kX.png|501](https://img.memset0.cn/2024/06/12/hsbdV5kX.png)\n\n$t_w$ - **æ—¶é’Ÿè„‰å†²å®½åº¦(clock pulse width)**ï¼šä¸€ä¸ªæ—¶é’Ÿå‘¨æœŸä¸­ï¼Œæ—¶é’Ÿä¿¡å·ä¸ºé«˜ç”µå¹³ï¼ˆ$t_{wh}$ï¼‰æˆ–ä½ç”µå¹³ï¼ˆ$t_{wl}$ï¼‰çš„æ—¶é—´ã€‚å–å†³äºè§¦å‘å™¨æ˜¯åœ¨æ—¶é’Ÿä¿¡å·çš„ä¸Šå‡æ²¿è§¦å‘è¿˜æ˜¯åœ¨æ—¶é’Ÿä¿¡å·çš„ä¸‹é™æ²¿è§¦å‘ã€‚\n\n$t_{pd}$ - **ä¼ æ’­å»¶è¿Ÿ(propagation delay)**ï¼šä»æ—¶é’Ÿä¿¡å·çš„ä¸Šå‡æ²¿æˆ–ä¸‹é™æ²¿ï¼ˆæ³¨æ„è¿™é‡Œå’Œç»„åˆç”µè·¯ä¸­çš„å®šä¹‰ç•¥æœ‰ä¸åŒï¼‰åˆ°è§¦å‘å™¨è¾“å‡ºç¨³å®šï¼Œæ‰€éœ€è¦çš„æ—¶é—´ã€‚å…¶ä¸­\n\n- è¾“å‡ºä¿¡å·ä»é«˜åˆ°ä½æ‰€éœ€è¦çš„ä¼ æ’­å»¶è¿Ÿå®šä¹‰ä¸º $t_{\\text{PHL}}$ï¼›\n- è¾“å‡ºä¿¡å·ä»ä½åˆ°é«˜æ‰€éœ€è¦çš„ä¼ æ’­å»¶è¿Ÿå®šä¹‰ä¸º $t_{\\text{PLH}}$ã€‚\n\nä¸¤è€…å¯èƒ½ä¸åŒã€‚å¯¹è§¦å‘å™¨ä¼ æ’­å»¶è¿Ÿçš„å®šä¹‰å¯å–ä¸¤è€…çš„æœ€å¤§å€¼æˆ–å¹³å‡å€¼ï¼Œå¦‚ $t_{pd} = \\max\\{t_{\\text{PHL}}, t_{\\text{PLH}}\\}$\n\n![wJh7VPNa.png|612](https://img.memset0.cn/2024/06/12/wJh7VPNa.png)\n\n### 3.6. è§¦å‘å™¨çš„æ ‡å‡†ç¬¦å· Standard Symbols for Flip-Flops\n\n![uiJvlAgB.png|559](https://img.memset0.cn/2024/04/18/uiJvlAgB.png)\n\n![EfG4e0AK.png|275](https://img.memset0.cn/2024/04/18/EfG4e0AK.png)\n\n### 3.7. è§¦å‘å™¨çš„æè¿°æ–¹æ³•\n\nå¸¸ç”¨äºåˆ†æï¼ˆä»å½“å‰çŠ¶æ€å’Œè¾“å…¥ä¸­å¾—åˆ°ä¸‹ä¸€çŠ¶æ€ï¼‰ï¼š\n\n- **ç‰¹å¾è¡¨(characteristic table)**ï¼šå®šä¹‰äº†ä¸‹ä¸€çŠ¶æ€ä¸å½“å‰çŠ¶æ€å’Œè¾“å…¥çš„å…³ç³»ã€‚\n- **ç‰¹å¾æ–¹ç¨‹(characteristic equation)**ï¼šç”¨å¸ƒå°”å‡½æ•°æ¥è¡¨ç¤ºä¸‹ä¸€çŠ¶æ€ä¸å½“å‰çŠ¶æ€å’Œè¾“å…¥çš„å…³ç³»ã€‚\n\nå¸¸ç”¨äºè®¾è®¡ï¼ˆä»çŠ¶æ€ä¸­å¾—åˆ°è¾“å…¥ï¼‰ï¼š\n\n- **æ¿€åŠ±è¡¨(excitation table)**ï¼šåˆ—å‡ºæ‰€æœ‰å¯èƒ½çš„å½“å‰çŠ¶æ€å’Œä¸‹ä¸€çŠ¶æ€ï¼Œä»è€Œç¡®å®šè¾“å…¥ã€‚\n\n## 4. æ—¶åºç”µè·¯åˆ†æ Sequential Circuit Analysis\n\n### 4.1. æ•´ä½“æ¨¡å‹ General Model\n\n![æ•´ä½“æ¨¡å‹|287](https://img.memset0.cn/2024/05/10/k6yAYzTF.png)\n\nå¯¹äºä¸€ä¸ªè¾“å…¥ä¸º $X$ï¼Œè¾“å‡ºä¸º $Y$ï¼ŒçŠ¶æ€ä¸º $(A,B)$ çš„æ—¶åºç”µè·¯å¯ä»¥è¿™æ ·å®šä¹‰å…¶ï¼š\n\n- **è¾“å‡ºæ–¹ç¨‹(output function)**ï¼š$y = \\overline X (B + A)$ã€‚\n- **è§¦å‘å™¨è¾“å…¥æ–¹ç¨‹(flip-flop input equation)**ï¼š$D_A = AX+BX,\\quad D_B=\\overline AX$ã€‚\n- **æ¬¡æ€æ–¹ç¨‹(next state function)**ï¼š$A_{t+1} = D_A,\\quad B_{t+1} = D_B$ã€‚\n\n![æ¥è‡ªè¯¾æœ¬ Figure 5-15|254](https://img.memset0.cn/2024/05/10/YOevSc7d.png)\n\n![æ—¶åºç”µè·¯åˆ†æè¿‡ç¨‹|433](https://img.memset0.cn/2024/06/12/Ulem2F8x.png)\n\n### 4.2. çŠ¶æ€è¡¨ State Table\n\n**çŠ¶æ€è¡¨(state table)** ç”±å››éƒ¨åˆ†ç»„æˆï¼š**å½“å‰çŠ¶æ€(present state)**ã€**è¾“å…¥(input)**ã€**ä¸‹ä¸€çŠ¶æ€(next state)** å’Œ**è¾“å‡º(output)**ã€‚\n\nè¿™é‡Œæˆ‘ä»¬ä¸å¦¨å‡è®¾å…±æœ‰ $n$ ä¸ªè¾“å…¥å’Œ $m$ ä¸ªè§¦å‘å™¨ï¼Œåˆ™ Mealy å‹ç”µè·¯çš„çŠ¶æ€å›¾å¯è¡¨ç¤ºå¦‚ä¸‹ï¼Œå…± $2^{m+n}$ è¡Œï¼Œå¯¹åº”ç€å¯èƒ½çš„æ‰€æœ‰è¾“å‡ºã€‚\n\n![Mealy å‹ç”µè·¯çš„çŠ¶æ€è¡¨|390](https://img.memset0.cn/2024/06/12/yRaU412F.png)\n\nç”±äº Moore å‹ç”µè·¯çš„è¾“å‡ºåªå’Œå½“å‰çŠ¶æ€æœ‰å…³ï¼Œæ‰€ä»¥åªéœ€è¦ $2^m$ è¡Œå³å¯ï¼Œå¯ä»¥æŠŠ $2^n$ ç§ä¸åŒè¾“å‡ºæ‰€è½¬ç§»åˆ°çš„ä¸‹ä¸€çŠ¶æ€å†™åˆ°åˆ—ä¸Šã€‚\n\n![Moore å‹ç”µè·¯çš„çŠ¶æ€è¡¨|488](https://img.memset0.cn/2024/06/12/3t59xjur.png)\n\n### 4.3. æ¿€åŠ±è¡¨ Excitation Table\n\nç”¨å½“å‰çŠ¶æ€å’Œä¸‹ä¸€çŠ¶æ€æ¥æè¿°è¾“å…¥ï¼ˆå±•ç¤ºä»å½“å‰çŠ¶æ€è½¬ç§»åˆ°ä¸‹ä¸€çŠ¶æ€æ‰€éœ€è¦çš„è¾“å…¥ï¼‰ã€‚\n\n### 4.4. æ¿€åŠ±æ–¹ç¨‹ Excitation Equation\n\n### 4.5. çŠ¶æ€å›¾ State Diagram\n\n![Mealy å‹ç”µè·¯çš„çŠ¶æ€å›¾](https://img.memset0.cn/2024/06/12/u56B5gQY.png)\n\n- èŠ‚ç‚¹è¡¨ç¤ºçŠ¶æ€ï¼Œè¾¹è¡¨ç¤ºè¾“å…¥/è¾“å‡ºï¼ˆè¿™ä¸€è¾“å…¥ä¸‹ä¼šè½¬ç§»åˆ°çš„çŠ¶æ€åŠå¯¹åº”çš„è¾“å‡ºï¼‰\n\n![Moore å‹ç”µè·¯çš„çŠ¶æ€å›¾](https://img.memset0.cn/2024/06/12/ghfAK4R8.png)\n\n- èŠ‚ç‚¹è¡¨ç¤ºçŠ¶æ€/è¾“å‡ºï¼Œè¾¹è¡¨ç¤ºè¾“å…¥ï¼ˆè¿™ä¸€è¾“å…¥ä¸‹ä¼šè½¬ç§»åˆ°çš„çŠ¶æ€ï¼‰\n\næˆ‘ä»¬ç§°å‘¼ä¸¤ä¸ªçŠ¶æ€æ˜¯**ç­‰ä»·(equivalent)** çš„ï¼Œå½“ä¸”ä»…å½“å¯¹äºä»»æ„çš„è¾“å…¥åºåˆ—ï¼Œå…¶è¾“å‡ºåºåˆ—éƒ½æ˜¯ç›¸åŒçš„ã€‚å¦‚ä¸‹é¢è¿™ä¸ªä¾‹å­ï¼Œ\n\n### 4.6. çŠ¶æ€æœº State Machine Diagram\n\nå¯¹äºæ›´å¤æ‚çš„é€»è¾‘ï¼Œæˆ‘ä»¬å¯èƒ½éœ€è¦ç”¨**çŠ¶æ€æœº(state-maching diagram)** æ¥è¡¨ç¤ºã€‚\n\n> å¬è¯´è€ƒè¯•æ²¡æœ‰è€ƒè¿‡ï¼Ÿå’•äº†å’•äº†ã€‚\n\n![dv7sfKyn.png|502](https://img.memset0.cn/2024/06/12/dv7sfKyn.png)\n\n## 5. å»¶è¿Ÿåˆ†æ Delay Analysis\n\næ³¨æ„ $t_\\text{PLH} = t_\\text{PHL}$ åŒºåˆ†çš„æ˜¯è¾“å‡ºè€Œä¸æ˜¯è¾“å…¥ã€‚\n\n## 6. æ—¶åºç”µè·¯è®¾è®¡ Sequential Circuit Design\n\n### 6.1. è®¾è®¡æ­¥éª¤ The Design Procedure\n\n1. ç¡®å®šç³»ç»Ÿçš„è¡Œä¸ºï¼›\n   1. æè¿°ç³»ç»Ÿè¡Œä¸ºè¿‡ç¨‹ä¸­ï¼Œè¦æ³¨æ„çŠ¶æ€çš„å¤ç”¨ï¼ˆä¸è¿‡å¹¶éçŠ¶æ€è¶Šå°‘æˆæœ¬å°±è¶Šå°ï¼Œè¿™é‡Œæœ‰è§¦å‘å™¨æ•°é‡å’Œç»„åˆé€»è¾‘ç”µè·¯çš„ trade-offï¼‰ï¼›\n   2. ç¡®å®šç”µè·¯çš„åˆå§‹çŠ¶æ€ï¼ˆ**å¤ä½çŠ¶æ€(reset state)**ï¼Œé€šè¿‡ç»™å®šå¤ä½(reset)ä¿¡å·å®ç°ï¼‰ï¼›\n      - å¤ä½ä¸€èˆ¬å¯ä»¥æ˜¯å¼‚æ­¥çš„ï¼›\n2. é˜è¿°è¾“å…¥å’Œè¾“å‡ºä¹‹é—´çš„é€»è¾‘å…³ç³»ï¼Œå¹¶ç”¨çœŸå€¼è¡¨æˆ–é€»è¾‘è¡¨è¾¾å¼è¡¨è¾¾å‡ºæ¥ï¼›\n3. ç»™è®¾è®¡å¥½çš„çŠ¶æ€ç¼–ç èµ‹å€¼ï¼Œå¾—åˆ°å…·ä½“çš„çŠ¶æ€è¡¨ï¼›\n   1. æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ æŒ‰è®¡æ•°é¡ºåºã€ æŒ‰æ ¼é›·ç ã€ç”¨ç‹¬çƒ­ç  æ¥ç»™çŠ¶æ€èµ‹å€¼ï¼Œæ›´ç³»ç»Ÿçš„æ–¹æ³•æ¯”è¾ƒå¤æ‚ï¼Œä¸åšè®¨è®ºï¼›\n   2. å…¶ä¸­è¿˜æœ‰ä¸€ç§æƒ…å†µæ˜¯æ‰€éœ€è¦çš„çŠ¶æ€ä¸èƒ½å®Œæ•´å¡«å…… Â 2ğ‘›2nÂ  ç§æƒ…å†µï¼Œéœ€è¦è®¾è®¡æ— æ•ˆçŠ¶æ€ï¼Œè¿™ç§æ—¶å€™å¯ä»¥ä¸è€ƒè™‘å®ƒä»¬ï¼›\n4. æ ¹æ®çŠ¶æ€è¡¨ç¡®å®šä½¿ç”¨çš„è§¦å‘å™¨åŠå…¶è¾“å…¥æ–¹ç¨‹ï¼›\n5. æ ¹æ®çŠ¶æ€è¡¨ç¡®å®šè¾“å‡ºæ–¹ç¨‹ï¼›\n6. ä¼˜åŒ–è¾“å…¥æ–¹ç¨‹å’Œè¾“å‡ºæ–¹ç¨‹ï¼›\n7. å°†ä¼˜åŒ–åçš„é€»è¾‘è®¾è®¡å·¥è‰ºæ˜ å°„åˆ°ç¡¬ä»¶å®ç°ä¸Šï¼›\n8. éªŒè¯æ­£ç¡®æ€§ï¼ˆåœ¨ä»¿çœŸç¯å¢ƒä¸­ï¼‰ï¼›\n   - ä¸»è¦å°±æ˜¯çœ‹èƒ½ä¸èƒ½å¤ç°çŠ¶æ€å›¾ï¼›\n\n![|416](https://img.memset0.cn/2024/05/09/Urf7XFN3.png)\n\n### 6.2. çŠ¶æ€èµ‹å€¼ State Assignment\n\nç”¨ $n$ ä½äºŒè¿›åˆ¶ç»™ $m$ ç§çŠ¶æ€å„è‡ªåˆ†é…ä¸€ä¸ªä¸åŒçš„ç¼–ç ï¼Œéœ€è¦ä½¿ç”¨ $n$ ä¸ªè§¦å‘å™¨ã€‚å‰©ä½™ $2^n-m$ ä¸ªçŠ¶æ€æœªä½¿ç”¨ï¼Œå¯è§†ä¸ºä¸å®šé¡¹ã€‚\n\nå¸¸è§çš„çŠ¶æ€èµ‹å€¼æ–¹æ³•å¦‚ä¸‹ï¼š\n\n| èµ‹å€¼æ–¹æ³•                                 | ç‰¹æ€§                                     |\n| ---------------------------------------- | ---------------------------------------- |\n| æŒ‰ç…§**è®¡æ•°çš„é¡ºåº(counting order)** åˆ†é…  |                                          |\n| æŒ‰ç…§**æ ¼é›·ç é¡ºåº(Gray code order)** åˆ†é… | åœ¨ä½¿ç”¨å¡è¯ºå›¾ä½œåŒ–ç®€æ—¶éå¸¸æ–¹ä¾¿             |\n| **å•çƒ­ç‚¹(one-hot)** èµ‹å€¼                 | æ¯ä¸ªçŠ¶æ€å¯¹åº”ä¸€ä¸ªè§¦å‘å™¨ï¼Œè·³å˜æœ€å°‘æ•ˆç‡æœ€é«˜ |\n","publishedTitle":"ã€Œæ•°å­—é€»è¾‘è®¾è®¡ã€Chapter 4. Sequential Circuits"}},{"id":"81dd95b1-55f3-56d9-9a8c-8ce51495fde0","fields":{"slug":"/course/dd/note/6/","plainText":"\n> æœ¬ç¯‡ç¬”è®°è¯¦ç»†ä»‹ç»äº†å¯„å­˜å™¨åŠå…¶ä¼ è¾“æ“ä½œçš„åŸºæœ¬æ¦‚å¿µï¼ŒåŒ…æ‹¬å¯„å­˜å™¨çš„ç»“æ„ã€æ§åˆ¶ä¿¡å·çš„ä½œç”¨ã€å¯„å­˜å™¨ä¼ è¾“è¯­è¨€ï¼ˆRTLï¼‰çš„ä½¿ç”¨ï¼Œä»¥åŠä¸åŒç±»å‹çš„å¯„å­˜å™¨å’Œè®¡æ•°å™¨çš„è®¾è®¡æ–¹æ³•ã€‚å†…å®¹æ¶µç›–äº†å¹¶è¡ŒåŠ è½½ã€åŒå‘ç§»ä½ã€è®¡æ•°å™¨çš„å·¥ä½œåŸç†åŠå…¶è®¾è®¡æ³¨æ„äº‹é¡¹ï¼Œæœ€åæ¢è®¨äº†åŸºäºå¤šè·¯é€‰æ‹©å™¨çš„è®¾è®¡æ–¹æ³•å’Œæ—¶åºç”µè·¯çš„è®¾è®¡æ–¹æ³•ã€‚<small style=\"font-style: italic; opacity: 0.5\">ï¼ˆç”± gpt-4o-mini ç”Ÿæˆæ‘˜è¦ï¼‰</small>\n\n<!-- more -->\n\n## 1. å¯„å­˜å™¨ Registers\n\nä¸€ä¸ª $n$ ä½çš„å¯„å­˜å™¨åŒ…å« $n$ ä¸ªè§¦å‘å™¨ï¼Œè¿˜æœ‰è‹¥å¹²ç»„åˆç”µè·¯æ¥å®ç°ç‰¹å®šåŠŸèƒ½ï¼Œå¦‚ç§»ä½ã€è®¡æ•°ç­‰ã€‚\n\nä¸€èˆ¬é€šè¿‡ä¸€ä¸ª $Load$ ä¿¡å·æ¥æ§åˆ¶å¯„å­˜å™¨ï¼Œ$Load$ ä¿¡å·ä¸€èˆ¬é€šè¿‡æ›´é«˜é˜¶çš„ç”µè·¯æ§åˆ¶ã€‚å¯ä»¥æŠŠ $Load$ ä¿¡å·å’Œ $Clock$ ä¿¡å·çš„ AND æ¥ä½œä¸ºè§¦å‘å™¨çš„æ§åˆ¶ä¿¡å·ï¼š\n\n- $Load=1$ è¡¨ç¤º **è½½å…¥(load)**ï¼Œæ–°æ•°æ®è¢«å†™å…¥å¯„å­˜å™¨ã€‚\n- $Load=0$ è¡¨ç¤º **å‚¨å­˜(store)**ï¼Œå¯„å­˜å™¨ä¿æŒå·²ç»å†™å…¥çš„æ•°æ®ã€‚\n\n![SFJK7MOd.png|481](https://img.memset0.cn/2024/06/13/SFJK7MOd.png)\n\n> [!warning] **æ—¶é’Ÿåæ–œ(clock skew)**\n>\n> å¦‚æœç»™æ—¶é’Ÿä¿¡å·åŠ ä¸Šä¸€ä¸ªéé—¨ï¼Œé‚£ä¹ˆä¸åŒè§¦å‘å™¨çš„æ§åˆ¶ä¿¡å·çš„æ—¶é—´å­˜åœ¨ä¸€ä¸ªéé—¨çš„å»¶æ—¶ã€‚\n>\n> ä¸€ç§è§£å†³æ–¹æ¡ˆæ˜¯æ—¶é’Ÿä¿¡å·ç›´æ¥æ¥åˆ°æ‰€æœ‰è§¦å‘å™¨çš„æ§åˆ¶ä¿¡å·ä¸Šï¼Œä½†è§¦å‘å™¨çš„è¾“å…¥ä¿¡å·æ¥ä¸€ä¸ª 2-to-1 MUXï¼Œæ ¹æ®æ§åˆ¶ä¿¡å·é€‰æ‹©æ˜¯åŠ è½½è§¦å‘å™¨çš„è¾“å‡ºï¼Œè¿˜æ˜¯ä»è¾“å…¥æµä¸­åŠ è½½ã€‚\n>\n> ![|550](https://img.memset0.cn/2024/06/13/PZ5h7mei.png)\n\nå¦‚æœè½½å…¥æ“ä½œåœ¨åŒä¸€ä¸ªæ—¶é’Ÿè„‰å†²ä¸­å®Œæˆï¼Œæˆ‘ä»¬ç§°ä¹‹æ˜¯**å¹¶è¡Œ(parallel)** çš„ã€‚\n\n## 2. å¯„å­˜å™¨ä¼ è¾“æ“ä½œ Register Transfer Operations\n\n**å¯„å­˜å™¨ä¼ è¾“æ“ä½œ(register transfer operation)**ï¼šå¤„ç†å­˜å‚¨åœ¨å¯„å­˜å™¨ä¸­çš„æ•°æ®çš„æ“ä½œã€‚\n\n![CPBN1eDH.png|517](https://img.memset0.cn/2024/05/16/CPBN1eDH.png)\n\n**å¾®æ“ä½œ(microoperation)**ï¼šå…³äºå¯„å­˜å™¨ä¼ è¾“çš„åˆçº§æ“ä½œï¼ŒåŒ…æ‹¬ load/count/shift/add/bitwise OR ç­‰ç­‰ã€‚\n\n### 2.1. å¯„å­˜å™¨ä¼ è¾“è¯­è¨€ Register Transfer Language\n\n**å¯„å­˜å™¨ä¼ è¾“è¯­è¨€(register transfer language, RTL)** ç”¨æ¥è¡¨è¿°å¯„å­˜å™¨ä¼ è¾“æ“ä½œã€‚\n\n- å­—æ¯å’Œæ•°å­—ï¼šè¡¨ç¤ºå¯„å­˜å™¨\n- å°æ‹¬å·ï¼šè¡¨ç¤ºä½çš„èŒƒå›´ï¼ˆå¦‚ `R(1)`ã€`PC(7:0)`ï¼‰\n- ç®­å¤´ï¼šè¡¨ç¤ºæ•°æ®çš„ä¼ è¾“ï¼ˆå¦‚ `R1 <- R2`)\n- é€—å·ï¼šç”¨äºåˆ†å¼€å¤šæ¬¡æ“ä½œ\n- æ–¹æ‹¬å·ï¼šï¼ˆå¯é€šè¿‡å¯„å­˜å™¨ï¼‰æŒ‡å®šå†…å­˜åœ°å€ï¼ˆå¦‚ `R0 <- M[AR]`ï¼‰\n- **æ¡ä»¶ä¼ è¾“(conditional transfer)**ï¼šå¦‚ `K1: (R2 <- R1)` è¡¨ç¤ºå½“ `K1` å¯„å­˜å™¨çš„å€¼ä¸º 1 æ—¶æ‰§è¡Œ `R2 <- R1`ã€‚\n\n> [!note]- å…³äºå¯„å­˜å™¨ä¼ è¾“æ“ä½œçš„ç¡¬ä»¶æè¿°è¯­è¨€çš„æ¯”è¾ƒ\n>\n> ![|600](https://img.memset0.cn/2024/05/16/cOaKwRmC.png)\n\nå¦‚ç”¨ RTL æ¥æè¿°ä¸€ä¸ªåŠ å‡æ³•å™¨çš„è¡Œä¸ºï¼ˆ$\\text X=0$ æ—¶åŠ æ³•ï¼Œ$\\text X= 1$ æ—¶å‡æ³•ï¼‰ï¼š\n\n$$\n\\begin{aligned}\n\\overline{\\text{X}}\\ \\text{K1}&: \\text{R1} \\leftarrow \\text{R1} + \\text{R2}\\\\\n\\text{X}\\ \\text{K1} &: \\text{R1} \\leftarrow \\text{R1} + \\overline{\\text{R2}} + 1\n\\end{aligned}\n$$\n\n### 2.2. æ•°æ®ä¼ è¾“ç»“æ„ Register Transfer Structures\n\n#### 2.2.1. åŸºäºå¤šè·¯é€‰æ‹©å™¨çš„ä¼ è¾“ Multiplexer-Based Transfers\n\nå¤šä¸ªè¾“å…¥é€šè¿‡ä¸€ä¸ªå¤šè·¯é€‰æ‹©å™¨è¿›è¡Œé€‰æ‹©ï¼Œä»è€Œç»™åˆ°ç›®æ ‡å¯„å­˜å™¨ä¸­ã€‚\n\n![YWD6lMjz.png|415](https://img.memset0.cn/2024/06/13/YWD6lMjz.png)\n\n#### 2.2.2. åŸºäºä¸“æœ‰çš„å¤šè·¯é€‰æ‹©å™¨çš„ä¼ è¾“ Dedicated MUX-Based Transfers\n\nè¿™é‡Œ**ä¸“æœ‰çš„(dedicated)** çš„ MUX çš„æ„æ€æ˜¯è¯´ï¼Œæ¯ä¸ªå¯„å­˜å™¨çš„è¾“å…¥éƒ½é€šè¿‡ä¸€ä¸ªç‹¬ç«‹çš„ MUX è¿›è¡Œé€‰æ‹©ã€‚\n\n![SXBI8Gww.png|344](https://img.memset0.cn/2024/06/13/SXBI8Gww.png)\n\n- PROSï¼šå¯ä»¥å®ç°åœ¨ä¸€ä¸ªæ—¶é’ŸèŠ‚æ‹ä¸­åŒæ—¶çš„æ•°æ®ä¼ è¾“ã€‚\n- CONSï¼šé—¨è¾“å…¥ä»£ä»·é«˜ã€‚\n  - GN çš„è®¡ç®—ï¼šMUX çš„åç›¸å™¨æ˜¯å¯ä»¥å…±äº«çš„ï¼Œæ¯ä¸€ä¸ª MUX é‡Œéœ€è¦ä¸¤ä¸ª 2 è¾“å…¥ä¸é—¨å’Œä¸€ä¸ª 2 è¾“å…¥æˆ–é—¨ï¼Œå…± $GN = 3 \\times 6 + 3 = 21$ã€‚\n\n#### 2.2.3. å¤šè·¯é€‰æ‹©å™¨æ€»çº¿ Multiplexer Bus\n\n**æ€»çº¿(bus)** çš„ä¸»è¦æ€æƒ³åœ¨äºè®©å¤šä¸ªå¯„å­˜å™¨å…±äº«ä¸€ä¸ªå¤šè·¯é€‰æ‹©å™¨å’Œæ•°æ®ä¼ è¾“è·¯å¾„ï¼ŒæŠŠè¿™ä¸ªå¤šè·¯é€‰æ‹©å™¨ç§°ä½œæ˜¯**å…±äº«çš„(shared)**ã€‚\n![vmPTRYOb.png|426](https://img.memset0.cn/2024/06/13/vmPTRYOb.png)\n\n![dWamWDYH.png|321](https://img.memset0.cn/2024/06/13/dWamWDYH.png)\n\n#### 2.2.4. ä¸‰æ€é—¨æ€»çº¿ Three-State Bus\n\nä¸‰å°æ€»çº¿çš„å®ç°éœ€è¦ç”¨åˆ°**ä¸‰æ€é—¨(tri-state gate)**ï¼Œå› ä¸ºå…¶å¯ä»¥è¾“å‡ºé«˜é˜»æ€ï¼Œä»è€Œä½¿å¾—æ¥è‡ªå¤šä¸ªå¯„å­˜å™¨çš„è¾“å‡ºå¯ä»¥ç›´æ¥è¿èµ·æ¥è€Œä¸éœ€è¦é€»è¾‘é—¨æˆ– MUX çš„æ§åˆ¶ã€‚\n\n![MhJmWI1e.png|458](https://img.memset0.cn/2024/05/16/MhJmWI1e.png)\n\n## 3. ç§»ä½å¯„å­˜å™¨ Shift Registers\n\nä¸€ä¸ªæ™®é€šçš„**ç§»ä½å¯„å­˜å™¨(shift register)** å¦‚ä¸‹ï¼š\n\n![GWS45J0I.png|425](https://img.memset0.cn/2024/05/16/GWS45J0I.png)\n\n- **ä¸²è¡Œè¾“å…¥(serial input)**ï¼š$\\text{In}$ã€‚\n- **ä¸²è¡Œè¾“å‡º(serial output)**ï¼š$\\text{Out}$ã€‚\n- **å¹¶è¡Œè¾“å‡º(parallel output)**ï¼š$\\text A$ã€$\\text B$ã€$\\text C$ã€$\\text{Out}$ã€‚\n\n### 3.1. å¹¶è¡ŒåŠ è½½ç§»ä½å¯„å­˜å™¨ Parallel Load Shift Register\n\n![yE3R4xpn.png|406](https://img.memset0.cn/2024/05/16/yE3R4xpn.png)\n\né€šè¿‡ç»™è¾“å…¥ä¿¡å·åŠ ä¸€ä¸ª 2-to-1 MUX å¯ä»¥å®ç°å¹¶è¡ŒåŠ è½½åŠŸèƒ½ï¼Œè¿™æ ·åœ¨ SHIFT ä¸º 0 æ—¶ï¼Œç§»ä½å¯„å­˜å™¨ $\\{A,B\\}$ ä¼šç›´æ¥ä» $\\{D_A, D_B\\}$ åŠ è½½æ•°æ®ï¼Œå¹¶ä¸”è¿™ä¸€åŠ è½½è¿‡ç¨‹åœ¨åŒä¸€æ—¶é—´å‘ç”Ÿï¼ˆæ˜¯å¹¶è¡Œçš„ï¼‰ã€‚\n\n![aUweTYxa.png|499](https://img.memset0.cn/2024/05/16/aUweTYxa.png)\n\nå¦‚æœéœ€è¦æ”¯æŒ**ä¿æŒ(hold)** åŠŸèƒ½ï¼Œå¯ä»¥æ¢æˆ 3-to-1 MUXï¼Œå¹¶æ¥ä¸€è·¯ä»è‡ªå·±è¿™æ¥çš„è¾“å‡ºï¼ŒåŠŸèƒ½è¡¨å¦‚ä¸‹ï¼š\n\n| Shift | Load | Operation       |\n| ----- | ---- | --------------- |\n| 0     | 0    | ä¿æŒ no change  |\n| 0     | 1    | åŠ è½½ load       |\n| 1     | x    | ç§»ä½ shift down |\n\næ³¨æ„ï¼Œå®ç°ä¿æŒåŠŸèƒ½æ—¶ï¼Œæˆ‘ä»¬ä¸èƒ½ç›´æ¥ç»™æ—¶é’Ÿä¿¡å· CP åŠ ä¸€ä¸ªä¸é—¨ï¼Œè¿™æ ·çš„è¯ä¸é—¨çš„å»¶è¿ŸåŒæ ·ä¼šå¯¼è‡´ä¸Šæ–‡æåˆ°è¿‡çš„**æ—¶é’Ÿæ­ªæ–œ(clock skew)** é—®é¢˜ã€‚\n\n### 3.2. åŒå‘ç§»ä½å¯„å­˜å™¨ Bidirectional Shift Registers\n\nå†æ¢ç”¨ 4-to-1 MUX å¯ä»¥è®©æˆ‘ä»¬çš„ç§»ä½å¯„å­˜å™¨åŒæ—¶æ”¯æŒä¸¤ä¸ªæ–¹å‘çš„ç§»ä½æ“ä½œï¼Œç”µè·¯çš„ä¸€éƒ¨åˆ†å¦‚ä¸‹å›¾æ‰€ç¤ºã€‚\n\n![r45GWNkA.png|307](https://img.memset0.cn/2024/05/16/r45GWNkA.png)\n\nå…¶åŠŸèƒ½è¡¨å¦‚ä¸‹ï¼ˆ$S_1,S_0$ ä¸ºæ§åˆ¶ä¿¡å·ï¼‰ï¼š\n\n| $S_1$ | $S_0$ | Operation              |\n| ----- | ----- | ---------------------- |\n| 0     | 0     | ä¿æŒ no change         |\n| 0     | 1     | å‘ä¸‹ç§»ä½ shift down    |\n| 1     | 0     | å‘ä¸Šç§»ä½ shift up      |\n| 1     | 1     | å¹³è¡ŒåŠ è½½ parallel load |\n\nå¦‚æœéœ€è¦è®©ç§»ä½å¯„å­˜å™¨æ”¯æŒæ›´å¤šåŠŸèƒ½ï¼Œæ›´æ¢ MUX å¹¶è®¾è®¡ç›¸åº”ç”µè·¯å³å¯ã€‚\n\n## 4. è®¡æ•°å™¨ Counters\n\n![zNJtJh5M.png|453](https://img.memset0.cn/2024/06/13/zNJtJh5M.png)\n\n### 4.1. çº¹æ³¢è®¡æ•°å™¨ Ripple Counter\n\nè§¦å‘å™¨ $D_A$ æŠŠæ—¶é’Ÿä¿¡å·ä½œä¸ºæ§åˆ¶ä¿¡å· $C_R$ï¼Œå…¶åè½¬é¢‘ç‡æ˜¯æ—¶é’Ÿä¿¡å·çš„ä¸€åŠï¼›$D_B$ æŠŠ $D_A$ çš„è¾“å‡ºä½œä¸ºæ§åˆ¶ä¿¡å·ï¼Œå…¶åè½¬é¢‘ç‡æ˜¯ $D_A$ çš„ä¸€åŠï¼Œæ˜¯æ—¶é’Ÿä¿¡å·çš„å››åˆ†ä¹‹ä¸€ã€‚ä»è€Œå®ç°è®¡æ•°å™¨çš„åŠŸèƒ½ã€‚\n\n- **æœ€ä½æœ‰æ•ˆä½(LSB)**\n- **æœ€é«˜æœ‰æ•ˆä½(MSB)**\n\nä»æœ€ä½æœ‰æ•ˆä½å¼€å§‹è®¡æ•°ï¼Œä½ä½è§¦å‘å™¨çš„è¾“å‡ºä½œä¸ºæ›´é«˜ä¸€ä½è§¦å‘å™¨çš„æ§åˆ¶ä¿¡å·ã€‚\n\n![q5pDrDSj.png|298](https://img.memset0.cn/2024/05/16/q5pDrDSj.png)\n\næ—¶å»¶è®¡ç®—ï¼šåˆ†ææ˜¯ä¸Šå‡æ²¿è¿˜æ˜¯ä¸‹é™æ²¿ï¼Œæˆ–è€…ç›´æ¥ $t_{pd}$ã€‚\n\n![4BXhdNoW.png|498](https://img.memset0.cn/2024/06/13/4BXhdNoW.png)\n\n### 4.2. åŒæ­¥è®¡æ•°å™¨ Synchronous Counters\n\nè§¦å‘å™¨åªç”¨æ¥ä¿å­˜çŠ¶æ€ï¼Œè®¡æ•°çš„åŠŸèƒ½ç”¨ç»„åˆç”µè·¯ï¼ˆ$n$ ä½è®¡æ•°å™¨åªéœ€è¦ $n$ ä¸ªåŠåŠ å™¨ï¼‰å®ç°ã€‚æ‰€æœ‰è§¦å‘å™¨åŒæ­¥æ”¹å˜ã€‚\n\n- **è®¡æ•°ä½¿èƒ½(count enable = CE)**ï¼šæ§åˆ¶æ˜¯å¦è¿›è¡Œè®¡æ•°ï¼Œå½“ $\\text{CE} = 1$ ä¸”è¾¹æ²¿åˆ°æ¥æ—¶è¿›è¡Œä¸€æ¬¡è®¡æ•°ï¼Œå½“ $\\text{CE} = 0$ æ—¶å¤„äºä¿æŒçŠ¶æ€ã€‚\n- **è¿›ä½è¾“å‡º(carry output = CO)**ï¼šç»™å‡ºæœ€é«˜çš„è¿›ä½ä½œä¸ºè¾“å‡ºï¼Œå¯ä»¥æŒ‡ç¤ºè®¡æ•°å™¨æ˜¯å¦è¾¾åˆ°ä¸Šç•Œã€‚\n\n![HkSwHtKj.png|547](https://img.memset0.cn/2024/06/13/HkSwHtKj.png)\n\nç±»ä¼¼äºåŠ æ³•å™¨ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥åœ¨å¹¶è¡Œè®¡æ•°å™¨ä¸­å®ç°æå‰è¿›ä½ï¼š\n\n![p1gE6i6d.png|482](https://img.memset0.cn/2024/06/13/p1gE6i6d.png)\n\n### 4.3. æ”¯æŒå¹³è¡ŒåŠ è½½çš„è®¡æ•°å™¨ Counter with Parallel Load\n\né€šè¿‡ä¸€ä¸ª 2-to-1 MUX æ§åˆ¶æ˜¯ä» $\\text D$ ä¸­å¹¶è¡ŒåŠ è½½è¿˜æ˜¯ä»ç»„åˆé€»è¾‘ä¸­åŠ è½½ã€‚\n\n![k3YE7pPN.png|499](https://img.memset0.cn/2024/06/13/k3YE7pPN.png)\n\n### 4.4. æ¨¡ N çš„è®¡æ•°å™¨ Counting Modulo N\n\næˆ‘ä»¬ä»¥è®¾è®¡æ¨¡ 10 çš„è®¡æ•°å™¨ï¼ˆBCD è®¡æ•°å™¨ä¸ºä¾‹ï¼‰ï¼Œé‚£ä¹ˆåªæœ‰ $0$ åˆ° $9$ æ˜¯**æœ‰æ•ˆçš„(valid)**ï¼Œå‰©ä¸‹çš„ 6 ä¸ªçŠ¶æ€éƒ½æ˜¯æœªä½¿ç”¨çš„çŠ¶æ€ã€‚\n\n![5yHkPXH1.png|398](https://img.memset0.cn/2024/06/13/5yHkPXH1.png)\n\nå†™å‡ºçŠ¶æ€è½¬ç§»çš„æ¿€åŠ±æ–¹ç¨‹ï¼Œå¹¶é€šè¿‡å¡è¯ºå›¾åŒ–ç®€ï¼Œå¯ä»¥å¾—åˆ°æˆ‘ä»¬éœ€è¦çš„ç»„åˆé€»è¾‘ã€‚\n\n![j0dWfJp0.png|446](https://img.memset0.cn/2024/06/13/j0dWfJp0.png)\n\néœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè™½ç„¶å‰©ä½™ 6 ä¸ªçŠ¶æ€æ˜¯æœªä½¿ç”¨çŠ¶æ€ï¼Œä½†æ˜¯å¦‚æœè®¡æ•°å™¨å› ä¸ºæ„å¤–å¤„äºæœªä½¿ç”¨çŠ¶æ€æ—¶ï¼Œä»–çš„ä¸‹ä¸€çŠ¶æ€æ˜¯ç¡®å®šçš„ï¼Œç”»å›¾å¯çŸ¥æˆ‘ä»¬è®¾è®¡çš„è¿™ä¸€è®¡æ•°å™¨åœ¨æœ‰é™æ­¥ååˆä¼šå›åˆ°æœ‰æ•ˆçŠ¶æ€ï¼ˆç§°ä¸ºè‡ªæ¢å¤èƒ½åŠ›ï¼›å¹¶éå¯¹äºæ‰€æœ‰è®¡æ•°å™¨éƒ½æˆç«‹åï¼Œæœ€å¥½è®¾è®¡æˆè¿™æ ·çš„ï¼‰ã€‚æˆ‘ä»¬ä¹Ÿå¯ä»¥è®¾è®¡ä¸€ä¸ª $\\text{Error}$ è¾“å‡ºï¼Œç”¨äºæŒ‡ç¤ºæ˜¯å¦è¿›å…¥äº†æœªä½¿ç”¨çŠ¶æ€ï¼ŒåŒæ ·å¯ç”¨å¡è¯ºå›¾è¿›è¡ŒåŒ–ç®€ã€‚\n\nä¸æ¨èçš„è®¾è®¡ï¼ˆè‡ªæ€å¼è®¡æ•°å™¨ï¼‰ï¼šè®©æ¨¡ $n$ çš„è®¡æ•°å™¨åœ¨è¾“å‡ºå˜æˆ $n$ æ—¶ç›´æ¥ç»™æ‰€æœ‰å¯„å­˜å™¨å¼‚æ­¥æ¸…é›¶ã€‚å¦‚æœå¼‚æ­¥æ¸…é›¶è¿‡ç¨‹çš„æ—¶å»¶ä¸åŒï¼Œå¯èƒ½â€œå¡åœ¨â€ä¸­é—´çš„ä»»æ„æœ‰æ•ˆçŠ¶æ€ï¼Œéå¸¸ä¸ç¨³å®šã€‚\n\n## 5. å¯„å­˜å™¨å•å…ƒè®¾è®¡\n\n### 5.1. åŸºäº MUX çš„è®¾è®¡æ–¹æ³• Multiplexer Approach\n\n- **å¯„å­˜å™¨åŠŸèƒ½(register functions)**ï¼šå¯ä»¥é€šè¿‡å¯„å­˜å™¨ä¼ è¾“è¯­è¨€ RTL æ¥æè¿°ã€‚\n\n- **æ§åˆ¶è¾“å…¥(control inputs)**ï¼šè¾“å…¥æ§åˆ¶ä¿¡å·ï¼Œæ§åˆ¶ä¿¡å·çš„å¯ä»¥æ˜¯**ç¼–ç çš„(encoded)** æˆ–æœªç¼–ç çš„ã€‚\n\n![btfn5DDT.png|428](https://img.memset0.cn/2024/06/13/btfn5DDT.png)\n\n- **æ•°æ®è¾“å…¥(date inputs)**ï¼šä»å¯„å­˜å™¨ä¸­è¾“å…¥ã€‚\n\n![](https://img.memset0.cn/2024/06/13/Ds1gYGUj.png)\n\n> [!quote] Example\n>\n> ![cQwlfOFm.png|464](https://img.memset0.cn/2024/06/13/cQwlfOFm.png)\n\n### 5.2. åŸºäºæ—¶åºç”µè·¯çš„è®¾è®¡æ–¹æ³• Sequential Circuit Design Approach\n\nè¿™é‡ŒçŠ¶æ€æœ¬èº«å°±æ˜¯è¾“å‡ºï¼Œæ‰€ä»¥ä¸€å®šæ˜¯æ‘©å°”å‹ç”µè·¯ã€‚ä½¿ç”¨æ—¶åºç”µè·¯çš„ç›¸å…³æ–¹æ³•è¿›è¡Œè®¾è®¡ï¼Œè™½ç„¶ç»“æœæ›´ä¼˜ä½†è®¾è®¡è¿‡ç¨‹éå¸¸éº»çƒ¦ã€‚\n\n> [!quote] Example\n>\n> ![|430](https://img.memset0.cn/2024/06/13/35GGfbrf.png)\n","publishedTitle":"ã€Œæ•°å­—é€»è¾‘è®¾è®¡ã€Chapter 6. Registers & Register Transfers"}},{"id":"25cb9085-132a-5ad5-814a-4ae9bb394663","fields":{"slug":"/course/dm/note/1/","plainText":"\n> æœ¬ç¯‡ç¬”è®°ä»‹ç»äº†å‘½é¢˜é€»è¾‘çš„åŸºæœ¬æ¦‚å¿µï¼ŒåŒ…æ‹¬å‘½é¢˜ã€é€»è¾‘è¿ç®—ç¬¦ã€æ¡ä»¶è¯­å¥ã€çœŸå€¼è¡¨åŠå…¶åº”ç”¨ç­‰å†…å®¹ã€‚æ¥ç€ï¼Œè®¨è®ºäº†é€»è¾‘ç­‰å€¼å¼ã€é€»è¾‘å®šå¾‹ã€å…¨åŠŸèƒ½é›†å’Œæ ‡å‡†å¼ç­‰é‡è¦ä¸»é¢˜ã€‚æœ€åï¼Œç¬”è®°è¿˜æ¶µç›–äº†è°“è¯é€»è¾‘ã€åµŒå¥—é‡è¯ã€æ¨ç†å‡†åˆ™å’Œè¯æ˜æ–¹æ³•ç­‰å†…å®¹ï¼Œæä¾›äº†å¯¹é€»è¾‘æ¨ç†å’Œè¯æ˜çš„æ·±å…¥ç†è§£ã€‚<small style=\"font-style: italic; opacity: 0.5\">ï¼ˆç”± gpt-4o-mini ç”Ÿæˆæ‘˜è¦ï¼‰</small>\n\n<!-- more -->\n\n> [!note] Word Table\n>\n> - **æœ‰ç†æ•°(rational)**\n> - **åä¾‹(counterexample)**\n> - **å‰æ(premise)**\n\n## 1. å‘½é¢˜é€»è¾‘ Propositional Logic\n\n### 1.1. å‘½é¢˜ Propositions\n\n**å‘½é¢˜(proposition)**ï¼šA proposition is a **declarative sentence** that is either `true` or `false`, but not both.\n\n- **æ‚–è®º(paradox)** ä¸å±äºå‘½é¢˜ï¼ˆe.g. _This statement is false._ or _I'm lying._ï¼‰\n\n**å‘½é¢˜é€»è¾‘(propositional logic)**ï¼šThe area of logic that deals with propositions.\n\n**å‘½é¢˜å˜é‡(propositional variable)**ï¼šSmall letters such as $p,q,r,s,\\ldots$ used to present propositions.\n\n**çœŸå€¼(truth value)**ï¼šT (true proposition), or F (false proposition)\n\nWe call a series of propositions **consistent(ä¸€è‡´çš„)** if they can possibly be satisfied at the same time.\n\n### 1.2. é€»è¾‘è¿ç®—ç¬¦ Logical Operators\n\n**é€»è¾‘è¿ç®—ç¬¦(logical operator)** or **é€»è¾‘è¿æ¥è¯(logical connective)**: be used to form compound propositions from existing propositions\n\n| Connectives                           |      Expression      | Note         |\n| ------------------------------------- | :------------------: | ------------ |\n| Negation (NOT)                        |      $\\lnot p$       |              |\n| å’Œå– Conjunction (AND)                |     $p \\land q$      |              |\n| æå– Disjunction (OR)                 |      $p\\lor q$       |              |\n| äº¦æˆ– Exclusive Or (XOR)               |     $p\\oplus q$      |              |\n| æ¡ä»¶ Conditional (IF-THEN)            |   $p\\rightarrow q$   |              |\n| åŒæ¡ä»¶ Biconditional (IF AND ONLY IF) | $p\\leftrightarrow q$ | å‚è§ä¸‹èŠ‚ä»‹ç» |\n\n- è‹±è¯­ä¸­çš„å•è¯ or æ—¢å¯ä»¥è¡¨ç¤º inclusive or ä¹Ÿå¯ä»¥è¡¨ç¤º exclusive orï¼ˆe.g. _George was born in 1956 or 1957._ï¼‰ï¼Œå–å†³äºå…·ä½“è¯­å¢ƒã€‚\n\né€»è¾‘è¿ç®—ç¬¦çš„**ä¼˜å…ˆçº§(precedence)** å¦‚ä¸‹ï¼š\n\n| $($ and $)$ | $\\lnot$ | $\\land$ | $\\lor$ | $\\rightarrow$ | $\\leftrightarrow$ |\n| :---------: | :-----: | :-----: | :----: | :-----------: | :---------------: |\n|      0      |    1    |    2    |   3    |       4       |         5         |\n\n### 1.3. æ¡ä»¶è¯­å¥ Conditional Statements\n\n**æ¨æ–­(implication)** or **æ¡ä»¶è¯­å¥(conditional statement)**ï¼š$p\\rightarrow q$, false when $p$ is true and $q$ is false. $p$ ä¸ºå‡æ—¶æ¨å‡ºä»€ä¹ˆéƒ½æ˜¯çœŸçš„ï¼Œ$p$ ä¸ºçœŸæ—¶å¿…é¡»æ¨å‡ºçœŸçš„æ‰ä¸ºçœŸã€‚\n\n> [!warning] æ³¨æ„ $p$ only if $q$\n>\n> åªæœ‰åœ¨ $q$ æˆç«‹çš„æ—¶å€™ $p$ æˆç«‹ï¼Œå³ $\\lnot q \\rightarrow \\lnot p$ï¼Œå®é™…ä¸Šç­‰ä»·äº $p\\rightarrow q$ã€‚\n>\n> > [!important]- More Equivalent Forms\n> >\n> > - If $p$, then $q$\n> > - $p$ implies $q$\n> > - If $p$, $q$\n> > - $q$ if $p$\n> > - $q$ when $p$\n> > - $q$ follows from $p$\n> > - $q$ whenever $p$\n> > - $p$ is a sufficient condition for $q$\n> > - $q$ is a necessary condition for $p$\n> > - $q$ unless $\\lnot p$\n\n- **å‡è®¾(hypothesis = antecedent = premise)**ï¼š$p$\n- **ç»“è®º(conclusion = consequence)**: $q$\n\nå¯¹äºæ¨æ–­ $p\\rightarrow q$ æˆ‘ä»¬å¯ä»¥å®šä¹‰ä»¥ä¸‹æ¡ä»¶è¯­å¥ï¼š\n\n- **é€†å‘½é¢˜(converse)**ï¼š$q\\rightarrow p$\n- **å¦å‘½é¢˜(inverse)**ï¼š$\\lnot p\\rightarrow \\lnot q$\n- **é€†å¦å‘½é¢˜(contrapositive)**ï¼š$\\lnot q\\rightarrow \\lnot p$\n\n> [!important] é€†å¦å‘½é¢˜ä¸åŸå‘½é¢˜ç­‰ä»·\n>\n> The contrapositive has **the same truth values** as the original implication.\n\n**åŒæ¡ä»¶è¯­å¥(biconditional statement)**ï¼šThe biconditional statement $p\\leftrightarrow q$ is the propostion â€œ$p$ if and only if $q$.â€ The biconditonal statemnt\n\n### 1.4. çœŸå€¼è¡¨ Truth Table\n\nè¦å­¦ä¼šç”»**çœŸå€¼è¡¨(truth table)**ã€‚\n\n- $n$ ä¸ªä¸åŒçš„å¸ƒå°”å˜é‡æ‰€ç”»çš„çœŸå€¼è¡¨åº”æœ‰ $2^n$ è¡Œã€‚\n\n> [!example]- ä¾‹ï¼š$n$ ä¸ªä¸åŒçš„å¸ƒå°”å˜é‡å¯ä»¥æ„æˆå¤šå°‘ä¸ªä¸ç­‰ä»·çš„é€»è¾‘è¡¨è¾¾å¼ï¼Ÿ\n> å¯ä»¥ä»çœŸå€¼è¡¨çš„è§’åº¦å…¥æ‰‹è€ƒè™‘ï¼Œ$n$ ä¸ªå¸ƒå°”å˜é‡æœ‰ $2^n$ ä¸ªå–å€¼ï¼Œè€Œè¿™å…¶ä¸­çš„æ¯ä¸€ä¸ªå–å€¼åœ¨ä»£å…¥é€»è¾‘è¡¨è¾¾å¼åéƒ½å¯ä»¥å¾—åˆ°ä¸€ä¸ª $0$ æˆ– $1$ï¼Œæ•…å…±æœ‰ $2^{2^n}$ ç§å¯èƒ½ï¼Œä¹Ÿå°±æ˜¯æœ‰ $2^{2^n}$ ç§ä¸åŒçš„é€»è¾‘è¡¨è¾¾å¼ã€‚\n\n### 1.5. å‘½é¢˜é€»è¾‘çš„åº”ç”¨ Applications of Propositional Logic\n\n#### 1.5.1. ç¿»è¯‘å¥å­ Translating Sentences\n\n- å°†è‹±è¯­å¥å­ç¿»è¯‘æˆé€»è¾‘è¡¨è¾¾å¼ï¼Œæ¥å‡å°‘è‡ªç„¶è¯­è¨€çš„**ä¸å‡†ç¡®(inaccuracy)** å’Œ**æ¨¡ç³Š(ambiguous)**ã€‚\n\n#### 1.5.2. ç³»ç»Ÿæè¿° System Specification\n\nå¯ä»¥ç”¨äºç²¾ç¡®åœ°æè¿°ç³»ç»Ÿéœ€æ±‚ã€è§£å†³ä¸€äº›é€»è¾‘è°œé¢˜ç­‰ã€‚\n\n#### 1.5.3. é€»è¾‘è°œé¢˜ Logical Puzzles\n\n> [!example] ä¾‹ï¼šå®ç®±è°œé¢˜\n> As a reward for saving his daughter from pirates, the King has given you the opportunity to win a treasure hidden inside one of three trunks. The two trunks that do not hold the treasure are empty. To win, you must select the correct trunk. Trunks 1 and 2 are each inscribed with the message â€œThis trunk is empty,â€ and Trunk 3 is inscribed with the message â€œThe treasure is in Trunk 2.â€ The Queen, who never lies, tells you that only one of these inscriptions is true, while the other two are wrong. Which trunk should you select to win?\n>\n> > [!quote]- Answer\n> >\n> > ![|width: 100%](https://img.memset0.cn/2024/03/01/9iCFuaLe.png)\n\n## 2. é€»è¾‘ç­‰å€¼å¼ Propositional Equivalences\n\n### 2.1. å¯¼è®º Introduction\n\nå…ˆå®šä¹‰ä»¥ä¸‹åŸºæœ¬æ¦‚å¿µï¼š\n\n- **æ°¸çœŸ(tautology)**ï¼šA proposition which is always true. (e.g. $p \\lor \\lnot p$)\n- **æ°¸å‡(contradiction)**ï¼šA proposition which is always false. (e.g. $p \\land \\lnot p$)\n- **å¯èƒ½å¼(contingency)**ï¼šA proposition which is neither a tautology nor a contradiction. (e.g. $p$)\n\nå‘½é¢˜ $p$ å’Œ $q$ æ˜¯**é€»è¾‘ç­‰å€¼(logically equivalent)** çš„ï¼Œå½“ä¸”ä»…å½“å‘½é¢˜ $p\\leftrightarrow q$ æ˜¯æ°¸çœŸçš„ã€‚å¯è¢«è¡¨ç¤ºä¸ºï¼š$p\\Leftrightarrow q$ æˆ– $p\\equiv q$ã€‚\n\n- ä¸€ä¸ªå¤åˆå‘½é¢˜æ˜¯**å¯æ»¡è¶³çš„(satisfiable)**ï¼šif there is an assignment of truth values to its variables that makes it true. ç§°è¿™ç»„èµ‹å€¼ä¸ºè¯¥å¤åˆå‘½é¢˜çš„è§£ã€‚\n- ä¸€ä¸ªå¤åˆå‘½é¢˜æ˜¯**ä¸å¯æ»¡è¶³çš„(unsatisfiable)**ï¼šwhen it is false for all assignments of truth values to its variables.\n\n### 2.2. é€»è¾‘å®šå¾‹ Logical Laws\n\n- å¯ä»¥ç”¨çœŸå€¼è¡¨æ¥è¯æ˜ä¸€äº›åŸºæœ¬çš„é€»è¾‘å®šå¾‹ï¼šå¯¹äºæ¶‰åŠåˆ° $n$ ä¸ªå˜é‡çš„ä¸¤ä¸ªå‘½é¢˜ï¼Œç”»å‡º $2^n$ ç§å¯èƒ½çš„å˜é‡å–å€¼ä¸‹çš„çœŸå€¼è¡¨ï¼Œè‹¥ä¸¤ä¸ªå‘½é¢˜çš„å€¼éƒ½ç›¸åŒåˆ™è¯´æ˜è¿™ä¸¤ä¸ªå‘½é¢˜æ˜¯é€»è¾‘ç­‰å€¼çš„ã€‚\n\n|              Name              |                                                Expression                                                | Note                   |\n| :----------------------------: | :------------------------------------------------------------------------------------------------------: | ---------------------- |\n|      ç»Ÿä¸€å¾‹ Identity Laws      |                       $p\\land \\text{T}\\equiv p \\quad\\quad p\\lor \\text{F} \\equiv p$                       |                        |\n|     é›¶ä¸€å¾‹ Domination Laws     |                 $p\\lor \\text{T}\\equiv \\text{T}\\quad\\quad p\\land \\text{F}\\equiv \\text{F}$                 |                        |\n|     å¹‚ç­‰å¾‹ Idempotent Laws     |                             $p\\land p \\equiv p \\quad\\quad p\\lor p \\equiv p$                              |                        |\n|   å¯¹åˆå¾‹ Double Negation Law   |                                         $\\lnot \\lnot p \\equiv p$                                         |                        |\n|    äº¤æ¢å¾‹ Commutative Laws     |                       $p\\lor q \\equiv q \\lor p\\quad\\quad p\\land q\\equiv q\\land p$                        |                        |\n|    ç»“åˆå¾‹ Associative Laws     |         $(p\\lor q)\\lor r\\equiv p\\lor (q\\lor r)$ <br > $(p\\land q)\\land r\\equiv p\\land(q\\land r)$         |                        |\n|    åˆ†é…å¾‹ Distributive Laws    | $p\\lor (q\\land r)\\equiv(p\\lor q)\\land (p\\lor r)$ <br> $p\\land (q\\lor r)\\equiv (p\\land q)\\lor (p\\land r)$ |                        |\n| **å¾·Â·æ‘©æ ¹å¾‹ De Morgan's Laws** |          $\\lnot(p\\lor q)\\equiv \\lnot p\\land \\lnot q$ <br> $\\lnot(p\\land q)=\\lnot p\\lor\\lnot q$           | **é‡è¦**               |\n|      å¦å®šå¾‹ Negation Laws      |                  $p\\lor \\lnot p\\equiv \\text{T}\\quad\\quad p\\land \\lnot p\\equiv \\text{F}$                  |                        |\n|     å¸æ”¶å¾‹ Absorption Laws     |                      $p\\lor (p\\land q)\\equiv p\\quad\\quad p\\land (p\\lor q) \\equiv p$                      |                        |\n|   é€†å¦å¾‹ Contrapositive Law    |                            $p\\rightarrow q \\equiv \\lnot q\\rightarrow \\lnot p$                            | å‘½é¢˜ä¸å®ƒçš„é€†å¦å‘½é¢˜ç­‰ä»· |\n|   **å¯¼å‡ºå¾‹ Exportation Law**   |                      $(p\\land q)\\rightarrow r\\equiv p\\rightarrow (q\\rightarrow r)$                       |                        |\n|         Absurdity Law          |                       $(p\\rightarrow q)\\land (p\\rightarrow \\lnot q)\\equiv \\lnot p$                       |                        |\n|   **è•´å«å¾‹ Implication Law**   |                                  $p\\rightarrow q \\equiv \\lnot p \\lor q$                                  | ç”¨äºå»æ‰ç®­å¤´           |\n|        Equivalence Law         |                    $p\\leftrightarrow q\\equiv (p\\rightarrow q)\\land (q\\rightarrow p)$                     |                        |\n\n### 2.3. å…¨åŠŸèƒ½é›† Functionally Complete Collection of Logical Operators\n\nåªéœ€è¦éƒ¨åˆ†è¿ç®—ç¬¦å°±å¯ä»¥è¡¨ç¤ºå‡ºæ‰€æœ‰å¯èƒ½çš„è¿ç®—ï¼Œç§°è¿™æ ·çš„ä¸€ä¸ªè¿ç®—ç¬¦é›†åˆä¸º**å…¨åŠŸèƒ½é›†(Functionally Complete Collection)**ã€‚\n\n**æå°å…¨åŠŸèƒ½é›†**ï¼š$\\{\\lnot, \\lor\\}$, $\\{\\lnot, \\land\\}$, $\\{|\\}$, $\\{\\downarrow\\}$ ç­‰ã€‚\n\n### 2.4. æ ‡å‡†å¼ Propositional Normal Forms\n\n#### 2.4.1. DNF/CNF\n\nå…ˆç»™å‡ºä»¥ä¸‹åŸºæœ¬å®šä¹‰ï¼š\n\n- A **å­—é¢é‡(literal)** is a variable or its negation.\n- Conjunctions with literals as conjuncts are called **åˆå–å­å¥(conjunctive clauses)** (clauses). é€šè¿‡ AND è¿æ¥èµ·æ¥çš„ä¸€ç»„å­—é¢é‡ã€‚\n\n**æ ‡å‡†å¼(Propositional Normal Forms)** æœ‰ä»¥ä¸‹ä¸¤ç§ï¼š\n\n- **æå–èŒƒå¼(Disjunctive Normal Form, DNF)**ï¼šA formula is said to be in disjunctive normal form if it is written as a disjunction, in which all the terms are conjunctions of literals. (e.g. $(p\\land q)\\lor(p\\land \\lnot q)$.)\n  - æœ€å¤–é¢ä¸€å±‚çš„è¿ç®—ç¬¦éƒ½æ˜¯æå– $\\lor$ï¼›\n  - æ‹¬å·å†…çš„è¿ç®—ç¬¦éƒ½æ˜¯åˆå– $\\land$ï¼›\n  - æ‹¬å·ä¸èƒ½åµŒå¥—ï¼›\n  - $\\lnot$ åªèƒ½å‡ºç°åœ¨å˜é‡å‰ã€‚\n- **åˆå–èŒƒå¼(Conjunctive Normal Form, CNF)**ï¼šå’Œ DNF çš„å®šä¹‰ç›¸åï¼›æŠŠ $\\land$ å’Œ $\\lor$ äº’æ¢ã€‚\n\n> [!important] Theorem\n>\n> Any formula $A$ is tautologically equivalent to **some** formula in DNF (CNF).\n>\n> > [!quote]- Proof\n> >\n> > å¯ä»¥é€šè¿‡çœŸå€¼è¡¨æ„é€ ï¼Œè¯¦è§ä¸‹é¢çš„ get the Full DNF of any formula éƒ¨åˆ†ã€‚\n> >\n> > Construct the truth table for the proposition. Then an equivalent proposition is the disjunction with n disjuncts (where n is the number of rows for which the formula evaluates to T). Each disjunct has m conjuncts where m is the number of distinct propositional variables. Each conjunct includes the positive form of the propositional variable if the variable is assigned T in that row and the negated form if the variable is assigned F in that row. This proposition is in disjunctive normal from.\n\n#### 2.4.2. Full DNF/CNF\n\n- A **æå°é¡¹(minterm)** is a conjunctive of literals in which each variable is represented exactly once.\n- A **æå¤§é¡¹(maxterm)** is a disjunctive of literals in which each variable is represented exactly once.\n\nå¯ä»¥ä»çœŸå€¼è¡¨ä¸­å¾—åˆ°**ä¸»æå–èŒƒå¼(Full Disjunctive Normal Form)**ï¼š\n\n- æ¯ä¸ªæœ€å°é¡¹å¯¹åº”çœŸå€¼è¡¨ä¸­ $f=\\text{T}$ çš„æ°å¥½ä¸€è¡Œã€‚\n\n![|530](https://img.memset0.cn/2024/03/05/BOX63rJu.png)\n\nåˆ©ç”¨ De Morgan's Lawsï¼Œä¹Ÿå¯ä»¥ä»çœŸå€¼è¡¨ä¸­å¾—åˆ°**ä¸»åˆå–èŒƒå¼(Full Conjuctive Normal Form)**ï¼š\n\n- å–å‡ºæ‰€æœ‰çœŸå€¼è¡¨ä¸ºä¸­ä¸º $\\text{F}$ çš„ä½ç½®ï¼Œå†™å‡º $\\lnot f$ã€‚\n- å¯¹ $\\lnot f$ åº”ç”¨ De Morgan's Lawsï¼Œå¯ä»¥å°†å¼å­ä¸­çš„åˆå–æå–äº’æ¢ï¼Œä»è€Œæ±‚å¾— FCNFã€‚\n\n![|540](https://img.memset0.cn/2024/03/05/A8SVjPb0.png)\n\n## 3. è°“è¯é€»è¾‘ Predicate Logic\n\n### 3.1. è°“è¯ Predicates\n\n> è€ƒè™‘ $x>0$ï¼Œå¯ä»¥è¢«è¡¨ç¤ºä¸º**å‘½é¢˜å‡½æ•°(propositional function)** $P(x)$ï¼Œè¿™é‡Œ $P$ è¡¨ç¤º $\\text{is greater than } 0$ ä¸” $x$ æ˜¯ä¸€ä¸ªå˜é‡ã€‚\n\n- Propositional functions become propositions (and have truth\n  values) when their variables are each replaced by a value from\n  the domain or bound by a quantifier.\n- A statement of the form $P(x_1,x_2,\\ldots, x_n)$ is the value of the propositional function P at the $n$-tuple $(x_1,x_2,\\ldots, x_n)$ and $P$ is called a $n$-ary predicate.\n\næˆ‘ä»¬å¯ä»¥ç”¨å‘½é¢˜å‡½æ•°æ¥æè¿°**å‰ææ¡ä»¶(preconditions)** å’Œ**åç½®æ¡ä»¶(postconditions)** ï¼Œè¿™å¯ä»¥ç”¨äºçº¦æŸä¸€æ®µç¨‹åºçš„è¾“å…¥å’Œè¾“å‡ºã€‚\n\n### 3.2. é‡è¯ Quantifiers\n\n- **å…¨ç§°é‡è¯(universal quantifier)** $\\forall$ï¼šéƒ½æ˜¯çœŸæ‰ä¸ºçœŸï¼Œå­˜åœ¨ä¸€ä¸ªä¸ºå‡å°±ä¸ºå‡ã€‚å¯ä»¥è½¬åŒ–ä¸ºåˆå–ã€‚\n- **å­˜åœ¨é‡è¯(existential quantifier)** $\\exists$ï¼šéƒ½æ˜¯å‡æ‰ä¸ºå‡ï¼Œå­˜åœ¨ä¸€ä¸ªä¸ºçœŸå°±ä¸ºçœŸã€‚å¯ä»¥è½¬åŒ–ä¸ºæå–ã€‚\n- **å”¯ä¸€é‡è¯(uniqueless quantifier)** $\\exists !$ï¼šæœ‰ä¸”ä»…æœ‰ä¸€ä¸ªä¸ºçœŸæ—¶æ‰ä¸ºçœŸã€‚\n\næˆ‘ä»¬åœ¨ä½¿ç”¨é‡è¯æ—¶ï¼Œå¯èƒ½åªè¦æ±‚å¯¹äºæŸä¸€èŒƒå›´å†…çš„ $x$ æˆç«‹ï¼Œæˆ‘ä»¬æŠŠæ­¤æ—¶ $x$ çš„å–å€¼èŒƒå›´ç§°ä¸º **è®¨è®ºåŸŸ(domain of discourse = universe of discourse)**ï¼Œä¸€èˆ¬ç®€å†™ä¸º domainã€‚\n\n> [!important] **é‡è¯çš„ä¼˜å…ˆçº§(precedence of quantifiers)**\n> é‡è¯çš„ä¼˜å…ˆçº§é«˜äºæ‰€æœ‰é€»è¾‘è¿ç®—ã€‚The quantifiers $\\forall$ and $\\exists$ have higher precedence than all the logical operators.\n>\n> æ‰€ä»¥å¹³æ—¶æˆ‘ä»¬å†è¯´ï¼Œå¯¹äºæ‰€æœ‰ $x$ï¼Œæ»¡è¶³ $p(x)$ å’Œ $q(x)$ æ—¶å¯èƒ½ä¼šè¡¨ç¤ºä¸º $\\forall x p(x)\\land q(x)$ï¼Œä½†æ­£ç¡®çš„åšæ³•åº”è¯¥æ˜¯ $\\forall x (p(x) \\land q(x))$ã€‚\n\n### 3.3. è°“è¯é€»è¾‘çš„ç­‰å€¼ Equivalences in Predicate Logic\n\nStatements involving predicates and quantifiers are logically equivalent if and only if they have the same truth value no matter\n\n- ä»£å…¥äº†ä»€ä¹ˆè°“è¯é€‰æ‹© which predicates are substituted into these statements and\n- ä½¿ç”¨äº†ä»€ä¹ˆè®¨è®ºåŸŸ which domain of discourse is used for the variables in these\n  propositional functions\n\nåŒæ ·ä½¿ç”¨ $\\equiv$ ç¬¦å·æ¥è¡¨ç¤ºè°“è¯é€»è¾‘ä¸­çš„ç­‰å€¼ã€‚\n\n**å¾·æ‘©æ ¹å®šå¾‹(De Morganâ€™s laws)** åœ¨è°“è¯é€»è¾‘ä¸­ä¹Ÿé€‚ç”¨ï¼š\n\n$$\n\\begin{aligned}\n\\lnot \\forall x P(x) &\\equiv \\exists x \\lnot P(x)\\\\\n\\lnot \\exists x P(x) &\\equiv \\forall x \\lnot P(x)\n\\end{aligned}\n$$\n\nåªæœ‰åœ¨ $A(x)$ å’Œ $B(x)$ éƒ½è¾“å‡ºçœŸæ—¶ï¼Œ$A(x) \\land B(x)$ æ‰ä¸ºçœŸï¼Œæ­¤æ—¶ç¬¬ä¸€ä¸ªç­‰å¼çš„ä¸¤ä¾§éƒ½ä¸ºçœŸï¼Œå¦åˆ™ä¸¤ä¾§éƒ½ä¸ºå‡ã€‚ç±»ä¼¼çš„å¯ä»¥è¯æ˜ç¬¬äºŒä¸ªç­‰å¼ã€‚\n\n$$\n\\begin{aligned}\n\\forall x (A(x) \\land B(x)) &\\equiv \\forall x A(x) \\land \\forall x B(x)\\\\\n\\exists x (A(x) \\lor B(x)) &\\equiv \\exists x A(x) \\lor \\exists x B(x)\n\\end{aligned}\n$$\n\nä½†æ˜¯å¦‚æœæŠŠä¸Šé¢çš„ç­‰å¼çš„ $\\land$ å’Œ $\\lor$ äº’æ¢åˆ™==ä¸æˆç«‹==ã€‚å®¹æ˜“ä¸¾å‡ºåä¾‹ã€‚\n\n$$\n\\begin{aligned}\n\\forall x (A(x) \\lor B(x)) &\\not\\equiv \\forall x A(x) \\lor \\forall x B(x)\\\\\n\\exists x (A(x) \\land B(x)) &\\not\\equiv \\exists x A(x) \\land \\exists x B(x)\n\\end{aligned}\n$$\n\nä½†è¿™ä¸¤ä¸ªå‘½é¢˜åœ¨å…¶ä¸­ä¸€ä¸ªæ–¹å‘ä¸Šæ˜¯æ­£ç¡®çš„ã€‚\n\n$$\n\\begin{aligned}\n\\forall x A(x) \\lor \\forall x B(x) &\\Rightarrow \\forall x (A(x) \\lor B(x))\\\\\n\\exists x (A(x) \\land B(x)) &\\Rightarrow \\exists x A(x) \\land \\exists x B(x)\\\\\n\\end{aligned}\n$$\n\næ­¤å¤–ï¼Œè¿˜æœ‰ï¼š\n\n$$\n\\begin{aligned}\nx \\text{ is not occurring in } P.\\\\\n\\forall x A(x) \\lor P &\\equiv \\forall x (A(x) \\lor P)\\\\\n\\forall x A(x) \\land P &\\equiv \\forall x (A(x) \\land P)\\\\\n\\exists x A(x) \\lor P &\\equiv \\exists x (A(x) \\lor P)\\\\\n\\exists x A(x) \\land P &\\equiv \\exists x (A(x) \\land P)\\\\\n\\end{aligned}\n$$\n\n$$\n\\begin{aligned}\nx \\text{ is not occurring in } B.\\\\\n\\forall x (B \\rightarrow A(x)) &\\equiv B \\rightarrow \\forall x A(x)\\\\\n\\exists x (B \\rightarrow A(x)) &\\equiv B \\rightarrow \\exists x A(x)\\\\\n\\forall x (A(x) \\rightarrow B) &\\equiv \\exists x A(x) \\rightarrow B\\\\\n\\exists x (A(x) \\rightarrow B) &\\equiv \\forall x A(x) \\rightarrow B\\\\\n\\end{aligned}\n$$\n\n## 4. åµŒå¥—é‡è¯ Nested Quantifiers\n\n**åµŒå¥—é‡è¯(nested quantifier)**ï¼šå‡ºç°åœ¨å¦ä¸€ä¸ªé‡è¯çš„è¾–åŸŸä¸‹çš„é‡è¯ã€‚Nest quantifiers are quantfiers that occur within the scope of other quantifiers.\n\n### 4.1. é‡è¯çš„é¡ºåº Order of Quantifiers\n\né™¤éæ‰€æœ‰é‡è¯éƒ½æ˜¯ $\\forall$ æˆ–æ‰€æœ‰é‡è¯éƒ½æ˜¯ $\\exists$ï¼Œå¦åˆ™é‡è¯çš„é¡ºåºæ˜¯æœ‰æ„ä¹‰çš„ã€‚The order of nested quantifiers _matters_ if quantifiers are of different types\n\nE.g.:\n\n- $\\forall x\\ \\exists y\\ L(x,y)$ï¼š_Everybody loves somebody._\n- $\\exists y\\ \\forall x\\ L(x,y)$ï¼š_There is someone who is loved by everyone._\n\nå¯ä»¥ç”¨å¾ªç¯æ¥ç†è§£é‡è¯çš„é¡ºåºã€‚\n\n### 4.2. å‰ç¼€èŒƒå¼ Prenex Normal Form\n\nä»»æ„è¡¨è¾¾å¼éƒ½å¯ä»¥è¢«è½¬åŒ–ä¸º**å‰ç¼€èŒƒå¼(prenex normal form)**ã€‚\n\nå¦‚ä½•å¾—åˆ° PNFï¼Ÿå¯ä»¥éµå¾ªä¸€ä¸‹æ­¥éª¤ï¼š\n\n1. æ¶ˆé™¤æ‰€æœ‰çš„ $\\rightarrow$ å’Œ $\\leftrightarrow$ã€‚Eliminate all occurrences of $\\rightarrow$ and $\\leftrightarrow$ from the formula in question.\n2. å‘å†…ç§»åŠ¨å¦å®šç¬¦å·ï¼Œæ³¨æ„åº”ç”¨å¾·æ‘©æ ¹å®šå¾‹ã€‚Move all negations inward such that, in the end, negation only appear as part of literals.\n3. å¯¹å˜é‡è¿›è¡Œé‡å‘½åï¼Œç¡®å®šä¸åŒéƒ¨åˆ†çš„å˜é‡ä¸ä¼šå†²çªã€‚Standardize the variables a part (when necessary).\n4. æœ€åï¼Œå°†æ‰€æœ‰é‡è¯ç§»åŠ¨åˆ°æœ€å‰é¢ã€‚The prenex normal form can now be obtained by moving all quantifiers to the front of the formula.\n\n## 5. æ¨ç†å‡†åˆ™ Rules of Inference\n\n- An **è®ºæ®(argument)** is a sequence of statements that end with a conclusion\n- By **æœ‰æ•ˆçš„(valid)**, we mean the conclusion must follow from the truth of the preceding statements (premises)\n- We use **æ¨ç†å‡†åˆ™(rules of inference)** to construct valid arguments\n\n![|600](https://img.memset0.cn/2024/03/18/HwtaO11F.png)\n\n![|440](https://img.memset0.cn/2024/03/18/FPFiquBv.png)\n\n> [!warning] Caution\n>\n> åœ¨ç»“è®ºå‰åˆ«å¿˜äº†åŠ  $\\therefore$ å’Œä¸€æ¡æ¨ªçº¿ï¼Œè¿™æ‰æ˜¯æ ‡å‡†æ ¼å¼ã€‚\n\n## 6. è¯æ˜ Proof\n\n### 6.1. ä¸€äº›æœ¯è¯­ Some Terminology\n\n- A **è¯æ˜(proof)** is a valid argument that establishes the truth of a mathematical statement.\n- A **å®šç†(theorem)** (or **å‘½é¢˜(proposition)**/fact/result) is a statement that can be shown to be true.\n  - **å…¬ç†(axioms)** (or **å‡è®¾(postulates)**) are statements we assume to be true\n- A **å¼•ç†(lemma)** is a less important theorem that is helpful in the proof of other results\n- A **æ¨è®º(corollary)** is a theorem that can be established directly from a theorem that has been proved.\n- A **çŒœæƒ³(conjecture)** is a statement that is being proposed to be a true statement\n  - A conjecture becomes a theorem once it has been proved to be true.\n\n### 6.2. å½¢å¼åŒ–è¯æ˜ Formal Proofs\n\n**å½¢å¼åŒ–è¯æ˜(formal proof)** v.s. **éå½¢å¼åŒ–è¯æ˜(informal proof)**ï¼š\n\n- Formal Proofsï¼š\n  - Can be extremely long;\n  - May be hard to follow.\n- Informal Proofs:\n  - Each step may involve multiple rules of inference;\n  - Steps may be skipped;\n  - The axioms being assumed and the rules of inference used are not explicitly stated.\n\n### 6.3. è¯æ˜æ–¹æ³• Proof Methods\n\n#### 6.3.1. ç›´æ¥è¯æ˜æ³• Direct Proof\n\né€šè¿‡**ç›´æ¥è¯æ˜æ³•(direct proof)** è¯æ˜ $p\\rightarrow q$ çš„æ–¹æ³•æ˜¯ï¼š\n\n- é€šè¿‡**æ¨ç†è§„åˆ™(rules of inference)**ã€å…¬ç†ã€**é€»è¾‘æ’ç­‰å¼(logical equivalences)** ç­‰æ¨å‡º $q$ ä¹Ÿä¸ºçœŸã€‚\n\nå…¶ä½™çš„è¯æ˜æ–¹æ³•éƒ½æ˜¯**é—´æ¥è¯æ˜æ³•(indirect proof)**ã€‚\n\n#### 6.3.2. ç©ºè¯æ˜å’Œå¹³å‡¡è¯æ˜ Vacuous and Trivial Proof\n\n- **ç©ºè¯æ˜(vacuous proof)**ï¼šå½“ $p$ ä¸ºå‡æ—¶ $p\\rightarrow q$ ä¸ºçœŸï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥é€šè¿‡è¯æ˜ $p$ ä¸ºå‡æ¥è¯æ˜ $p\\rightarrow q$ ä¸ºçœŸã€‚\n- **å¹³å‡¡è¯æ˜(trivial proof)**ï¼šå½“ $q$ ä¸ºçœŸæ—¶ $p\\rightarrow q$ ä¸ºçœŸï¼Œæ‰€ä»¥æˆ‘ä»¬ä¹Ÿå¯ä»¥é€šè¿‡è¯æ˜ $q$ ä¸ºçœŸæ¥è¯æ˜ $p\\rightarrow q$ ä¸ºçœŸã€‚\n\n#### 6.3.3. åè¯æ³• Proof by Contraposition\n\n**åè¯æ³•(proof by contraposition)** å¯ä»¥çœ‹åšå¯¹åŸå‘½é¢˜çš„é€†å¦å‘½é¢˜çš„ç›´æ¥è¯æ˜ï¼Œæ ¹æ®é€»è¾‘æ’ç­‰å¼ï¼š\n\n$$\np\\rightarrow q \\equiv \\lnot q\\rightarrow \\lnot p\n$$\n\n- å‡è®¾ $\\lnot q$ ä¸ºçœŸï¼›\n- æ¨å‡º $\\lnot p$ ä¹Ÿä¸ºçœŸï¼ˆor æ¨å‡º $p$ ä¸ºå‡ï¼‰ï¼Œä»è€Œè¯æ˜åŸå‘½é¢˜ã€‚\n\n#### 6.3.4. å½’è°¬è¯æ˜æ³• Proof by Contradiciton\n\nProof $p$ by contradiction:\n\n- assumes $p$ is false.\n- deduces that $\\lnot p \\rightarrow (q \\land \\lnot q)$, which $q \\land \\lnot q$ is a contradiction.\n- $p$ follows from the above\n\nProof $p\\rightarrow q$ by contradiction:\n\n- assumes that both $\\lnot q$ and $p$ are true.\n- show that $(p \\land \\lnot q) \\rightarrow \\text{F}$.\n\n> [!warning] æ³¨æ„åŒºåˆ† Proof by Contraposition å’Œ Proof by Contradiction\n>\n> Proof by Contradiction ç›¸æ¯”äº Proof by Contraposition å¤šå‡è®¾äº†ä¸€ä¸ª $p$ is trueï¼Œå¹¶ä¸”åªéœ€è¦æœ€åå°†å…¶å½’è°¬å³å¯ã€‚\n\n### 6.4. è¯æ˜ç­–ç•¥ Proof Strategies\n\n#### 6.4.1. åˆ†ç±»è®¨è®º Proof by Cases\n\n- Convince the reader that the cases are inclusive (i.e. they exhaust all possibilities)\n- Establish all implications\n\n#### 6.4.2. ç©·ä¸¾æ³• Exhausitve Proof\n\nAn **ç©·ä¸¾æ³•(exhaustive proof)** is a special type of proof by cases where each case involves checking a single example.\n\n#### 6.4.3. ä¸å¤±ä¸€èˆ¬æ€§åœ° Without Loss of Generality\n\n**ä¸å¤±ä¸€èˆ¬æ€§åœ°(without loss of generality)**ï¼Œå¸¸ç”¨äºè¯æ˜è¿‡ç¨‹ä¸­ï¼Œå¯ä»¥ç¼©å†™ä¸º WLOGã€‚æ¯”å¦‚ï¼šæˆ‘ä»¬æƒ³è¦è¯æ˜ $|xy|=|x|\\cdot |y|$ï¼Œè‹¥å·²ç»è¯æ˜äº† $x\\ge 0,\\ y<0$ çš„æƒ…å†µä¸‹æˆç«‹ï¼Œåˆ™å¯ä»¥ä¸æ˜¯ä¸€èˆ¬æ€§çš„å¾—åˆ° $x<0,\\ y\\ge 0$ æ—¶ä¹Ÿæˆç«‹ï¼Œå› ä¸ºè¿™å°±æ˜¯æŠŠ $x'=y,\\ y'=x$ ä»£å…¥åè¿ç”¨ä¸€æ¬¡ä¹˜æ³•äº¤æ¢å¾‹çš„æƒ…å†µã€‚\n\nåˆç†è¿ç”¨ WLOG å¯ä»¥å¸®åŠ©æˆ‘ä»¬åœ¨åˆ†ç±»è®¨è®ºçš„è¿‡ç¨‹ä¸­çœç•¥ä¸€äº›é‡å¤çš„è¯æ˜ï¼Œä»è€Œä½¿è¯æ˜è¿‡ç¨‹æ›´ä¸ºç®€æ´ã€‚\n\n#### 6.4.4. å­˜åœ¨æ€§è¯æ˜ Existence Proof\n\n- **æ„é€ å­˜åœ¨æ€§è¯æ˜(constructive existence proof)**ï¼š\n  - è¯æ˜ $P(c)$ å¯¹äºå®šä¹‰åŸŸä¸­çš„æŸä¸€ä¸ª $c$ æˆç«‹ã€‚\n  - ç„¶å $\\exists x P(x)$ å°±æˆç«‹ï¼Œæ ¹æ®**å­˜åœ¨æ€§æ¨å¹¿è§„åˆ™(existential generalization = EG)**ã€‚\n- **éæ„é€ å­˜åœ¨æ€§è¯æ˜(inconstructive existence proof)**ï¼š\n  - å‡è®¾ä¸å­˜åœ¨ $c$ ä½¿å¾— $P(c)$ æˆç«‹ã€‚\n  - ç„¶åæ¨å‡ºä¸€ä¸ªçŸ›ç›¾ï¼Œè¿™å¯ä»¥è¯´æ˜åŸå‘½é¢˜æˆç«‹ã€‚\n\n#### 6.4.5. å”¯ä¸€æ€§è¯æ˜ Uniqueness Proof\n\n**å”¯ä¸€æ€§è¯æ˜(uniqueness proof)** To show that a theorem assert the existence of a unique element with a particular property.\n\n$$\n\\exists x (P(x) \\land \\forall y (y\\neq x \\rightarrow \\lnot P(y)))\n$$\n\nå”¯ä¸€æ€§è¯æ˜å¯ä»¥åˆ†ä¸ºè¯æ˜å…¶å­˜åœ¨æ€§å’Œå”¯ä¸€æ€§ä¸¤éƒ¨åˆ†ã€‚\n\n- **å­˜åœ¨æ€§(existence)**ï¼šWe show that an element $x$ with the desired property exists.\n- **å”¯ä¸€æ€§(uniqueness)**ï¼šWe show that if $y\\neq x$, then $y$ does not have the desired property. Equivalently, we can also show that if $x$ and $y$ both have the desired property, then $x=y$.\n","publishedTitle":"ã€Œç¦»æ•£æ•°å­¦åŠå…¶åº”ç”¨ã€Chapter 1. Logic & Proofs"}},{"id":"c85987b3-cc31-5295-b459-547eff7bb2eb","fields":{"slug":"/course/dm/note/2/","plainText":"\n> æœ¬ç¯‡ç¬”è®°ä»‹ç»äº†é›†åˆçš„åŸºæœ¬æ¦‚å¿µï¼ŒåŒ…æ‹¬é›†åˆçš„å®šä¹‰ã€è¡¨ç¤ºæ–¹æ³•ã€é›†åˆä¹‹é—´çš„å…³ç³»ã€é›†åˆçš„æ“ä½œä»¥åŠå‡½æ•°çš„åŸºæœ¬æ€§è´¨ã€‚æˆ‘ä»¬æ¢è®¨äº†é›†åˆçš„åŸºæ•°ã€å¯æ•°æ€§ä»¥åŠåº·æ‰˜å®šç†ç­‰é‡è¦ä¸»é¢˜ã€‚é€šè¿‡è¿™äº›å†…å®¹ï¼Œè¯»è€…å°†èƒ½å¤Ÿç†è§£ç¦»æ•£æ•°å­¦ä¸­é›†åˆå’Œå‡½æ•°çš„åŸºæœ¬ç»“æ„å’Œæ€§è´¨ã€‚<small style=\"font-style: italic; opacity: 0.5\">ï¼ˆç”± gpt-4o-mini ç”Ÿæˆæ‘˜è¦ï¼‰</small>\n\n<!-- more -->\n\n> [!quote]- Word Table\n>\n> - **ç¬¦å·(notation)**\n> - çœç•¥å·(ellipse)\n> - æ‹¬å·(brace)\n\n## 1. é›†åˆ Sets\n\n### 1.1. å¼•è¨€ Introduction\n\n**é›†åˆ(set)**ï¼šA set is an unordered collection of objects.\n\n- The objects in a set are call the **å…ƒç´ (elements)**ï¼Œor members, of the set.\n- A set is said to **åŒ…å«(contain)** its elements.\n  - $a \\in A$ï¼š$a$ is the member of the set $A$.\n  - $a \\not\\in A$ï¼š$a$ is not the member of the set $A$.\n- **ç©ºé›†(empty set)**ï¼š$\\varnothing$.\n\né›†åˆçš„è¡¨ç¤ºæ–¹å¼ï¼šThe descriptions of a set\n\n- Roster method: listing all its members between braces, e.g. $S=\\{1,3,5,7,9\\}$.\n- Brace notation with ellipses: e.g. $S=\\{1,2,\\ldots,99\\}$.\n- Specification using set builder: $S=\\{x\\mid P(x)\\}$, which means $S$ contains all the elements from $U$ (**å…¨é›†(universal set)**) which have the property $P$.\n- **ç»´æ©å›¾(Venn diagrams)**\n\n> [!example]- ç½—ç´ æ‚–è®º Russell Paradox\n> Suppose there is a town with just one male barber; and that every man in the town keeps himself clean-shaven: some by shaving themselves, some by attending the barber. The barber obeys the following rule: he shaves all and only those men in town who do not shave themselves. Does the barber shave himself?\n\n### 1.2. é›†åˆä¹‹é—´çš„å…³ç³» Relations between Sets\n\n#### 1.2.1. Subset\n\n$A\\subseteq B$: $A$ is a **å­é›†(subset)** of the set $B$.\n\n$$\nA \\subseteq B \\Leftrightarrow \\forall x (x \\in A \\rightarrow x \\in B)\n$$\n\n#### 1.2.2. Equal\n\n$A=B$: $A$ is **ç­‰äº(equal)** to $B$.\n\n$$\nA=B \\Leftrightarrow A \\subseteq B \\land B \\subseteq A\n$$\n\n#### 1.2.3. Proper Subset\n\n$A\\subset B$: A is a **çœŸå­é›†(proper subset)** of the set $B$.\n\n$$\nA \\subset B \\Leftrightarrow A \\subseteq B \\land A \\neq B \\Leftrightarrow \\forall x (x \\in A \\rightarrow x \\in B) \\land \\exists (x \\in B \\land  x\\not\\in A)\n$$\n\n#### 1.2.4. The Size of Sets\n\nLet $S$ be a set. If there are exactly $n$ distinct elements in $S$ where $n$ is a nonnegative integer, we say that $S$ is a **æœ‰é™é›†(finite set)** and that $n$ is the cardinality of $S$.\n\n#### 1.2.5. Power Sets\n\nGiven a set S, the **å¹‚é›†(power set)** of S is the set of all subsets of the set S. $\\mathcal{P}(x)$ denotes the power set of $S$.\n\n> [!example]- è¯æ˜ï¼š$\\mathcal{P}(A) \\in \\mathcal{P}(B) \\Rightarrow A\\in B$.\n\n#### 1.2.6. Cartesian Products\n\nThe **æœ‰åº $n$ å…ƒç»„(ordered $n$-tuple)** $(a_1,a_2,\\cdots ,a_n)$ is the ordered collection that has $a_1$ as its first element, $a_2$ as its second element, â€¦ , and $a_n$ as its nth element.\n\n$A_1,A_2,\\cdots,A_n$ çš„**ç¬›å¡å°”ç§¯(cartesian product)** å®šä¹‰ä¸º\n\n$$\nA_1 \\times A_2 \\times \\cdots A_n = \\{(a_1,a_2,\\cdots,a_n) \\mid a_i \\in A_i \\quad\\text{for }i=1,2,\\cdots n\\}\n$$\n\n- If $|A|=m,\\ |B|=n$, then $|A\\times B|=|B\\times A|=mn$.\n- $A\\times B\\neq B\\times A$\n- $A\\times \\varnothing = \\varnothing \\times A= \\varnothing$\n\n#### 1.2.7. Truth Sets of Quantifiers\n\nGiven a predicate $P$ and a domain $D$. The **çœŸé›†(truth set)** of $P$ is $P$ is the set of elements $x$ in $D$ for which $P(x)$ is true. Namely, the power set of $P$ is $\\{x \\in D\\mid P(x)\\}$\n\n### 1.3. é›†åˆæ“ä½œ Set Operations\n\n#### 1.3.1. Union\n\n$A\\cup B = \\{x \\mid x \\in A \\lor x \\in B\\}$\n\n#### 1.3.2. Intersection\n\n$A\\cap B = \\{x \\mid x \\in A \\land x\\in B\\}$\n\n#### 1.3.3. Difference\n\n$A-B = \\{x \\mid x\\in A \\land x \\not\\in B\\}$: The difference of $A$ and $B$.\n\n#### 1.3.4. Complement\n\n$\\overline{A} = \\{x \\mid x \\not\\in A \\land x\\in U\\}$: $\\overline{A}$ is the **è¡¥é›†(complement)** of the set $A$.\n\n#### 1.3.5. Symmetric difference\n\n$$\nA\\oplus B = (A\\cup B) - (A\\cap B)\n$$\n\næŒ‰å‡ºç°ä¸å¦ç»Ÿè®¡çš„è¯å°±ç±»ä¼¼äºå¼‚æˆ–æ“ä½œã€‚\n\n### 1.4. é›†åˆæ’ç­‰å¼ Set Indentities\n\næ›´å¤š**é›†åˆæ’ç­‰å¼(set indentities)** å¯ä»¥å‚è€ƒé€»è¾‘æ’ç­‰å¼ã€‚\n\n![|480](https://img.memset0.cn/2024/04/02/8BUTQs6T.png)\n\n> [!important] è¯æ˜é›†åˆç›¸ç­‰çš„ä¸€äº›æ–¹æ³• Ways to Prove Set Identities\n>\n> - å°†è¯æ˜æ’ç­‰å¼è½¬åŒ–ä¸ºè¯ä¸¤æ¬¡å­é›†ã€‚Show that $A\\subseteq B$ and that $B\\subseteq A$.\n> - è½¬åŒ–ä¸º set builder çš„å½¢å¼ï¼Œç„¶åç”¨é€»è¾‘æ’ç­‰å¼è¯æ˜ã€‚Use logical equivalences to prove equivalent set definitions.\n> - ç±»ä¼¼äºçœŸå€¼è¡¨çš„åšæ³•ã€‚Use a membership table.\n> - ä»å·²æœ‰çš„æ’ç­‰å¼ä¸­æ¨æ¼”ã€‚Use previously proven identities.\n\n## 2. å‡½æ•° Functions\n\n### 2.1. å¼•è¨€ Introduction\n\nLet $A$ and $B$ be _nonempty_ sets. A **å‡½æ•°(function)** (mapping or transformations) $f$ from $A$ to $B$:\n\n$$\nf:A\\rightarrow B\n$$\n\n$$\n\\forall a (a \\in A \\rightarrow \\exists ! b  (b \\in B \\land f(a) = b))\n$$\n\n- $A$ is called the **å®šä¹‰åŸŸ(domain)** of $f$\n- $B$ is called the **å€¼åŸŸ(codomain)** of $f$\n\nIf $f(a) = b$,\n\n- $b$ is called the image of $a$ under $f$.\n- $a$ is called a preimage of $b$.\n\nLet $f$ be a function from the set $A$ to the set $B$. The **å›¾(graph)** of the function $f$ is the _set_ of ordered pairs\n\n$$\n\\{(a,b) \\mid a \\in A \\land f(a) = b\\}\n$$\n\n### 2.2. å•å°„ä¸æ»¡å°„ One-to-One and Onto Functions\n\nA function f is **å•å°„å‡½æ•°(one-to-one function = injection)** (denoted 1-1), or **å•å°„çš„(injective)** if\n\n$$\n\\forall a \\forall b (f(a) = f(b) \\rightarrow a = b)\n$$\n\nA function $f$ from $A$ to $B$ is called **æ»¡å°„å‡½æ•°(onto function = surjection)**, or **æ»¡å°„çš„(surjective)** if\n\n$$\n\\forall b \\in B \\exists a \\in A (f(a) = b)\n$$\n\nThe function f is a **ä¸€ä¸€å¯¹åº”çš„(one-to-one correspondence)**, or a **åŒå°„(bijection)**, if it is both _one-to-one_ and _onto_.\n\n> [!note] Showing that $f$ is one-to-one or onto\n>\n> ![|640](https://img.memset0.cn/2024/03/19/OoeOyjuL.png)\n\n### 2.3. åå‡½æ•° Inverse Functions\n\nLet $f$ be a bijection from $A$ to $B$. Then the **åå‡½æ•°(inverse function)** of $f$, denoted as $f^{-1}$, is the function from $B$ to $A$ defined as\n\n$$\nf^{-1} (y) = x \\text{ iff } f(x) = y\n$$\n\n- å‡½æ•° $f$ çš„åå‡½æ•°å­˜åœ¨å½“ä¸”ä»…å½“å‡½æ•° $f$ æ˜¯åŒå°„å‡½æ•°ã€‚Function $f$ is **å¯é€†çš„(invertible)** if and only if $f$ is bijective. No inverse function exists unless $f$ is a bijection.\n\n### 2.4. å‡½æ•°çš„å¤åˆ Compositions of Functions\n\nLet $g$ be a function from the set $A$ to the set $B$ and let $f$ be a function form the set $B$ to the set $C$. The composition of the functions $f$ and $g$ denoted by $f \\circ g$ is defined by:\n\n$$\nf \\circ g (a) = f(g(a))\n$$\n\n- $f\\circ g$ canâ€™t be defined unless the range of $g$ is a subset of the domain of $f$.\n\n### 2.5. é«˜æ–¯å‡½æ•° Floor and Ceiling Functions\n\n> [!important] å…³äºé«˜æ–¯å‡½æ•°çš„å®ç”¨æ€§è´¨ Useful Properties of the Floor and Ceiling Functions\n> ![|400](https://img.memset0.cn/2024/03/19/bw4HXnEf.png)\n\n## 3. æ•°åˆ— Sequence\n\n### 3.1. å¼•è¨€ Introduction\n\nA **æ•°åˆ—(sequence)** is a function from a subset of the set of integers (usually either the set $\\{0, 1, 2, \\ldots\\}$ or the set $\\{1, 2, 3,\\ldots\\}$) to a set $S$. We use the notation $a_n$ to denote the image of the integer $n$. We call an a term of the sequence.\n\nA **ç­‰æ¯”æ•°åˆ—(geometric progression)** is a sequence of the form\n\n$$\na,\\ ar,\\ ar^2,\\ \\ldots,\\ ar^n\n$$\n\nwhere the initial term $a$ and the **å…¬æ¯”(common ratio)** $r$ are real numbers.\n\nAn **ç­‰å·®æ•°åˆ—(arithmetic progression)** is a sequence of the form\n\n$$\na,\\ a+d,\\ a+2d\\, \\ldots,\\ a+nd\n$$\n\nwhere the initial term $a$ and the **å…¬å·®(common difference)** $d$ are real\nnumbers.\n\n### 3.2. å’Œå¼ Summations\n\n$$\n\\sum_{s\\in S} f(s)\n$$\n\n$S$: the subset of the domain of the function $f$\n\n> [!important] Some Useful Summation Formulae\n>\n> ![|400](https://img.memset0.cn/2024/03/19/nO5YyxEI.png)\n\n## 4. é›†åˆçš„åŸºæ•° Cardinality of Sets\n\n### 4.1. å¼•è¨€ Introduction\n\n- The cardinality of a set $A$ is equal to the cardinality of a set $B$, denoted $| A | = | B |$, iff there exists a bijection from $A$ to $B$.\n- If there is an _injection_ from $A$ to $B$, the cardinality of $A$ is less than or the same as the cardinality of $B$ and we write $|A| \\le |B|$. When $|A| \\le |B|$ and $A$ and $B$ have different cardinality, we say that the cardinality of $A$ is less than the cardinality of $B$ and write $|A|<|B|$.\n\næ‰€ä»¥è¯´ï¼Œæ¯”è¾ƒ**é›†åˆçš„åŸºæ•°(cardinality of set)** çš„å¤§å°æœ€å…³é”®çš„æ­¥éª¤å°±åœ¨äºæ‰¾åˆ°ä¸€ä¸ªé›†åˆ $S$ åˆ°å¦ä¸€ä¸ªé›†åˆ $T$ çš„**å•å°„**ï¼Œå¦‚æœè¿™æ ·çš„å•å°„èƒ½å¤Ÿæ‰¾åˆ°ï¼Œå°±æœ‰ $|S|\\le |T|$ã€‚\n\n### 4.2. å¯æ•°çš„ Countable\n\n- A set that is either **æœ‰é™çš„(finite)** or has the same cardinality as the set of positive integers called **å¯æ•°çš„(countable)**.\n- A set that is not countable is called **ä¸å¯æ•°çš„(uncountable)**.\n- When an infinite set $S$ is countable, we denote the cardinality of $S$ by $\\aleph_0$ (**é˜¿åˆ—å¤«é›¶(aleph null)**).\n- If $|A| = | \\mathbb{Z}_+ |$, the set $A$ is **å¯æ•°æ— ç©·(countable infinite)**.\n\n> [!example]- è¯æ˜ï¼šæ­£æœ‰ç†æ•°é›† $\\mathbb{Q}_+$ æ˜¯å¯æ•°çš„ã€‚\n>\n> (1) $|\\mathbb{Q}_+| \\le |S|$ï¼š$x=p/ q \\rightarrow (p,q)$\n>\n> (2) $|S| = |\\mathbb{Z}_+|$ï¼šæ²¿ç€å¯¹è§’çº¿å–â€”â€”TBD\n>\n> (3) $|\\mathbb{Z}_+| \\le |\\mathbb{Q}_+|$ï¼š$x\\rightarrow x/1$\n\n> [!example]- è¯æ˜ï¼š$0$ åˆ° $1$ ä¹‹é—´çš„å®æ•°é›†æ˜¯ä¸å¯æ•°çš„ã€‚\n>\n> ![|500](https://img.memset0.cn/2024/06/22/LFoyqlhc.png)\n>\n> ![|480](https://img.memset0.cn/2024/06/22/c3Aj5m03.png)\n>\n> ![|550](https://img.memset0.cn/2024/06/22/HKmYecs0.png)\n\n> [!example]- è¯æ˜ï¼š$[0,1]$ å’Œ $(0,1)$ æ˜¯ç­‰åŠ¿çš„ã€‚\n>\n> ![|500](https://img.memset0.cn/2024/06/22/GwJYbVUH.png)\n\n> [!example]- è¯æ˜ï¼š$\\mathbb N$ çš„æ‰€æœ‰æœ‰é™å­é›†æ˜¯å¯æ•°çš„ã€‚\n>\n> å…ˆç›´æ¥ç»™å‡ºä¸€ç§æ•°æ•°æ–¹æ³•ï¼šæ•°é›†åˆçš„äºŒè¿›åˆ¶è¡¨ç¤ºã€‚\n>\n> å†ç»™å‡ºä¸€ä¸ªè¯æ˜ï¼š\n>\n> ![|600](https://img.memset0.cn/2024/06/22/aFp3dpVl.png)\n\n### 4.3. åº·æ‰˜å®šç† Cantor's Theorem\n\n> [!important] Theorem: **åº·æ‰˜å®šç†(Cantor's Theorem)**\n>\n> The cardinality of the powerset of an arbitrary set has a greater cardinality than the original arbitrary set.\n>\n> å®é™…ä¸Šæœ‰ï¼š$|\\mathcal P(\\aleph_k)| = |\\aleph_{k+1}|$ã€‚\n","publishedTitle":"ã€Œç¦»æ•£æ•°å­¦åŠå…¶åº”ç”¨ã€Chapter 2. Basic Structures"}},{"id":"8cdd50f9-1f98-5642-85b8-e67dd9a51d84","fields":{"slug":"/course/dm/note/3/","plainText":"\n> æœ¬ç¯‡ç¬”è®°ä¸»è¦ä»‹ç»äº†ç®—æ³•çš„åŸºæœ¬æ¦‚å¿µï¼ŒåŒ…æ‹¬ç®—æ³•çš„å®šä¹‰ã€æ€§è´¨ã€å‡½æ•°çš„å¢é•¿ä»¥åŠç®—æ³•çš„å¤æ‚åº¦ç­‰å†…å®¹ã€‚é€šè¿‡å¯¹è¿™äº›å†…å®¹çš„æ·±å…¥æ¢è®¨ï¼Œè¯»è€…å°†èƒ½å¤Ÿç†è§£ç®—æ³•åœ¨è®¡ç®—æœºç§‘å­¦ä¸­çš„é‡è¦æ€§ï¼Œå¹¶æŒæ¡è¯„ä¼°å’Œåˆ†æç®—æ³•æ€§èƒ½çš„åŸºæœ¬æ–¹æ³•ã€‚<small style=\"font-style: italic; opacity: 0.5\">ï¼ˆç”± gpt-4o-mini ç”Ÿæˆæ‘˜è¦ï¼‰</small>\n\n<!-- more -->\n\n## 1. ç®—æ³• Algorithms\n\n### 1.1. å¯¼è®º Introduction\n\nAn **ç®—æ³•(algorithm)** is a finite set of precise instructions for performing a computation or for solving a problem.\n\n### 1.2. ç®—æ³•çš„æ€§è´¨ Properties of Algorithms\n\nç®—æ³•ä¸€èˆ¬éƒ½æœ‰ä¸€äº›å…±åŒæ€§è´¨ï¼Œåœ¨æè¿°ä¸è¯„ä»·ç®—æ³•æ—¶è¿™ç§æ€§è´¨æ˜¯å¸¸ç”¨çš„ã€‚\n\n- **è¾“å…¥(input)**ï¼šAn algorithm has input values from a specified set.\n- **è¾“å‡º(output)**ï¼šFrom each set of input values, an algorithm produces output values from a specified set.\n- **ç¡®å®šæ€§(definiteness)**ï¼šç®—æ³•çš„æ¯ä¸€æ­¥éƒ½åº”è¯¥è¢«ç²¾ç¡®å®šä¹‰ã€‚The steps of an algorithm must be defined precisely.\n- **æ­£ç¡®æ€§(correctness)**ï¼šç®—æ³•åº”è¯¥ç»™å‡ºæ­£ç¡®çš„è¾“å‡ºç»“æœã€‚An algorithm should produce the correct output values for each set of input values.\n- **æœ‰é™æ€§(finiteness)**ï¼šç®—æ³•åº”å½“åœ¨æœ‰é™æ­¥å†…ç»“æŸã€‚An algorithm should produce the desired output after a finite number of steps for any input in the set.\n- **æœ‰æ•ˆæ€§(effectiveness)**ï¼šç®—æ³•çš„æ¯ä¸€æ­¥éƒ½å¯ä»¥è¢«æœ‰æ•ˆæ‰§è¡Œã€‚Each step of an algorithm must be executed exactly and in a finite amount of time.\n- **é€šç”¨æ€§(generality)**ï¼šæˆ‘ä»¬çš„ç®—æ³•åº”è¯¥å¯¹äºä»»æ„ç¬¦åˆæ¡ä»¶çš„è¾“å…¥éƒ½åº”ç”¨ï¼Œè€Œä¸æ˜¯åªé€‚ç”¨æŸäº›ç‰¹å®šçš„è¾“å…¥ã€‚The procedure should be applicable for all problems of the desired form, not just for a particular set of input values.\n\n> [!warning]- correctness å’Œ effectiveness è¾¨æ â˜…\n>\n> correctness ä¸»è¦å°†ç®—æ³•åº”è¯¥ç»™å‡º correct output valuesï¼Œè€Œ effectiveness åˆ™ä¸»è¦æŒ‡å‡ºç®—æ³•åº”å½“æ˜¯å¯ä»¥è¢« exactly executeã€‚ä½œä¸šé¢˜ä¸­æœ‰ä¸€é¢˜æ˜¯ä¸€ç®—æ³•ä¼šå‡ºç° $1/0$ çš„æƒ…å†µï¼Œåº”è¯¥åˆ¤å®šä¸ºç¼ºå°‘ effectiveness.\n\n## 2. å‡½æ•°çš„å¢é•¿ The Growth of Functions\n\n### 2.1. æ¸è¿›è¿è¡Œæ—¶é—´ Asymptotic Running Time\n\n**æ¸è¿›è¿è¡Œæ—¶é—´(asymptotic running time)** is the number of operations used by the algorithm as the input size approaches infinity.\n\n### 2.2. è®°å· Notations\n\n**å¤§ O è®°å·(Big-O notation)**ï¼šLet $f$ and $g$ be functions from $Z$ (or $R$) to $R$. We say that â€œ$f(x)$ is $O(g(x))$â€ if there are constants $C$ and $k$ such that $|f(x)| \\le C|g(x)|$ whenever $x>k$.\n\n**å¤§$\\Omega$è®°å·(Big-Omega notation)**ï¼šLet $f$ and $g$ be functions from $Z$ (or $R$) to $R$. We say that â€œ$f(x)$ is $\\Omega(g(x))$â€ if there are constants $C$ and $k$ such that $|f(x)|\\ge C|g(x)|$ whenever $x>k$.\n\n**å¤§$\\Theta$è®°å·(Big-Theta notation)**ï¼šLet $f$ and $g$ be functions from $Z$ (or $R$) to $R$. We say that â€œ$f(x)$ is $\\Theta(g(x))$â€ if â€œ$f(x)$ is $O(g(x))$â€ and â€œ$f(x)$ is $\\Omega(g(x))$â€, i.e., there are constants $C_1$, $C_2$, and $k$ such that $0\\le C_1 g(x) \\le f(x) \\le C_2 g(x)$ whenever $x>k$.\n\n## 3. ç®—æ³•çš„å¤æ‚åº¦ Complexity of Algorithms\n\n![|400](https://img.memset0.cn/2024/03/29/dIvQCt1z.png)\n\n> [!note] Commonly used Terminology for the Complexity of Algorithms\n>\n> |     Complexity     |                 Terminology                  |\n> | :----------------: | :------------------------------------------: |\n> |    $\\Theta(1)$     |     **å¸¸æ•°å¤æ‚åº¦(constant complexity)**      |\n> |  $\\Theta(\\log n)$  |    **å¯¹æ•°å¤æ‚åº¦(logarithmic complexity)**    |\n> |    $\\Theta(n)$     |      **çº¿æ€§å¤æ‚åº¦(linear complexity)**       |\n> | $\\Theta(n \\log n)$ |                                              |\n> |   $\\Theta(n^b)$    |   **å¤šé¡¹å¼å¤æ‚åº¦(polynomial complexity)**    |\n> |   $\\Theta(b^n)$    | **æŒ‡æ•°å¤æ‚åº¦(exponential complexity)** (b>1) |\n> |    $\\Theta(n!)$    |     **é˜¶ä¹˜å¤æ‚åº¦(factorial complexity)**     |\n","publishedTitle":"ã€Œç¦»æ•£æ•°å­¦åŠå…¶åº”ç”¨ã€Chapter 3. Algorithm"}},{"id":"df2ae727-879e-5ec1-8276-fa606d979981","fields":{"slug":"/course/dm/note/5/","plainText":"\n> æœ¬ç¯‡ç¬”è®°æ¶µç›–äº†è®¡æ•°åŸç†çš„åŸºæœ¬æ¦‚å¿µï¼ŒåŒ…æ‹¬åŠ æ³•åŸç†ã€ä¹˜æ³•åŸç†ã€å®¹æ–¥åŸç†å’Œæ ‘å½¢å›¾ç­‰ã€‚æ¥ç€ä»‹ç»äº†é¸½ç¬¼åŸç†åŠå…¶å¹¿ä¹‰å½¢å¼ï¼Œæ’åˆ—ç»„åˆçš„å®šä¹‰å’Œè®¡ç®—æ–¹æ³•ï¼Œä»¥åŠå¦‚ä½•å¤„ç†é‡å¤å…ƒç´ çš„æ’åˆ—å’Œç»„åˆã€‚è¿˜æ¢è®¨äº†å°†å¯¹è±¡åˆ†é…åˆ°ç›’å­ä¸­çš„ä¸åŒæƒ…å†µï¼Œç»„åˆæ’ç­‰å¼çš„åº”ç”¨ï¼Œä»¥åŠé€’æ¨å…³ç³»çš„å®šä¹‰å’Œè§£æ³•ã€‚æœ€åï¼Œç”Ÿæˆå‡½æ•°çš„æ¦‚å¿µåŠå…¶åœ¨è®¡æ•°é—®é¢˜å’Œé€’æ¨å…³ç³»ä¸­çš„åº”ç”¨ä¹Ÿå¾—åˆ°äº†é˜è¿°ã€‚<small style=\"font-style: italic; opacity: 0.5\">ï¼ˆç”± gpt-4o-mini ç”Ÿæˆæ‘˜è¦ï¼‰</small>\n\n<!-- more -->\n\n## 1. è®¡æ•°åŸç† Counting Principles\n\n### 1.1. åŠ æ³•åŸç† The Sum Rule\n\n**åŠ æ³•åŸç†(the sum rule)**ï¼šIf $S$ and $T$ are **ä¸ç›¸äº¤çš„(disjoint)** finite sets, then\n\n$$\n|S\\cup T| = |S| +|T|\n$$\n\n### 1.2. ä¹˜æ³•åŸç† The Product Rule\n\n**ä¹˜æ³•åŸç†(the product rule)**ï¼šIf $S$ and $T$ are finite sets, then\n\n$$\n|S \\times T| = |S| \\times |T|\n$$\n\nHere $S \\times T$ denotes the Cartesian product of sets $S$ and $T$.\n\n### 1.3. å®¹æ–¥åŸç† The Inclusion-Exclusion principle\n\n**å®¹æ–¥åŸç†(the inclusion-exclusion principle = subtraction rule)**ï¼šIf $S$ and $T$ are finite sets, then\n\n$$\n|S\\cup T| = |S| + |T| - |S\\cap T|\n$$\n\n### 1.4. æ ‘å½¢å›¾ Tree Diagrams\n\nä¸€ç§ç”¨**æ ‘å½¢å›¾(tree diagram)** æ¥è®¡æ•°çš„æ€æƒ³ï¼šTo use trees in counting, we use a branch to represent each possible choice. We represent the possible outcomes by the leaves.\n\n> [!example] Chapter 6.1 - Example 9\n>\n> How many bit strings of length four do not have two consecutive 1s?\n>\n> > [!quote]- Solution\n> > ![|320](https://img.memset0.cn/2024/04/07/8n9QNU4U.png)\n> > There are $8$ bit strings of length four without two consecutive 1s.\n\n## 2. é¸½ç¬¼åŸç† The Pigeonhole Principle\n\n> [!important] **é¸½ç¬¼åŸç†(the pigeonhole principle)**\n>\n> If $k$ is a positive integer and $k+1$ or more objects are placed into $k$ boxes, then there is at least one box containing two or more of the objects.\n\n> [!important] **å¹¿ä¹‰é¸½ç¬¼åŸç†(the generalized pigeonhole principle)**\n>\n> If $n$ objects are placed into $k$ boxes, then there is at least one box containing at least $\\lceil n/k \\rceil$ objects.\n\n> [!example] Chapter 6.2 - Example 6\n>\n> Every sequence of $n^2+1$ distinct integers contains a subsequence of length $n + 1$ that is either strictly increasing or strictly decreasing.\n>\n> > [!quote]- Solution by myself\n> > Dilworth å®šç†æŒ‡å‡ºï¼Œå¯¹äºä»»æ„æœ‰é™ååºé›†ï¼Œå…¶æœ€é•¿åé“¾é•¿åº¦å¿…ç­‰äºæœ€å°é“¾åˆ’åˆ†ä¸­é“¾çš„æ•°ç›®ã€‚æ•…å‘½é¢˜â€œæœ€é•¿ä¸Šå‡å­åºåˆ—çš„é•¿åº¦ä¸º $n$â€ çš„å¯¹å¶å‘½é¢˜ä¸ºâ€œéå‡å­åºåˆ—çš„æœ€å°åˆ’åˆ†æ•°ä¸º $n$â€ã€‚\n> >\n> > å¯¹äºåŸæ•°åˆ—ï¼Œè‹¥å…¶æœ€é•¿ä¸Šå‡å­åºåˆ—çš„å¤§äºç­‰äº $n+1$ï¼Œåˆ™é—®é¢˜è§£å†³ï¼›å¦åˆ™å­˜åœ¨ä¸€ç»„ $n$ ä¸ªä¸‹é™å­åºåˆ—çš„åˆ’åˆ†ã€‚æ ¹æ®é¸½ç¬¼åŸç†ï¼Œå…¶ä¸­è‡³å°‘æœ‰ä¸€ä¸ªçš„é•¿åº¦å¤§äº $n$ï¼Œå³å¯æ‰¾åˆ°ä¸€ä¸ªé•¿åº¦å¤§äºç­‰äº $n+1$ çš„ä¸‹é™å­åºåˆ—ã€‚\n>\n> > [!quote]- Solution by teacher\n> >\n> > åè¯æ³•ï¼šç”¨ $(x_i,y_i)$ è¡¨ç¤ºç¬¬ $i$ ä¸ªä½ç½®å¼€å§‹çš„æœ€é•¿ä¸Šå‡å­åºåˆ—é•¿åº¦å’Œæœ€é•¿ä¸‹é™å­åºåˆ—é•¿åº¦ï¼Œæ ¹æ®é¸½ç¬¼åŸç†ï¼Œå¿…å­˜åœ¨ $i,j$ æ»¡è¶³ $(x_i,y_i) = (x_j,y_j)$ï¼Œè€Œ $a_i \\neq  a_j$ï¼Œæ•…çŸ›ç›¾ã€‚\n> >\n> > ![480](https://img.memset0.cn/2024/04/07/lARFh590.png)\n> >\n> > ![|480](https://img.memset0.cn/2024/04/07/hxBsNyp7.png)\n\n## 3. æ’åˆ—ç»„åˆ Permutations and Combinations\n\n### 3.1. Introduction\n\n> [!summary] Definition: Permutation\n>\n> A **æ’åˆ—(permutation)** of a set of _distinct_ objects is an _ordered_ arrangement of these objects.\n>\n> An r-permutation is an _ordered_ arrangement of $r$ elements of a set, denoted by $P(n,r)$.\n>\n> $$\n> P(n,r) = {n\\times (n-1)\\times \\cdots \\times (n-r+1)}\n> $$\n\n> [!summary] Definition: Combination\n> A r-**ç»„åˆ(combination)** of elements of a set is an _unordered_ selection of $r$ elements from the set, denoted by $C(n,r) = \\displaystyle\\binom n r$.\n>\n> $$\n> C(n,r) = \\frac{P(n,r)}{P(r,r)} = \\frac{n\\times (n-1)\\times \\cdots \\times (n-r+1)}{r\\times (r-1)\\times \\cdots \\times 1}\n> $$\n\n### 3.2. Permutation and Combination with Repetition\n\n**$r$-permutation with repetition**ï¼šThe number of $r$-permutations of a set of $n$ objects with repetition allowed is\n\n$$\nn^r\n$$\n\n**$n$-permutation with limited repetition**ï¼šThe number of different permutations of $n$ objects, where there are $n_1$ indistinguishable objects of type1, â€¦, and $n_k$ indistinguishable objects of type $k$, is\n\n$$\n\\frac{n!}{n_1!n_2!\\cdots n_k!}\n$$\n\n**$r$-circle permutation**ï¼šThe number of $r$-circle permutations of a set of $n$ objects is\n\n$$\n\\frac{P(n,r)}{r}\n$$\n\n![|280](https://img.memset0.cn/2024/04/09/sZRkbD1Z.png)\n\n**$r$-combination with repetition**ï¼šThe number of $r$-combination from a set with $n$ elements when repetition of elements is allowed is\n\n$$\n\\binom{n+r-1}{r}\n$$\n\nè¿™ä¸ªå°±æ˜¯éš”æ¿æ³•å¤§å®¶æ‡‚çš„éƒ½æ‡‚ã€‚\n\n### 3.3. Distributing Objects into Boxes\n\n**Distinguishable objects and distinguishable boxes**ï¼šThe number of ways to distribute $n$ distinguishable objects into $k$ distinguishable boxes so that $n_i$ objects are place into box $i$, $i=1,2,\\cdots,k$, equals\n\n$$\n\\frac{n!}{n_1! n_2! \\cdots n_k!}\n$$\n\n**Distinguishable objects and indistinguishable boxes**ï¼šThe number of ways to distribute $n$ distinguishable objects into $k$ indistinguishable boxes is\n\n$$\n\\sum_{j=1}^k S(n,j) = \\sum_{j=1}^k \\left( \\sum_{i=0}^{j-1} \\binom{i}{j} \\frac{(-1)^i (j-i)^n}{j!}  \\right)\n$$\n\néœ€è¦å¼•å…¥ç¬¬äºŒç±»æ–¯ç‰¹æ—æ•°ã€‚ä½†ä¸€èˆ¬æ¥è¯´ï¼Œä¸ææ–¯ç‰¹æ—æ•°é‚£ä¸€å¥—ï¼Œæ‰‹åŠ¨æšä¸¾ä¸€ä¸‹å¯èƒ½çš„éš”æ¿æƒ…å†µï¼Œå¹¶åˆ©ç”¨ç»„åˆæ•°è¿›è¡Œç»Ÿè®¡çš„åšæ³•æ›´ä¸ºé«˜æ•ˆã€‚\n\n**Indistinguishable objects and distinguishable boxes**ï¼šThe number of ways to distribute $n$ indistinguishable objects into $k$ distinguishable boxes is\n\n$$\n\\binom{n-1}{k-1}\n$$\n\nè¿˜æ˜¯ä½¿ç”¨éš”æ¿æ³•ã€‚\n\n**Indistinguishable objects and indistinguishable boxes**ï¼šThe number of ways to distribute $n$ indistinguishable objects into $k$ indistinguishable boxes is\n\n### 3.4. ç»„åˆæ’ç­‰å¼ Combinatorial Indentities\n\n> [!important] Theorem 1: **äºŒé¡¹å¼å®šç†(the binomial theorem)**\n>\n> Let $x$ and $y$ be variables, and let $n$ be a nonegative integer. Then\n>\n> $$\n> (x+y)^n = \\sum_{j=0}^n \\binom{n}{j} x^{n-j} y^j\n> $$\n\nå¯ä»¥å¾—åˆ°ä»¥ä¸‹æ¨è®ºï¼š\n\n$$\n\\sum_{k=0}^n \\binom{n}{k} = 2^n\n$$\n\n$$\n\\sum_{k=0}^n (-1)^k \\binom {n}{k} = 0\n$$\n\n> [!important] Theorem 2: **å¸•æ–¯å¡æ’ç­‰å¼(PASCAL's identity)**\n>\n> Let $n$ and $k$ be positive integers with $k\\le n$. Then\n>\n> $$\n> \\binom{n+1}{k}=\\binom{n}{k-1}+\\binom{n}{k}\n> $$\n\n> [!important] Theorem 3: **èŒƒå¾·è’™å¾·æ’ç­‰å¼(Vandermonde's indentity)** â˜…\n>\n> Let $m,n$ and $r$ be nonnegative integer with $r$ not exceeding either $m$ or $n$. Then\n>\n> $$\n> \\binom{m+n}{r} = \\sum_{k=0}^r \\binom{m}{r-k}\\binom{n}{k}\n> $$\n\nå¯ä»¥å¾—åˆ°ä»¥ä¸‹æ¨è®ºï¼š\n\n$$\n\\binom{2n}{n} = \\sum_{k=0}^n \\binom{n}{k}^2\n$$\n\n> [!important] Theorem 4\n> Let $n$ and $r$ be nonnegative integer with $r \\le n$. Then\n>\n> $$\n> \\binom{n+1}{r+1} = \\sum_{j=r}^n\\binom{j}{r}\n> $$\n\n## 4. ç»„åˆè¯æ˜ Combinatorial Proofs\n\nA **æ•°ä¸¤æ¬¡çš„è¯æ˜æ–¹æ³•(double counting proof)** uses counting arguments to prove that both sides of an identity count the same objects, but in different ways.\n\nA **åŸºäºåŒå°„çš„è¯æ˜æ–¹æ³•(bijective proof)** shows that there is a bijection between the sets of objects counted by the two sides of the identity.\n\n> [!example]- åˆ©ç”¨ç»„åˆæ–¹æ³•è¯æ˜ï¼š$C(n,r)=C(n,n-r)$\n>\n> ![|540](https://img.memset0.cn/2024/04/09/KoYDr1Fd.png)\n\n## 5. é€’æ¨å…³ç³» Recurrence Relations\n\n### 5.1. é€’æ¨å…³ç³» Recurrence Relations\n\n> [!summary] Definition: Recurrence Relations\n> A **é€’æ¨å…³ç³»(recurrence relation)** for the sequence $\\{a_n\\}$ is an equation that expresses $a_n$ in terms of one or more orf the previous terms of the sequence, namely, $a_0,a_1,\\ldots,a_{n-1}$ or all integers $n$ with $n\\ge n_0$, where $n_0$ is a nonnegative integer.\n>\n> $$\n> a_n= f(a_0,a_1,a_2,\\ldots,a_{n-1}),\\quad  n\\ge n_0\n> $$\n\næ»¡è¶³åŒä¸€ç»„é€’æ¨å…³ç³»çš„æ•°åˆ—å¯èƒ½æœ‰å¾ˆå¤šï¼Œæˆ‘ä»¬ç”¨**åˆå§‹æ¡ä»¶(initial conditon)** åŒºåˆ†ä»–ä»¬ã€‚\n\n### 5.2. çº¿æ€§é€’æ¨ Linear Recurrence Relations\n\n> [!summary] Definition: Linear Homogeneous Recurrence Relation of Degree $k$ with Constant Coefficients\n>\n> It refers to a recurrence relation in the form\n>\n> $$\n> a_n=c_1 a_{n-1} + c_2 a_{n-2} + \\cdots + c_k a_{n-k}\n> $$\n>\n> where $c_1,c_2,\\ldots,c_k$ are real numbers, and $c_k\\neq 0$.\n\n- **çº¿æ€§(linear)**ï¼šlinear combination of previous terms\n- **å¸¸ç³»æ•°(constant coefficient)**ï¼šthe coefficients of $a_i$s are constants\n- **é˜¶(degree)** $k$ï¼š$a_n$ å¯ä»¥çœ‹åšä¸€ä¸ªä¹‹å’Œ*å‰* $k$ é¡¹æœ‰å…³çš„å‡½æ•°ã€‚ $a_n$ is a function of the previous $k$ terms of the sequence\n- **é½æ¬¡(homogeneous)**ï¼šç­‰å¼å³è¾¹æ²¡æœ‰éé›¶çš„å¸¸æ•°é¡¹ã€‚If we put all the $a_i$s on the left side of the equation and everything else on the right side, then the right side is $0$. Otherwise **éé½æ¬¡(nonhomogeneous)**\n\n> [!example]- Some Examples\n>\n> ![|500](https://img.memset0.cn/2024/04/16/AaDunHCW.png)\n\næˆ‘ä»¬å¯ä»¥ä»å¸¸ç³»æ•° $k$ é˜¶çº¿æ€§é½æ¬¡é€’æ¨çš„é€’æ¨å¼ä¸­å¾—åˆ°ä»–çš„**ç‰¹å¾æ–¹ç¨‹(characteristic equation)**ï¼š\n\n$$\nr^k - c_1 r^{k-1} - c_2 r^{k-2} - \\cdots - c_k = 0\n$$\n\nå’Œ**ç‰¹å¾æ ¹(characteristic root)**ï¼š\n\n$$\nr_1,r_2,\\ldots,r_k\n$$\n\n#### 5.2.1. è§£å¸¸ç³»æ•°çº¿æ€§é½æ¬¡é€’æ¨ Solve Linear Homogeneous Recurrence Relation With Constant Coefficients\n\n> [!important] Theorem\n>\n> è®¾ $c_1,c_2,\\cdots,c_k$ ä¸ºå®ç³»æ•°ã€‚å‡è®¾é€’æ¨å…³ç³»çš„ç‰¹å¾æ–¹ç¨‹ $r^k-c_1 r^{k-1} - \\cdots - c_k=0$ æœ‰ $t$ ä¸ªä¸åŒçš„ç‰¹å¾æ ¹ $r_1,r_2,\\cdots,r_t$ ä¸”é‡å¤æ¬¡æ•°åˆ†åˆ«ä¸º $m_1,m_2,\\cdots,m_t$ã€‚é‚£ä¹ˆå¸¸ç³»æ•°çº¿æ€§é½æ¬¡é€’æ¨æ•°åˆ— $\\{a_n\\}$ çš„ä¸€ä¸ª**é€šè§£(general solution)** æ˜¯\n>\n> $$\n> \\begin{aligned}\n> a_n = & \\,(\\alpha_{1,0} +\\alpha_{1,1} n+\\cdots+\\alpha_{1,m_1-1} n^{m_1-1}) r_1^n\\\\\n> + & \\,(\\alpha_{2,0} + \\alpha_{2,1} n + \\cdots + \\alpha_{2,m_2-1} n^{m_2-1}) r_2^n  \\\\\n> + &\\, \\cdots\\\\\n> + & \\,(\\alpha_{t,0} + \\alpha_{t,1} n + \\cdots +\\alpha_{t,m_t-1} n^{m_t-1}) r_t^n\n> \\end{aligned}\n> $$\n\nè¿™é‡Œé€šè§£çš„ç³»æ•° $\\alpha_{i, j} \\,(1\\le i\\le t,\\,1\\le j\\le m_i)$ ä¸€èˆ¬é‡‡ç”¨æ’å€¼ï¼ˆæˆ–è€…è¯´è§£çº¿æ€§æ–¹ç¨‹ç»„ï¼‰çš„æ–¹å¼æ±‚å¾—ã€‚\n\n#### 5.2.2. è§£å¸¸ç³»æ•°çº¿æ€§éé½æ¬¡é€’æ¨ Solve Linear Nonhomogeneous Recurrence Relation With Constant Coefficients\n\nè¿™ä¸€èŠ‚ä¸­æˆ‘ä»¬è§£å†³çš„æ˜¯å½¢å¦‚è¿™æ ·çš„é€’æ¨å…³ç³»ï¼ˆè¿™é‡Œ $c_i\\,(1\\le i\\le k)$ æ˜¯å¸¸å®æ•°ï¼Œ$F(n)$ æ˜¯ä¸€ä¸ªéæ’ä¸ºé›¶ä¸”åªä¸ $n$ æœ‰å…³çš„å‡½æ•°ï¼‰ï¼š\n\n$$\na_n = c_1 a_{n-1} +c_2 a_{n-2} +\\cdots + c_k a_{n-k} +F(n)\n$$\n\n> [!important] Theorem 1\n>\n> è®¾ $\\{a_n^{(p)}\\}$ æ˜¯å¸¸ç³»æ•°çº¿æ€§éé½æ¬¡é€’æ¨ $a_n=c_1 a_{n-1} +c_2 a_{n-2}+\\cdots c_k a_{n-k}+ F(n)$ çš„ä¸€ä¸ª**ç‰¹è§£(particular solution)**ï¼Œé‚£ä¹ˆä»–çš„é€šè§£å¯ä»¥è¢«è¡¨ç¤ºä¸º $\\{a_n^{(p)}+a_n^{(h)}\\}$ï¼Œè¿™é‡Œ $\\{a_n^{(h)}\\}$ æ˜¯å¸¸ç³»æ•°çº¿æ€§é½æ¬¡é€’æ¨ $a_n=c_1 a_{n-1} +c_2 a_{n-2} +\\cdots + c_k a_{n-k}$ çš„ä¸€ä¸ªé€šè§£ã€‚\n>\n> > [!quote]- Proof\n> >\n> > ![|600](https://img.memset0.cn/2024/05/07/3vNPY5HQ.png)\n\n> [!important] Theorem 2 â˜…\n>\n> å‡è®¾å¸¸ç³»æ•°çº¿æ€§éé½æ¬¡é€’æ¨çš„éé½æ¬¡éƒ¨åˆ†å¯ä»¥è¡¨ç¤ºä¸º\n>\n> $$\n> F(n)=(b_t n^t + b_{t-1} n^{t-1} + \\cdots + b_1 n + b_0) s^n\n> $$\n>\n> é‚£ä¹ˆè¯¥éé½æ¬¡é€’æ¨çš„ç‰¹è§£éµå¾ªä»¥ä¸‹å½¢å¼\n>\n> $$\n> n^m (p_t n^t + p_{t-1} n^{t-1} + \\cdots + p_1 n + p_0) s^n\n> $$\n>\n> è¿™é‡Œ $m$ è¡¨ç¤º $s$ ä½œä¸ºç‰¹å¾æ–¹ç¨‹çš„è§£çš„é‡æ•°ï¼Œå¦‚æœ $s$ ä¸æ˜¯ç‰¹å¾æ ¹åˆ™ $m=0$ã€‚\n\nä¸€èˆ¬æ¥è¯´è¦è§£çš„ $F(n)$ éƒ½ç¬¦åˆ Theorem 2 çš„å½¢å¼ï¼Œè¿™ç§æƒ…å†µä¸‹å…ˆæŠŠç‰¹è§£çš„å½¢å¼ä»£å…¥é€’æ¨å¼ï¼Œå³å¯æ±‚ç‰¹ä¸€ç»„ç‰¹è§£ $\\{a_n^{(p)}\\}$ã€‚éšåè‹¥ç»™äº†åŸæ•°åˆ—çš„åˆå§‹æ¡ä»¶ï¼Œåˆ™å°†å…¶å‡å» $\\{a_n^{(p)}\\}$ ä¸­çš„å¯¹åº”é¡¹ï¼Œä»è€Œè§£å¾— $\\{a_n^{(h)}\\}$ã€‚\n\n## 6. ç”Ÿæˆå‡½æ•° Generating Functions\n\n> [!quote] Some Mathematical Terms\n>\n> - **$x$ çš„ $k$ æ¬¡æ–¹($x$ to the power of $k$)**ï¼š$x^k$\n> - **åˆ†å¼åˆ†è§£(partial fraction decomposition)**\n> - **ä¸€é˜¶å¯¼æ•°(the first derivative)**ã€**äºŒé˜¶å¯¼æ•°(the second derivvative)**ï¼šâ€œ$f(x)$ çš„ä¸€é˜¶å¯¼â€ç”¨è‹±è¯­è¯´æ˜¯â€œthe first derivative of $f(x)$â€ã€‚\n> - **å·ç§¯(convolution)**\n\n> [!summary] Definition: (Original) Generating Function\n>\n> The **ç”Ÿæˆå‡½æ•°(generating function)** for the sequence $a_0,a_1,a_2,\\ldots a_k,\\ldots$ of read numbers is the infinite series\n>\n> $$\n> G(x) = a_0 + a_1 x + a_2 x^2 + \\cdots + a_k x^k + \\cdots = \\sum_{k=0}^{\\infty} a_k x^k\n> $$\n\n- åœ¨ä½¿ç”¨ç”Ÿæˆå‡½æ•°æ—¶ï¼Œæˆ‘ä»¬ä¸å…³å¿ƒå…¶å®šä¹‰åŸŸï¼Œä¹Ÿä¸å…³å¿ƒå…¶çš„æ•›æ•£æ€§ã€‚\n- æœ¬è¯¾ç¨‹ä¸­ï¼Œæˆ‘ä»¬ä¸å­¦ä¹ æŒ‡æ•°ç”Ÿæˆå‡½æ•°ï¼Œç‹„åˆ©å…‹é›·ç”Ÿæˆå‡½æ•°ç­‰å…¶ä»–ç±»å‹çš„ç”Ÿæˆå‡½æ•°ï¼Œæ•…ç›´æ¥ç”¨â€œç”Ÿæˆå‡½æ•°â€ä¸€è¯é»˜è®¤æŒ‡ä»£ OGFã€‚\n\n> [!important] Theorem 1\n>\n> Let $f(x) = \\sum\\limits_{k=0}^{\\infty} a_k x^k$ï¼Œ$g(x) = \\sum\\limits_{k=0}^{\\infty} b_k x^k$. Then\n>\n> - $f(x) + g(x) = \\sum\\limits_{k=0}^\\infty (a_k + b_k) x^k$ï¼›\n> - $\\alpha \\cdot f(x) = \\sum\\limits_{k=0}^\\infty \\alpha \\cdot a_k x^k$ï¼›\n> - $x \\cdot f'(x) = \\sum\\limits_{k=0}^\\infty k \\cdot a_k x^k$ï¼›\n> - $f(\\alpha x) = \\sum\\limits_{k=0}^\\infty a_k \\alpha^k x^k$ï¼›\n> - $f(x)g(x) = \\sum\\limits_{k=0}^\\infty \\sum\\limits_{i=0}^\\infty a_k b_i x^{k+i}$ã€‚\n\n### 6.1. å¹¿ä¹‰äºŒé¡¹å¼å®šç† The Extended Binomial Theorem\n\n> [!summary] Definition: **å¹¿ä¹‰äºŒé¡¹å¼(extended binomial coefficient)**\n>\n> Let $u$ be a real number and $k$ a nonnegative integer. Then the extended binomial coefficient is defined by\n>\n> $$\n> \\binom{u}{k} = \\begin{cases}\n> u(u-1)\\cdots (u-k+1)/k! \\quad &\\text{if } k>0\\\\\n> 1\\quad&\\text{if }k=0\n> \\end{cases}\n> $$\n\n> [!important] Theorem: **å¹¿ä¹‰äºŒé¡¹å¼å®šç†(the extended binomial theorem)** â˜…\n> Let $x$ be a real number with $|x|<1$ and let $u$ be a real number. Then\n>\n> $$\n> (1+x)^u  = \\sum_{k=0}^\\infty \\binom{u}{k} x^k\n> $$\n\n### 6.2. Some Common Used Generating Functions\n\n|        Sequence         |             Generating Function             |\n| :---------------------: | :-----------------------------------------: |\n|        $C(n,k)$         |                  $(1+x)^n$                  |\n|      $C(n,k) a^k$       |                 $(1+ax)^n$                  |\n|         $[k<n]$         | $1+x+x^2+\\cdots+x^{n-1}=\\dfrac{1-x^n}{1-x}$ |\n|           $1$           |              $\\dfrac{1}{1-x}$               |\n|          $a^k$          |              $\\dfrac{1}{1-ax}$              |\n|          $k+1$          |            $\\dfrac{1}{(1-x)^2}$             |\n|      $C(n+k-1,k)$       |                $(1-x)^{-n}$                 |\n|   $(-1)^k C(n+k-1,k)$   |                $(1+x)^{-n}$                 |\n|    $C(n+k-1,k) a^k$     |                $(1-ax)^{-n}$                |\n|     $\\dfrac{1}{k!}$     |                    $e^x$                    |\n| $\\dfrac{(-1)^{k+1}}{k}$ |                 $\\ln (1+x)$                 |\n\n### 6.3. ç”Ÿæˆå‡½æ•°çš„åº”ç”¨ Applications of Generating Function\n\n> [!example] Example: Solve Counting Problems with Generating Function\n>\n> Suppose that there are $2r$ red balls, $2r$ blue balls, and $2r$ white balls. How many ways to select $3r$ balls from these balls?\n>\n> > [!quote]- Combinational Solution\n> >\n> > å®¹æ–¥åŸç†+éš”æ¿æ³•ã€‚å…ˆä¸åŠ é™åˆ¶ä»»å–ï¼Œç„¶åå‡æ‰æŸç§é¢œè‰²é€‰è¶…è¿‡ $2r$ ä¸ªçš„æƒ…å†µï¼ŒæŒ‰ç†æ¥è¯´è¿˜è¦åŠ ä¸Šæœ‰ä¸¤ä¸ªé€‰è¶…ä½†æ˜¯è¿™å·²ç»è¶…è¿‡ $3r$ äº†æ•…ä¸éœ€è¦è€ƒè™‘ã€‚æ‰€ä»¥ç­”æ¡ˆæ˜¯ï¼š\n> >\n> > $$\n> > \\binom{3r+3-1}{3-1} - 3 \\binom{3r-(r-1)+3-1}{3-1}\n> > $$\n>\n> > [!quote]- Solution by Generating Function\n> >\n> > $$\n> > [x^{3r}] \\left( \\frac{1-x^{2r+1}}{1-x} \\right)^3 = \\binom{3r+2}{2}- 3\\binom{r+1}{2}\n> > $$\n\n> [!example] Example: Solve Recurrence Relations with Generating Function\n>\n> Use generating functions to solve the recurrence relation $a_n=2a_{n-1} + 3 a_{n-2} + 4^n + 6$ with initial conditions $a_0=20,\\,a_1=60$.\n>\n> > [!quote]- Solution\n> >\n> > ![ydMpu3C0.png|590](https://img.memset0.cn/2024/04/26/ydMpu3C0.png)\n> >\n> > ![sgMGeqvD.png|365](https://img.memset0.cn/2024/04/26/sgMGeqvD.png)\n\n## 7. å®¹æ–¥åŸç† The Principle of Inclusion-Exclusion\n\n> [!important] Theorem: The Principle of Inclusion-Exclusion\n>\n> $$\\mid A_{1}\\cup A_{2}\\cup\\cdots\\cup A_{n}\\mid=\\sum_{i=1}^{n}|A_{i}|-\\sum_{1\\leq i<j\\leq n}| A_{i}\\cap A_{j}|+\\sum_{1\\leq i<j<k\\leq n}| A_{i}\\cap A_{j}\\cap A_{k}|+\\cdots+(-1)^{n+1} | A_{1}\\cap A_{2}\\cap\\cdots\\cap A_{n}|$$\n>\n> and an alternative form:\n>\n> $$N(P_1^{\\prime}P_2^{\\prime}\\cdots P_n^{\\prime})=N-\\left|A_1\\cup A_2\\cdots\\cup A_n\\right|=N-\\sum_{1\\leq i\\leq n}N(P_i)+\\sum_{1\\leq i<j\\leq n}N(P_iP_j)+\\cdots+(-1)^nN(P_1P_2\\cdots P_n)$$\n\n### 7.1. Examples\n\n#### 7.1.1. åŸƒæ°ç­› The Sieve of Eratoshenes\n\n> [!example] Example: The sieve of Eratoshenes\n>\n> ![|300](https://img.memset0.cn/2024/04/23/RZk5WHVt.png)\n\n> [!example] Example: Derangement\n>\n> Count the permutations for n objects that leave no objects in their original positions.\n>\n> > [!important] Theorem\n> >\n> > The number of derangements of a set with $n$ elements is\n> >\n> > $$\n> > D_n=n! \\left(1-\\frac{1}{1!}+\\frac{1}{2!}-\\frac{1}{3!}+\\cdots+(-1)^n \\frac{1}{n!} \\right)\n> > $$\n","publishedTitle":"ã€Œç¦»æ•£æ•°å­¦åŠå…¶åº”ç”¨ã€Chapter 6 & 8. Counting"}},{"id":"ba73b2c7-bef8-5044-bc18-455982a13965","fields":{"slug":"/course/dm/note/6/","plainText":"\n> æœ¬ç¯‡ç¬”è®°ä¸»è¦ä»‹ç»äº†äºŒå…ƒå…³ç³»çš„å®šä¹‰ã€è¡¨ç¤ºæ–¹æ³•åŠå…¶ç‰¹æ®Šæ€§è´¨ï¼ŒåŒ…æ‹¬è‡ªåæ€§ã€å¯¹ç§°æ€§ã€ä¼ é€’æ€§ç­‰ã€‚è¿˜ä»‹ç»äº†å…³ç³»çš„ç»„åˆã€å¤åˆã€é€†å…³ç³»åŠå…¶é—­åŒ…ï¼Œæœ€åæ¢è®¨äº†ç­‰ä»·å…³ç³»å’Œååºå…³ç³»çš„æ¦‚å¿µåŠå…¶ç›¸å…³å®šç†ã€‚é€šè¿‡è¿™äº›å†…å®¹ï¼Œè¯»è€…å¯ä»¥æ·±å…¥ç†è§£å…³ç³»åœ¨é›†åˆè®ºä¸­çš„é‡è¦æ€§åŠå…¶åº”ç”¨ã€‚<small style=\"font-style: italic; opacity: 0.5\">ï¼ˆç”± gpt-4o-mini ç”Ÿæˆæ‘˜è¦ï¼‰</small>\n\n<!-- more -->\n\n## 1. äºŒå…ƒå…³ç³» Binary Relations\n\nA **äºŒå…ƒå…³ç³»(binary relation)** $R$ from a set $A$ to a set $B$ is a subset of $A\\times B$.\n\n- å…³ç³»æ˜¯é›†åˆï¼šâ€œA binary relation $R$â€ is a set.\n- $R\\subseteq A\\times B$\n- $R=\\{(a,b)\\mid a\\in A, b\\in B, a\\;R\\;b\\}$.\n- â€œA relation on set $A$â€ means a relation from set $A$ to itself.\n\n> [!example]- Question: How many binary relations are there on a set $A$ with $n$ elements?\n>\n> $$\n> 2^{n^2}\n> $$\n\n> [!success] å…³ç³»çš„è¯æ˜é¢˜çš„è§£é¢˜æ€è·¯\n>\n> - åˆ©ç”¨å®šä¹‰ã€‚\n> - åˆ©ç”¨æ•°å­¦å½’çº³æ³•ã€‚\n\n### 1.1. è¡¨ç¤ºæ–¹æ³• Represent Methods\n\n#### 1.1.1. è¿æ¥çŸ©é˜µ Connection Matrices\n\nä¸¾ä¸ªä¾‹å­ï¼Œ$R$ æ˜¯ä¸€ä¸ªäºŒå…ƒå…³ç³»ï¼Œè¡¨ç¤ºä¸¤ä¸ªé›†åˆä¸­æŒ‰ä½æˆ–ä¸ä¸ºé›¶çš„å¯¹ï¼š\n\n$$\n\\begin{aligned}\nA  =\\{2,&3,4\\},B=\\{2,3,4,5,6\\} \\quad\nR = \\{(x,y) \\mid x \\in A,\\ y \\in B,\\ x \\mid y\\} \\\\\n&\\implies R =\\{(2,2),(2,4),(2,6),(3,3),(3,6),(4,4)\\}\n\\end{aligned}\n$$\n\nå¯ä»¥é€šè¿‡**è¿æ¥çŸ©é˜µ(connection matrix)** è¡¨ç¤ºäºŒå…ƒå…³ç³»ï¼š\n\n![jHqiS9Pb.png|277](https://img.memset0.cn/2024/04/23/jHqiS9Pb.png)\n\n#### 1.1.2. æœ‰å‘å›¾ Directed Graph\n\nå…³ç³» $(V,E)$ å¯¹åº”çš„**æœ‰å‘å›¾(directed graph = digraph)** æ˜¯å°† $V$ ä½œä¸ºç‚¹é›†ï¼Œ$E$ ä½œä¸ºè¾¹é›†çš„å›¾ã€‚\n\nå¯¹äºä¸€æ¡è¾¹ $(a,b)$ï¼Œ$a$ è¢«å«ä½œå…¶**èµ·å§‹èŠ‚ç‚¹(initial vertice)**ï¼Œ$b$ è¢«å«ä½œå…¶**ç»ˆæ­¢èŠ‚ç‚¹(terminal vertice)**ã€‚\n\n### 1.2. äºŒå…ƒå…³ç³»çš„ç‰¹æ®Šæ€§è´¨ Special Properties of Binary Relations\n\n| æ€§è´¨                        | æ¡ä»¶                                                                                 | å¤‡æ³¨                                                                                    | ä¸¾ä¾‹                   |\n| --------------------------- | ------------------------------------------------------------------------------------ | --------------------------------------------------------------------------------------- | ---------------------- |\n| **è‡ªåæ€§(reflexive)**       | $\\forall x (x\\in A\\rightarrow (x,x)\\in R)$                                           |                                                                                         | $(\\mathbb Z, =)$       |\n| **éè‡ªåæ€§(irreflexive)**   | $\\forall x (x\\in A\\rightarrow (x,x)\\not\\in R)$                                       |                                                                                         | $(\\mathbb Z, \\neq)$    |\n| **å¯¹ç§°æ€§(symmetric)**       | $\\forall x\\forall y((x,y)\\in R\\rightarrow (y,x)\\in R)$                               |                                                                                         | $(\\mathbb Z_+, \\perp)$ |\n| **åå¯¹ç§°æ€§(antisymmetric)** | $\\forall x \\forall y((x,y)\\in R \\land (y,x)\\in R\\rightarrow x=y)$                    | ä¸éå¯¹ç§°æ€§çš„å·®åˆ«åœ¨äºå…è®¸æœ‰è‡ªç¯ã€‚                                                        | $(\\mathbb Z, \\leq)$    |\n| **éå¯¹ç§°æ€§(asymmetric)**    | $\\forall x \\forall y ((x,y) \\in R \\rightarrow \\lnot ((y,x)\\in R))$                   | ä¸åå¯¹ç§°æ€§çš„å·®åˆ«åœ¨äºä¸å…è®¸æœ‰è‡ªç¯ï¼Œæ˜¯æ›´å¼ºçš„æ¡ä»¶ã€‚                                        | $(\\mathbb Z, <)$       |\n| **ä¼ é€’æ€§(transitive)**      | $\\forall x \\forall y \\forall z ((x,y)\\in R \\land (y,z)\\in R \\rightarrow (x,z)\\in R)$ | è‹¥åŒæ—¶å­˜åœ¨ $x\\rightarrow y$ å’Œ $y \\rightarrow z$ çš„è¾¹ï¼Œåˆ™å¿…å­˜åœ¨ $x\\rightarrow z$ çš„è¾¹ã€‚ | $(\\mathbb Z, \\leq)$    |\n\n> [!example]- è®¨è®ºé¢˜\n>\n> Is a relation $R$ is reflexive if it is symmetric and transitive?\n>\n> > [!quote] Yet a wrong proof\n> >\n> > $(a,b) \\in R$ and $R$ is symmetric implys $(b,a) \\in R$.\n> >\n> > $(a,b) \\in R$, $(b,a)\\in R$ and $R$ is transitive $(a,a) \\in R$.\n> >\n> > Which means that $R$ is reflexive.\n>\n> Incorrect. Because it cannot be guaranteed that for all $a \\in S$, there exists a $b$ such that $(a,b)\\in R$. Therefore, there might exist such an $a\\in R$ for which there is no relation concerning $a$.\"\n\n## 2. ç»„åˆå…³ç³» Combining Relations\n\nå› ä¸ºå®šä¹‰åœ¨é›†åˆ $A, B$ ä¸Šçš„ä»»æ„å…³ç³» $R$ æ˜¯ $A\\times B$ çš„å­é›†ï¼Œæˆ‘ä»¬å¯ä»¥å¯¹å…³ç³»å®šä¹‰ä»»æ„ç»„åˆè¿ç®—ã€‚\n\n### 2.1. é›†åˆè¿ç®— Set Operations\n\nå®šä¹‰åœ¨å…³ç³»ä¸Šçš„é›†åˆè¿ç®—å¯ä»¥ç›´æ¥ç±»æ¯”é›†åˆä¸Šçš„é›†åˆè¿ç®—ã€‚\n\nLet $A=\\{a_1,a_2,\\cdots,a_n\\}$, $B=\\{b_1,b_2,\\cdots,b_n\\}$, $M_{R_1} = [c_{ij}]$, $M_{R_2}=[d_{i,j}]$, the set operations of two relations are defined by\n\n$$\n\\begin{aligned}\nM_{R_1 \\cup R_2} &= [c_{ij} \\lor d_{ij}] = M_{R_1} \\lor M_{R_2} \\\\\nM_{R_1 \\cap R_2} &= [c_{ij} \\land d_{ij}] = M_{R_1} \\land M_{R_2}\\\\\nM_{\\overline{R_1}}&=[\\overline{c_{ij}}]\\\\\nM_{R_1-R_2} &= M_{R_1\\cap \\overline{R_2}} = [c_{ij} \\land \\overline{d_{ij}}]\\\\\n\\end{aligned}\n$$\n\n### 2.2. å…³ç³»çš„å¤åˆ Composition of Relations\n\nå¯¹äºå…³ç³» $R=\\{(a,b)\\mid a\\in A,b\\in B,aRb\\}$ å’Œå…³ç³» $S=\\{(b,c)\\mid b\\in B, c\\in C, bSc\\}$ï¼Œå®šä¹‰ **$S$ ä¸ $R$ çš„å¤åˆ(the composite of $R$ and $S$)** ä¸ºï¼š\n\n$$\nS \\circ R =\\{(a,c)\\mid a\\in A \\land c\\in C \\land \\exists b(b\\in B\\land aRb \\land bSc)\\}\n$$\n\n- å…³ç³»åˆæˆè¿ç®—æ»¡è¶³ç»“åˆå¾‹ï¼š$(R\\circ Q)\\circ S = R \\circ (Q \\circ S)$ã€‚\n\näºæ­¤æˆ‘ä»¬è¿˜å¯ä»¥é€’å½’å®šä¹‰**å…³ç³»çš„å¹‚(the power of relation)**ï¼š\n\n$$\nR^1=R,\\text{ and }R^{n+1}=R^n\\circ R\n$$\n\n> [!important] Theorem\n>\n> The relation $R$ on a set $A$ is transitive if and only if $R^n \\subseteq R,\\, n=1,2,3,\\ldots$.\n>\n> > [!quote]- Proof\n> >\n> > (1) $\\forall n (R^n\\subseteq R) \\Rightarrow R \\text{ is transitive}$\n> >\n> > $(a,b)\\in R$ï¼Œ$(b,c)\\in R$ï¼Œæ•… $(a,b)\\in R^2$ï¼›ç”±äº $R^2\\subseteq R$ï¼Œå¯ä»¥å¾—åˆ° $(a,c)\\in R$ï¼Œæ•… $R\\text{ is transitive}$ã€‚\n> >\n> > (2) $R\\text{ is transitive} \\Rightarrow \\forall n (R^n \\subseteq R)$\n> >\n> > ä½¿ç”¨æ•°å­¦å½’çº³æ³•ï¼Œå¯¹äºæ‰€æœ‰ $(a,b)\\in R^{n+1}=R^n\\circ R$ï¼Œé‚£ä¹ˆ $(a,x)\\in R^n\\subseteq R,\\ (x,b)\\in R$ ä¸” $R$ æœ‰ä¼ é€’æ€§å¯ä»¥æ¨å‡º $(a,b)\\in R$ã€‚\n\n### 2.3. é€†å…³ç³» Inverse Relations\n\nå¯¹äºå®šä¹‰åœ¨é›†åˆ $A$ åˆ° $B$ ä¸Šçš„å…³ç³» $R=\\{(a,b)\\mid a\\in A,b\\in B,aRb\\}$ï¼Œæˆ‘ä»¬å¯ä»¥å®šä¹‰ $B$ åˆ° $A$ çš„**é€†å…³ç³»(inverse relation)**ï¼š\n\n$$\nR^{-1} = \\{(b,a) \\mid (a,b)\\in R ,a\\in A,b\\in B\\}\n$$\n\n> [!note]- ä¸€äº›å…³äºé€†å…³ç³»çš„æ’ç­‰å¼\n>\n> è®¾ $R,S$ æ˜¯ä»é›†åˆ $A$ åˆ°é›†åˆ $B$ ä¸Šçš„å…³ç³»ï¼Œ$T$ æ˜¯ä»é›†åˆ $B$ åˆ°é›†åˆ $C$ çš„å…³ç³»ï¼Œ$P$ æ˜¯ä»é›†åˆ $C$ åˆ°é›†åˆ $D$ çš„å…³ç³»ã€‚\n>\n> - $(R \\cup S)^{-1} = R^{-1} \\cup S^{-1}$\n> - $(R\\cap S)^{-1} = R^{-1} \\cap S^{-1}$\n> - $(\\overline R)^{-1} = \\overline{R^{-1}}$\n> - $(R-S)^{-1} = R^{-1} - S^{-1}$\n> - $(A\\times B)^{-1} = B \\times A$ï¼š\n> - $\\overline R= A \\times B - R$\n> - $(S \\circ T)^{-1} = T^{-1} \\circ S^{-1}$\n> - $(R \\circ T) \\circ P = R \\circ (T \\circ P)$\n> - $(R \\cup S) \\circ T = R \\circ T \\cup S \\circ T$\n\n## 3. å…³ç³»çš„é—­åŒ… Closures of Relations\n\n> [!summary] Definition: å…³ç³»çš„é—­åŒ…\n>\n> The **é—­åŒ…(closure)** of a relation $R$ with respect to property $P$ is the relation $S$ with property if and only if\n>\n> (1) $S$ contains $R$;\n>\n> (2) $S$ is a subset of every relation with property $P$.\n>\n> (3) $S$ is the smallest relation satisfying (1) and (2).\n\n### 3.1. è‡ªåé—­åŒ… Reflexive Closure\n\nç»™å®šå…³ç³» $R$ï¼Œå…¶**è‡ªåé—­åŒ…(reflexive closure)** æ˜¯åœ¨ $R$ ä¸Šæ·»åŠ å…ƒç´ ï¼Œä½¿å¾—å¯¹äºæ¯ä¸€ä¸ªå…ƒç´  $a$ï¼Œéƒ½æœ‰ $(a, a)$ åœ¨ R ä¸­ã€‚\n\n> [!important] Theorem\n>\n> å…³ç³» $R$ çš„è‡ªåé—­åŒ…ç”¨ $r(R)$ è¡¨ç¤ºï¼Œä¸”æ»¡è¶³ $r(R) = R \\cup I_A$ã€‚\n>\n> - è¿™é‡Œ $I_A$ è¡¨ç¤ºé›†åˆ $A$ ä¸Šçš„å¯¹è§’çº¿å…³ç³»ï¼Œå³ $I_A = \\{(x,x) \\mid x \\in A\\}$ã€‚\n>\n> > [!quote]- Proof\n> >\n> > ![|500](https://img.memset0.cn/2024/05/13/eF4AKxZo.png)\n\n> [!important] Corollary\n>\n> $R = R \\cup I_A$ å½“ä¸”ä»…å½“ $R$ æ˜¯è‡ªåå…³ç³»ã€‚\n>\n> > [!quote]- Proof\n> >\n> > ![|420](https://img.memset0.cn/2024/05/27/VmP32Mw0.png)\n\n### 3.2. å¯¹ç§°é—­åŒ… Symmetric Closure\n\nç»™å®šå…³ç³» $R$ï¼Œå…¶**å¯¹ç§°é—­åŒ…(symmetric closure)** æ˜¯åœ¨ $R$ ä¸Šæ·»åŠ å…ƒç´ ï¼Œä½¿å¾—å¯¹äºæ¯ä¸€å¯¹å…ƒç´  $(a, b)$ï¼Œå¦‚æœ $(a, b)$ åœ¨ R ä¸­ï¼Œé‚£ä¹ˆ $(b, a)$ ä¹Ÿåœ¨ $R$ ä¸­ã€‚\n\n> [!important] Theorem\n>\n> å…³ç³» $R$ çš„å¯¹ç§°é—­åŒ…ç”¨ $s(R)$ è¡¨ç¤ºï¼Œä¸”æ»¡è¶³ $s(R) = R \\cup R^{-1}$ã€‚\n>\n> > [!quote]- Proof\n> >\n> > ![|490](https://img.memset0.cn/2024/05/13/MbiFU6BO.png)\n> >\n> > ![|520](https://img.memset0.cn/2024/05/13/knvAP0JH.png)\n\n> [!important] Corollary\n>\n> $R = R \\cup R^{-1}$ å½“ä¸”ä»…å½“ $R$ æ˜¯å¯¹ç§°å…³ç³»ã€‚\n\n### 3.3. ä¼ é€’é—­åŒ… Transitive Closure\n\nç»™å®šå…³ç³» $R$ï¼Œå…¶**ä¼ é€’é—­åŒ…(transitive closure)** æ˜¯åœ¨ $R$ ä¸Šæ·»åŠ å…ƒç´ ï¼Œä½¿å¾—å¯¹äºæ¯ä¸€å¯¹å…ƒç´  $(a, b)$ å’Œ $(b, c)$ï¼Œå¦‚æœ $(a, b)$ å’Œ $(b, c)$ åœ¨ $R$ ä¸­ï¼Œé‚£ä¹ˆ $(a, c)$ ä¹Ÿåœ¨ $R$ ä¸­ã€‚\n\n> [!important] Theorem 1\n>\n> è®¾ $R$ æ˜¯å®šä¹‰åœ¨ $A$ ä¸Šçš„å…³ç³»ï¼Œåˆ™æœ‰ä¸€æ¡ä» $a$ åˆ° $b$ çš„é•¿åº¦ä¸º $n$ çš„è·¯å¾„å½“ä¸”ä»…å½“ $(a,b) \\in R^n$ã€‚\n>\n> ä¸€äº›æ¥è‡ªä¸‹ä¸€ç« çš„æ¦‚å¿µï¼š\n>\n> - A **è·¯å¾„(path)** of length $n$ in a digraph $G$: A sequence of edges $(x_0,x_1),(x_1,x_2),\\ldots,(x_{n-1},x_n)$.\n> - **ç¯(cycle)**: A path of length $n$ with $x_0=x_n (n\\ge 1)$.\n>\n> > [!quote]- Proof (by induction)\n> >\n> > ![|500](https://img.memset0.cn/2024/05/13/lIkfBsZF.png)\n\n> [!important] Theorem 2\n>\n> The **ä¼ é€’é—­åŒ…(transitive closure)** of a relation $R$ is $t(R) = R^\\ast$.\n>\n> > [!summary] Definition: è¿é€šå…³ç³»\n> >\n> > **è¿é€šå…³ç³»(connectivity relation)** æ˜¯æ‰€æœ‰å¯é€šè¿‡ $R$ ä¸Šçš„è¾¹è¿é€šçš„æœ‰åºå¯¹çš„é›†åˆï¼Œå³ï¼š\n> >\n> > $$\n> > R^\\ast = \\displaystyle{\\bigcup_{i=1}^\\infty R^i}\n> > $$\n>\n> > [!quote]- Proof\n> >\n> > è¯æ˜ $R^\\ast$ æ˜¯ $R$ çš„ä¼ é€’é—­åŒ…ï¼š\n> >\n> > (1) $R \\subseteq R^\\ast$ã€‚\n> >\n> > (2) $R^\\ast$ is transitiveï¼šå¯¹äºä»»æ„ $(a,b) \\in R^\\ast \\land (b,c) \\in R^\\ast$ï¼Œæœ‰ä¸€æ¡ä» $a$ åˆ° $b$ çš„è·¯å¾„å’Œä¸€æ¡ä» $b$ åˆ° $c$ çš„è·¯å¾„ï¼Œé‚£è‡ªç„¶ä¹Ÿæœ‰ä¸€æ¡ä» $a$ åˆ° $c$ çš„è·¯å¾„ï¼Œæ•… $(a,c) \\in R^\\ast$ã€‚\n> >\n> > (3) $R^\\ast$ is the smallestï¼šå¯¹äºä»»æ„ $S$ æ»¡è¶³ $S$ å…·æœ‰ä¼ é€’æ€§ä¸” $R\\subseteq S$ã€‚æˆ‘ä»¬æœ‰ $R^\\ast \\subseteq S^\\ast = S$ï¼Œæ•… $R^\\ast \\subseteq S$ï¼Œå¾—è¯ã€‚\n\nå®é™…ä¸Šï¼Œé€šè¿‡ $R^\\ast = \\displaystyle{\\bigcup_{i=1}^n R^i}$ å³å¯è®¡ç®—ï¼Œå› ä¸ºæ ¹æ®é¸½ç¬¼åŸç†å¯ä»¥è¯æ˜ï¼Œé•¿åº¦ $>n$ çš„ç¯è‡³å°‘æœ‰ä¸€ä¸ªç¯ã€‚\n\n> [!important] Floyd-Warshall Algorithm\n>\n> å¯ä»¥é€šè¿‡ Floyd-Warshall ç®—æ³•æ±‚è§£å…³ç³»çš„ä¼ é€’é—­åŒ…ã€‚ï¼ˆè¿™å°±æ˜¯æœ€ç»å…¸çš„ $O(n^3)$ çš„ Floyd ç®—æ³•ã€‚ï¼‰\n>\n> ![|313](https://img.memset0.cn/2024/05/25/avpGisKx.png)\n\n## 4. ç­‰ä»·å…³ç³» Equivalence Relations\n\n> [!summary] Definition: Equivalence relation\n>\n> A relation $R$ on a set $A$ is an **ç­‰ä»·å…³ç³»(equivalence relation)** if $R$ is (1) reflexive; (2) symmetric; (3) transitive.\n>\n> We call $a$ and $b$ is **ç­‰ä»·çš„(equivalent)** if $(a,b) \\in R$, denoted as $a\\sim b$.\n\nå¦‚æœæˆ‘ä»¬æƒ³è¦è¯æ˜ä¸€ä¸ªå…³ç³»æ˜¯ç­‰ä»·å…³ç³»ï¼Œé€šå¸¸å¯ä»¥é€šè¿‡è¯æ˜è¿™ä¸€å…³ç³»æ»¡è¶³ä»¥ä¸Šä¸‰ä¸ªæ€§è´¨ã€‚\n\n### 4.1. ç­‰ä»·ç±» Equivalence Classes\n\n> [!summary] Definition: Equivalence class\n>\n> The **ç­‰ä»·ç±»(equivalence class)** of $x$: the set of all elements that is equivalent to $x$, denoted as $[x]_R$ or $[x]$.\n\n> [!important] Theorem\n>\n> å¦‚æœ $R$ æ˜¯é›†åˆ $A$ ä¸Šçš„ç­‰ä»·å…³ç³»ï¼Œåˆ™ä»¥ä¸‹ä¸‰ä¸ªå‘½é¢˜ç­‰ä»·ï¼š\n>\n> (1) $aRb$\n>\n> (2) $[a]=[b]$\n>\n> (3) $[a]\\cap[b] \\neq \\emptyset$\n>\n> > [!note] Note\n> >\n> > (2) å’Œ (3) çš„åŒºåˆ«åœ¨äºæˆ‘ä»¬éœ€è¦è¯´æ˜ $[a]$ å’Œ $[b]$ ä¸æ˜¯ç©ºé›†ã€‚\n>\n> > [!quote]- Proof\n> >\n> > ![|500](https://img.memset0.cn/2024/06/22/X42rGPW3.png)\n> >\n> > ![|500](https://img.memset0.cn/2024/06/22/ABjw8WKz.png)\n\n> [!important] Theorem 1\n>\n> è®¾ $R_1,R_2$ æ˜¯é›†åˆ $A$ ä¸Šçš„ç­‰ä»·å…³ç³»ï¼Œåˆ™ $R_1 \\cap R_2$ ä¹Ÿæ˜¯é›†åˆ $A$ ä¸Šçš„ç­‰ä»·å…³ç³»ã€‚\n\n> [!important] Theorem 2\n>\n> è®¾ $R_1,R_2$ æ˜¯é›†åˆ $A$ ä¸Šçš„ç­‰ä»·å…³ç³»ï¼Œåˆ™ $R_1 \\cup R_2$ å…·æœ‰è‡ªåæ€§å’Œå¯¹ç§°æ€§ã€‚è¿›ä¸€æ­¥çš„ï¼Œ$(R_1\\cup R_2)^\\ast$ æ˜¯é›†åˆ $A$ ä¸Šçš„ç­‰ä»·å…³ç³»ã€‚\n\n### 4.2. åˆ’åˆ† Partitions\n\n> [!summary] Definition: Partition\n>\n> A **åˆ’åˆ†(partition)** of set $A$ is a collection of disjoint nonempty subsets of $A$ that have $A$ as their union, denoted as $pr(A) = \\{A_1,A_2,\\cdots A_n\\}$.ï¼ˆä¸¤ä¸¤ä¸äº¤ï¼Œå¹¶ä¸ºå…¨é›†ï¼‰\n\n> [!important] Theorem\n>\n> Let $R$ be an equivalence relation on a set $A$. Then the equivalence classes of $R$ form a partition of $A$.\n>\n> Conversely, given a partition $\\{A_i\\mid i \\in I\\}$ of the set $A$, there is an equivalence relation $R$ that has the sets $A_i,i\\in I$, as its equivalence classes.\n\né›†åˆ $A$ çš„æ‰€æœ‰ç­‰ä»·ç±»æ˜¯åŸé›†åˆçš„ä¸€ä¸ªåˆ’åˆ†ï¼›ä»»ç»™ä¸€ä¸ªåˆ’åˆ†å­˜åœ¨ä¸€ä¸ªå…³ç³» $R$ ä½¿å¾—åˆ’åˆ†å‡ºçš„æ¯ä¸ªå­é›†éƒ½æ˜¯ç­‰ä»·ç±»ã€‚\n\n## 5. ååºå…³ç³» Partial Orderings\n\n### 5.1. ååºé›† Poset\n\n> [!summary] Definition: Partial ordering\n> A relation $R$ on a set $A$ is an **ååºå…³ç³»(partial ordering)** if $R$ is (1) reflexive; (2) antisymmetric; (3) transitive.\n>\n> Notation:\n>\n> - $(S,R)$: partially ordered set or **ååºé›†(poset)**.\n> - $a\\preccurlyeq b$: $(S,R)$ is a poset and $(a,b) \\in R$.\n\nå¦‚ $(\\mathbb Z, \\leq)$ å¯¹åº”çš„å…³ç³»ä¸º $R=\\{(a,b)\\mid a,b\\in \\mathbb Z\\land a\\le b\\}$ã€‚\n\n### 5.2. å­—å…¸åº Lexicographic Order\n\n> [!summary] Definition: **å­—å…¸åº(lexicographic order)**\n>\n> Given two posets $(A_1,\\preccurlyeq_1)$ and $(A_2,\\preccurlyeq_2)$, the lexicographic ordering on $A_1\\times A_2$ is defined by specifying that $(a_1,a_2)$ is less than $(b_1,b_2)$, that is, $(a_1, a_2)\\prec (b_1,b_2)$, either if $a_1 \\prec_1 b_1$ or if $a_1 =_1 b_1$ and $a_2 \\prec_2 b_2$.\n\nç›¸å½“äºå°±æ˜¯ä»ä½ä½åˆ°é«˜ä½ä¾æ¬¡æ¯”è¾ƒå¤§å°ã€‚è¿™æ˜¯å®šä¹‰åœ¨ä¸¤ä¸ªååºé›†çš„ç¬›å¡å°”ç§¯ä¸Šï¼Œå¯ä»¥é€šè¿‡æ­¤å®šä¹‰é€’æ¨å¾—åˆ°å¤šä¸ªååºé›†çš„ç¬›å¡å°”ç§¯çš„å­—å…¸åºçš„å®šä¹‰ã€‚\n\n> [!important] Theorem\n>\n> ç”±å¤šä¸ªååºé›†çš„ç¬›å¡å°”ç§¯å¾—åˆ°çš„å­—å…¸åºæ˜¯ä¸€ä¸ªååºå…³ç³»ã€‚\n\n### 5.3. å“ˆæ–¯å›¾ Hasse Diagrams\n\n**å“ˆæ–¯å›¾(hasse diagram)** æ˜¯ä¸€ç§è¡¨ç¤ºååºé›†æˆ–è€…æ ¼çš„å›¾å½¢å·¥å…·ã€‚æ„æ¶å“ˆæ–¯å›¾çš„æ­¥éª¤å¦‚ä¸‹ï¼š\n\n1. æ ¹æ®ååºé›† $(A,R)$ æ„é€ æœ‰å‘å›¾ï¼Œå¹¶ä½¿æ‰€æœ‰è¾¹éƒ½æŒ‡å‘ä¸Šæ–¹ã€‚ï¼ˆä¸€èˆ¬æ¥è¯´å“ˆæ–¯å›¾æ˜¯ä¸Šå¤§ä¸‹å°çš„ï¼‰\n2. æ¶ˆé™¤æ‰€æœ‰çš„è‡ªç¯ã€‚\n3. æ¶ˆé™¤æ‰€æœ‰å¯ç”±ååºé›†çš„ä¼ é€’æ€§å¯¼å‡ºçš„è¾¹ã€‚\n4. æ¶ˆé™¤æ‰€æœ‰è¾¹çš„ç®­å¤´ï¼Œå› ä¸ºæ‰€æœ‰çš„è¾¹éƒ½åº”è¯¥æ˜¯æŒ‡å‘ä¸Šæ–¹çš„ã€‚\n\n> [!summary] Definition: maximal/minimal elements\n>\n> è®¾ $(A,\\preccurlyeq)$ æ˜¯ä¸€ä¸ªååºé›†ï¼Œç§° $a$ æ˜¯ä¸€ä¸ª**æœ€å¤§å…ƒç´ (maximal element)** å½“ä¸”ä»…å½“ $A$ ä¸­ä¸å­˜åœ¨å…ƒç´  $b$ æ»¡è¶³ $a \\prec b$ã€‚ç§° $a$ æ˜¯ä¸€ä¸ª**æœ€å°å…ƒç´ (minimal element)** å½“ä¸”ä»…å½“ $A$ ä¸­ä¸å­˜åœ¨å…ƒç´  $b$ æ»¡è¶³ $b\\prec a$ã€‚\n\næ˜¾ç„¶ï¼Œæœ€å°å…ƒç´ å’Œæœ€å¤§å…ƒç´ å¯èƒ½ä¸æ­¢ä¸€ä¸ªã€‚è¿›ä¸€æ­¥åœ°ï¼Œåœ¨ä»»æ„æœ‰é™ååºé›†ä¸­ï¼Œå…¶æœ€å¤§å…ƒç´ å’Œæœ€å°å…ƒç´ ä¸€å®šå­˜åœ¨ã€‚ä½“ç°åœ¨å“ˆæ–¯å›¾ä¸­ï¼Œåˆ™æœ€å¤§å…ƒç´ æ˜¯ä½äºå…¶é¡¶ç«¯çš„ç‚¹ï¼Œæœ€å°å…ƒç´ æ˜¯ä½äºå…¶åº•ç«¯çš„ç‚¹ã€‚æ­£ç¡®æ€§æ˜¾ç„¶ã€‚\n\n> [!summary] Definition: greatest/least element\n>\n> è®¾ $(A,\\preccurlyeq)$ æ˜¯ä¸€ä¸ªååºé›†ï¼Œç§° $a$ æ˜¯å…¶**æœ€å¤§å€¼(greatest element)** å½“ä¸”ä»…å½“å¯¹äºæ¯ä¸ª $A$ ä¸­çš„å…ƒç´  $b$ éƒ½æœ‰ $b \\preccurlyeq a$ï¼›ç§° $a$ æ˜¯å…¶**æœ€å°å€¼(least element)** å½“ä¸”ä»…å½“å¯¹äºæ¯ä¸ª $A$ ä¸­çš„å…ƒç´  $b$ éƒ½æœ‰ $a \\preccurlyeq b$ã€‚\n\nååºé›†çš„æœ€å¤§å€¼å’Œæœ€å°å€¼ä¸ä¸€å®šå­˜åœ¨ï¼Œä¸”å¦‚æœå­˜åœ¨åˆ™ä¸€å®šæ˜¯å”¯ä¸€çš„ã€‚\n\n> [!summary] Definition: upper/lower bounds\n>\n> è®¾ $(S,\\preccurlyeq)$ æ˜¯ä¸€ä¸ªååºé›†ï¼Œ$A \\subset S$ã€‚è‹¥å­˜åœ¨ä¸€ä¸ª $S$ ä¸­çš„å…ƒç´  $a$ æ»¡è¶³å¯¹äº $A$ ä¸­çš„æ‰€æœ‰å…ƒç´  $b$ éƒ½æœ‰ $b\\preccurlyeq a$ï¼Œåˆ™ç§° $a$ æ˜¯ $A$ çš„ä¸€ä¸ª**ä¸Šç•Œ(upper bound)**ã€‚è‹¥å­˜åœ¨ä¸€ä¸ª $S$ ä¸­çš„å…ƒç´  $a$ æ»¡è¶³å¯¹äºæ‰€æœ‰ $A$ ä¸­çš„å…ƒç´  $b$ éƒ½æœ‰ $a\\preccurlyeq b$ï¼Œåˆ™ç§° $a$ æ˜¯ $A$ çš„ä¸€ä¸ª**ä¸‹ç•Œ(lower bound)**ã€‚\n\nç±»ä¼¼çš„ï¼Œä¸Šä¸‹ç•Œå¯èƒ½ä¸æ­¢ä¸€ä¸ªï¼Œä¹Ÿå¯èƒ½ä¸å­˜åœ¨ã€‚\n\nå¯ä»¥é€šè¿‡å“ˆæ£®å›¾å¸®åŠ©æˆ‘ä»¬æ‰¾åˆ°å­é›†çš„ä¸Šä¸‹ç•Œã€‚\n\n![gTZSJKzn.png|572](https://img.memset0.cn/2024/05/20/gTZSJKzn.png)\n\n> [!summary] Definition: least upper bound / greatest lower bound\n>\n> å¦‚æœ $a$ æ˜¯å­é›† $A$ çš„ä¸Šç•Œä¸­æœ€å°çš„ï¼Œåˆ™ç§°å…¶æ˜¯ $A$ çš„**æœ€å°ä¸Šç•Œ(least upper bound)**ï¼Œè®°ä¸º $\\text{lub}(A)$ã€‚å¦‚æœ $a$ æ˜¯å­é›† $A$ çš„ä¸‹ç•Œä¸­æœ€å¤§çš„ï¼Œåˆ™ç§°å…¶æ˜¯ $A$ çš„**æœ€å¤§ä¸‹ç•Œ(greatest lower bound)**ã€‚\n\n### 5.4. é“¾ Chain\n\n> [!summary] Definition: comparable / incomparable\n> The elements $a$ and $b$ of a poset $(S,\\preccurlyeq)$ are **å¯æ¯”è¾ƒçš„(comparable)** if either $a\\preccurlyeq b$ or $b\\preccurlyeq a$. When $a$ and $b$ are elements of $S$ so that neither $a\\preccurlyeq b$ nor $b\\preccurlyeq a$, then $a$ and $b$ are called **ä¸å¯æ¯”è¾ƒçš„(incomparable)**.\n\nå¯¹äºååºé›† $(S,R)$ å¦‚æœé›†åˆ $S$ ä¸­çš„å…ƒç´ ä¸¤ä¸¤éƒ½æ˜¯å¯æ¯”è¾ƒçš„ï¼Œé‚£ä¹ˆè®¤ä¸º $S$ æ˜¯**å…¨åºçš„(total ordered)** æˆ–è€…è¯´**çº¿æ€§å…³ç³»(linear order)**ã€‚\n\n> [!summary] Definition: Chain\n>\n> $(A,\\preccurlyeq)$ æ˜¯ä¸€ä¸ªååºé›†ï¼Œ$B\\subseteq A$ã€‚å¦‚æœ $(B,\\preccurlyeq)$ æ˜¯å…¨åºçš„ï¼Œåˆ™ç§° $B$ æ˜¯ $A$ çš„ä¸€æ¡**é“¾(chain)**ã€‚\n\n> [!summary] Definition: Antichain\n>\n> $(A,\\preccurlyeq)$ æ˜¯ä¸€ä¸ªååºé›†ï¼Œ$B\\subseteq A$ã€‚å¦‚æœ $\\forall a, b ,\\in B(a \\neq b),\\space (a, b)\\not\\in R, (b, a)\\not\\in R$ï¼Œåˆ™ç§° $B$ æ˜¯ $A$ çš„ä¸€æ¡**åé“¾(antichain)**ã€‚\n\n### 5.5. è‰¯åºé›† Well-ordered Sets\n\n> [!summary] Definition: Well-ordered set\n>\n> ä¸€ä¸ªååºé›† $(A,R)$ æ˜¯**è‰¯åºé›†(well-ordered set)** å½“ä¸”ä»…å½“å…¶æ¯ä¸€ä¸ªéç©ºå­é›†éƒ½æœ‰ä¸€ä¸ªæœ€å°å€¼ã€‚\n\nä¸€ä¸ªååºé›†ä¸€å®šæ˜¯ä¸€ä¸ª**å…¨åºé›†(totally ordered set)**ã€‚\n\n### 5.6. æ ¼ Lattices\n\n> [!summary] Definition: Lattices â˜…\n>\n> ä¸€ä¸ªååºé›†è¢«ç§°ä¸º**æ ¼(lattice)** å½“ä¸”ä»…å½“å…¶æ¯ä¸€å¯¹å…ƒç´ éƒ½æœ‰ä¸€ä¸ªæœ€å°ä¸Šç•Œå’Œæœ€å¤§ä¸‹ç•Œã€‚\n\nå¦‚ $(\\mathbb Z^+, \\mid)$ æ˜¯ä¸€ä¸ªæ ¼ï¼Œå¯¹äºå…¶ä»»æ„ä¸€å¯¹å…ƒç´  $(x,y)$ï¼Œä»–ä»¬çš„ lub ä¸ºä»–ä»¬çš„**æœ€å°å…¬å€æ•°(least common multiple)**ï¼Œè®°ä¸º $\\text{lcm}(x,y)$ï¼›ä»–ä»¬çš„ glb ä¸ºä»–ä»¬çš„**æœ€å¤§å…¬å› æ•°(great common divisor)**ï¼Œè®°ä¸º $\\gcd(x,y)$ã€‚\n","publishedTitle":"ã€Œç¦»æ•£æ•°å­¦åŠå…¶åº”ç”¨ã€Chapter 9. Relations"}},{"id":"0890813c-8526-5c39-b4c9-4d328defb9ae","fields":{"slug":"/course/dm/note/7/","plainText":"\n> æœ¬ç¯‡ç¬”è®°ä¸»è¦ä»‹ç»äº†å›¾è®ºçš„åŸºæœ¬æ¦‚å¿µï¼ŒåŒ…æ‹¬å›¾çš„å®šä¹‰ã€ç±»å‹ï¼ˆå¦‚æ— å‘å›¾ã€æœ‰å‘å›¾ã€äºŒåˆ†å›¾ç­‰ï¼‰ã€å›¾çš„è¡¨ç¤ºæ–¹æ³•ï¼ˆé‚»æ¥çŸ©é˜µå’Œå…³è”çŸ©é˜µï¼‰ã€å›¾åŒæ„ã€è¿é€šæ€§ã€ç»å…¸å›¾è®ºé—®é¢˜ï¼ˆå¦‚æ¬§æ‹‰è·¯å¾„ã€å“ˆå¯†é¡¿è·¯å¾„ã€æœ€çŸ­è·¯å¾„é—®é¢˜å’Œå¹³é¢å›¾ï¼‰ä»¥åŠå›¾çš„æŸ“è‰²ä¸å¯¹å¶å›¾ç­‰å†…å®¹ã€‚é€šè¿‡è¿™äº›å†…å®¹ï¼Œè¯»è€…å¯ä»¥æ·±å…¥ç†è§£å›¾çš„ç»“æ„åŠå…¶åœ¨ä¸åŒé¢†åŸŸä¸­çš„åº”ç”¨ã€‚<small style=\"font-style: italic; opacity: 0.5\">ï¼ˆç”± gpt-4o-mini ç”Ÿæˆæ‘˜è¦ï¼‰</small>\n\n<!-- more -->\n\n## 1. å›¾è®ºæœ¯è¯­ Graph Terminologies\n\n### 1.1. åŸºæœ¬æœ¯è¯­ Basic Terminology\n\n> [!summary] Definition: Graph\n> A **å›¾(graph)** $G=(V,E)$ consists of $V$, a nonempty set of **é¡¶ç‚¹(vertex, node)** and $E$, a set of **è¾¹(edge)**. Each edge has either one or two vertices associated with it, called its **ç«¯ç‚¹(endpoint)**. An edge is said to **è¿æ¥(connect)** its endpoints.\n\nåœ¨æ— å‘å›¾ä¸­ï¼Œå®šä¹‰ç‚¹çš„**åº¦(degree)** ä¸è¿™ä¸€é¡¶ç‚¹**å…³è”(incident)** çš„è¾¹çš„æ•°é‡ã€‚è®°å·ï¼š$\\text{deg}(v)$ã€‚\n\n- å¦‚æœ $\\text{deg}(v) = 0$ï¼Œåˆ™ç§° $v$ æ˜¯**å­¤ç«‹çš„(isolated)**ï¼›\n- å¦‚æœ $\\text{deg}(v) = 1$ï¼Œåˆ™ç§° $v$ æ˜¯**æ‚¬æŒ‚çš„(pendant)**ã€‚\n\n### 1.2. æ— å‘å›¾å’Œæœ‰å‘å›¾ Undirected and Directed Graphs\n\n![](https://img.memset0.cn/2024/05/20/1f3nONYr.png)\n\n**æ— å‘å›¾(undirected graph)**ï¼š\n\n- **ç®€å•å›¾(simple graph)**ï¼šæ²¡æœ‰é‡è¾¹å’Œè‡ªç¯çš„æ— å‘å›¾ã€‚\n- **å¤šé‡å›¾(multigraph)**ï¼šå…è®¸é‡è¾¹ä½†ä¸å…è®¸è‡ªç¯çš„æ— å‘å›¾ã€‚\n- **ä¼ªå›¾(pseudograph)**ï¼šå…è®¸è‡ªç¯å’Œé‡è¾¹çš„æ— å‘å›¾ã€‚\n\n![Uy7IUPyq.png|406](https://img.memset0.cn/2024/06/22/Uy7IUPyq.png)\n\n**æœ‰å‘å›¾(directed graph = digraph)**ï¼š$E$ æ˜¯**æœ‰å‘è¾¹(directed edge, arc)** çš„é›†åˆã€‚\n\n- **ç®€å•æœ‰å‘å›¾(simple directed graph)**ï¼šæ²¡æœ‰é‡è¾¹å’Œè‡ªç¯çš„æœ‰å‘å›¾ã€‚\n- **æœ‰å‘å¤šé‡å›¾(directed multigraph)**ï¼šæœ‰é‡è¾¹æˆ–è‡ªç¯çš„æœ‰å‘å›¾ã€‚å¦‚æœæ°æœ‰ä¸€æ¡ $(u,v)$ çš„è¾¹å’Œä¸€æ¡ $(v,u)$ çš„è¾¹ï¼Œè¿™ç§æƒ…å†µä¸å±äºé‡è¾¹ã€‚\n\n### 1.3. ä¸€äº›ç‰¹æ®Šçš„ç®€å•å›¾ Some Special Simple Graphs\n\n**å®Œå…¨å›¾(complete graph)** - $K_n$ï¼š$n$ ä¸ªé¡¶ç‚¹æœ‰ä¸€æ¡è¾¹çš„ç®€å•æ— å‘å›¾ã€‚\n\n![|449](https://img.memset0.cn/2024/11/13/5jJF5AHG.png)\n\n**ç¯(cycle)** - $C_n\\ (n>2)$ï¼š\n\n![gMi8SdeB.png|448](https://img.memset0.cn/2024/05/14/gMi8SdeB.png)\n\n**è½®(wheel)** - $W_n\\ (n>2)$ï¼šåœ¨ $C_n$ çš„åŸºç¡€ä¸Šæ·»åŠ ä¸€ä¸ªç‚¹ï¼Œå¹¶äºå‰ $n$ ä¸ªç‚¹ç›¸è¿ã€‚ï¼ˆæ³¨æ„ $W_n$ æœ‰ $n+1$ ä¸ªç‚¹ï¼‰\n\n![lKNyixLm.png|441](https://img.memset0.cn/2024/05/14/lKNyixLm.png)\n\nn-Cubes - $Q_n (n>0)$ï¼š\n\n![ONwVeFU2.png|475](https://img.memset0.cn/2024/05/14/ONwVeFU2.png)\n\n### 1.4. äºŒåˆ†å›¾ Bipartite Graph\n\n> [!summary] Definition: **äºŒåˆ†å›¾(bipartite graph)**\n>\n> ä¸€ä¸ªç®€å•å›¾æ˜¯**äºŒåˆ†çš„(bipartite)** å½“ä¸”ä»…å½“å…¶ç‚¹é›† $V$ å¯ä»¥è¢«åˆ’åˆ†æˆä¸¤ä¸ªå­é›† $V_1$ å’Œ $V_2$ æ»¡è¶³æ‰€æœ‰è¾¹éƒ½æ˜¯è¿æ¥ $V_1$ å’Œ $V_2$ çš„ï¼ˆå³ $V_1$ å’Œ $V_2$ å†…éƒ¨ä¸è¿è¾¹ï¼‰ã€‚\n\n**å®Œå…¨äºŒåˆ†å›¾(complete bipartite graph)**ï¼šå¯¹äº $V_1$ å’Œ $V_2$ çš„æ¯ä¸ªç‚¹ä¹‹é—´éƒ½æœ‰è¿è¾¹çš„äºŒåˆ†å›¾ã€‚\n\n> [!important] Theorem\n>\n> ä¸€ä¸ªå›¾æ˜¯äºŒåˆ†çš„å½“ä¸”ä»…å½“å…¶å¯ä»¥è¢«é»‘ç™½æŸ“è‰²ã€‚\n\n### 1.5. æ­£åˆ™å›¾ Regular Graph\n\n> [!summary] Definition: Regular Graph\n>\n> ä¸€ä¸ªç®€å•å›¾æ˜¯**æ­£åˆ™çš„(regular)** å½“ä¸”ä»…å½“å…¶æ¯ä¸ªé¡¶ç‚¹éƒ½æœ‰ç›¸åŒçš„åº¦ã€‚\n>\n> ä¸€ä¸ª**æ­£åˆ™å›¾(regular graph)** è¢«ç§°ä¸º $n$-regular çš„å½“ä¸”ä»…å½“æ¯ä¸ªé¡¶ç‚¹çš„åº¦æ•°å‡ä¸º $n$ã€‚\n\n## 2. å›¾è¡¨ç¤º Graph Representings\n\n> [!summary] **é‚»æ¥çŸ©é˜µ(adjacency matrix)**\n>\n> ä¸€å¼  $n$ ä¸ªç‚¹ $(v_1,v_2,\\cdots,v_n)$ çš„ç®€å•å›¾ $G=(V,E)$ å¯ä»¥ç”¨é‚»æ¥çŸ©é˜µ $A$ è¡¨ç¤ºï¼Œå…¶ä¸­ï¼š\n>\n> $$\n> a_{i,j} = \\begin{cases}  1 \\quad\\text{if }\\{v_i,v_j\\}\\text{ is an edge of }G\\\\0\\quad\\text{otherwise.}\\end{cases}\n> $$\n\n> [!summary] **å…³è”çŸ©é˜µ(incidence matrix)**\n>\n> ä¸€å¼  $n$ ä¸ªç‚¹ $m$ æ¡è¾¹çš„ç®€å•å›¾ $G=(V,E)$ å¯ä»¥ç”¨é‚»æ¥çŸ©é˜µ $A_{n\\times m}$ è¡¨ç¤ºï¼Œå…¶ä¸­ï¼š\n>\n> $$\n> a_{i,j} = \\begin{cases}\n> 1\\quad&\\text{iff edge }e_j\\text{ is incident with }v_i\\\\\n> 0\\quad&\\text{otherwise.}\n> \\end{cases}\n> $$\n\n## 3. å›¾åŒæ„ Graph Isomorphism\n\n> [!summary] åŒæ„\n>\n> æˆ‘ä»¬ç§°ä¸¤ä¸ªå›¾ $G_1=(V_1,E_1)$ å’Œ $G_2=(V_2,E_2)$ æ˜¯**åŒæ„(isomorphic)** çš„å½“ä¸”ä»…å½“å­˜åœ¨ä¸€ä¸ªä» $V_1$ åˆ° $V_2$ çš„åŒå°„å‡½æ•°æ»¡è¶³ $(u,v) \\in E_1$ å½“ä¸”ä»…å½“ $(f(u),f(v)) \\in E_2$ã€‚\n\nåˆ¤å®šä¸¤ä¸ªå›¾æ˜¯å¦åŒæ„ï¼Œé‡ç‚¹å¯ä»¥è€ƒå¯Ÿä¸€äº›**ä¸å˜é‡(invariant)**ï¼Œæ¯”å¦‚ï¼š\n\n- ç‚¹æ•°\n- è¾¹æ•°\n- å¯¹åº”ç‚¹çš„åº¦æ•°\n- å¦‚æœä¸€ä¸ªæ˜¯äºŒåˆ†å›¾ï¼Œå¦ä¸€ä¸ªä¹Ÿå¿…é¡»æ˜¯äºŒåˆ†å›¾\n- å¦‚æœä¸€ä¸ªæ˜¯å®Œå…¨å›¾ï¼Œå¦ä¸€ä¸ªä¹Ÿå¿…é¡»æ˜¯å®Œå…¨å›¾\n\nç­‰ç­‰ã€‚æ‰€ä»¥ï¼Œå¦‚æœæˆ‘ä»¬è¦æ–­è¨€å›¾æ˜¯åŒæ„çš„ï¼Œå°±ç»™å‡ºä¸€ç»„æ˜ å°„å…³ç³»ï¼›å¦‚æœæˆ‘ä»¬è¦æ–­è¨€å›¾ä¸æ˜¯åŒæ„çš„ï¼Œå°±æ‰¾å‡ºä¸€ä¸ªæ”¹å˜çš„ä¸å˜é‡ã€‚\n\n## 4. è¿é€šæ€§ Connectivity\n\n### 4.1. æ— å‘å›¾çš„è¿é€šæ€§ Connectedness in Undirected Graphs\n\nä¸€å¼ æ— å‘å›¾è¢«ç§°ä½œ**è”é€šçš„(connected)** å½“ä¸”ä»…å½“å¯¹äºæ¯ä¸€å¯¹å›¾ä¸­çš„ç‚¹å¯¹ï¼Œéƒ½å­˜åœ¨ä¸€æ¡ä»–ä»¬ä¹‹é—´çš„è·¯å¾„ã€‚\n\næ— å‘å›¾çš„æå¤§è¿é€šå­å›¾è¢«ç§°ä¸ºä¸€ä¸ª**è”é€šå—(connected component = component)**\n\n- åœ¨æ— å‘å›¾ä¸­ï¼Œå¦‚æœåˆ é™¤ä¸€ä¸ªç‚¹ä¼šäº§ç”Ÿæ›´å¤šçš„è”é€šå—ï¼Œåˆ™å°†è¿™ä¸ªç‚¹ç§°ä¸º**å‰²ç‚¹(cut vertex)**ã€‚\n- åœ¨æ— å‘å›¾ä¸­ï¼Œå¦‚æœåˆ é™¤ä¸€æ¡è¾¹ä¼šäº§ç”Ÿæ›´å¤šçš„è”é€šå—ï¼Œåˆ™å°†è¿™æ¡è¾¹ç§°ä¸º**å‰²è¾¹(cut edge)** æˆ–**æ¡¥(bridge)**ã€‚\n\n### 4.2. æœ‰å‘å›¾çš„è¿é€šæ€§ Connectedness in Directed Graphs\n\nåœ¨ä¸€å¼ æœ‰å‘å›¾ä¸­ï¼Œå¦‚æœå¯¹äºä»»æ„ä¸¤ä¸ªç‚¹ $a,b$ éƒ½å­˜åœ¨ä¸€æ¡ä» $a$ åˆ° $b$ çš„æœ‰å‘è·¯å¾„ï¼Œä¹Ÿå­˜åœ¨ä¸€æ¡ $b$ åˆ° $a$ çš„æœ‰å‘è·¯å¾„ï¼Œåˆ™ç§°è¿™ä¸ªæœ‰å‘å›¾æ˜¯**å¼ºè¿é€šçš„(strongly connected)**ã€‚\n\nå¯¹äºä¸€å¼ æœ‰å‘å›¾ï¼Œæ‰€æœ‰æœ‰å‘è¾¹å½“åšæ— å‘è¾¹ï¼Œæ‰€å¾—åˆ°çš„å›¾æ˜¯è”é€šçš„ï¼Œæˆ‘ä»¬å°±ç§°è¿™ä¸ªæœ‰å‘å›¾æ˜¯**å¼±è”é€šçš„(weakly connected)**ã€‚\n\næœ‰å‘å›¾çš„ä¸€ä¸ªæå¤§å¼ºè¿é€šå­å›¾è¢«ç§°ä¸ºä¸€ä¸ª**å¼ºè¿é€šåˆ†é‡(strongly connected component = strong component)**ã€‚\n\n## 5. å›¾ä¸Šçš„ç»å…¸é—®é¢˜ Classic Problems on Graphs\n\n### 5.1. æ¬§æ‹‰è·¯å¾„ Euler Paths\n\n- **æ¬§æ‹‰è·¯å¾„(euler path)**ï¼šç»è¿‡å›¾ $G$ æ¯æ¡è¾¹æ°å¥½ä¸€æ¬¡çš„ç®€å•è·¯å¾„ã€‚\n- **æ¬§æ‹‰å›è·¯(euler circuit)**ï¼šè¿‡å›¾ $G$ çš„æ¯æ¡è¾¹æ°å¥½ä¸€æ¬¡çš„ç®€å•å›è·¯ã€‚\n- **æ¬§æ‹‰å›¾(euler graph)**ï¼šåŒ…å«æ¬§æ‹‰å›è·¯çš„å›¾ã€‚\n\n> [!important] Theorem 1\n>\n> ä¸€å¼ è”é€šå¤šé‡å›¾å­˜åœ¨æ¬§æ‹‰å›è·¯å½“ä¸”ä»…å½“æ¯ä¸ªèŠ‚ç‚¹çš„åº¦æ•°éƒ½æ˜¯å¶æ•°ã€‚\n>\n> > [!quote]- Proof\n> >\n> > ![|500](https://img.memset0.cn/2024/06/02/VbhtQPa0.png)\n> >\n> > ![|500](https://img.memset0.cn/2024/06/02/ElJHKzSL.png)\n\n> [!important] Theorem 2\n>\n> ä¸€å¼ è”é€šå¤šé‡å›¾å­˜åœ¨ä¸æ˜¯æ¬§æ‹‰å›è·¯çš„æ¬§æ‹‰è·¯å¾„å½“ä¸”ä»…å½“æœ‰æ°å¥½ä¸¤ä¸ªèŠ‚ç‚¹çš„åº¦æ•°ä¸ºå¥‡æ•°ã€‚\n\n> [!important] Theorem 3\n>\n> ä¸€å¼ è¿é€šæœ‰å‘å¤šé‡å›¾å­˜åœ¨æ¬§æ‹‰å›è·¯å½“ä¸”ä»…å½“ï¼š1. å›¾æ˜¯å¼±è”é€šçš„ 2. æ¯ä¸ªç‚¹çš„å…¥åº¦å’Œå‡ºåº¦ç›¸ç­‰ã€‚\n\n> [!important] Theorem 4\n>\n> ä¸€å¼ è¿é€šæœ‰å‘å¤šé‡å›¾å­˜åœ¨ä¸æ˜¯æ¬§æ‹‰å›è·¯çš„æ¬§æ‹‰è·¯å¾„å½“ä¸”ä»…å½“ï¼š1. å›¾æ˜¯å¼±è”é€šçš„ 2. æ¯ä¸ªç‚¹çš„å…¥åº¦å’Œå‡ºåº¦ç›¸ç­‰ï¼Œä½†é™¤äº†ä¸¤ä¸ªç‚¹ï¼Œå…¶ä¸­ä¸€ä¸ªå…¥åº¦æ¯”å‡ºåº¦å¤š $1$ï¼Œå¦ä¸€ä¸ªå‡ºåº¦æ¯”å…¥åº¦å¤š $1$ã€‚\n\n### 5.2. å“ˆå¯†é¡¿è·¯å¾„ Hamilton Paths\n\n- **å“ˆå¯†é¡¿è·¯å¾„(hamilton path)**ï¼šç»è¿‡å›¾ $G$ æ¯ä¸ªç‚¹æ°å¥½ä¸€æ¬¡çš„ç®€å•è·¯å¾„ã€‚\n- **å“ˆå¯†é¡¿å›è·¯(hamilton circuit)**ï¼šç»è¿‡å›¾ $G$ æ¯ä¸ªç‚¹æ°å¥½ä¸€æ¬¡ï¼Œä½†é™¤äº†ç¬¬ä¸€ä¸ªç‚¹çš„ç®€å•å›è·¯ã€‚\n- **å“ˆå¯†é¡¿å›¾(hamilton graph)**ï¼šåŒ…å«å“ˆå¯†é¡¿å›è·¯çš„å›¾ã€‚\n\n> [!important] Dirac's Theorem\n>\n> ç®€å•å›¾ $G$ å­˜åœ¨å“ˆå¯†é¡¿å›è·¯çš„ä¸€ä¸ªå……åˆ†æ¡ä»¶æ˜¯å›¾çš„é¡¶ç‚¹æ•° $\\ge 3$ ä¸”æ¯ä¸ªç‚¹çš„åº¦æ•° $\\ge n/2$ã€‚\n\n> [!important] Ore's Theorem\n>\n> ç®€å•å›¾ $G$ å­˜åœ¨å“ˆå¯†é¡¿å›è·¯çš„ä¸€ä¸ªå……åˆ†æ¡ä»¶æ˜¯å›¾çš„é¡¶ç‚¹æ•° $\\ge 3$ï¼Œä¸”å¯¹äºå¯¹äºæ‰€æœ‰ä¸ç›¸é‚»çš„é¡¶ç‚¹ $u$ å’Œ $v$ï¼Œä»–ä»¬çš„åº¦æ•°ä¹‹å’Œæ€»æ˜¯ $\\ge n$ã€‚\n\n> [!important] Theorem\n>\n> ç®€å•å›¾ $G$ å­˜åœ¨å“ˆå¯†é¡¿è·¯å¾„çš„å¿…è¦æ¡ä»¶æœ‰ï¼š\n>\n> (1) $G$ æ˜¯è¿é€šçš„ã€‚  \n> (2) æœ‰è‡³å¤šä¸¤ä¸ªç‚¹çš„åº¦æ•°å°äº $2$ã€‚\n>\n> ç®€å•å›¾ $G$ å­˜åœ¨å“ˆå¯†é¡¿å›è·¯çš„å¿…è¦æ¡ä»¶æœ‰ï¼š\n>\n> (1) $G$ æ˜¯è¿é€šçš„ã€‚  \n> (2) æ¯ä¸ªç‚¹çš„åº¦æ•°éƒ½å¤§äº $1$ã€‚\n\næ‰€ä»¥æˆ‘ä»¬åœ¨æ„å»ºå“ˆå¯†é¡¿å›è·¯çš„è¿‡ç¨‹ä¸­ï¼Œæœ‰ä¸€äº›æ€§è´¨å¯ä»¥è¢«åˆ©ç”¨ï¼š\n\n- å¦‚æœæœ‰ä¸€ä¸ªç‚¹çš„åº¦æ•°æ°å¥½ä¸º $2$ï¼Œé‚£ä¹ˆå…¶ä¸¤æ¡è¾¹éƒ½ä¸€å®šåœ¨å“ˆå¯†é¡¿å›è·¯ä¸Šã€‚\n- å¦‚æœåœ¨æ„å»ºå“ˆå¯†é¡¿å›è·¯çš„è¿‡ç¨‹ä¸­ï¼ŒæŸä¸ªç‚¹çš„ä¸¤æ¡è¾¹å·²ç»è¢«ç¡®è®¤åœ¨å“ˆå¯†é¡¿å›è·¯ä¸Šï¼Œä»–ä»¬å®ƒå‰©ä¸‹çš„è¾¹å¯ä»¥è¢«åˆ å»ã€‚\n\n> [!important] ErdÅ‘sâ€“Stone Theorem\n>\n> å¯¹äºä¸€ä¸ªå›¾ $G=(V,E)$ï¼Œå…¶å­˜åœ¨å“ˆå¯†é¡¿å›è·¯çš„å¿…è¦æ¡ä»¶æ˜¯ï¼šå¯¹äº $V$ çš„å­é›† $S$ï¼Œå›¾ $G - S$ ä¸­çš„è¿é€šåˆ†é‡æ•°é‡ $\\leq |S|$ã€‚å…¶ä¸­ $G-S$ æ˜¯æŒ‡ä»å›¾ $G$ ä¸­åˆ é™¤ç‚¹é›† $S$ å’Œå…¶ç›¸è¿çš„è¾¹åå¾—åˆ°çš„å­å›¾ã€‚\n>\n> - **è¯æ˜æ€è·¯**ï¼šè€ƒè™‘ä¸€ä¸ª $n$ ä¸ªç‚¹çš„ç¯ï¼Œæ‹¿æ‰å…¶ä¸­ $m$ ä¸ªç‚¹åè‡³å¤šæœ‰ $m$ ä¸ªè”é€šå¿«ã€‚\n\n**æ—…è¡Œå•†é—®é¢˜(traveling salesman problem)**ï¼šæ±‚è§£åœ¨ç»™å®šçš„å›¾ä¸­ï¼Œæ‰¾å‡ºä¸€æ¡è·¯å¾„ï¼Œä½¿å¾—æ—…è¡Œå•†ä»ä¸€ä¸ªåŸå¸‚å‡ºå‘ï¼Œç»è¿‡å…¶ä»–æ‰€æœ‰åŸå¸‚ä¸€æ¬¡ä¸”ä»…ä¸€æ¬¡åï¼Œè¿”å›å‡ºå‘åŸå¸‚ä¸”æ€»è´¹ç”¨æœ€å°ã€‚\n\n### 5.3. æœ€çŸ­è·¯é—®é¢˜ Shortest Path Problems\n\n**å¸¦æƒå›¾(weighted graph)**ï¼š$G = (V,E,W)$ï¼Œæ¯æ¡è¾¹æœ‰ä¸€ä¸ªè¾¹æƒã€‚\n\n**æœ€çŸ­è·¯é—®é¢˜(shortest path problem)**ï¼šåœ¨å¸¦æƒå›¾ $G=(V,E,W)$ ä¸­ï¼Œå¯¹äºç»™å®šçš„ä¸¤ç‚¹ $a,z \\in V$ï¼Œæ‰¾åˆ°ä¸€æ¡ $a$ åˆ° $z$ çš„è·¯å¾„ä½¿å…¶é•¿åº¦ï¼ˆå³æ‰€ç»è¿‡è¾¹çš„è¾¹æƒå’Œï¼‰æœ€çŸ­ã€‚\n\nå…³äº Dijkstra ç®—æ³•çš„è®²è§£ç•¥å»ã€‚\n\n### 5.4. å¹³é¢å›¾ Planar Graphs\n\n> [!summary] Definition: **å¹³é¢å›¾(planar graph)**\n>\n> å¦‚æœä¸€å¼ å›¾å¯ä»¥è¢«ç”»åˆ°ä¸€ä¸ªå¹³é¢ä¸Šä¸”æ²¡æœ‰ä»»ä½•è¾¹åœ¨éå®šç‚¹å¤„äº¤å‰ï¼Œåˆ™ç§°è¿™å¼ å›¾æ˜¯ planar çš„ã€‚\n>\n> è¿™æ ·çš„ç”»æ³•è¢«ç§°ä¸ºä¸€ä¸ªå›¾çš„**å¹³é¢è¡¨ç¤º(planar representation)**ã€‚\n\n**åŒºåŸŸ(region)**ï¼šåœ¨å¹³é¢è¡¨ç¤ºä¸­ï¼Œä¸å¹³é¢çš„å…¶ä»–éƒ¨åˆ†é€šè¿‡å¹³é¢å›¾çš„è¾¹åˆ†å‰²å¼€æ¥çš„ä¸€éƒ¨åˆ†ï¼Œç§°ä¸ºåŒºåŸŸã€‚åŒºåŸŸåˆ†ä¸º**æœ‰ç•ŒåŒºåŸŸ(bounded region)** å’Œ**æ— ç•ŒåŒºåŸŸ(unbounded region)** ä¸¤ç§ã€‚ï¼ˆæ³¨æ„å¯¹äºä¸€ä¸ªå°é—­å›¾å½¢ï¼Œåˆ™å°é—­å›¾å½¢å¤–é¢çš„åŒºåŸŸä¹Ÿç§°ä¸€å—åŒºåŸŸï¼‰\n\n**åŒºåŸŸçš„åº¦(degree of the region)**ï¼šåœ¨åŒºåŸŸ $R$ çš„è¾¹ç•Œä¸Šçš„è¾¹çš„æ•°é‡ï¼Œè®°ä¸º $\\operatorname{Deg}(R)$ï¼Œè¿™ä¸€å®šä¹‰å¯¹äºæœ‰ç•ŒåŒºåŸŸå’Œæ— ç•ŒåŒºåŸŸéƒ½ç›¸åŒã€‚\n\n> [!important] **æ¬§æ‹‰å…¬å¼(Euler's formula)** â˜…\n>\n> è®¾ $G$ æ˜¯æœ‰ $v$ ä¸ªç‚¹å’Œ $e$ æ¡è¾¹çš„ç®€å•è¿é€šå¹³é¢å›¾ï¼Œè®¾ $r$ ä¸ºå…¶å¹³é¢è¡¨ç¤ºä¸­çš„åŒºåŸŸæ•°é‡ï¼Œåˆ™æ»¡è¶³\n>\n> $$\n> r=e-v+2\n> $$\n\næ³¨æ„åˆ°éœ€è¦å°†ä¸€ä¸ªåŒºåŸŸåˆ’åˆ†å‡ºæ¥ï¼Œè‡³å°‘éœ€è¦ä¸‰æ¡è¾¹ï¼›è€Œæ¯æ¡è¾¹æ°ä¼šå±äºä¸¤ä¸ªåŒºåŸŸçš„è¾¹ç•Œï¼Œå³ $r\\le \\dfrac{2}{3} e$ã€‚å°†è¿™ä¸€ç»“è®ºä»£å…¥æ¬§æ‹‰å…¬å¼ï¼Œå¯ä»¥å¾—åˆ°å¦‚ä¸‹æ¨è®ºï¼š\n\n> [!important] Corollary 1 â˜…\n>\n> å¦‚æœ $G$ æ˜¯æœ‰ $v$ ä¸ªç‚¹å’Œ $e$ æ¡è¾¹çš„ç®€å•è¿é€šå¹³é¢å›¾ä¸” $v\\ge 3$ï¼Œåˆ™å¿…å®šæ»¡è¶³ $e\\le 3v-6$ã€‚\n>\n> - å½“æ¯ä¸ªåŒºåŸŸçš„åº¦éƒ½æ°å¥½ä¸º $3$ æ—¶å–ç­‰å·ã€‚\n> - å¦‚æœè¿›ä¸€æ­¥è¦æ±‚æ¯ä¸ªåŒºåŸŸçš„åº¦æ•°è‡³å°‘ä¸º $k$ æ—¶ï¼Œå¯ä»¥å¾—åˆ°é€šå¼ $e \\le \\dfrac{(v-2)k}{k-2}$ã€‚\n\n> [!important] Corollary 2 â˜…\n>\n> å¦‚æœ $G$ æ˜¯ç®€å•è¿é€šå¹³é¢å›¾ï¼Œåˆ™ $G$ å­˜åœ¨ä¸€ä¸ªåº¦æ•°ä¸è¶…è¿‡ $5$ çš„èŠ‚ç‚¹ã€‚\n\n**åŸºæœ¬ç»†åˆ†(elementary subdivision)**ï¼šåœ¨åŸæ¥çš„ä¸€æ¡è¾¹ä¸­æ’å…¥ä¸€ä¸ªèŠ‚ç‚¹ï¼Œå°†ä¸€æ¡è¾¹åˆ†ä¸ºä¸¤æ¡è¾¹ã€‚\n\n**åŒèƒš(homeomorphic)**ï¼šå¦‚æœå›¾ $G_1$ å’Œ $G_2$ å¯ä»¥åˆ†åˆ«ä½œä¸€ç³»åˆ—åŸºæœ¬ç»†åˆ†æ“ä½œï¼Œå¾—åˆ°ä¸€å¼ ç›¸åŒçš„å›¾ï¼Œåˆ™ç§° $G_1$ å’Œ $G_2$ æ˜¯åŒèƒšçš„ã€‚\n\n![fHHobbG5.png|530](https://img.memset0.cn/2024/06/03/fHHobbG5.png)\n\n> [!important] Kuratowski's Theorem â˜…\n>\n> ä¸€ä¸ªæ— å‘å›¾ $G$ æ˜¯å¹³é¢çš„å½“ä¸”ä»…å½“å…¶æ²¡æœ‰ä¸€ä¸ªå­å›¾ä¸ $K_5$ æˆ– $K_{3,3}$ åŒèƒšã€‚\n\n### 5.5. å›¾æŸ“è‰²ä¸å¯¹å¶å›¾ Graph Coloring and Dual Graphs\n\n**å¯¹å¶å›¾(dual graph)**ï¼šä»»ä½•ä¸€å¼ å¹³é¢å›¾å¯ä»¥è½¬åŒ–ä¸ºå…¶å¯¹å¶å›¾ï¼Œé€šè¿‡å¦‚ä¸‹æ­¥éª¤ï¼š\n\n- å°†åŸå›¾çš„æ¯ä¸€ä¸ªåŒºåŸŸç”¨ä¸€ä¸ªé¡¶ç‚¹è¡¨ç¤ºã€‚\n- å¯¹äºæ‰€æœ‰ä»…ç›¸éš”ä¸€æ¡è¾¹ï¼ˆåªæœ‰å®šç‚¹ç›¸é‚»çš„ä¸ç®—ï¼‰çš„ä¸¤ä¸ªç›¸é‚»çš„åŒºåŸŸï¼Œåœ¨ä»–ä»¬å¯¹åº”çš„é¡¶ç‚¹ç›´æ¥æ·»åŠ ä¸€æ¡è¾¹ã€‚\n\n![ubH4EMQH.png|402](https://img.memset0.cn/2024/06/03/ubH4EMQH.png)\n\nå¯¹äºå¹³é¢å›¾æŸ“è‰²çš„é—®é¢˜çš„ç ”ç©¶ï¼Œå¯ä»¥è½¬åŒ–åˆ°å…¶å¯¹åº”çš„å¯¹å¶å›¾ä¸Šã€‚\n\n> [!important] **å››è‰²å®šç†(the four color theorem)**\n>\n> - **æŸ“è‰²(coloring)**ï¼šå¯¹æ¯ä¸ªé¡¶ç‚¹åˆ†é…ä¸€ä¸ªé¢œè‰²ï¼Œæ»¡è¶³ç›¸é‚»ä¸¤èŠ‚ç‚¹çš„é¢œè‰²ä¸åŒã€‚\n> - **æŸ“è‰²æ•°(the chromatic number)**ï¼šè‡³å°‘éœ€è¦å¤šå°‘ç§ä¸åŒçš„é¢œè‰²ï¼Œæ‰èƒ½å°†ç»™å®šå›¾ $G$ æŸ“è‰²ã€‚è®°ä¸º $x(G)$ã€‚\n>\n> å››è‰²å®šç†æŒ‡å‡ºï¼Œä»»æ„å¹³é¢å›¾çš„æŸ“è‰²æ•°ä¸è¶…è¿‡ $4$ã€‚\n\n> [!important] Theorem\n>\n> - æŸ“è‰²æ•°ä¸º $2$ çš„ç®€å•å›¾ä¸€å®šæ˜¯äºŒåˆ†å›¾ã€‚\n>\n> - è¿é€šäºŒåˆ†å›¾çš„æŸ“è‰²æ•°ä¸€å®šä¸º $2$ã€‚\n","publishedTitle":"ã€Œç¦»æ•£æ•°å­¦åŠå…¶åº”ç”¨ã€Chapter 10. Graph"}},{"id":"6afc80c2-0efe-548e-9366-5e51daa5e2cf","fields":{"slug":"/course/dm/note/8/","plainText":"\n> æœ¬ç¯‡ç¬”è®°ä¸»è¦ä»‹ç»äº†æ ‘çš„åŸºæœ¬æ¦‚å¿µå’Œæœ¯è¯­ï¼ŒåŒ…æ‹¬æ ‘çš„å®šä¹‰ã€æ€§è´¨ã€ä¸åŒç±»å‹çš„æ ‘ï¼ˆå¦‚äºŒå‰æ ‘å’Œ $m$ å‰æ ‘ï¼‰ã€æ ‘çš„åº”ç”¨ï¼ˆå¦‚äºŒå‰æœç´¢æ ‘å’Œå‰ç¼€ç¼–ç ï¼‰ã€æ ‘çš„éå†æ–¹æ³•ä»¥åŠç”Ÿæˆæ ‘çš„ç›¸å…³å†…å®¹ã€‚é€šè¿‡è¿™äº›å†…å®¹çš„å­¦ä¹ ï¼Œè¯»è€…å°†èƒ½å¤Ÿç†è§£æ ‘åœ¨ç¦»æ•£æ•°å­¦ä¸­çš„é‡è¦æ€§ï¼Œå¹¶æŒæ¡å¦‚ä½•åˆ†æå’Œåº”ç”¨è¿™äº›æ ‘çš„çŸ¥è¯†ã€‚<small style=\"font-style: italic; opacity: 0.5\">ï¼ˆç”± gpt-4o-mini ç”Ÿæˆæ‘˜è¦ï¼‰</small>\n\n<!-- more -->\n\n## 1. æ ‘è®ºæœ¯è¯­ Tree Terminologies\n\n**æ ‘(tree)** æ˜¯æ²¡æœ‰ç®€å•ç¯çš„è¿é€šæ— å‘å›¾ã€‚\n\n**æ£®æ—(forest)** æ˜¯æ²¡æœ‰ç®€å•ç¯çš„æ— å‘å›¾ã€‚\n\n> [!important] Theorem\n>\n> ä¸€ä¸ªæ— å‘å›¾ $G=(V,E)$ æ˜¯æ ‘å½“ä¸”ä»…å½“å¯¹äº $V$ ä¸­çš„ä»»æ„ä¸¤ç‚¹ï¼Œéƒ½æœ‰å”¯ä¸€çš„ä¸€æ¡ç®€å•è·¯å¾„ã€‚\n\n**æœ‰æ ¹æ ‘(rooted tree)**ï¼šåœ¨æ ‘çš„è‹¥å¹²èŠ‚ç‚¹ä¸­ï¼Œé€‰æ‹©ä¸€ä¸ªç‰¹å®šçš„èŠ‚ç‚¹ä½œä¸º**æ ¹(root)**ï¼Œè¿™æ ·çš„æ ‘ç§°ä¸ºæœ‰æ ¹æ ‘ï¼Œåœ¨æœ‰æ ¹æ ‘ä¸­æˆ‘ä»¬æœ‰å¦‚ä¸‹æ¦‚å¿µï¼š\n\n- **çˆ¶äº²èŠ‚ç‚¹(parent)**ï¼šå¯¹äºéæ ¹èŠ‚ç‚¹ $v$ï¼Œå…¶çˆ¶äº²èŠ‚ç‚¹æ˜¯å”¯ä¸€çš„æœ‰æŒ‡å‘ $v$ çš„æœ‰å‘è¾¹çš„èŠ‚ç‚¹ï¼ˆä»¥æ ¹èŠ‚ç‚¹ä¸ºèµ·ç‚¹ç»™è¾¹å®šå‘ï¼‰ã€‚\n- **å­©å­èŠ‚ç‚¹(child/children)**ï¼šè‹¥ $u$ æ˜¯ $v$ çš„çˆ¶äº²ï¼Œåˆ™ç§° $v$ æ˜¯ $u$ çš„ä¸€ä¸ªå­©å­èŠ‚ç‚¹ã€‚\n- **å…„å¼ŸèŠ‚ç‚¹(sibling)**ï¼šæœ‰ç›¸åŒçˆ¶äº²èŠ‚ç‚¹çš„ä¸¤ä¸ªèŠ‚ç‚¹äº’ç§°å…„å¼ŸèŠ‚ç‚¹ã€‚\n- **ç¥–å…ˆèŠ‚ç‚¹(ancestor)**ï¼šèŠ‚ç‚¹ $v$ çš„ç¥–å…ˆæ˜¯ä»æ ¹åˆ° $v$ çš„è·¯å¾„ä¸Šçš„æ‰€æœ‰èŠ‚ç‚¹ã€‚\n- **åä»£èŠ‚ç‚¹(descendant)**ï¼šè‹¥ $u$ æ˜¯ $v$ çš„ç¥–å…ˆï¼Œåˆ™ç§° $v$ æ˜¯ $u$ çš„ä¸€ä¸ªåä»£èŠ‚ç‚¹ã€‚\n- **å¶å­èŠ‚ç‚¹(leaf)**ï¼šæ²¡æœ‰å­©å­èŠ‚ç‚¹çš„èŠ‚ç‚¹ç§°ä¸ºå¶å­èŠ‚ç‚¹ã€‚\n- **å†…éƒ¨èŠ‚ç‚¹(internal vertex)**ï¼šæœ‰å­©å­èŠ‚ç‚¹çš„èŠ‚ç‚¹ç§°ä¸ºå†…éƒ¨èŠ‚ç‚¹ã€‚\n- **å­æ ‘(subtree)**ï¼šç‚¹ $v$ çš„å­æ ‘æ˜¯æŒ‡ $v$ å’Œ $v$ çš„æ‰€æœ‰åä»£èŠ‚ç‚¹ç»„æˆçš„å­å›¾ã€‚\n\n## 2. æ ‘çš„æ€§è´¨ Tree Properties\n\nä¸€æ£µ m-å‰æ ‘è¢«è®¤ä¸ºæ˜¯å¹³è¡¡çš„å½“ä¸”ä»…å½“æ¯ä¸ªå¶å­èŠ‚ç‚¹çš„æ·±åº¦ä¸æ˜¯ $h$ å°±æ˜¯ $h-1$ã€‚\n\n## 3. äºŒå‰æ ‘ Binary Tree\n\n**m å‰æ ‘(m-ary tree)**ï¼šæ¯ä¸ªèŠ‚ç‚¹çš„å­©å­ä¸ªæ•°éƒ½ä¸è¶…è¿‡ $m$ çš„æœ‰æ ¹æ ‘ã€‚\n\n**äºŒå‰æ ‘(binary tree)**ï¼šæ¯ä¸ªèŠ‚ç‚¹çš„å­©å­ä¸ªæ•°éƒ½ä¸è¶…è¿‡ $2$ çš„æœ‰æ ¹æ ‘ã€‚\n\n**æ»¡äºŒå‰æ ‘(full binary tree)**ï¼šæ¯ä¸ªéå¶èŠ‚ç‚¹çš„å­©å­ä¸ªæ•°éƒ½æ°å¥½ä¸º $2$ çš„æœ‰æ ¹æ ‘ã€‚ï¼ˆå³æ¯ä¸ªèŠ‚ç‚¹è¦ä¹ˆæœ‰ä¸¤ä¸ªå„¿å­è¦ä¹ˆæ²¡æœ‰å„¿å­ï¼Œå¶å­ç»“ç‚¹å¯ä»¥ä¸å…¨åœ¨åŒä¸€æ·±åº¦ï¼‰\n\n**æœ‰åºäºŒå‰æ ‘(ordered binary tree)**ï¼šæ¯ä¸ªèŠ‚ç‚¹éƒ½æœ‰ä¸€ä¸ªå¯èƒ½çš„å·¦å­©å­å’Œå³å­©å­ï¼Œæ®æ­¤å¯ä»¥å®šä¹‰**å·¦å­æ ‘(left subtree)** å’Œ**å³å­æ ‘(right subtree)**ã€‚\n\nèŠ‚ç‚¹ $v$ çš„**æ·±åº¦(level, depth)**ï¼šæ ¹èŠ‚ç‚¹åˆ° $v$ çš„è·¯å¾„é•¿åº¦ã€‚ï¼ˆæ ¹èŠ‚ç‚¹çš„æ·±åº¦å®šä¹‰ä¸º $0$ã€‚ï¼‰\n\n> [!warning] Caution â˜…\n>\n> æœ¬ä¹¦ä¸­ï¼Œæ ¹èŠ‚ç‚¹æ·±åº¦å®šä¹‰ä¸º $0$ã€‚\n\næ ‘ $T$ çš„**é«˜åº¦(height)**ï¼šæ‰€æœ‰èŠ‚ç‚¹çš„æ·±åº¦æœ€å¤§å€¼ã€‚\n\n## 4. æ ‘çš„åº”ç”¨ Applications of Trees\n\n### 4.1. äºŒå‰æœç´¢æ ‘ Binary Search Tress\n\n**äºŒå‰æœç´¢æ ‘(binary search tree, BST)**ï¼šç•¥ã€‚\n\n### 4.2. å‰ç¼€ç¼–ç  Prefix Codes\n\n**å‰ç¼€ç¼–ç (prefix codes)**ï¼šæ˜¯ä¸€ç§ç¼–ç æ–¹å¼ï¼Œè¿™æ ·å¯¹äºæ¯ä¸ªç¼–ç åçš„ 01 ä¸²ï¼Œä»–ä»¬éƒ½æ²¡æœ‰å…±åŒçš„å‰ç¼€ã€‚ç›¸å½“äºç”»å‡ºå­—å…¸æ ‘çš„è¯æ‰€æœ‰ç¼–ç æœ€åéƒ½èµ°åˆ°äº†å¶å­ç»“ç‚¹ä¸Šã€‚\n\nç”¨**å“ˆå¤«æ›¼ç¼–ç (huffman coding)** çš„æ–¹æ³•å¯ä»¥æœ€å°åŒ–æ¯ä¸€å­—ç¬¦ç¼–ç åçš„å¹³å‡ä½é•¿ã€‚\n\n### 4.3. æ ‘çš„éå† Tree Travelsal\n\n- **å…ˆåºéå†(preorder travelsal)**\n- **ä¸­åºéå†(inorder travelsal)**\n- **ååºéå†(postorder travelsal)**\n\n### 4.4. è¡¨è¾¾å¼è¡¨ç¤ºæ³• Expression Notations\n\n- **å‰ç¼€å½¢å¼(prefix form)**ï¼Œ**æ³¢å…°è¡¨è¾¾å¼(Polish notation)**\n- **ä¸­ç¼€å½¢å¼(infix form)**\n- **åç¼€å½¢å¼(postfix form)**ï¼Œ**é€†æ³¢å…°è¡¨è¾¾å¼(reverse Polish notation)**\n\n## 5. ç”Ÿæˆæ ‘ Spanning Tree\n\nå›¾ $G$ çš„**ç”Ÿæˆæ ‘(spanning tree)** æ˜¯åŒ…å« $G$ ä¸­æ¯ä¸€ä¸ªèŠ‚ç‚¹çš„å­å›¾ã€‚\n\n> [!important] Theorem 1\n>\n> A simple graph is connected if and only if it has a spanning tree.\n\n### 5.1. æ·±åº¦ä¼˜å…ˆæœç´¢ & å®½åº¦ä¼˜å…ˆæœç´¢ DFS & BFS\n\n**æ·±åº¦ä¼˜å…ˆæœç´¢(depth-first search, DFS)** åˆå«åš**å›æº¯(backtracking)**ã€‚\n\n**å®½åº¦ä¼˜å…ˆæœç´¢(breadth-first search, BFS)**ã€‚\n\nå¯ä»¥ç”¨ DFS æˆ– BFS æ¥è§£å†³ä¸€äº›æ•°æ®è§„æ¨¡å°çš„ç¦»æ•£é—®é¢˜ã€‚\n\n![tNmm4Czr.png|535](https://img.memset0.cn/2024/06/22/tNmm4Czr.png)\n\n> [!example] Ex. 11.4 29\n>\n> Explain how backtracking can be used to find a Hamilton path or circuit in a graph.\n>\n> > [!quote]- Answer\n> >\n> > ![|600](https://img.memset0.cn/2024/06/22/APw1zFtg.png)\n> >\n> > ![|600](https://img.memset0.cn/2024/06/22/re1sEyKF.png)\n\n### 5.2. æœ€å°ç”Ÿæˆæ ‘ Minimum Spanning Trees\n\n- Primâ€™s algorithmï¼šéšä¾¿é€‰å®šä¸€ä¸ªç‚¹ä½œä¸ºå¼€å§‹çš„æœ€å°ç”Ÿæˆæ ‘ï¼Œæ¯æ¬¡æŠŠä¸æœ€å°ç”Ÿæˆæ ‘å¤–çš„ç‚¹ç›¸è¿çš„æœ€å°è¾¹åŠå…¶æ–°å¢ç‚¹åŠ å…¥æœ€å°ç”Ÿæˆæ ‘ï¼Œç›´åˆ°å¾—åˆ°æ•´å¼ å›¾çš„æœ€å°ç”Ÿæˆæ ‘ã€‚\n\n![G3SYw7dY.png|450](https://img.memset0.cn/2024/06/22/G3SYw7dY.png)\n\n- Kruskalâ€™s algorithmï¼šæŠŠæ‰€æœ‰è¾¹æŒ‰ç…§å¤§å°ä»å°åˆ°å¤§çš„é¡ºåºæšä¸¾ï¼Œå¦‚æœä¸¤ç«¯ç‚¹ä¸åœ¨åŒä¸€ä¸ªè”é€šå—ä¸­åˆ™å°†è¿™æ¡è¾¹åŠ å…¥æœ€å°ç”Ÿæˆæ ‘ã€‚\n\n![CobUzofr.png|498](https://img.memset0.cn/2024/06/22/CobUzofr.png)\n","publishedTitle":"ã€Œç¦»æ•£æ•°å­¦åŠå…¶åº”ç”¨ã€Chapter 11. Tree"}},{"id":"67e8eab1-3bf4-5b68-b925-1155d7520abd","fields":{"slug":"/course/se/note/03/","plainText":"\n> æœ¬ç¯‡ç¬”è®°æ€»ç»“äº†è½¯ä»¶å·¥ç¨‹ä¸­å›¢é˜Ÿé¡¹ç›®ç®¡ç†ä¸æ•æ·å¼€å‘çš„æ ¸å¿ƒæ¦‚å¿µã€‚é¦–å…ˆï¼Œä»‹ç»äº†è½¯ä»¶é¡¹ç›®ç®¡ç†çš„å››ä¸ªå…³é”®è¦ç´ ï¼ˆäººå‘˜ã€äº§å“ã€è¿‡ç¨‹ã€é¡¹ç›®ï¼‰ä»¥åŠä¸»è¦å¹²ç³»äººè§’è‰²ï¼Œå¹¶æ¢è®¨äº†å›¢é˜Ÿé¢†å¯¼è€…çš„ MOI æ¨¡å‹å’Œä¸åŒçš„è½¯ä»¶å›¢é˜Ÿç»“æ„ã€‚éšåï¼Œåˆ†æäº†å›¢é˜Ÿåè°ƒä¸æ²Ÿé€šçš„é‡è¦æ€§ï¼Œå¹¶å¼ºè°ƒäº†é¿å…å›¢é˜Ÿâ€œæ¯’æ€§â€çš„å¿…è¦æ€§ã€‚æ¥ç€ï¼Œç¬”è®°è¯¦ç»†ä»‹ç»äº†æ•æ·å¼€å‘çš„æ ¸å¿ƒç†å¿µï¼ŒåŒ…æ‹¬æ•æ·å®£è¨€ã€æ•æ·åŸåˆ™ã€æ•æ·å›¢é˜Ÿçš„ç‰¹ç‚¹ä»¥åŠæ•æ·å¼€å‘è¿‡ç¨‹çš„å…³é”®å®è·µï¼Œå¦‚æé™ç¼–ç¨‹ï¼ˆXPï¼‰ã€Scrum å’ŒåŠ¨æ€ç³»ç»Ÿå¼€å‘æ–¹æ³•ï¼ˆDSDMï¼‰ã€‚æœ€åï¼Œè®¨è®ºäº†æ•æ·å»ºæ¨¡å’Œæ•æ·ç»Ÿä¸€è¿‡ç¨‹ï¼ˆAUPï¼‰ï¼Œå¼ºè°ƒäº†æ•æ·æ–¹æ³•åœ¨è½¯ä»¶å¼€å‘ä¸­çš„çµæ´»æ€§å’Œé«˜æ•ˆæ€§ã€‚<small style=\"font-style: italic; opacity: 0.5\">ï¼ˆç”± gpt-4o ç”Ÿæˆæ‘˜è¦ï¼‰</small>\n\n<!-- more -->\n\n# Ch.31 Project Management Concepts\n\n## 1. The Four P's\n\nåœ¨è½¯ä»¶é¡¹ç›®ç®¡ç†ä¸­ï¼Œæœ‰å››ä¸ªå…³é”®è¦ç´ ï¼ˆè¢«ç§°ä¸º **å››ä¸ª P(The Four P's)**ï¼‰ï¼Œå®ƒä»¬å…±åŒå†³å®šç€é¡¹ç›®çš„æˆè´¥ã€‚\n\n- **äººå‘˜(People)**ï¼šè¿™æ˜¯é¡¹ç›®æˆåŠŸçš„**æœ€é‡è¦**çš„å› ç´ ã€‚\n- **äº§å“(Product)**ï¼šæŒ‡çš„æ˜¯è¦æ„å»ºçš„è½¯ä»¶æœ¬èº«ã€‚\n- **è¿‡ç¨‹(Process)**ï¼šæŒ‡ä¸ºäº†å®Œæˆè½¯ä»¶å·¥ç¨‹å·¥ä½œè€Œé‡‡ç”¨çš„ä¸€ç³»åˆ—æ¡†æ¶æ´»åŠ¨å’Œè½¯ä»¶å·¥ç¨‹ä»»åŠ¡ã€‚\n- **é¡¹ç›®(Project)**ï¼šæŒ‡çš„æ˜¯ä½¿äº§å“æˆä¸ºç°å®æ‰€éœ€å®Œæˆçš„æ‰€æœ‰å·¥ä½œã€‚\n\n## 2. Stakeholders\n\n**å¹²ç³»äºº(Stakeholder)** æ˜¯æŒ‡æ‰€æœ‰å—åˆ°é¡¹ç›®å½±å“æˆ–è€…å¯¹é¡¹ç›®æœ‰å½±å“çš„ä¸ªäººæˆ–ç»„ç»‡ã€‚ä¸»è¦çš„è½¯ä»¶é¡¹ç›®å¹²ç³»äººåŒ…æ‹¬ï¼š\n\n- **é«˜çº§ç®¡ç†è€…(Senior manager)**ï¼šä»–ä»¬å®šä¹‰ä¸šåŠ¡é—®é¢˜ï¼Œè¿™äº›é—®é¢˜é€šå¸¸å¯¹é¡¹ç›®æœ‰é‡å¤§å½±å“ã€‚é«˜çº§ç®¡ç†è€…çš„æ”¯æŒå’Œå†³ç­–å¯¹é¡¹ç›®çš„èµ„æºåˆ†é…å’Œæ–¹å‘å…·æœ‰é‡è¦æ„ä¹‰ã€‚\n- **é¡¹ç›®ç»ç†(Project manager)** / **æŠ€æœ¯ç»ç†(technical manager)**ï¼šè´Ÿè´£è®¡åˆ’ã€æ¿€åŠ±ã€ç»„ç»‡å’Œæ§åˆ¶è¿›è¡Œè½¯ä»¶å·¥ä½œçš„å®è·µè€…ã€‚\n- **å®è·µè€…(Practitioner)**ï¼šæä¾›å·¥ç¨‹åŒ–äº§å“æˆ–åº”ç”¨æ‰€éœ€çš„æŠ€æœ¯æŠ€èƒ½ï¼ŒåŒ…æ‹¬ç¨‹åºå‘˜ã€è®¾è®¡å¸ˆã€æµ‹è¯•äººå‘˜ç­‰ã€‚\n- **é¡¾å®¢(Customer)**ï¼šåŒ…æ‹¬æå‡ºè½¯ä»¶éœ€æ±‚çš„äººå‘˜å’Œå¯¹ç»“æœæœ‰é—´æ¥å…´è¶£çš„å…¶ä»–ç›¸å…³æ–¹ã€‚\n- **æœ€ç»ˆç”¨æˆ·(End-user)**ï¼šè½¯ä»¶å‘å¸ƒæŠ•å…¥ç”Ÿäº§ä½¿ç”¨åä¸ä¹‹äº¤äº’çš„äººå‘˜ã€‚\n\n## 3. The MOI Model\n\n**MOI æ¨¡å‹(The MOI Model)** æ¦‚æ‹¬äº†ä¼˜ç§€çš„ **å›¢é˜Ÿé¢†å¯¼è€…(Team Leader)** éœ€è¦å…·å¤‡çš„ä¸‰ä¸ªå…³é”®èƒ½åŠ›ï¼š\n\n- **æ¿€åŠ±(Motivation)**ï¼šé¼“åŠ±æŠ€æœ¯äººå‘˜å°½æœ€å¤§èƒ½åŠ›è¿›è¡Œç”Ÿäº§ï¼ˆé€šè¿‡â€œpush or pullâ€ï¼‰ã€‚\n- **ç»„ç»‡(Organization)**ï¼šå¡‘é€ ç°æœ‰æµç¨‹ï¼ˆæˆ–åˆ›å»ºæ–°æµç¨‹ï¼‰ï¼Œä½¿æœ€åˆçš„æ¦‚å¿µè½¬åŒ–ä¸ºæœ€ç»ˆäº§å“ã€‚\n- **æƒ³æ³•æˆ–åˆ›æ–°(Ideas or innovation)**ï¼šé¼“åŠ±äººä»¬å³ä½¿åœ¨ä¸ºç‰¹å®šçš„è½¯ä»¶äº§å“æˆ–åº”ç”¨ç¨‹åºå»ºç«‹çš„ç•Œé™å†…å·¥ä½œæ—¶ï¼Œä¹Ÿèƒ½åˆ›é€ å¹¶æ„Ÿåˆ°æœ‰åˆ›é€ åŠ›ã€‚å›¢é˜Ÿé¢†å¯¼è€…éœ€è¦è¥é€ é¼“åŠ±åˆ›æ–°çš„æ°›å›´ï¼Œæ¿€å‘å›¢é˜Ÿæˆå‘˜çš„åˆ›é€ æ½œåŠ›ï¼Œä»è€Œäº§ç”Ÿæ›´å…·ç«äº‰åŠ›çš„è½¯ä»¶äº§å“ã€‚\n\n## 4. Software Team Structure\n\né€‰æ‹©è½¯ä»¶é¡¹ç›®å›¢é˜Ÿç»“æ„æ—¶ï¼Œå¿…é¡»è€ƒè™‘ä»¥ä¸‹å› ç´ ï¼š\n\n- è¦è§£å†³çš„é—®é¢˜çš„éš¾åº¦ã€‚\n- æœ€ç»ˆç¨‹åºçš„å¤§å°ï¼ˆä»¥ä»£ç è¡Œæˆ–åŠŸèƒ½ç‚¹è®¡ï¼‰ã€‚\n- å›¢é˜Ÿå°†ä¿æŒåœ¨ä¸€èµ·çš„æ—¶é—´ï¼ˆå›¢é˜Ÿ _å¯¿å‘½(lifetime)_ï¼‰ã€‚\n- é—®é¢˜å¯ä»¥ _æ¨¡å—åŒ–(modularized)_ çš„ç¨‹åº¦ã€‚\n- è¦æ„å»ºçš„ç³»ç»Ÿçš„æ‰€éœ€è´¨é‡å’Œ _å¯é æ€§(reliability)_ã€‚\n- äº¤ä»˜æ—¥æœŸçš„ _ä¸¥æ ¼æ€§(regidity)_ã€‚\n- é¡¹ç›®æ‰€éœ€çš„ç¤¾äº¤æ€§ï¼ˆæ²Ÿé€šç¨‹åº¦ï¼‰ã€‚\n\n![|421](https://img.memset0.cn/2025/03/03/AivoJ0Bc.png)\n\n### 4.1. Organizational Paradigms\n\n**ç»„ç»‡èŒƒå¼(Organizational Paradigm)** æè¿°äº†ä¸åŒçš„å›¢é˜Ÿç»„ç»‡ç»“æ„å’Œç®¡ç†é£æ ¼ã€‚Constantine æå‡ºäº†å››ç§ç»„ç»‡èŒƒå¼ï¼š\n\n- **å°é—­èŒƒå¼(closed paradigm)**ï¼šæŒ‰ç…§ä¼ ç»Ÿçš„ç­‰çº§æƒå¨ç»“æ„ç»„ç»‡å›¢é˜Ÿï¼Œå¼ºè°ƒé›†ä¸­æ§åˆ¶å’Œå±‚çº§ç®¡ç†ã€‚\n- **éšæœºèŒƒå¼(random paradigm)**ï¼šç»“æ„æ¾æ•£åœ°ç»„ç»‡å›¢é˜Ÿï¼Œå¹¶ä¾èµ–äºå›¢é˜Ÿæˆå‘˜çš„ ==ä¸ªäººè‡ªé©±åŠ›==ã€‚è¿™ç§èŒƒå¼é¼“åŠ±åˆ›æ–°å’Œè‡ªç”±ã€‚\n- **å¼€æ”¾èŒƒå¼(open paradigm)**ï¼šè¯•å›¾ä»¥ä¸€ç§æ–¹å¼ç»„ç»‡å›¢é˜Ÿï¼Œä½¿å…¶å®ç°ä¸å°é—­èŒƒå¼ç›¸å…³çš„ä¸€äº›æ§åˆ¶ï¼Œä½†ä¹Ÿå®ç°äº†ä½¿ç”¨éšæœºèŒƒå¼æ—¶å‘ç”Ÿçš„è®¸å¤šåˆ›æ–°ã€‚â€”â€”è¯•å›¾åœ¨æ§åˆ¶å’Œåˆ›æ–°ä¹‹é—´æ‰¾åˆ°å¹³è¡¡ï¼Œæ˜¯ç»¼åˆäº†å‰ä¸¤ä¸ªã€‚\n- **åŒæ­¥èŒƒå¼(synchronous paradigm)**ï¼šä¾èµ–äºé—®é¢˜çš„è‡ªç„¶åˆ’åˆ†ï¼Œå¹¶ç»„ç»‡å›¢é˜Ÿæˆå‘˜åœ¨é—®é¢˜çš„å„ä¸ªéƒ¨åˆ†ä¸Šå·¥ä½œï¼Œå›¢é˜Ÿæˆå‘˜ä¹‹é—´å‡ ä¹æ²¡æœ‰ç§¯æçš„æ²Ÿé€šã€‚åŒæ­¥èŒƒå¼é€‚ç”¨äºé—®é¢˜å¯ä»¥è¢«æ¸…æ™°åœ°åˆ†è§£ä¸ºç‹¬ç«‹æ¨¡å—çš„é¡¹ç›®ï¼Œå„æ¨¡å—å¯ä»¥å¹¶è¡Œå¼€å‘ã€‚\n\n### 4.2. Avoid Team \"Toxicity\"\n\nå›¢é˜Ÿâ€œ**æ¯’æ€§(Toxicity)**â€æŒ‡çš„æ˜¯é˜»ç¢å›¢é˜Ÿæœ‰æ•ˆå·¥ä½œå¹¶å¯¼è‡´é¡¹ç›®å¤±è´¥çš„è´Ÿé¢å› ç´ ã€‚åº”è¯¥åŠªåŠ›é¿å…ä»¥ä¸‹å›¢é˜Ÿâ€œæ¯’æ€§â€ï¼š\n\n- ç–¯ç‹‚çš„å·¥ä½œæ°›å›´ï¼Œä½¿å¾—å›¢é˜Ÿæˆå‘˜æµªè´¹ç²¾åŠ›ï¼Œå¤±å»å¯¹å·¥ä½œç›®æ ‡çš„å…³æ³¨ã€‚\n- ä¸ªäººå†²çªã€ä¸šåŠ¡ç›®æ ‡ä¸æ˜ç¡®ã€æŠ€æœ¯éš¾é¢˜ç­‰å¯¼è‡´å›¢é˜Ÿæˆå‘˜ä¹‹é—´äº§ç”Ÿ _çŸ›ç›¾(friction)_ å’Œ _æŒ«æŠ˜(frustration)_ã€‚\n- â€œ_åˆ†æ•£çš„(fragmented)_ æˆ– _åè°ƒä¸è‰¯çš„(poorly coordinated)_ ç¨‹åºâ€ æˆ–å®šä¹‰ä¸æ˜ç¡®æˆ–é€‰æ‹©ä¸å½“çš„æµç¨‹æ¨¡å‹ï¼Œæˆä¸ºå®Œæˆä»»åŠ¡çš„éšœç¢ã€‚æµç¨‹æ··ä¹±ã€ç¼ºä¹è§„èŒƒã€æµç¨‹æ¨¡å‹ä¸é€‚åˆé¡¹ç›®ç‰¹ç‚¹éƒ½å¯èƒ½å¯¼è‡´å›¢é˜Ÿå·¥ä½œæ•ˆç‡ä½ä¸‹ã€‚\n- è§’è‰²å®šä¹‰ä¸æ¸…å¯¼è‡´é¡¹ç›®æˆå‘˜ç¼ºä¹ _è´£ä»»æ„Ÿ(accountability)_ï¼Œå¹¶éšä¹‹è€Œæ¥å¼•å‘ _äº’ç›¸æŒ‡è´£(finger-pointing)_ã€‚\n- æŒç»­å’Œåå¤çš„å¤±è´¥ï¼Œè¿™å°†å¯¼è‡´å›¢é˜Ÿæˆå‘˜çš„ä¿¡å¿ƒä¸§å¤±ï¼Œ_å£«æ°”(morale)_ ä½è½ã€‚\n\n## 5. Agile Teams\n\n**æ•æ·å›¢é˜Ÿ(agile team)** æ˜¯ä¸€ç§é€‚åº”æ€§å¼ºã€é«˜æ•ˆåä½œçš„å›¢é˜Ÿæ¨¡å¼ï¼Œç‰¹åˆ«é€‚ç”¨äºéœ€æ±‚å˜åŒ–é¢‘ç¹çš„é¡¹ç›®ã€‚æ•æ·å›¢é˜Ÿå…·æœ‰ä»¥ä¸‹ç‰¹ç‚¹ï¼š\n\n- å›¢é˜Ÿæˆå‘˜ä¹‹é—´å¿…é¡»ç›¸äº’ä¿¡ä»»ã€‚\n- æŠ€èƒ½çš„åˆ†å¸ƒå¿…é¡»é€‚åˆé—®é¢˜ï¼Œå›¢é˜Ÿæˆå‘˜ä¹‹é—´èƒ½å¤Ÿå½¢æˆäº’è¡¥çš„æŠ€èƒ½ç»„åˆã€‚\n- ä¸ºäº†ä¿æŒå›¢é˜Ÿå‡èšåŠ›ï¼Œå¯èƒ½å¿…é¡»å°†ç‰¹ç«‹ç‹¬è¡Œè€…æ’é™¤åœ¨å›¢é˜Ÿä¹‹å¤–ã€‚\n- å›¢é˜Ÿæ˜¯â€œè‡ªç»„ç»‡â€çš„ï¼š\n  - _è‡ªé€‚åº”(adaptive)_ çš„å›¢é˜Ÿç»“æ„ï¼šæ•æ·å›¢é˜Ÿçš„ç»“æ„å¯ä»¥æ ¹æ®é¡¹ç›®éœ€è¦çµæ´»è°ƒæ•´ã€‚\n  - ä½¿ç”¨éšæœº / å¼€æ”¾ / åŒæ­¥èŒƒå¼çš„å…ƒç´ ï¼Œæ•æ·å›¢é˜Ÿç»¼åˆäº†è¿™äº›èŒƒå¼çš„ä¼˜ç‚¹ã€‚\n  - æˆå‘˜æ‹¥æœ‰é«˜åº¦çš„ _è‡ªä¸»æƒ(autonomy)_ã€‚\n\n## 6. Team Coordination & Communication\n\næœ‰æ•ˆçš„ **å›¢é˜Ÿåè°ƒä¸æ²Ÿé€š(Team Coordination & Communication)** æ˜¯é¡¹ç›®æˆåŠŸçš„å…³é”®ä¿éšœã€‚å›¢é˜Ÿå¯ä»¥ä½¿ç”¨å¤šç§æ²Ÿé€šæ–¹å¼ï¼š\n\n- **æ­£å¼çš„ã€éä¸ªäººæ–¹æ³•(formal & impersonal approaches)**ï¼šåŒ…æ‹¬è½¯ä»¶å·¥ç¨‹æ–‡æ¡£ã€å·¥ä½œäº§å“ã€æŠ€æœ¯å¤‡å¿˜å½•ã€é¡¹ç›®é‡Œç¨‹ç¢‘ã€è¿›åº¦è¡¨å’Œé¡¹ç›®æ§åˆ¶å·¥å…·ï¼ˆç¬¬ 23 ç« ï¼‰ã€å˜æ›´è¯·æ±‚å’Œç›¸å…³æ–‡æ¡£ã€é”™è¯¯è·Ÿè¸ªæŠ¥å‘Šã€å’Œå­˜å‚¨åº“æ•°æ®ï¼ˆç¬¬ 26 ç« ï¼‰ã€‚è¿™äº›æ–¹æ³•ä¸»è¦ç”¨äºè®°å½•å’Œä¼ é€’é¡¹ç›®ä¿¡æ¯ï¼Œä¾‹å¦‚éœ€æ±‚æ–‡æ¡£ã€è®¾è®¡æ–‡æ¡£ã€ä»£ç ã€æµ‹è¯•æŠ¥å‘Šç­‰ã€‚\n- **æ­£å¼çš„ã€äººé™…ç¨‹åº(formal & interpersonal procedures)**ï¼šä¾§é‡äºåº”ç”¨äºè½¯ä»¶å·¥ç¨‹å·¥ä½œäº§å“çš„è´¨é‡ä¿è¯æ´»åŠ¨ï¼ˆç¬¬ 25 ç« ï¼‰ã€‚è¿™äº›åŒ…æ‹¬çŠ¶æ€å®¡æŸ¥ä¼šè®®ä»¥åŠè®¾è®¡å’Œä»£ç æ£€æŸ¥ã€‚ä¾‹å¦‚ï¼šè¯„å®¡ä¼šè®®ã€ä»£ç å®¡æŸ¥ã€èµ°æŸ¥ç­‰ï¼Œè¿™äº›æ–¹æ³•ä¸»è¦ç”¨äºç¡®ä¿è½¯ä»¶è´¨é‡ã€‚\n- **éæ­£å¼çš„ã€äººé™…ç¨‹åº(informal & interpersonal procedures)**ï¼šåŒ…æ‹¬ç”¨äºä¿¡æ¯ä¼ æ’­å’Œé—®é¢˜è§£å†³çš„å°ç»„ä¼šè®®ä»¥åŠâ€œéœ€æ±‚å’Œå¼€å‘äººå‘˜çš„æ­é…â€ï¼Œå¦‚å¤´è„‘é£æš´ç­‰ã€‚\n- **ç”µå­é€šè®¯(electronic communication)**ï¼šåŒ…æ‹¬ç”µå­é‚®ä»¶ã€ç”µå­å…¬å‘Šæ¿ï¼Œä»¥åŠæ‰©å±•çš„ã€åŸºäºè§†é¢‘çš„ä¼šè®®ç³»ç»Ÿï¼Œè¿™äº›æ–¹æ³•å¯ä»¥æ‰“ç ´æ—¶é—´å’Œç©ºé—´çš„é™åˆ¶ï¼Œæ–¹ä¾¿å›¢é˜Ÿæˆå‘˜è¿œç¨‹æ²Ÿé€šã€‚\n- **äººé™…ç½‘ç»œ(interpersonal networking)**ï¼šåŒ…æ‹¬ä¸å›¢é˜Ÿæˆå‘˜å’Œé¡¹ç›®å¤–éƒ¨äººå‘˜çš„éæ­£å¼è®¨è®ºï¼Œä»–ä»¬å¯èƒ½æ‹¥æœ‰æœ‰å¸®åŠ©çš„ç»éªŒæˆ–è§è§£ã€‚\n\n## 7. The Product Scope\n\n**äº§å“èŒƒå›´(The Product Scope)** å®šä¹‰äº†è½¯ä»¶ç³»ç»Ÿéœ€è¦å®ç°çš„åŠŸèƒ½å’Œç‰¹æ€§ï¼Œå®ƒå¿…é¡»åœ¨ç®¡ç†å’ŒæŠ€æœ¯å±‚é¢éƒ½æ˜¯æ˜ç¡®å’Œå¯ç†è§£çš„ã€‚äº§å“èŒƒå›´éœ€è¦ä»ä»¥ä¸‹å‡ ä¸ªæ–¹é¢è¿›è¡Œæè¿°ï¼š\n\n- **èƒŒæ™¯(Context)**ï¼šè¦æ„å»ºçš„è½¯ä»¶å¦‚ä½•é€‚åº”æ›´å¤§çš„ç³»ç»Ÿã€äº§å“æˆ–ä¸šåŠ¡èƒŒæ™¯ï¼Ÿç”±æ­¤äº§ç”Ÿä»€ä¹ˆçº¦æŸï¼Ÿ ç†è§£è½¯ä»¶çš„èƒŒæ™¯æœ‰åŠ©äºç¡®å®šå…¶è¾¹ç•Œå’Œçº¦æŸæ¡ä»¶ã€‚\n- **ä¿¡æ¯ç›®æ ‡(Information objectives)**ï¼šè½¯ä»¶ä½œä¸ºè¾“å‡ºäº§ç”Ÿå“ªäº›å®¢æˆ·å¯è§çš„æ•°æ®å¯¹è±¡ï¼Ÿéœ€è¦å“ªäº›æ•°æ®å¯¹è±¡ä½œä¸ºè¾“å…¥ï¼Ÿ æ˜ç¡®è¾“å…¥å’Œè¾“å‡ºæ•°æ®å¯¹è±¡æœ‰åŠ©äºå®šä¹‰è½¯ä»¶çš„åŠŸèƒ½å’Œæ•°æ®å¤„ç†æµç¨‹ã€‚\n- **åŠŸèƒ½å’Œæ€§èƒ½(Function and performance)**ï¼šè½¯ä»¶æ‰§è¡Œä»€ä¹ˆåŠŸèƒ½å°†è¾“å…¥æ•°æ®è½¬æ¢ä¸ºè¾“å‡ºï¼Ÿæ˜¯å¦éœ€è¦è§£å†³ä»»ä½•ç‰¹æ®Šçš„æ€§èƒ½ç‰¹å¾ï¼Ÿ å®šä¹‰è½¯ä»¶çš„åŠŸèƒ½å’Œæ€§èƒ½æŒ‡æ ‡ï¼Œæœ‰åŠ©äºæŒ‡å¯¼è½¯ä»¶è®¾è®¡å’Œå¼€å‘ã€‚\n\n### 7.1. Problem Decomposition\n\n**é—®é¢˜åˆ†è§£(Problem Decomposition)** æœ‰æ—¶ä¹Ÿç§°ä¸º **åˆ†åŒº(partitioning)** æˆ– **é—®é¢˜ç»†åŒ–(problem elaboration)**ã€‚\n\n- ä¸€æ—¦å®šä¹‰äº†èŒƒå›´ï¼Œå…¶å¯ä»¥è¢«åˆ†è§£ä¸º **ç»„æˆåŠŸèƒ½(constituent functions)**ã€ç”¨æˆ·å¯è§çš„ **æ•°æ®å¯¹è±¡(data objects)**ã€ä¸€ç»„ **é—®é¢˜ç±»(problem classes)**â€¦â€¦\n- åˆ†è§£è¿‡ç¨‹å°†æŒç»­è¿›è¡Œï¼Œç›´åˆ°å®šä¹‰äº†æ‰€æœ‰åŠŸèƒ½æˆ–é—®é¢˜ç±»ä¸ºæ­¢ã€‚\n- ç›®çš„ï¼šå°†å¤æ‚çš„é—®é¢˜åˆ†è§£ä¸ºæ›´å°ã€æ›´æ˜“äºç®¡ç†å’Œè§£å†³çš„å­é—®é¢˜ã€‚\n\n## 8. The Process\n\né¡¹ç›®çš„ **è¿‡ç¨‹(process)** æ¡†æ¶çš„æ­å»ºéœ€è¦è€ƒè™‘ä»¥ä¸‹è¦ç´ ï¼š\n\n- é¡¹ç›® _ç‰¹ç‚¹(characteristic)_\n- ç¡®å®šæ‰€éœ€çš„ _ä¸¥è°¨ç¨‹åº¦(degree of rigor)_\n- ä¸ºæ¯ä¸ªè½¯ä»¶å·¥ç¨‹æ´»åŠ¨å®šä¹‰ **ä»»åŠ¡é›†(task set)**â€”â€”ä»»åŠ¡é›†åŒ…å«ä»¥ä¸‹å†…å®¹ï¼š\n  - **è½¯ä»¶å·¥ç¨‹ä»»åŠ¡(software engineering task)**ï¼šä¸ºäº†å®Œæˆç‰¹å®šçš„è½¯ä»¶å·¥ç¨‹æ´»åŠ¨è€Œéœ€è¦æ‰§è¡Œçš„å…·ä½“ä»»åŠ¡ï¼Œå¦‚éœ€æ±‚åˆ†æã€è®¾è®¡ã€ç¼–ç ã€æµ‹è¯•ç­‰ç­‰ã€‚\n  - ==**å·¥ä½œäº§å“(work product)**ï¼šå¯äº¤ä»˜ç‰©ï¼ŒåŒ…æ‹¬éœ€æ±‚æ–‡æ¡£ã€æºä»£ç ã€æµ‹è¯•ç”¨ä¾‹ç­‰ç­‰==ã€‚\n  - **è´¨é‡ä¿è¯ç‚¹(quality assurance point)**ï¼šå¦‚æµ‹è¯•æˆ–ã€‚\n  - **é‡Œç¨‹ç¢‘(milestone)**ï¼šé¡¹ç›®è¿›å±•è¿‡ç¨‹ä¸­çš„é‡è¦äº‹ä»¶æˆ–æ—¶é—´èŠ‚ç‚¹ã€‚\n\n![Melding the Problem and the Process|522](https://img.memset0.cn/2025/03/03/JJddAB70.png)\n\n## 9. The Project\n\né¡¹ç›®åœ¨ä»¥ä¸‹æƒ…å†µä¸‹ä¼šé™·å…¥å›°å¢ƒ...\n\n- è½¯ä»¶äººå‘˜ä¸äº†è§£å®¢æˆ·çš„éœ€æ±‚ã€‚\n- äº§å“èŒƒå›´å®šä¹‰ä¸æ˜ç¡®ã€‚\n- å˜æ›´ç®¡ç†ä¸å–„ã€‚\n- é€‰æ‹©çš„æŠ€æœ¯å‘ç”Ÿå˜åŒ–ã€‚\n- ä¸šåŠ¡éœ€æ±‚å‘ç”Ÿå˜åŒ–æˆ–å®šä¹‰ä¸æ˜ç¡®ã€‚\n- æˆªæ­¢æ—¥æœŸ _ä¸åˆ‡å®é™…(unrealistic)_ã€‚\n- ç”¨æˆ·æŠµåˆ¶ã€‚\n- _èµåŠ©(sponsorship)_ ä¸¢å¤±æˆ–æœªæ­£ç¡®è·å¾—ã€‚\n- é¡¹ç›®å›¢é˜Ÿç¼ºä¹å…·æœ‰é€‚å½“æŠ€èƒ½çš„äººå‘˜ã€‚\n- ç®¡ç†äººå‘˜ï¼ˆå’Œå®è·µè€…ï¼‰æ²¡æœ‰ä»æœ€ä½³å®è·µä¸­å¸å–æ•™è®­ã€‚\n\n### 9.1. Common-Sense Approach to Projects\n\nå¯¹é¡¹ç›®é‡‡å– **å¸¸è¯†æ€§æ–¹æ³•(Common-Sense Approach to Projects)**ï¼Œå¯ä»¥æœ‰æ•ˆåœ°æé«˜é¡¹ç›®æˆåŠŸç‡ã€‚è¿™åŒ…å«ä»¥ä¸‹å‡ ä¸ªå…³é”®åŸåˆ™ï¼š\n\n- **è‰¯å¥½çš„å¼€ç«¯(Start on the right foot)**ï¼šåŠªåŠ›ï¼ˆéå¸¸åŠªåŠ›ï¼‰ç†è§£è¦è§£å†³çš„é—®é¢˜ï¼Œç„¶åè®¾å®šåˆ‡åˆå®é™…çš„ç›®æ ‡å’ŒæœŸæœ›ã€‚é¡¹ç›®å¯åŠ¨é˜¶æ®µè‡³å…³é‡è¦ï¼Œéœ€è¦å……åˆ†ç†è§£å®¢æˆ·éœ€æ±‚ï¼Œæ˜ç¡®é¡¹ç›®ç›®æ ‡å’ŒèŒƒå›´ã€‚\n- **ä¿æŒåŠ¨åŠ›(Maintain momentum)**ï¼šé¡¹ç›®ç»ç†å¿…é¡»æä¾›æ¿€åŠ±æªæ–½ï¼Œä»¥æœ€å¤§é™åº¦åœ°å‡å°‘äººå‘˜æµåŠ¨ï¼Œå›¢é˜Ÿåº”å¼ºè°ƒå…¶æ‰§è¡Œçš„æ¯é¡¹ä»»åŠ¡çš„è´¨é‡ï¼Œé«˜çº§ç®¡ç†å±‚åº”å°½ä¸€åˆ‡å¯èƒ½ä¸å¹²æ¶‰å›¢é˜Ÿçš„å·¥ä½œã€‚ä¿æŒå›¢é˜Ÿç¨³å®šã€é‡è§†è´¨é‡ã€å‡å°‘å¤–éƒ¨å¹²æ‰°ï¼Œéƒ½æœ‰åŠ©äºé¡¹ç›®ä¿æŒè‰¯å¥½åŠ¿å¤´ã€‚\n- **è·Ÿè¸ªè¿›å±•(Track progress)**ï¼šå¯¹äºè½¯ä»¶é¡¹ç›®ï¼Œå½“å·¥ä½œäº§å“ï¼ˆä¾‹å¦‚ï¼Œæ¨¡å‹ã€æºä»£ç ã€æˆå¥—æµ‹è¯•ç”¨ä¾‹ï¼‰è¢«ç”Ÿäº§å‡ºæ¥å¹¶ä½œä¸ºè´¨é‡ä¿è¯æ´»åŠ¨çš„ä¸€éƒ¨åˆ†è·å¾—æ‰¹å‡†ï¼ˆä½¿ç”¨æ­£å¼æŠ€æœ¯è¯„å®¡ï¼‰æ—¶ï¼Œå°±ä¼šè·Ÿè¸ªè¿›å±•ã€‚é€šè¿‡å®šæœŸè·Ÿè¸ªé¡¹ç›®è¿›å±•ï¼ŒåŠæ—¶å‘ç°å’Œè§£å†³é—®é¢˜ï¼Œç¡®ä¿é¡¹ç›®æŒ‰è®¡åˆ’è¿›è¡Œã€‚\n- **åšå‡ºæ˜æ™ºçš„å†³å®š(Make smart decisions)**ï¼šæœ¬è´¨ä¸Šï¼Œé¡¹ç›®ç»ç†å’Œè½¯ä»¶å›¢é˜Ÿçš„å†³å®šåº”è¯¥æ˜¯â€œä¿æŒç®€å•â€ã€‚åœ¨é¡¹ç›®å†³ç­–è¿‡ç¨‹ä¸­ï¼Œåº”ä¼˜å…ˆè€ƒè™‘ç®€å•æœ‰æ•ˆçš„æ–¹æ¡ˆï¼Œé¿å…è¿‡åº¦è®¾è®¡å’Œå¤æ‚åŒ–ã€‚\n- **è¿›è¡Œäº‹ååˆ†æ(Conduct a postmortem analysis)**ï¼šä¸ºæ¯ä¸ªé¡¹ç›®å»ºç«‹ä¸€è‡´çš„æœºåˆ¶ï¼Œä»¥å¸å–ç»éªŒæ•™è®­ã€‚é¡¹ç›®ç»“æŸåï¼Œåº”è¿›è¡Œå›é¡¾å’Œæ€»ç»“ï¼Œæç‚¼ç»éªŒæ•™è®­ï¼Œä¸ºåç»­é¡¹ç›®æä¾›å€Ÿé‰´ã€‚\n\n### 9.2. To Get to the Essence of a Project\n\nBarry Boehm æå‡ºäº†ä»¥ä¸‹äº”ä¸ª W å’Œä¸¤ä¸ª Hï¼Œä»¥å¸®åŠ©æŠ“ä½é¡¹ç›®çš„æ ¸å¿ƒè¦ç‚¹ï¼š\n\n| CN                                                                | EN                                                                                  |\n| ----------------------------------------------------------------- | ----------------------------------------------------------------------------------- |\n| ä¸ºä»€ä¹ˆè¦å¼€å‘ç³»ç»Ÿï¼Ÿ                                                | Why is the system being developed?                                                  |\n| å°†è¦å®Œæˆä»€ä¹ˆï¼Ÿ                                                    | What will be done?                                                                  |\n| ä½•æ—¶å®Œæˆï¼Ÿ                                                        | When will it be accomplished?                                                       |\n| è°è´Ÿè´£ï¼Ÿ                                                          | Who is responsible?                                                                 |\n| ä»–ä»¬åœ¨ç»„ç»‡ç»“æ„ä¸­çš„ä½ç½®åœ¨å“ªé‡Œï¼Ÿ                                    | Where are they organizationally located?                                            |\n| å¦‚ä½•åœ¨æŠ€æœ¯å’Œç®¡ç†ä¸Šå®Œæˆè¿™é¡¹å·¥ä½œï¼Ÿ                                  | How will the job be done technically and managerially?                              |\n| æ¯ç§ _èµ„æº(resource)_ï¼ˆä¾‹å¦‚ï¼Œäººå‘˜ã€è½¯ä»¶ã€å·¥å…·ã€æ•°æ®åº“ï¼‰éœ€è¦å¤šå°‘ï¼Ÿ | How much of each resource (e.g., people, software, tools, database) will be needed? |\n\n### 9.3. Critical Practices\n\nä»¥ä¸‹æ˜¯ä¸€äº›**å…³é”®å®è·µ(Critical Practices)**ï¼Œå¯ä»¥æ˜¾è‘—æé«˜è½¯ä»¶é¡¹ç›®æˆåŠŸç‡ï¼š\n\n| CN                                         | EN                                      |\n| ------------------------------------------ | --------------------------------------- |\n| ç³»ç»Ÿçš„é£é™©ç®¡ç†                             | Formal risk management                  |\n| ç»éªŒæˆæœ¬å’Œè¿›åº¦ä¼°ç®—                         | Empirical cost and schedule estimation  |\n| _åŸºäºåº¦é‡çš„(metrics-based)_ é¡¹ç›®ç®¡ç†       | Metrics-based project management        |\n| _æŒ£å€¼(earned value)_ è·Ÿè¸ª                  | Earned value tracking                   |\n| é’ˆå¯¹è´¨é‡ç›®æ ‡çš„ _ç¼ºé™·è·Ÿè¸ª(defect tracking)_ | Defect tracking against quality targets |\n| ä»¥äººä¸ºæœ¬çš„é¡¹ç›®ç®¡ç†                         | People aware project management         |\n\n# Ch.5 Agile Development\n\n## 1. Agile Development\n\n### 1.1. The Manifesto for Agile Software Development\n\nç”± Kent Beck æå‡ºçš„æ•æ·è½¯ä»¶å¼€å‘ _å®£è¨€(manifesto)_ çš„æ ¸å¿ƒä»·å€¼è§‚æ˜¯ï¼š\n\n- **ä¸ªä½“ä¸äº’åŠ¨(Individuals and interactions)** èƒœè¿‡ **æµç¨‹ä¸å·¥å…·(processes and tools)**\n- **å¯å·¥ä½œçš„è½¯ä»¶(Working software)** èƒœè¿‡ **å®Œå–„çš„æ–‡æ¡£(comprehensive documentation)**\n- **å®¢æˆ·åˆä½œ(Customer collaboration)** èƒœè¿‡ **åˆåŒè°ˆåˆ¤(contract negotiation)**\n- **å“åº”å˜åŒ–(Responding to change)** èƒœè¿‡ **éµå¾ªè®¡åˆ’(following a plan)**\n\n### 1.2. What is \"Agility\"?\n\n**æ•æ·(Agility)** æ„å‘³ç€ï¼š\n\n| CN                                                                             | EN                                                               |\n| ------------------------------------------------------------------------------ | ---------------------------------------------------------------- |\n| æ‰€æœ‰ _å¹²ç³»äºº(stakeholder)_ ä¹‹é—´æœ‰æ•ˆçš„æ²Ÿé€š                                      | Effective communication among all stakeholders                   |\n| å°†å®¢æˆ·èå…¥å›¢é˜Ÿ                                                                 | Drawing the customer onto the team                               |\n| ç»„ç»‡å›¢é˜Ÿä½¿å…¶èƒ½å¤ŸæŒæ§å·¥ä½œ                                                       | Organizing a team so that it is in control of the work performed |\n| è¿›è€Œå®ç°ï¼š==å¿«é€Ÿã€å¢é‡å¼çš„è½¯ä»¶äº¤ä»˜==ï¼ˆé€æ­¥äº¤ä»˜è½¯ä»¶ï¼Œè€Œä¸æ˜¯ä¸€æ¬¡æ€§äº¤ä»˜æ‰€æœ‰åŠŸèƒ½ï¼‰ | Yielding... Rapid, incremental delivery of software              |\n\n![Agility and the Cost of Change|444](https://img.memset0.cn/2025/03/03/XdvU65wJ.png)\n\n## 2. Agile Process\n\nå…¸å‹çš„ **æ•æ·å¼€å‘è¿‡ç¨‹(Agile Process)** å…·æœ‰ä»¥ä¸‹ç‰¹ç‚¹ï¼š\n\n| CN                                                                                                         | EN                                                                             |\n| ---------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------ |\n| æ ¹æ®å®¢æˆ·çš„éœ€æ±‚æè¿°é©±åŠ¨æ•æ·å¼€å‘                                                                             | Is driven by customer descriptions of what is required (scenarios)             |\n| å¿…é¡»è®¤è¯†åˆ°è®¡åˆ’æ˜¯çŸ­æœŸçš„ï¼Œæ‰¿è®¤è®¡åˆ’éœ€è¦ä¸æ–­è°ƒæ•´å’Œè¿­ä»£ï¼Œä¸èƒ½å¥¢æ±‚ç›´æ¥å¾—åˆ°é•¿æœŸè®¡åˆ’                               | Recognizes that plans are short-lived                                          |\n| é€šè¿‡é«˜åº¦å¼ºè°ƒæ„å»ºæ´»åŠ¨æ¥è¿­ä»£åœ°å¼€å‘è½¯ä»¶â€”â€”æ¯ä¸ªè¿­ä»£å‘¨æœŸéƒ½éœ€è¦åŒ…å«è®¾è®¡ã€ç¼–ç å’Œæµ‹è¯•ç¯èŠ‚ï¼Œç¡®ä¿éƒ½èƒ½äº§ç”Ÿå¯å·¥ä½œçš„ç‰ˆæœ¬ | Develops software iteratively with a heavy emphasis on construction activities |\n| å°†è½¯ä»¶åˆ†è§£æˆå¤šä¸ªâ€œè½¯ä»¶å¢é‡â€å¹¶äº¤äº’ç»™å®¢æˆ·                                                                     | Delivers multiple software increments                                          |\n| éšç€å˜åŒ–è€Œé€‚åº”â€”â€”èƒ½å¤Ÿæ ¹æ®é¡¹ç›®è¿›å±•å’Œå®¢æˆ·éœ€æ±‚çµæ´»è°ƒæ•´æ–¹å‘                                                     | Adapts as changes occur                                                        |\n\n## 3. Agility Principles\n\næ•æ·å¼€å‘éµå¾ªä»¥ä¸‹ 12 æ¡ **æ•æ·å¼€å‘åŸåˆ™(Agility principles)**ã€‚\n\n| CN                                                                                                                    | EN                                                                                                                                            |\n| --------------------------------------------------------------------------------------------------------------------- | --------------------------------------------------------------------------------------------------------------------------------------------- |\n| æœ€é‡è¦çš„ç›®æ ‡æ˜¯é€šè¿‡å°½æ—©å’Œ==æŒç»­äº¤ä»˜==æœ‰ä»·å€¼çš„è½¯ä»¶æ¥æ»¡è¶³å®¢æˆ·ã€‚                                                          | Our highest priority is to satisfy the customer through early and continuous delivery of valuable software.                                   |\n| ==æ¬¢è¿éœ€æ±‚å˜åŒ–ï¼Œå³ä½¿åœ¨é¡¹ç›®åæœŸ==ã€‚æ•æ·è¿‡ç¨‹ _åˆ©ç”¨(harness)_ å˜åŒ–æ¥ä¸ºå®¢æˆ·åˆ›é€ ç«äº‰ä¼˜åŠ¿ã€‚                                 | Welcome changing requirements, even late in development. Agile processes harness change for the customer's competitive advantage.             |\n| ç»å¸¸äº¤ä»˜å¯å·¥ä½œçš„è½¯ä»¶ï¼Œäº¤ä»˜å‘¨æœŸä»å‡ å‘¨åˆ°å‡ ä¸ªæœˆä¸ç­‰ï¼Œå€¾å‘äºè¾ƒçŸ­çš„å‘¨æœŸã€‚                                                  | Deliver working software frequently, from a couple of weeks to a couple of months, with a preference to the shorter timescale.                |\n| ä¸šåŠ¡äººå‘˜å’Œå¼€å‘äººå‘˜å¿…é¡»åœ¨æ•´ä¸ªé¡¹ç›®ä¸­æ¯å¤©ä¸€èµ·å·¥ä½œã€‚                                                                      | Business people and developers must work together daily throughout the project.                                                               |\n| å›´ç»•ç§¯æä¸»åŠ¨çš„ä¸ªäººæ„å»ºé¡¹ç›®ã€‚ä¸ºä»–ä»¬æä¾›æ‰€éœ€çš„ç¯å¢ƒå’Œæ”¯æŒï¼Œå¹¶ä¿¡ä»»ä»–ä»¬èƒ½å¤Ÿå®Œæˆå·¥ä½œã€‚                                      | Build projects around motivated individuals. Give them the environment and support they need, and trust them to get the job done.             |\n| ä¸å¼€å‘å›¢é˜Ÿè¿›è¡Œä¿¡æ¯ä¼ é€’çš„==æœ€æœ‰æ•ˆæ–¹æ³•æ˜¯ _é¢å¯¹é¢(face-to-face)_ çš„äº¤è°ˆ==ã€‚                                              | The most efficient and effective method of conveying information to and within a development team is face-to-face conversation.               |\n| å¯å·¥ä½œçš„è½¯ä»¶æ˜¯è¡¡é‡è¿›åº¦çš„ _ä¸»è¦æŒ‡æ ‡(primary measure)_ã€‚                                                                | Working software is the primary measure of progress.                                                                                          |\n| æ•æ·è¿‡ç¨‹æå€¡ ==_å¯æŒç»­çš„(sustainable)_ å¼€å‘==ã€‚å‘èµ·äººã€å¼€å‘è€…å’Œç”¨æˆ·åº”è¯¥èƒ½å¤Ÿ _æ— é™æœŸåœ°(indefinitely)_ ä¿æŒç¨³å®šçš„èŠ‚å¥ã€‚ | Agile processes promote sustainable development. The sponsors, developers, and users should be able to maintain a constant pace indefinitely. |\n| æŒç»­å…³æ³¨æŠ€æœ¯å“è¶Šå’Œè‰¯å¥½è®¾è®¡æœ‰åŠ©äºæé«˜æ•æ·æ€§ã€‚                                                                          | Continuous attention to technical excellence and good design enhances agility.                                                                |\n| ==_ç®€æ´(simplicity)_ è‡³å…³é‡è¦==ï¼Œåº”æœ€å¤§é™åº¦åœ°å‡å°‘å·¥ä½œé‡ã€‚                                                             | Simplicity - the art of maximizing the amount of work not done - is essential.                                                                |\n| æœ€å¥½çš„æ¶æ„ã€éœ€æ±‚å’Œè®¾è®¡æ¥è‡ª ==_è‡ªç»„ç»‡çš„(self-organizing)_== å›¢é˜Ÿã€‚                                                     | The best architectures, requirements, and designs emerge from self-organizing teams.                                                          |\n| å›¢é˜Ÿ ==_å®šæœŸ(at regular intervals)_ åæ€==å¦‚ä½•å˜å¾—æ›´æœ‰æ•ˆç‡ï¼Œå¹¶æ®æ­¤è°ƒæ•´è‡ªèº«çš„è¡Œä¸ºã€‚                                    | At regular intervals, the team reflects on how to become more effective, then tunes and adjusts its behavior accordingly.                     |\n\n## 4. Human Factors\n\nåœ¨æ•æ·å¼€å‘ä¸­ï¼Œ**äººä¸ºå› ç´ (Human Factors)** è‡³å…³é‡è¦ã€‚å¼€å‘è¿‡ç¨‹åº”è¯¥å» ==_é€‚åº”(mold)_ äººå’Œå›¢é˜Ÿçš„ _éœ€æ±‚(need)_==ã€‚ä»¥ä¸‹æ˜¯æ•æ·å›¢é˜Ÿæˆå‘˜å’Œå›¢é˜Ÿå¿…é¡»å…·å¤‡çš„å…³é”®ç‰¹è´¨ï¼š\n\n- **èƒ½åŠ›(Competence)**ï¼šå›¢é˜Ÿæˆå‘˜éœ€è¦å…·å¤‡å®Œæˆå·¥ä½œæ‰€éœ€çš„ä¸“ä¸šæŠ€èƒ½å’ŒçŸ¥è¯†ã€‚\n- **å…±åŒç›®æ ‡(Common focus)**ï¼šå›¢é˜Ÿæˆå‘˜éœ€è¦å¯¹é¡¹ç›®ç›®æ ‡æœ‰ç»Ÿä¸€çš„è®¤è¯†å’Œè®¤åŒã€‚\n- **åä½œ(Collaboration)**ï¼šå›¢é˜Ÿæˆå‘˜ä¹‹é—´éœ€è¦å¯†åˆ‡åˆä½œï¼Œå…±åŒè§£å†³é—®é¢˜ã€‚\n- **å†³ç­–èƒ½åŠ›(Decision-making ability)**ï¼šå›¢é˜Ÿéœ€è¦æ‹¥æœ‰è‡ªä¸»å†³ç­–çš„èƒ½åŠ›ï¼Œå¿«é€Ÿå“åº”å˜åŒ–ã€‚\n- **æ¨¡ç³Šé—®é¢˜è§£å†³èƒ½åŠ›(Fuzzy problem-solving ability)**ï¼šé¢å¯¹ä¸ç¡®å®šæ€§å’Œæ¨¡ç³Šæ€§ï¼Œå›¢é˜Ÿéœ€è¦èƒ½å¤Ÿçµæ´»åº”å˜ï¼Œæ‰¾åˆ°è§£å†³æ–¹æ¡ˆã€‚\n- **ç›¸äº’ä¿¡ä»»å’Œå°Šé‡(Mutual trust and respect)**ï¼šå›¢é˜Ÿæˆå‘˜ä¹‹é—´éœ€è¦ç›¸äº’ä¿¡ä»»å’Œå°Šé‡ï¼Œè¥é€ ç§¯æå’Œè°çš„å·¥ä½œæ°›å›´ã€‚\n- **è‡ªç»„ç»‡(Self-organization)**ï¼šå›¢é˜Ÿéœ€è¦å…·å¤‡è‡ªç»„ç»‡èƒ½åŠ›ï¼Œè‡ªä¸»ç®¡ç†å’Œåˆ†é…ä»»åŠ¡ã€‚\n\n## 5. Agile Progress Examples\n\n### 5.1. Extreme Programming\n\n**æé™ç¼–ç¨‹(Extreme Programming, XP)** æ˜¯æœ€å¹¿æ³›ä½¿ç”¨çš„ä¸€ç§æ•æ·å¼€å‘è¿‡ç¨‹ï¼Œæœ€åˆç”± Kent Beck æå‡ºã€‚\n\n- **XP Planning**\n  - ä»åˆ›å»º **ç”¨æˆ·æ•…äº‹(user stories)** å¼€å§‹â€”â€”ç”¨æˆ·æ•…äº‹æ˜¯æè¿°ç”¨æˆ·éœ€æ±‚çš„ä¸€ç§ç®€æ´æ–¹å¼ã€‚\n  - æ•æ·å›¢é˜Ÿè¯„ä¼°æ¯ä¸ªç”¨æˆ·æ•…äº‹å¹¶åˆ†é…æˆæœ¬ã€‚\n  - ç”¨æˆ·æ•…äº‹è¢«åˆ†ç»„å½¢æˆ _å¯äº¤ä»˜çš„(deliverable)_ å¢é‡ã€‚\n  - åšå‡º _äº¤ä»˜æ—¥æœŸ(delivery date)_ çš„ _è®¸è¯º(commitment)_ã€‚\n  - ä½¿ç”¨ **é¡¹ç›®é€Ÿåº¦(project velocity)** å¸®åŠ©å®šä¹‰åç»­å¢é‡çš„äº¤ä»˜æ—¥æœŸâ€”â€”é¡¹ç›®é€Ÿåº¦æŒ‡æ¯ä¸ªè¿­ä»£å‘¨æœŸå†…éœ€è¦å®Œæˆçš„å·¥ä½œé‡ã€‚\n- **XP Design**\n  - éµå¾ª **KIS åŸåˆ™(Keep It Simple, KIS)**ï¼Œä¿æŒè®¾è®¡ç®€å•ã€‚\n  - é¼“åŠ±ä½¿ç”¨ ==**ç±»-èŒè´£-åä½œå¡(Class-Responsibility-Collaboration card, CRC card)**==ï¼ˆç¬¬ 8 ç« ï¼‰ã€‚\n  - å¯¹äºå›°éš¾çš„è®¾è®¡é—®é¢˜ï¼Œä½¿ç”¨å°å‹çš„è®¾è®¡ _åŸå‹(prototype)_ æ¥æ¢ç´¢å’ŒéªŒè¯è®¾è®¡æ–¹æ¡ˆçš„å¯è¡Œæ€§ï¼Œç§°ä½œâ€œspike solutionsâ€ã€‚\n  - é¼“åŠ± _é‡æ„(refactoring)_ï¼Œé€šè¿‡è¿­ä»£æ”¹è¿›å†…éƒ¨ç¨‹åºè®¾è®¡ã€‚\n- **XP Coding**\n  - å»ºè®®åœ¨å¼€å§‹ç¼–ç ä¹‹å‰ï¼Œä¸ºç”¨æˆ·æ•…äº‹æ„å»º **å•å…ƒæµ‹è¯•(unit test)**ã€‚\n  - é¼“åŠ± **ç»“å¯¹ç¼–ç¨‹(pair programming)**ã€‚\n- **XP Testing**\n  - æ¯å¤©æ‰§è¡Œæ‰€æœ‰å•å…ƒæµ‹è¯•â€”â€”å¯ä»¥ä½¿ç”¨ **æŒç»­é›†æˆ(Continuous Integration, CI)** å·¥å…·ã€‚\n  - _éªŒæ”¶æµ‹è¯•(Acceptance test)_ï¼šç”±å®¢æˆ·å®šä¹‰ï¼Œç”¨äºè¯„ä¼°è½¯ä»¶æ˜¯å¦æ»¡è¶³å®¢æˆ·çš„éœ€æ±‚ã€‚\n\n![Adaptive Software Development|555](https://img.memset0.cn/2025/03/03/GEQYhWc2.png)\n\n### 5.2. Industrial XP\n\n**å·¥ä¸šæé™ç¼–ç¨‹(Industrial Extreme Programming, IXP)** æ˜¯ XP çš„æ‰©å±•å’Œå¢å¼ºç‰ˆæœ¬ï¼Œæ›´åŠ æ³¨é‡ç®¡ç†ã€å®¢æˆ·è§’è‰²å’ŒæŠ€æœ¯å®è·µã€‚å…¶åŒ…å«å…­ä¸ªæ–°çš„å®è·µï¼š\n\n- **å‡†å¤‡åº¦è¯„ä¼°(Readiness assessment)**ï¼šåœ¨é¡¹ç›®å¼€å§‹å‰è¯„ä¼°å›¢é˜Ÿå’Œç»„ç»‡çš„æ•æ·å¼€å‘å‡†å¤‡ç¨‹åº¦ã€‚\n- **é¡¹ç›®ç¤¾åŒº(Project community)**ï¼šå¼ºè°ƒå»ºç«‹ç§¯æåä½œçš„é¡¹ç›®ç¤¾åŒºï¼ŒåŒ…æ‹¬æ‰€æœ‰åˆ©ç›Šç›¸å…³è€…ã€‚\n- **é¡¹ç›®ç« ç¨‹(Project chartering)**ï¼šåˆ¶å®šæ¸…æ™°çš„é¡¹ç›®ç›®æ ‡ã€èŒƒå›´å’Œæ„¿æ™¯ã€‚\n- **æµ‹è¯•é©±åŠ¨ç®¡ç†(Test driven management)**ï¼šä½¿ç”¨æµ‹è¯•ç»“æœæ¥é©±åŠ¨é¡¹ç›®ç®¡ç†å’Œå†³ç­–ã€‚\n- **å›é¡¾(Retrospectives)**ï¼šå®šæœŸå›é¡¾å’Œæ€»ç»“é¡¹ç›®ç»éªŒï¼ŒæŒç»­æ”¹è¿›ã€‚\n- **æŒç»­å­¦ä¹ (Continuous learning)**ï¼šé¼“åŠ±å›¢é˜Ÿæˆå‘˜æŒç»­å­¦ä¹ å’Œæå‡æŠ€èƒ½ã€‚\n\n### 5.3. Scrum\n\n**Scrum** æœ€åˆç”± Schwaber å’Œ Beedle æå‡ºï¼Œå…¶æ˜¾è‘—ç‰¹ç‚¹åŒ…æ‹¬ï¼š\n\n- å°†å¤§çš„å¼€å‘å·¥ä½œåˆ’åˆ†ä¸ºä¸€ä¸ªä¸€ä¸ªå°çš„ **åŒ…(packets)**ã€‚\n- æµ‹è¯•å’Œæ–‡æ¡£åœ¨äº§å“æ„å»ºè¿‡ç¨‹ä¸­æŒç»­è¿›è¡Œï¼Œè´¯ç©¿å§‹ç»ˆã€‚\n- é€šè¿‡ **å¾…åŠäº‹é¡¹åˆ—è¡¨(backlog)** åˆ’å‡ºè‹¥å¹²æ®µçš„å¼€å‘å‘¨æœŸï¼Œç§°ä¸º â€œ**å†²åˆº(sprints)**â€ã€‚\n- ä½¿ç”¨éå¸¸ç®€çŸ­çš„ä¼šè®®å½¢å¼ï¼Œæœ‰æ—¶ç”šè‡³å¯ä»¥ç«™ç€è¿›è¡Œã€‚\n- æ¯ä¸€ä¸ªå†²åˆºå‘¨æœŸç»“æŸåçš„éƒ½å‘å®¢æˆ·äº¤ä»˜ **æ¼”ç¤º(demo)**ã€‚\n\n### 5.4. Dynamic Systems Development Method\n\n**åŠ¨æ€ç³»ç»Ÿå¼€å‘æ–¹æ³•(Dynamic Systems Development Method, DSDM)** ç”± DSDM è”ç›Ÿæ¨å¹¿ï¼Œå…¶å¤§å¤šæ•°æ–¹é¢ä¸ XP ç›¸ä¼¼ï¼Œå¹¶æœ‰ä»¥ä¸‹ä¹æ¡æŒ‡å¯¼åŸåˆ™ï¼š\n\n| CN                                                               | EN                                                                                               |\n| ---------------------------------------------------------------- | ------------------------------------------------------------------------------------------------ |\n| ç”¨æˆ·çš„ç§¯æå‚ä¸ _è‡³å…³é‡è¦(imperative)_                            | Active user involvement is imperative.                                                           |\n| DSDM å›¢é˜Ÿå¿…é¡» _è¢«æˆæƒ(empowered)_ è¿›è¡Œè‡ªä¸»å†³ç­–                   | DSDM teams must be empowered to make decisions.                                                  |\n| é‡ç‚¹æ˜¯äº§å“çš„é¢‘ç¹äº¤ä»˜                                             | The focus is on frequent delivery of products.                                                   |\n| éªŒæ”¶çš„åŸºæœ¬æ ‡æ³¨æ˜¯å¯¹ä¸šåŠ¡çš„ _ç¬¦åˆç¨‹åº¦(fitness)_                     | Fitness for business purpose is the essential criterion for acceptance of deliverables.          |\n| è¿­ä»£å’Œå¢é‡å¼€å‘æ˜¯å®ç°ç²¾ç¡®ä¸šåŠ¡è§£å†³æ–¹æ¡ˆçš„å¿…è¦æ¡ä»¶                   | Iterative and incremental development is necessary to converge on an accurate business solution. |\n| å¼€å‘æœŸé—´çš„æ‰€æœ‰å˜æ›´éƒ½æ˜¯ _å¯é€†çš„(reversible)_                      | All changes during development are reversible.                                                   |\n| éœ€æ±‚åœ¨è¾ƒé«˜å±‚æ¬¡ä¸ŠåŸºçº¿åŒ–â€”â€”å³ä¸å¿…å¤ªè¿‡è¯¦ç»†ï¼Œå¯ä»¥åœ¨è¿­ä»£è¿‡ç¨‹ä¸­è¿›è¡Œç»†åŒ– | Requirements are baselined at a high level                                                       |\n| æµ‹è¯•è´¯ç©¿æ•´ä¸ª _ç”Ÿå‘½å‘¨æœŸ(life-cycle)_â€”â€”å¿…é¡»åœ¨æ¯ä¸ªé˜¶æ®µéƒ½è¿›è¡Œ        | Testing is integrated throughout the life-cycle.                                                 |\n\n![|592](https://img.memset0.cn/2025/03/03/C6FRCcQx.png)\n\n> **80% åŸåˆ™(80 percent rule)**ï¼šé€šå¸¸ï¼Œä¸€ä¸ªåº”ç”¨ç¨‹åºçš„ 80% ç»å¸¸åœ¨ 20% çš„æ—¶é—´å†…äº¤ä»˜ï¼Œè€Œå¦å¤– 20% çš„éƒ¨åˆ†åˆ™éœ€è¦å‰©ä½™çš„ 80% çš„æ—¶é—´ã€‚\n\n## 6. Agile Modeling\n\n**æ•æ·å»ºæ¨¡(Agile Modeling)** æœ€åˆç”± Scott Ambler æå‡ºï¼ŒåŒ…æ‹¬ä»¥ä¸‹åŸåˆ™ï¼š\n\n- **ä»¥ç›®æ ‡ä¸ºå¯¼å‘è¿›è¡Œå»ºæ¨¡(Model with a purpose)**ï¼šå»ºæ¨¡åº”è¯¥æœåŠ¡äºç‰¹å®šçš„ç›®æ ‡ï¼Œä¾‹å¦‚æ²Ÿé€šã€ç†è§£æˆ–è®¾è®¡ã€‚\n- **ä½¿ç”¨å¤šç§æ¨¡å‹(Use multiple models)**ï¼šæ ¹æ®éœ€è¦é€‰æ‹©åˆé€‚çš„æ¨¡å‹ï¼Œä¾‹å¦‚ç”¨ä¾‹å›¾ã€ç±»å›¾ã€æµç¨‹å›¾ç­‰ã€‚\n- **è½»é‡çº§å»ºæ¨¡(Travel light)**ï¼šé¿å…è¿‡åº¦å»ºæ¨¡ï¼Œåªåˆ›å»ºå¿…è¦çš„æ¨¡å‹ï¼Œä¿æŒæ¨¡å‹çš„ç®€æ´å’Œå®ç”¨æ€§ã€‚\n- **å†…å®¹æ¯”è¡¨ç¤ºå½¢å¼æ›´é‡è¦(Content is more important than representation)**ï¼šæ¨¡å‹çš„ç›®çš„æ˜¯ä¼ è¾¾ä¿¡æ¯ï¼Œå†…å®¹æ¯”æ¨¡å‹çš„å…·ä½“è¡¨ç¤ºå½¢å¼æ›´é‡è¦ã€‚\n- **äº†è§£æ¨¡å‹å’Œç”¨äºåˆ›å»ºæ¨¡å‹çš„å·¥å…·(Know the models and the tools you use to create them)**ï¼šç†Ÿç»ƒæŒæ¡å»ºæ¨¡æŠ€æœ¯å’Œå·¥å…·ã€‚\n- **å±€éƒ¨é€‚åº”(Adapt locally)**ï¼šæ ¹æ®å…·ä½“é¡¹ç›®å’Œå›¢é˜Ÿæƒ…å†µï¼Œçµæ´»è°ƒæ•´å»ºæ¨¡æ–¹æ³•ã€‚\n\n## 7. Agile Unified Process\n\n**æ•æ·ç»Ÿä¸€è¿‡ç¨‹(Agile Unified Process, AUP)** æ˜¯ä¸€ç§ç®€åŒ–çš„ Rational Unified Process (RUP) çš„æ•æ·ç‰ˆæœ¬ï¼ŒåŒ…å«ä»¥ä¸‹æ´»åŠ¨ï¼š\n\n- **å»ºæ¨¡(Modeling)**ï¼šç†è§£éœ€æ±‚ï¼Œè®¾è®¡ç³»ç»Ÿæ¶æ„å’Œç»„ä»¶ã€‚\n- **å®ç°(Implementation)**ï¼šç¼–å†™ä»£ç ï¼Œæ„å»ºè½¯ä»¶ç»„ä»¶ã€‚\n- **æµ‹è¯•(Testing)**ï¼šå•å…ƒæµ‹è¯•ã€é›†æˆæµ‹è¯•ã€ç³»ç»Ÿæµ‹è¯•ç­‰ï¼Œç¡®ä¿è½¯ä»¶è´¨é‡ã€‚\n- **éƒ¨ç½²(Deployment)**ï¼šå°†è½¯ä»¶éƒ¨ç½²åˆ°ç›®æ ‡ç¯å¢ƒã€‚\n- **é…ç½®(configuration)** å’Œ **é¡¹ç›®ç®¡ç†(project management)**ï¼šç‰ˆæœ¬æ§åˆ¶ã€é…ç½®ç®¡ç†ã€é¡¹ç›®è®¡åˆ’ã€è¿›åº¦è·Ÿè¸ªç­‰ã€‚\n- **ç¯å¢ƒç®¡ç†(Environment management)**ï¼šæ­å»ºå’Œç»´æŠ¤å¼€å‘ã€æµ‹è¯•å’Œéƒ¨ç½²ç¯å¢ƒã€‚\n","publishedTitle":"ã€Œè½¯ä»¶å·¥ç¨‹ã€III. å›¢é˜Ÿé¡¹ç›®ç®¡ç†ä¸æ•æ·å¼€å‘"}},{"id":"1e5b3373-f109-5c97-8c4d-d20c6831740d","fields":{"slug":"/course/java/note/1/","plainText":"\n> æœ¬ç¯‡ç¬”è®°ä»‹ç»äº† Java ç¼–ç¨‹çš„åŸºç¡€çŸ¥è¯†ï¼ŒåŒ…æ‹¬æ ‡è¯†ç¬¦è§„åˆ™ã€å˜é‡å£°æ˜ä¸åˆå§‹åŒ–ã€final å…³é”®å­—çš„ä½¿ç”¨ã€å­—é¢é‡ä¸ç±»å‹è½¬æ¢ã€é€‰æ‹©è¯­å¥ï¼ˆif-elseã€switchï¼‰ã€è¿ç®—ç¬¦ç»“åˆæ€§ã€å­—ç¬¦ä¸å­—ç¬¦ä¸²å¤„ç†ã€è¾“å…¥è¾“å‡ºã€å¾ªç¯è¯­å¥ã€æ–¹æ³•å®šä¹‰ä¸é‡è½½ã€æ•°ç»„çš„åˆ›å»ºä¸ä½¿ç”¨ç­‰å†…å®¹ã€‚ç‰¹åˆ«å¼ºè°ƒäº† Java ä¸ C/C++ çš„ä¸€äº›é‡è¦åŒºåˆ«ï¼Œå¦‚å˜é‡åˆå§‹åŒ–è¦æ±‚ã€å¸ƒå°”ç±»å‹ä½¿ç”¨è§„åˆ™ç­‰ã€‚åŒæ—¶è¯¦ç»†è®²è§£äº† String ç±»çš„å¸¸ç”¨æ–¹æ³•ã€Scanner ç±»çš„è¾“å…¥å¤„ç†ã€æ ¼å¼åŒ–è¾“å‡ºã€æ–¹æ³•é‡è½½çš„è§„åˆ™ä»¥åŠæ•°ç»„çš„å†…å­˜åˆ†é…ç‰¹ç‚¹ã€‚<small style=\"font-style: italic; opacity: 0.5\">ï¼ˆç”± claude-3.5-sonnet ç”Ÿæˆæ‘˜è¦ï¼‰</small>\n\n<!-- more -->\n\n## 1. Ch02 Elementary Programming\n\n### 1.1. Identifiers\n\n- **æ ‡è¯†ç¬¦(indentifier)** æ˜¯ç”±å­—æ¯ã€æ•°å­—ã€ä¸‹åˆ’çº¿ `_` å’Œç¾å…ƒç¬¦å· `$` ç»„æˆçš„å­—ç¬¦åºåˆ—ã€‚\n- **è§„åˆ™**ï¼š\n  1. å¿…é¡»ä»¥å­—æ¯ã€ä¸‹åˆ’çº¿ `_` æˆ–ç¾å…ƒç¬¦å· `$` å¼€å¤´ï¼Œä¸èƒ½ä»¥æ•°å­—å¼€å¤´ã€‚\n  2. ä¸èƒ½æ˜¯ Java çš„ä¿ç•™å­—ã€‚\n  3. ä¸èƒ½æ˜¯ `true`ã€`false` æˆ– `null`ã€‚\n  4. åŒºåˆ†å¤§å°å†™ã€‚\n  5. é•¿åº¦æ²¡æœ‰é™åˆ¶ã€‚\n\n### 1.2. Variables\n\n- **å˜é‡(variable)** æ˜¯å­˜å‚¨æ•°æ®çš„å®¹å™¨ã€‚\n- å¯ä»¥åœ¨ä¸€æ­¥ä¸­å®Œæˆå˜é‡çš„å£°æ˜å’Œåˆå§‹åŒ–ã€‚\n- **Java å˜é‡ä¸ C/C++ å˜é‡çš„åŒºåˆ«**\n  - åœ¨ Java ä¸­ï¼Œå˜é‡çš„å£°æ˜å’Œå®šä¹‰æ²¡æœ‰åŒºåˆ†ã€‚\n  - ==Java ä¸ä¼šä¸ºæ–¹æ³•ä¸­çš„å±€éƒ¨å˜é‡èµ‹é»˜è®¤å€¼ï¼Œå¿…é¡»æ˜¾å¼åˆå§‹åŒ–ï¼Œå¦åˆ™ä¼šæŠ¥ CE==ã€‚\n\n### 1.3. The `final` Keyword\n\n- ä½¿ç”¨ `final` ä¿®é¥°å˜é‡å¾—åˆ° **å‘½åå¸¸é‡(named constant)**ã€‚\n  - final å˜é‡æ˜¯ä¸å¯æ”¹å˜çš„ï¼Œåªèƒ½åœ¨åˆå§‹åŒ–çš„æ—¶å€™è¢«æ”¹å˜ä¸€æ¬¡ï¼Œä½†æ˜¯è¿™ä¸ªåˆå§‹åŒ–å¯ä»¥åœ¨è¿è¡Œæ—¶åˆ»åˆå§‹åŒ–ï¼Œä¹Ÿå¯ä»¥åœ¨ç¼–è¯‘æ—¶åˆ»åˆå§‹åŒ–ï¼Œç”šè‡³å¯ä»¥æ”¾åœ¨æ„é€ å‡½æ•°ä¸­åˆå§‹åŒ–ï¼Œè€Œä¸å¿…åœ¨å£°æ˜çš„æ—¶å€™åˆå§‹åŒ–ã€‚\n    - ä¸¾ä¾‹ï¼š==å®šä¹‰ç±»æ—¶å†™ `final int x;` ç„¶ååœ¨æ„é€ å‡½æ•°ä¸­åœ¨åˆå§‹åŒ– `x = 1;` æ˜¯åˆæ³•çš„==ã€‚\n  - ä¿®é¥°å¯¹è±¡å¼•ç”¨æ—¶ï¼Œä¸èƒ½æ”¹å˜å¼•ç”¨æŒ‡å‘çš„å¯¹è±¡ï¼Œä½†ä¸æ„å‘³ç€ä¸èƒ½æ”¹å˜å¯¹è±¡å®ä¾‹çš„å†…å®¹ã€‚\n- ä½¿ç”¨ `final` ä¿®é¥°æ–¹æ³•è¡¨ç¤ºè¯¥æ–¹æ³•ä¸èƒ½è¢« **é‡å†™(override)**ã€‚\n- ä½¿ç”¨ `final` ä¿®é¥°ç±»è¡¨ç¤ºè¯¥ç±»ä¸èƒ½è¢«ç»§æ‰¿ï¼Œé‡Œé¢çš„æ‰€æœ‰æ–¹æ³•ä¹Ÿè‡ªåŠ¨ä¼šæ˜¯ `final` çš„ã€‚\n\n### 1.4. Literals\n\n- ä½¿ç”¨ `f` ç»“å°¾è¡¨ç¤ºå•ç²¾åº¦æµ®ç‚¹æ•°å­—é¢é‡ï¼Œä½¿ç”¨ `d` ç»“å°¾è¡¨ç¤ºåŒç²¾åº¦æµ®ç‚¹æ•°å­—é¢é‡ã€‚\n- ç‰¹æ®Šçš„æµ®ç‚¹æ•°å€¼ï¼š\n  - `Double.POSITIVE_INFINITY`ï¼šæ­£æ— ç©·å¤§ã€‚\n  - `Double.NEGATIVE_INFINITY`ï¼šè´Ÿæ— ç©·å¤§ã€‚\n  - `Double.NaN`ï¼šéæ•°å€¼ã€‚\n\n### 1.5. Type Casting\n\n- **éšå¼è½¬æ¢**ï¼ˆä»å°èŒƒå›´åˆ°å¤§èŒƒå›´ï¼‰ï¼šå¦‚ `double d = 3;`\n- **æ˜¾å¼è½¬æ¢**ï¼ˆä»å¤§èŒƒå›´åˆ°å°èŒƒå›´ï¼‰ï¼šå¦‚ `int i = (int)3.9;`\n  - ==åƒè¿™æ ·çš„è½¬æ¢å¿…é¡»æ˜¾ç¤ºåœ°å†™å‡ºï¼Œå¦åˆ™ä¼š CE==ã€‚\n\n## 2. Ch03 Selections\n\n### 2.1. The `boolean` Data Type\n\n- `boolean` ç±»å‹åªæœ‰ä¸¤ä¸ªå€¼ï¼š`true` å’Œ `false`ã€‚\n- ä¸ C/C++ ä¸åŒï¼Œ==æ•´å‹ä¸å¸ƒå°”å‹ä¸èƒ½ç›´æ¥è½¬æ¢==ï¼Œå¦‚å½“ `even` æ˜¯ `boolean` ç±»å‹æ—¶å†™ `if (even != 0)` ä¼šç¼–è¯‘é”™è¯¯ï¼Œ`if (even)` å¯ä»¥é€šè¿‡ç¼–è¯‘ã€‚\n\n### 2.2. if-else statment\n\n- ==`else` è¯­å¥é‡‡ç”¨å°±è¿‘åŸåˆ™ï¼Œåšé¢˜æ—¶ä¸è¦è¢«ä»£ç ç¼©è¿›æ¬ºéª—==ã€‚\n\n### 2.3. switch statement\n\n- æ¯ä¸€ä¸ª `case` ä¸‹çš„ `break` è¯­å¥å¯ä»¥çœç•¥ï¼Œè¿™ç§æƒ…å†µä¸‹ä¼šç»§ç»­æ‰§è¡Œä¸‹ä¸€ä¸ª `case` çš„è¯­å¥ã€‚\n- **å‚æ•°çš„ç±»å‹é™åˆ¶**ï¼š\n  - åœ¨ java ä¸­ switch åçš„è¡¨è¾¾å¼çš„ç±»å‹åªèƒ½ä¸ºä»¥ä¸‹å‡ ç§ï¼šbyteã€shortã€charã€intã€æšä¸¾ç±»ï¼ˆåœ¨ Java1.6 ä¸­æ˜¯è¿™æ ·ï¼‰ï¼Œåœ¨ java1.7 åæ”¯æŒäº†å¯¹ string çš„åˆ¤æ–­ï¼›\n  - æ³¨æ„ï¼š==boolean==ã€long ç±»å‹ä¸èƒ½ä½œä¸º switch å‚æ•°ã€‚\n\n### 2.4. Operator Associativity\n\n- ==æ‰€æœ‰äºŒå…ƒè¿ç®—ç¬¦éƒ½æ˜¯å·¦ç»“åˆçš„==ï¼š`a â€“ b + c â€“ d` ç­‰ä»·äº `((a â€“ b) + c) â€“ d`ã€‚\n- ==ä½†æ˜¯æ‰€æœ‰èµ‹å€¼è¿ç®—ç¬¦éƒ½æ˜¯å³ç»“åˆçš„==ï¼š`a = b += c = 5` ç­‰ä»·äº `a = (b += (c = 5))`ã€‚\n\n## 3. Ch04 Mathematical Functions, Characters, and Strings\n\n### 3.1. Characters\n\n- ==Java ä¸­çš„å­—ç¬¦é»˜è®¤é‡‡ç”¨ UTF-16 ç¼–ç ï¼Œæ¯ä¸ªå­—ç¬¦å ç”¨ 2 å­—èŠ‚ã€‚==\n  - Commentï¼šå¯¹äºè¶…å‡ºåŸºæœ¬å­—ç¬¦é›†ï¼ˆBMPï¼‰çš„å­—ç¬¦ï¼Œä¼šä½¿ç”¨ä»£ç†å¯¹ï¼ˆSurrogate Pairï¼‰æ¥è¡¨ç¤ºï¼Œæ¯ä¸ªä»£ç†å¯¹å ç”¨ 4 å­—èŠ‚ã€‚\n- **`char` Data Type**\n  - è¡¨ç¤ºå•ä¸ªå­—ç¬¦ï¼Œæ”¯æŒ ASCII å’Œ Unicodeã€‚\n  - ç¤ºä¾‹ï¼š\n    - `char letter = 'A';` ï¼ˆASCIIï¼‰\n    - `char letter = '\\u0041';`ï¼ˆUnicodeï¼‰\n  - ==å¯ä»¥ä½¿ç”¨é€’å¢æˆ–é€’å‡æ“ä½œç¬¦è·å–ä¸‹ä¸€ä¸ªæˆ–å‰ä¸€ä¸ªå­—ç¬¦ã€‚==\n    - ç¤ºä¾‹ï¼š`char ch = 'a'; System.out.println(++ch);` è¾“å‡º bã€‚\n- `Character` ç±»ä¸­çš„æ–¹æ³•ï¼š\n  - `isDigit(ch)`ï¼šåˆ¤æ–­æ˜¯å¦ä¸ºæ•°å­—ã€‚\n  - `isLetter(ch)`ï¼šåˆ¤æ–­æ˜¯å¦ä¸ºå­—æ¯ã€‚\n  - `isUpperCase(ch)`ï¼šåˆ¤æ–­æ˜¯å¦ä¸ºå¤§å†™å­—æ¯ã€‚\n  - `isLowerCase(ch)`ï¼šåˆ¤æ–­æ˜¯å¦ä¸ºå°å†™å­—æ¯ã€‚\n  - `toUpperCase(ch)`ï¼šå°†å­—ç¬¦è½¬æ¢ä¸ºå¤§å†™ã€‚\n  - `toLowerCase(ch)`ï¼šå°†å­—ç¬¦è½¬æ¢ä¸ºå°å†™ã€‚\n\n### 3.2. The `String` Class\n\n- ==Java çš„ `String` ç±»æ˜¯ä¸å¯å˜ç±»ã€‚==\n  - ==å‘ç‚¹ï¼šåé¢çš„å„ç§æ–¹æ³•éƒ½ä¸æ˜¯åœ¨åŸä¸²ä¸Šåšä¿®æ”¹ã€‚==\n- **å®šä¹‰ä¸åŸºæœ¬æ“ä½œ**\n  - ä½¿ç”¨ `String` å¯¹è±¡è¡¨ç¤ºå­—ç¬¦ä¸²ã€‚\n  - ç¤ºä¾‹ï¼š`String message = \"Welcome to Java\";`\n- **å¸¸ç”¨æ–¹æ³•**\n  - `length()`ï¼šè·å–å­—ç¬¦ä¸²é•¿åº¦ã€‚\n    - ç¤ºä¾‹ï¼š`\"Hello\".length()` è¿”å› 5ã€‚\n  - `charAt(index)`ï¼šè·å–æŒ‡å®šç´¢å¼•çš„å­—ç¬¦ã€‚\n    - ç¤ºä¾‹ï¼š`\"Hello\".charAt(0)` è¿”å› `H`ã€‚\n  - `concat(s1)` æˆ– `+`ï¼šæ‹¼æ¥å­—ç¬¦ä¸²ã€‚\n    - ç¤ºä¾‹ï¼š`\"Hello\".concat(\" World\")` è¿”å› `\"Hello World\"`ã€‚\n  - `toUpperCase()` å’Œ `toLowerCase()`ï¼šå¤§å°å†™è½¬æ¢ã€‚\n    - ç¤ºä¾‹ï¼š`\"Hello\".toUpperCase()` è¿”å› `\"HELLO\"`ã€‚\n  - `trim()`ï¼šå»é™¤å­—ç¬¦ä¸²ä¸¤ç«¯çš„ç©ºæ ¼ã€‚\n    - ç¤ºä¾‹ï¼š`\" Hello \".trim()` è¿”å› `\"Hello\"`ã€‚\n  - ![|557](https://img.memset0.cn/2024/12/17/YO4ut5FQ.png)\n- **å­—ç¬¦ä¸²æ¯”è¾ƒ**\n  - `equals(s1)`ï¼šæ¯”è¾ƒå­—ç¬¦ä¸²å†…å®¹æ˜¯å¦ç›¸ç­‰ã€‚\n    - ç¤ºä¾‹ï¼š`\"Hello\".equals(\"hello\")` è¿”å› `false`ã€‚\n  - `equalsIgnoreCase(s1)`ï¼šå¿½ç•¥å¤§å°å†™æ¯”è¾ƒå­—ç¬¦ä¸²å†…å®¹æ˜¯å¦ç›¸ç­‰ã€‚\n    - ç¤ºä¾‹ï¼š`\"Hello\".equalsIgnoreCase(\"hello\")` è¿”å› `true`ã€‚\n  - `compareTo(s1)`ï¼šæ¯”è¾ƒå­—ç¬¦ä¸²çš„å­—å…¸é¡ºåºã€‚\n    - è¿”å›å€¼ï¼š\n      - å¤§äº 0ï¼šå½“å‰å­—ç¬¦ä¸²å¤§äº `s1`ã€‚\n      - ç­‰äº 0ï¼šä¸¤å­—ç¬¦ä¸²ç›¸ç­‰ã€‚\n      - å°äº 0ï¼šå½“å‰å­—ç¬¦ä¸²å°äº `s1`ã€‚\n  - `compareToIgnoreCase(s1)`ï¼šå¿½ç•¥å¤§å°å†™æ¯”è¾ƒå­—ç¬¦ä¸²çš„å­—å…¸é¡ºåºã€‚\n  - `startsWith(s1)`ï¼šåˆ¤æ–­å­—ç¬¦ä¸²æ˜¯å¦ä»¥ `s1` å¼€å¤´ã€‚\n  - `endsWith(s1)`ï¼šåˆ¤æ–­å­—ç¬¦ä¸²æ˜¯å¦ä»¥ `s1` ç»“å°¾ã€‚\n- **å­å­—ç¬¦ä¸²æ“ä½œ**\n  - `substring(beginIndex)`ï¼šä»æŒ‡å®šç´¢å¼•å¼€å§‹æˆªå–åˆ°æœ«å°¾ã€‚\n  - `substring(beginIndex, endIndex)`ï¼šæˆªå–æŒ‡å®šèŒƒå›´ï¼ˆ==å·¦é—­å³å¼€==ï¼‰çš„å­å­—ç¬¦ä¸²ã€‚\n    - ç¤ºä¾‹ï¼š`\"Hello\".substring(1, 4)` è¿”å› `\"ell\"`ã€‚\n- **æŸ¥æ‰¾å­—ç¬¦æˆ–å­å­—ç¬¦ä¸²**\n  - `indexOf(ch)`ï¼šè¿”å›å­—ç¬¦é¦–æ¬¡å‡ºç°çš„ç´¢å¼•ã€‚\n  - `indexOf(ch, fromIndex)`ï¼šä»æŒ‡å®šç´¢å¼•å¼€å§‹è¿”å›å­—ç¬¦é¦–æ¬¡å‡ºç°çš„ç´¢å¼•ã€‚\n  - `indexOf(s1)`ï¼šè¿”å›å­å­—ç¬¦ä¸²é¦–æ¬¡å‡ºç°çš„ç´¢å¼•ã€‚\n  - `indexOf(s1, fromIndex)`ï¼šä»æŒ‡å®šç´¢å¼•å¼€å§‹è¿”å›å­å­—ç¬¦ä¸²é¦–æ¬¡å‡ºç°çš„ç´¢å¼•ã€‚\n  - `lastIndexOf(ch)`ï¼šè¿”å›å­—ç¬¦æœ€åä¸€æ¬¡å‡ºç°çš„ç´¢å¼•ã€‚\n  - ï¼ˆç±»ä¼¼åœ°è¿˜æœ‰ä¸‰ä¸ªè¿™é‡Œç•¥ã€‚ï¼‰\n- **å­—ç¬¦ä¸²è½¬æ•°å­—**\n  - `Integer.parseInt()`ï¼šå°†å­—ç¬¦ä¸²è½¬æ¢ä¸ºæ•´æ•°ã€‚\n    - ç¤ºä¾‹ï¼š`Integer.parseInt(\"123\")` è¿”å› 123ã€‚\n  - `Double.parseDouble()`ï¼šå°†å­—ç¬¦ä¸²è½¬æ¢ä¸ºæµ®ç‚¹æ•°ã€‚\n    - ç¤ºä¾‹ï¼š`Double.parseDouble(\"3.14\")` è¿”å› 3.14ã€‚\n- **æ•°å­—è½¬å­—ç¬¦ä¸²**\n  - `String.valueOf()`ï¼šä¼šè°ƒç”¨å¯¹åº”åŸºç¡€æ•°æ®ç±»å‹çš„åŒ…è£…ç±»çš„ `toString()` é™æ€æ–¹æ³•ã€‚\n  - å¯ä»¥ä½¿ç”¨ `+ \"\"`\n    - ç¤ºä¾‹ï¼š`123 + \"\"` è¿”å› `\"123\"`ã€‚\n\n#### 3.2.1. String Matching & Replacing & Splitting (Ch10)\n\n- `replace(oldChar, newChar)`ï¼šå­—ç¬¦æ›¿æ¢\n- `replaceFirst(oldString, newString)`ï¼šå­å­—ç¬¦ä¸²æ›¿æ¢ï¼Œä½†åªæ›¿æ¢ç¬¬ä¸€æ¬¡\n- `replaceAll(oldString, newString)`ï¼šå­å­—ç¬¦ä¸²æ›¿æ¢\n- `split(delimiter): String[]`ï¼šå°†å­—ç¬¦ä¸²æŒ‰æŒ‡å®šä¸²åˆ†å‰²æˆæ•°ç»„\n- ==è¿™é‡Œçš„ `match`ã€`replace` ç³»åˆ—ã€`split` æ–¹æ³•éƒ½æ”¯æŒæ­£åˆ™è¡¨è¾¾å¼==ã€‚\n\n#### 3.2.2. String Formatting (Ch10)\n\n- æ”¯æŒ `String.format()` çš„é™æ€æ–¹æ³•ï¼Œå…¶ä¸­ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯æ ¼å¼åŒ–å­—ç¬¦ä¸²ï¼Œæ”¯æŒçš„è¯­æ³•å‚è§ä¸‹é¢çš„ String-Formatting éƒ¨åˆ†ã€‚\n\n### 3.3. Input: The `Scanner` Class\n\n- `Scanner sc = new Scanner(System.in);`\n- ä½¿ç”¨ `Scanner` ç±»ï¼š\n  - `nextInt()`ã€`nextDouble()`ã€`nextFloat()`ã€`nextLong()` æ–¹æ³•ï¼šè¯»å–æ•´æ•°ã€æµ®ç‚¹æ•°ã€é•¿æ•´æ•°ç­‰ç­‰åŸºæœ¬æ•°æ®ç±»å‹ã€‚\n  - `next()` æ–¹æ³•ï¼šè¯»å–å•è¯ã€‚==ä»é‡åˆ°ç¬¬ä¸€ä¸ªæœ‰æ•ˆå­—ç¬¦ï¼ˆéç©ºæ ¼ã€æ¢è¡Œç¬¦ï¼‰å¼€å§‹æ‰«æï¼Œé‡åˆ°ç¬¬ä¸€ä¸ªåˆ†éš”ç¬¦æˆ–ç»“æŸç¬¦ï¼ˆç©ºæ ¼ ` ` æˆ–è€…æ¢è¡Œç¬¦ `\\n`ï¼‰æ—¶ç»“æŸ==ã€‚\n  - `nextLine()` æ–¹æ³•ï¼šè¯»å–æ•´è¡Œã€‚==æ‰«æå‰©ä¸‹çš„æ‰€æœ‰å­—ç¬¦ä¸²ç›´åˆ°é‡åˆ°å›è½¦ä¸ºæ­¢ã€‚ï¼ˆå¯ä»¥ä»ç©ºæ ¼å¼€å§‹ï¼‰==ã€‚\n- æ³¨æ„ï¼š`nextInt()` å’Œ `nextLine()` çš„ç»„åˆå¯èƒ½å¯¼è‡´è¯»å–é—®é¢˜ï¼ˆå³å‰©ä¸€ä¸ªç©ºçš„è¡Œæœ«ï¼‰ã€‚è§£å†³æ–¹æ³•ï¼šåœ¨ `nextInt()` åæ·»åŠ ä¸€ä¸ª `nextLine()`ã€‚\n\n### 3.4. Formatting Output\n\n> TODOï¼šå…·ä½“è¿˜æ˜¯å¾—çœ‹ä¸€ä¸‹è¯¾ä»¶ã€‚\n\n- **ä½¿ç”¨ `printf` æ ¼å¼åŒ–è¾“å‡º**\n  - ==æ ¼å¼ï¼š`%[index$][æ ‡è¯†][æœ€å°å®½åº¦][.ç²¾åº¦]è½¬æ¢ç¬¦`ã€‚==\n    - ![](https://img.memset0.cn/2024/12/17/VtSnq2pS.png)\n  - **å¸¸ç”¨è½¬æ¢ç¬¦**\n    - `%b`ï¼šå¸ƒå°”å€¼ã€‚\n    - `%c`ï¼šå­—ç¬¦ã€‚\n    - `%s`ï¼šå­—ç¬¦ä¸²ã€‚\n    - `%d`ï¼šæ•´æ•°ã€‚\n    - `%f`ï¼šæµ®ç‚¹æ•°ã€‚\n    - `%e`ï¼šç§‘å­¦è®¡æ•°æ³•ï¼ˆ`4.556000e+01`ï¼‰ã€‚\n    - æ—¥æœŸå’Œæ—¶é—´ï¼š\n      - `%tF`ï¼šå®Œæ•´æ—¥æœŸï¼ˆå¦‚ 2024-12-17ï¼‰ã€‚\n      - `%tT`ï¼šå®Œæ•´æ—¶é—´ï¼ˆå¦‚ 15:45:14ï¼‰ã€‚\n      - è¿˜æœ‰å„ç§ï¼Œä»¥ `%t` å¼€å¤´ã€‚\n  - **æ ‡è¯†**\n    - `-`ï¼šå·¦å¯¹é½ã€‚\n    - `0`ï¼šç”¨é›¶å¡«å……ã€‚\n    - `,`ï¼šåƒä½åˆ†éš”ç¬¦ã€‚\n    - `+`ï¼šæ˜¾ç¤ºæ­£è´Ÿå·ã€‚\n  - **ç¤ºä¾‹**\n    - å°†æ•´æ•°è¡¥é›¶ï¼š`String.format(\"%04d\", 5)` è¿”å› `\"0005\"`ã€‚\n    - åƒä½åˆ†éš”ç¬¦ï¼š`String.format(\"%,d\", 1000000)` è¿”å› `\"1,000,000\"`ã€‚\n\n## 4. Ch05 Loops\n\n### 4.1. `do`-`while` Loop\n\n- åŸºæœ¬ç»“æ„ï¼š\n  ```java\n  do {\n      // Loop body;\n      Statement(s);\n  } while (loop-continuation-condition);\n  ```\n- **ç‰¹ç‚¹**ï¼šè‡³å°‘æ‰§è¡Œä¸€æ¬¡å¾ªç¯ä½“ï¼Œç„¶åå†æ£€æŸ¥æ¡ä»¶ã€‚\n\n### 4.2. Break with Tag\n\n- ==ä½¿ç”¨å¸¦æ ‡ç­¾çš„ `break` è¯­å¥å¯ä»¥è·³å‡ºå¤šå±‚åµŒå¥—å¾ªç¯==ã€‚\n  - ç¤ºä¾‹ï¼š\n    ```java\n    outer: for (int i = 0; i < 5; i++) {\n        for (int j = 0; j < 5; j++) {\n            if (j == 2) break outer; // è·³å‡º outer å¾ªç¯\n            System.out.println(\"i = \" + i + \", j = \" + j);\n        }\n    }\n    ```\n- å¯ä»¥å°†æ ‡ç­¾ç”¨åˆ°ä»»æ„è¯­å¥å—ä¸­ï¼ˆå³å¤§æ‹¬å·æ‹¬èµ·æ¥çš„ä¸€æ®µè¯­å¥ï¼‰ï¼Œä½¿ç”¨å¸¦æ ‡ç­¾çš„ `break` è¯­å¥å¯ä»¥è·³å‡ºè¯¥è¯­å¥å—ï¼Œå³ä½¿è¿™ä¸ªè¯­å¥å—ä¸æ˜¯å¾ªç¯ä½“ã€‚\n\n### 4.3. For-in\n\n- Java 5 å¼•å…¥äº†ç”¨äºæ•°ç»„å’Œå®¹å™¨çš„ for-in è¯­æ³•ï¼Œè¿™ç±»ä¼¼äº C++ 14 çš„ range-based for è¯­æ³•ã€‚\n  - ç¤ºä¾‹ï¼š\n    ```java\n    int[] numbers = {1, 2, 3, 4, 5};\n    for (int number : numbers) {\n        System.out.println(number);\n    }\n    ```\n\n## 5. Ch06 Methods\n\n### 5.1. Methods\n\n- **æ–¹æ³•(method)** æ˜¯ä¸€ç»„è¯­å¥çš„é›†åˆï¼Œç”¨äºå®ŒæˆæŸä¸ªç‰¹å®šçš„æ“ä½œã€‚é€šè¿‡æ–¹æ³•å¯ä»¥å®ç°ä»£ç çš„å¤ç”¨ã€æ¨¡å—åŒ–å’Œæ˜“ç»´æŠ¤æ€§ã€‚\n- **æ–¹æ³•ç­¾å(method signature)** å®šä¹‰ä¸ºæ–¹æ³•åå’Œå‚æ•°åˆ—è¡¨çš„ç»„åˆï¼Œå®ƒæ˜¯æ–¹æ³•çš„å”¯ä¸€æ ‡è¯†ã€‚\n\n### 5.2. Formal & Actual Parameters\n\n- **å½¢å¼å‚æ•°(formal parameter)** æ˜¯æ–¹æ³•å¤´ä¸­å®šä¹‰çš„å˜é‡ï¼Œç”¨äºæ¥æ”¶è°ƒç”¨æ–¹æ³•æ—¶ä¼ é€’çš„å€¼ã€‚\n- **å®é™…å‚æ•°(actual parameter)** æ˜¯åœ¨è°ƒç”¨æ–¹æ³•æ—¶ä¼ é€’ç»™å½¢å¼å‚æ•°çš„å€¼ã€‚\n- ==Java ä¸­çš„å‚æ•°ä¼ é€’æ˜¯ **æŒ‰å€¼ä¼ é€’(pass by value)** çš„ï¼Œå³å°†å®é™…å‚æ•°çš„å€¼å¤åˆ¶ä¸€ä»½ä¼ é€’ç»™æ–¹æ³•==ã€‚\n  - å³æ–¹æ³•å†…å¯¹å‚æ•°çš„ä¿®æ”¹ä¸ä¼šå½±å“æ–¹æ³•å¤–çš„å˜é‡ã€‚\n\n### 5.3. Overloading\n\n- æ–¹æ³•çš„ **é‡è½½(overload)** æ˜¯æŒ‡åœ¨åŒä¸€ä¸ªç±»ä¸­å®šä¹‰å¤šä¸ªåŒåæ–¹æ³•ï¼Œ==ä½†å‚æ•°åˆ—è¡¨ä¸åŒ==ã€‚\n  - æ³¨æ„åŒºåˆ† overload å’Œ overrideã€‚  \n     ![|662](https://img.memset0.cn/2024/12/18/bkmjRMM6.png)\n  - å¯ä»¥é‡è½½é™æ€æ–¹æ³•ï¼Œä½†ä¸èƒ½é‡å†™é™æ€æ–¹æ³•ã€‚\n- **æ¨¡ç³Šè°ƒç”¨(ambiguous invocation)**ï¼šåœ¨æ–¹æ³•è°ƒç”¨æ—¶ï¼Œç¼–è¯‘å™¨å¯èƒ½å‘ç°æœ‰å¤šä¸ªæ–¹æ³•åŒ¹é…ï¼Œæ— æ³•ç¡®å®šå“ªä¸€ä¸ªæ˜¯æœ€å…·ä½“çš„ï¼Œ==è¿™ç§æ—¶å€™ä¼šç›´æ¥ CE==ã€‚\n  - åŸå› ï¼š\n    - æ–¹æ³•é‡è½½æ—¶ï¼Œå¤šä¸ªæ–¹æ³•çš„å‚æ•°åˆ—è¡¨å¯èƒ½å­˜åœ¨ä¸€å®šçš„é‡å ï¼Œå¯¼è‡´ç¼–è¯‘å™¨æ— æ³•ç¡®å®šè°ƒç”¨å“ªä¸ªæ–¹æ³•ã€‚\n    - æ–¹æ³•è°ƒç”¨ä¸­æ¶‰åŠè‡ªåŠ¨ç±»å‹è½¬æ¢æˆ–å¯å˜å‚æ•°æ—¶ï¼Œå¯èƒ½ä¼šæœ‰å¤šä¸ªæ–¹æ³•åŒæ—¶ç¬¦åˆè°ƒç”¨æ¡ä»¶ã€‚\n  - ä¸¾ä¾‹ï¼šå¦‚æœæœ‰ `print(int); print(double);` ä¸¤ä¸ªæ–¹æ³•ï¼Œåˆ™åœ¨ `print(1);` æ—¶ä¼šè®¤ä¸ºå‰è€…æ›´å…·ä½“è€Œä¸ä¼šæŠ¥é”™ï¼Œä½†å¦‚æœåŒæ—¶æœ‰ `print(int, double);` å’Œ `print(double, int);` ä¸¤ä¸ªæ–¹æ³•ï¼Œåˆ™ `print(1, 1);` æ—¶å°±æ— æ³•ç¡®å®šè°ƒç”¨å“ªä¸ªæ–¹æ³•æ›´å…·ä½“ï¼Œä»è€Œä¼šæŠ¥é”™ã€‚\n\n## 6. Ch07 Single-Dimensional Arrays\n\n### 6.1. Single-Dimensional Arrays\n\n- **å£°æ˜æ•°ç»„**\n  - è¯­æ³•ï¼š\n    - `datatype[] arrayRefVar;`\n    - `datatype arrayRefVar[];` ï¼ˆä¸æ¨èï¼‰\n- **åˆ›å»ºæ•°ç»„**\n  - è¯­æ³•ï¼š\n    - `arrayRefVar = new datatype[arraySize];`\n    - ç¤ºä¾‹ï¼š`myList = new double[10];`\n  - åˆ›å»ºæ—¶ä¼šè‡ªåŠ¨è®¾å®šä¸ºé»˜è®¤å€¼ï¼š\n    - æ•°å€¼åŸºæœ¬ç±»å‹è‡ªåŠ¨è®¾å®šä¸º `0`ï¼Œå­—ç¬¦ç±»å‹é»˜è®¤ä¸º `\\u0000`ï¼Œå¸ƒå°”ç±»å‹é»˜è®¤ä¸º `false`ã€‚\n    - å¯¹è±¡å¼•ç”¨ç±»å‹é»˜è®¤ä¸º `null`ã€‚\n- ==ä½¿ç”¨ `arrayRefVar.length` è·å–æ•°ç»„å¤§å°==ã€‚\n  - ==æ•°ç»„ä¸€æ—¦åˆ›å»ºï¼Œå¤§å°å°±å›ºå®šä¸èƒ½æ”¹å˜==ã€‚\n- **æ•°ç»„åˆå§‹åŒ–å™¨(array initializer)**ï¼š==ä½¿ç”¨æ—¶å¿…é¡»è¦åœ¨ä¸€ä¸ªè¯­å¥ä¸­å®Œæˆæ•°ç»„çš„å£°æ˜ã€åˆ›å»ºå’Œåˆå§‹åŒ–ï¼Œå¦åˆ™ä¼šå¯¼è‡´ CE==ã€‚\n  - ä¸¾ä¾‹ï¼š`double[] myList = {1.9, 2.9, 3.4, 3.5};`\n  - å¯ä»¥ç”¨ `new int[]{3, 1, 5, 2, 4}` çš„è¯­æ³•ç”¨æ•°ç»„åˆå§‹åŒ–å™¨åˆ›å»º **åŒ¿åæ•°ç»„(anonymous array)**ã€‚\n- ==Java æ•°ç»„çš„å†…å­˜åˆ†é…åœ¨å †ä¸Š==ã€‚è€Œåœ¨ C ä¸­ï¼Œä½¿ç”¨ `int a[100]` åˆ›å»ºçš„æ•°ç»„åˆ†é…åœ¨æ ˆä¸Šï¼Œä½¿ç”¨ `int *a = new int[100];` åˆ›å»ºçš„æ•°ç»„åˆ†é…åœ¨å †ä¸Šã€‚\n- **è¾¹ç•Œæ£€æŸ¥**ï¼š==Java çš„ `[]` æ“ä½œç¬¦ä¼šæ£€æŸ¥æ•°ç»„è¾¹ç•Œ==ã€‚\n- **æ‹·è´æ•°ç»„**ï¼š==ä¸ä¼šé‡æ–°åˆ›å»ºæ•°ç»„ï¼Œè€Œæ˜¯ç›´æ¥å°†å¼•ç”¨å¤åˆ¶==ã€‚\n  ![|514](https://img.memset0.cn/2024/12/18/rOzNOMdV.png)\n  - æ­£ç¡®çš„æ‹·è´æ•°ç»„æ–¹å¼ï¼š\n    - é‡æ–°åˆ›å»ºä¸€ä¸ªå¹¶ä¾æ¬¡èµ‹å€¼\n    - **ä½¿ç”¨ `System.arraycopy`**ï¼š`System.arraycopy(sourceArray, 0, targetArray, 0, sourceArray.length);`ã€‚\n    - **ä½¿ç”¨ `Arrays.copyOf`**ï¼š`int[] copiedArray = Arrays.copyOf(sourceArray, sourceArray.length);`\n\n## 7. Ch08 Multidimensional Arrays\n\n### 7.1. Two-dimensional Arrays\n\n- å£°æ˜ä¸åˆ›å»ºï¼š\n  ```java\n  // å£°æ˜æ•°ç»„å¼•ç”¨å˜é‡\n  dataType[][] refVar;\n  refVar = new dataType[10][10];\n  // å£°æ˜å’Œåˆ›å»ºç»“åˆ\n  dataType[][] refVar = new dataType[10][10];\n  // å¦ä¸€ç§è¯­æ³•\n  dataType refVar[][] = new dataType[10][10];\n  ```\n  - å¤šç»´æ•°ç»„çš„åˆ›å»ºæ—¶åº”ä»å·¦åˆ°å³æŒ‡å®šç»´æ•°ï¼ŒæœªæŒ‡å®šçš„ç»´æ•°ä¸ä¼šè‡ªåŠ¨åˆ›å»ºå†…å®¹ï¼Œéœ€è¦å†æ‰‹åŠ¨åˆ›å»ºã€‚\n    - å³ `int a[][] = new int[3][0]` å’Œ `new int[3][3]` éƒ½æ˜¯åˆæ³•çš„ï¼Œä½†æ˜¯å‰è€…è¦å†ä½¿ç”¨ `a[0] = new int[3]` æ‰èƒ½åˆ›å»ºç¬¬äºŒç»´çš„å†…å®¹ã€‚\n- Java çš„æ•°ç»„æ¯ä¸€ç»´å¯ä»¥æœ‰ä¸åŒçš„å¤§å°ï¼Œå¤§å°ä¸åŒçš„æ•°ç»„ç§°ä¸º **ä¸è§„åˆ™æ•°ç»„(ragged array)**ã€‚\n\n## 8. æ‚é¡¹\n\n- `System.currentTimeMillis()`Â  è¿”å›è‡ª 1970 å¹´ 1 æœˆ 1 æ—¥ä»¥æ¥çš„æ¯«ç§’æ•°ã€‚\n- Java è¯­è¨€çš„ `public static void main(String args[])` å‘½ä»¤è¡Œå‚æ•°ä¸­ï¼Œ==ä»ç¬¬ä¸€ä¸ªä½ç½®å¼€å§‹å­˜å‚¨å‘½ä»¤è¡Œå‚æ•°==ï¼ˆå³ `args[0]`ï¼‰ï¼Œç¨‹åºåæ²¡æœ‰å­˜å‚¨åœ¨ `args` ä¸­ã€‚\n- ==Java ä¸­ä¸èƒ½åœ¨ **åµŒå¥—** ä»£ç å—ä¸­é‡å¤å£°æ˜åŒåå˜é‡==ï¼Œè¿™ç‚¹ä¸ C/C++ ä¸åŒã€‚\n- **é™æ€å¯¼å…¥ `import static`**ï¼šå¯ä»¥å¼•å…¥ç±»çš„é™æ€æˆå‘˜ï¼Œå¦‚ `import static java.lang.Math.PI` åå¯ä»¥ç›´æ¥ç”¨ `PI` è€Œä¸ç”¨ `Math.PI`ã€‚\n\n### 8.1. `java.lang.Math` (Ch04)\n\n- **å¸¸ç”¨å¸¸é‡**\n  - `Math.PI`ï¼šåœ†å‘¨ç‡ã€‚\n  - `Math.E`ï¼šè‡ªç„¶å¯¹æ•°çš„åº•ã€‚\n- **å¸¸ç”¨æ–¹æ³•**\n  - **ä¸‰è§’å‡½æ•°**ï¼š`Math.sin`ã€`Math.cos`ã€`Math.tan`ã€`Math.toRadians` ç­‰ã€‚\n  - **æŒ‡æ•°å‡½æ•°**ï¼š`Math.exp`ã€`Math.log`ã€`Math.log10`ã€`Math.pow`ã€`Math.sqrt`ã€‚\n  - **å››èˆäº”å…¥æ–¹æ³•**ï¼š`Math.ceil`ã€`Math.floor`ã€`Math.rint`ã€`Math.round`ã€‚\n    - ==`Math.rint()` æ–¹æ³•æ˜¯å‘æœ€æ¥è¿‘çš„æ•´æ•°å–æ•´ï¼Œå¦‚æœå‡ºç° x.5 çš„æƒ…å†µåˆ™å‘ x å’Œ x+1 ä¸­çš„å¶æ•°å–æ•´ã€‚==\n  - **æœ€å€¼å’Œç»å¯¹å€¼**ï¼š`Math.max`ã€`Math.min`ã€`Math.abs`ã€‚\n  - **éšæœºæ•°ç”Ÿæˆ**ï¼š\n    - `Math.random()` ç”Ÿæˆ $[0., 1.)$ çš„éšæœºæ•°ã€‚\n\n### 8.2. `java.utils.Arrays` (Ch07)\n\n- `copyOf(array, newLength)` é™æ€æ–¹æ³•ï¼šæ‹·è´æ•°ç»„ã€‚\n- `binarySearch(array, key)` é™æ€æ–¹æ³•ï¼šäºŒåˆ†æœç´¢ï¼ˆè¦æ±‚æ•°ç»„æœ‰åºï¼‰ã€‚\n- `sort(array)` é™æ€æ–¹æ³•ï¼šå°†æ•°ç»„æ’åºã€‚\n\n### 8.3. `java.util.Date` (Ch09)\n\n- **æ„é€ å‡½æ•°**ï¼š\n  - `Date()`ï¼šæ„é€ ä¸€ä¸ªè¡¨ç¤ºå½“å‰æ—¶é—´çš„ Date å¯¹è±¡ã€‚\n  - `Date(elapseTime: long)`ï¼šæ„é€ ä¸€ä¸ª Date å¯¹è±¡ï¼Œè¡¨ç¤º==è‡ª 1970 å¹´ 1 æœˆ 1 æ—¥ GMT ä»¥æ¥æŒ‡å®šæ¯«ç§’æ•°çš„æ—¶é—´==ã€‚\n- **æ–¹æ³•**ï¼š\n  - `toString() : String`ï¼šè¿”å›è¡¨ç¤ºæ—¥æœŸå’Œæ—¶é—´çš„å­—ç¬¦ä¸²ã€‚ï¼ˆä¾‹ï¼š`Sun Mar 09 13:50:19EST 2003`ï¼‰\n  - `getTime() : long`ï¼šè¿”å›è‡ª 1970 å¹´ 1 æœˆ 1 æ—¥ GMT ä»¥æ¥çš„æ¯«ç§’æ•°ã€‚\n  - `setTime(elapseTime: long) : void`ï¼šè®¾ç½®å¯¹è±¡çš„æ–°æ—¶é—´ã€‚\n\n### 8.4. `java.util.Random` (Ch09)\n\n- **æ„é€ å‡½æ•°**ï¼š\n  - `Random()`ï¼šä½¿ç”¨å½“å‰æ—¶é—´ä½œä¸ºç§å­æ„é€ ä¸€ä¸ª Random å¯¹è±¡ã€‚\n  - `Random(seed: long)`ï¼šä½¿ç”¨æŒ‡å®šçš„ç§å­æ„é€ ä¸€ä¸ª Random å¯¹è±¡ã€‚\n- **æ–¹æ³•**ï¼š\n  - `nextInt() : int`ï¼šè¿”å›ä¸€ä¸ªéšæœºçš„ int å€¼ã€‚\n  - `nextInt(n: int) : int`ï¼šè¿”å›ä¸€ä¸ª 0ï¼ˆå«ï¼‰åˆ° nï¼ˆä¸å«ï¼‰ä¹‹é—´çš„éšæœº int å€¼ã€‚\n  - `nextLong() : long`ï¼šè¿”å›ä¸€ä¸ªéšæœºçš„ long å€¼ã€‚\n  - `nextDouble() : double`ï¼šè¿”å›ä¸€ä¸ª 0.0ï¼ˆå«ï¼‰åˆ° 1.0ï¼ˆä¸å«ï¼‰ä¹‹é—´çš„éšæœº double å€¼ã€‚\n  - `nextFloat() : float`ï¼šè¿”å›ä¸€ä¸ª 0.0Fï¼ˆå«ï¼‰åˆ° 1.0Fï¼ˆä¸å«ï¼‰ä¹‹é—´çš„éšæœº float å€¼ã€‚\n  - `nextBoolean() : boolean`ï¼šè¿”å›ä¸€ä¸ªéšæœºçš„ boolean å€¼ã€‚\n","publishedTitle":"ã€ŒJava åº”ç”¨æŠ€æœ¯ã€I. Java è¯­è¨€åŸºç¡€"}},{"id":"52cd8b44-293a-58f8-a097-dcccf44ea187","fields":{"slug":"/course/java/note/2/","plainText":"\n> æœ¬ç¯‡ç¬”è®°ä¸»è¦ä»‹ç»äº† Java é¢å‘å¯¹è±¡ç¼–ç¨‹çš„æ ¸å¿ƒæ¦‚å¿µå’Œå®è·µã€‚æ¶µç›–äº†ç±»ä¸å¯¹è±¡çš„åŸºæœ¬æ¦‚å¿µã€å°è£…ä¸è®¿é—®æ§åˆ¶ã€ç»§æ‰¿ä¸å¤šæ€ã€æ¥å£ä¸æŠ½è±¡ç±»ç­‰é‡è¦ä¸»é¢˜ã€‚é€šè¿‡ç†è®ºè®²è§£å’Œä»£ç ç¤ºä¾‹ï¼Œç³»ç»Ÿåœ°é˜è¿°äº† Java é¢å‘å¯¹è±¡ç¼–ç¨‹çš„è®¾è®¡ç†å¿µå’Œå®ç°æ–¹æ³•ï¼Œå¸®åŠ©è¯»è€…æ·±å…¥ç†è§£é¢å‘å¯¹è±¡ç¨‹åºè®¾è®¡çš„æ€æƒ³ã€‚<small style=\"font-style: italic; opacity: 0.5\">ï¼ˆç”± claude-3.5-sonnet ç”Ÿæˆæ‘˜è¦ï¼‰</small>\n\n<!-- more -->\n\n## 1. Ch09 and Classes\n\n### 1.1. Object-Oriented Programming (OOP)\n\n- **å¯¹è±¡(object)**ï¼š\n  - å¯¹è±¡ä¸€èˆ¬ç”¨æ¥è¡¨ç¤ºç°å®ä¸–ç•Œä¸­å¯ä»¥è¢«è¯†åˆ«çš„å®ä½“ï¼Œå…·æœ‰å”¯ä¸€æ ‡è¯†ã€çŠ¶æ€å’Œè¡Œä¸ºã€‚\n  - **çŠ¶æ€(state)**ï¼šç”±æ•°æ®å­—æ®µï¼ˆå±æ€§ï¼‰åŠå…¶å½“å‰å€¼ç»„æˆã€‚\n  - **è¡Œä¸º(behavior)**ï¼šç”±æ–¹æ³•å®šä¹‰ã€‚\n  - å¯¹è±¡ä¸åŸºæœ¬æ•°æ®ç±»å‹çš„åŒºåˆ«\n    - **åŸºæœ¬ç±»å‹å˜é‡**ï¼šå­˜å‚¨å®é™…å€¼ã€‚\n    - **å¯¹è±¡å¼•ç”¨å˜é‡**ï¼šå­˜å‚¨å¯¹è±¡çš„å†…å­˜åœ°å€ã€‚\n    - ==Java ä¸­çš„å‚æ•°ä¼ é€’å§‹ç»ˆæ˜¯å€¼ä¼ é€’ã€‚å› ä¸º Java ä¸­çš„å¯¹è±¡å®é™…ä¸Šæ˜¯ä¸€ç§å¼•ç”¨ï¼Œæˆ‘ä»¬åœ¨ä¼ é€’å‚æ•°æ—¶æ˜¯å°†å¯¹åº”çš„åœ°å€ä½œä¸ºå€¼ä¼ é€’è¿›å»çš„ï¼›è€Œåœ¨ä¼ é€’åŸºæœ¬ç±»å‹æ—¶é‚£æ›´æ˜¯ç›´æ¥ä¼ é€’è¿™ä¸ªå€¼äº†ã€‚==\n  - ==æ‰€æœ‰å¯¹è±¡çš„å®ä¾‹éƒ½å­˜å‚¨åœ¨å †ä¸­ï¼Œåªæœ‰å±€éƒ¨çš„åŸºæœ¬ç±»å‹å˜é‡å’Œå¯¹è±¡å¼•ç”¨å­˜å‚¨åœ¨æ ˆä¸­ï¼Œè¿™æ˜¯ Java è¯­è¨€çš„ä¸€å¤§ç‰¹æ€§ã€‚==\n- **ç±»(class)**ï¼š\n  - ç±»æ˜¯å®šä¹‰ç›¸åŒç±»å‹å¯¹è±¡çš„æ„é€ ã€‚\n  - Java ä¸­çš„ç±»ç”¨ **å˜é‡(variable)** æ¥è¡¨ç¤ºçŠ¶æ€ï¼Œç”¨ **æ–¹æ³•(method)** æ¥è¡¨ç¤ºè¡Œä¸ºã€‚\n  - **UML ç±»å›¾(UML class diagram)**ï¼šé€šè¿‡å›¾å½¢åŒ–æ–¹å¼å±•ç¤ºç±»çš„å±æ€§å’Œæ–¹æ³•ã€‚\n\n### 1.2. Constructors\n\n- **æ„é€ å‡½æ•°(constructor)** æ˜¯ä¸€ç±»ç‰¹æ®Šçš„æ–¹æ³•ï¼Œç”¨äºåˆ›å»ºå¯¹è±¡å¹¶åˆå§‹åŒ–å…¶å±æ€§ã€‚\n- ä½¿ç”¨ `new` è¿ç®—ç¬¦åˆ›å»ºå¯¹è±¡å¹¶è§¦å‘æ„é€ å‡½æ•°ã€‚\n- **è¦æ±‚**ï¼š\n  - æ„é€ å‡½æ•°çš„åç§°å¿…é¡»ä¸ç±»åç›¸åŒã€‚\n  - æ— è¿”å›ç±»å‹ï¼ˆä¸æ˜¯ `void`ï¼Œç›´æ¥ä¸ç”¨å†™ï¼‰ã€‚\n- **é»˜è®¤æ„é€ å‡½æ•°(default constructor)**\n  - å¦‚æœç±»æ²¡æœ‰å®šä¹‰æ„é€ å‡½æ•°ï¼ŒJava ä¼šè‡ªåŠ¨æä¾›ä¸€ä¸ªé»˜è®¤çš„ç©ºçš„æ— å‚æ„é€ å‡½æ•°ã€‚\n  - å½“ä¸”ä»…å½“ç±»æ²¡æœ‰æ˜¾å¼å£°æ˜çš„æ„é€ å‡½æ•°æ—¶æ‰ä¼šåˆ›å»ºã€‚\n- **é»˜è®¤åˆå§‹åŒ–**ï¼š\n  - ==å¯¹äºæ²¡æœ‰è¿›è¡Œåˆå§‹åŒ–çš„å¯¹è±¡ä¸­çš„å˜é‡ä¼šåˆ†é…**é»˜è®¤å€¼(default value)**==ï¼š\n    - å¼•ç”¨ç±»å‹ï¼š`null`\n    - æ•°å€¼ç±»å‹ï¼š`0`\n    - å­—ç¬¦ç±»å‹ï¼š`\\u0000`\n  - ==æ³¨æ„ï¼šåœ¨æ–¹æ³•å†…çš„å±€éƒ¨å˜é‡å¹¶ä¸ä¼šæœ‰é»˜è®¤å€¼ï¼Œè¿™ç§æ—¶å€™ä¼š CE æŠ¥é”™ï¼ˆvariable not initializedï¼‰==ï¼\n  - è¿™å…¶å®æ˜¯å…³ç³»åˆ°ä½¿ç”¨ `new` è¿ç®—ç¬¦åˆ›å»ºå¯¹è±¡æ—¶ï¼Œæ˜¯åœ¨å †ä¸­ç”³è¯·äº†ä¸€å—æ–°çš„ç©ºé—´ï¼ŒJava ä¼šå°†å…¶ä¸­çš„ data fields è‡ªåŠ¨åˆå§‹åŒ–ä¸ºå…¨ 0ï¼Œè¿™ä¹Ÿå°±æ˜¯ä¸åŒç±»å‹æ‰€å¯¹åº”çš„é»˜è®¤å€¼ã€‚\n- **æŒ‡å®šåˆå§‹åŒ–**ï¼š\n  - ç¤ºä¾‹\n    ```java\n    public class Test {\n    \t\tstatic int STATIC_ONE = 1;\n    \t\tstatic int STATIC_TWO;\n    \t\t{\n    \t\t\t\tSTATIC_TWO = 2;\n    \t\t}\n    }\n    ```\n  - æŒ‡å®šåˆå§‹åŒ–çš„å…¶å®æ˜¯åœ¨é»˜è®¤åˆå§‹åŒ–çš„åŠ¨ä½œä¹‹åæ‰§è¡Œçš„ã€‚ï¼ˆå¦‚åœ¨è¿™é‡Œæ‰§è¡Œ `STATIC_TWO = 2;` è¯­å¥ä¹‹å‰ `STATIC_TWO` çš„å€¼åº”ä¸º 0ã€‚ï¼‰\n- ä¸‰ç§åˆå§‹åŒ–æ–¹æ³•çš„é¡ºåºæ˜¯ï¼š==â‘  é»˜è®¤åˆå§‹åŒ– â‘¡ æŒ‡å®šåˆå§‹åŒ–ï¼ˆç›´æ¥ç»™å˜é‡èµ‹å€¼ï¼Œæˆ–è€…ä¸€ä¸ªç›´æ¥å†™åœ¨ class é‡Œçš„å—ï¼‰ â‘¢ æ„é€ å‡½æ•°==ã€‚\n\n### 1.3. Garbage Collection (GC)\n\n- **åƒåœ¾å›æ”¶(garbage collection)**ï¼šJava è™šæ‹Ÿæœºï¼ˆJVMï¼‰ä¼šè‡ªåŠ¨å›æ”¶ä¸å†è¢«å¼•ç”¨çš„å¯¹è±¡ã€‚\n- **å†…å­˜æ³„æ¼(memory leak)**ï¼šå¦‚æœç¨‹åºä¸æ­£ç¡®åœ°ç®¡ç†å¯¹è±¡çš„å¼•ç”¨ï¼Œè®©å…¶æ— æ³•è‡ªåŠ¨é‡Šæ”¾ï¼Œå°±ä¼šå­˜åœ¨å†…å­˜æ³„æ¼çš„é—®é¢˜ã€‚\n  - ==è¿™é‡Œ `return elements[--size]` æ—¶æ²¡æœ‰é‡Šæ”¾ `elements` æ•°ç»„ä¸­å¯¹å¯¹åº”å¯¹è±¡çš„å¼•ç”¨ï¼ˆå› ä¸ºè¿™ä¸æ˜¯ä¸€ä¸ªåŸºæœ¬ç±»å‹çš„æ ˆï¼Œè€Œæ˜¯ä¸€ä¸ª Object çš„æ ˆï¼‰ï¼Œè¿™ç§æ—¶å€™å°±ä¼šæœ‰å†…å­˜æ³„æ¼çš„é—®é¢˜äº§ç”Ÿ==ã€‚\n    ![|403](https://img.memset0.cn/2024/12/17/wh5AT5RR.png)\n- ==**æ‰‹åŠ¨é‡Šæ”¾å¼•ç”¨**ï¼šå¯ä»¥é€šè¿‡æ˜¾å¼åœ°å°†å¯¹è±¡å¼•ç”¨èµ‹å€¼ä¸º `null`ï¼Œæ¥æç¤º JVM è¿›è¡Œå›æ”¶==ã€‚\n  - ç¤ºä¾‹ï¼š\n    ```java\n    Circle c1 = new Circle(5.0);\n    c1 = null; // c1æŒ‡å‘çš„å¯¹è±¡ä¼šè¢«å›æ”¶\n    ```\n\n### 1.4. Static Variables & Methods\n\n- ä½¿ç”¨ `static` å…³é”®å­—ä¿®é¥°å…¨å±€å˜é‡ã€å¸¸é‡å’Œæ–¹æ³•ã€‚\n  - å¯¹äºå…¨å±€å¸¸é‡ï¼Œä½¿ç”¨ `final static` ä¿®é¥°ã€‚\n- **é™æ€æˆå‘˜**ï¼šå±äºç±»ï¼Œè€Œä¸æ˜¯æŸä¸ªå®ä¾‹ã€‚\n- **å®ä¾‹æˆå‘˜**ï¼šå±äºç‰¹å®šå¯¹è±¡çš„å®ä¾‹ã€‚\n- **è®¿é—®é™åˆ¶**ï¼š\n  - é™æ€æ–¹æ³•åªèƒ½è®¿é—®é™æ€çš„å˜é‡å’Œæ–¹æ³•ã€‚\n  - å®ä¾‹æ–¹æ³•å¯ä»¥è®¿é—®é™æ€å’Œå®ä¾‹çš„å˜é‡å’Œæ–¹æ³•ã€‚\n- **ç”Ÿå‘½å‘¨æœŸ**ï¼š==ç¬¬ä¸€æ¬¡é€šè¿‡ç±»åè®¿é—®é™æ€å˜é‡æˆ–é™æ€æ–¹æ³•æ—¶ï¼ŒJava ä¼šå°†ç±»åŠ è½½è¿›å†…å­˜ï¼Œä¸ºè¿™ä¸ªç±»åˆ†é…ä¸€å—ç©ºé—´ï¼ŒåŒ…å«äº†å®šä¹‰ã€å˜é‡å’Œæ–¹æ³•ä¿¡æ¯ï¼Œè¿˜æœ‰ç±»çš„é™æ€å˜é‡ï¼Œå¹¶å¯¹é™æ€å˜é‡å¤åˆ¶ã€‚ç±»åœ¨åŠ è½½è¿›å†…å­˜ä¹‹åä¸€èˆ¬ä¸ä¼šé‡Šæ”¾ï¼Œç›´åˆ°ç¨‹åºç»“æŸã€‚ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œç±»åªä¼šè¿™æ ·åŠ è½½ä¸€æ¬¡==ã€‚ï¼ˆå…·ä½“å‚è§â€œç±»åŠ è½½è¿‡ç¨‹â€çš„éƒ¨åˆ†ï¼‰\n\n### 1.5. Encapsulation and Access Control\n\n- **å°è£…(encapsulation)**ï¼šä¿æŠ¤æ•°æ®ï¼Œä¾¿äºç»´æŠ¤ã€‚\n- **è®¿é—®ä¿®é¥°ç¬¦(visibility modifiers)**ï¼š\n  - `private`ï¼šä»…ç±»å†…éƒ¨å¯è®¿é—®ã€‚\n  - `public`ï¼šæ‰€æœ‰ç±»å‡å¯è®¿é—®ã€‚\n  - ==é»˜è®¤ï¼ˆæ— ä¿®é¥°ç¬¦ï¼‰ï¼šåŒä¸€åŒ…å†…å¯è®¿é—®ã€‚==\n  - ![|555](https://img.memset0.cn/2024/12/17/Cm4bIw3D.png)\n- é€šè¿‡è®©ç±»æä¾› `get` å’Œ `set` æ–¹æ³•æ¥ä»å¤–éƒ¨è®¿é—®ç§æœ‰æ•°æ®å­—æ®µã€‚\n- ==`private Constructor`ï¼šé€šè¿‡ `private` ä¿®é¥°æ„é€ å‡½æ•°ï¼Œé˜²æ­¢ä»å¤–éƒ¨åˆ›å»ºç±»çš„ç¤ºä¾‹==ã€‚\n  - ç¤ºä¾‹ 1ï¼ˆåªèƒ½é™æ€è®¿é—®ï¼‰ï¼šJava æä¾›çš„ `Math` ç±»çš„æ„é€ å‡½æ•°å°±æ˜¯ `private Math() {}`ã€‚\n  - ==ç¤ºä¾‹ 2ï¼ˆåªèƒ½è¢«ç±»çš„é™æ€æ–¹æ³•è°ƒç”¨ï¼‰ï¼šå•ä¾‹æ¨¡å¼==  \n     ![|640](https://img.memset0.cn/2024/12/17/LVn4d5uF.png)\n  - ==ç¤ºä¾‹ 3ï¼ˆåªèƒ½è¢«ç±»çš„å…¶ä»–æ„é€ å‡½æ•°è°ƒç”¨ï¼Œç”¨äºå‡å°‘é‡å¤ä»£ç ï¼‰==\n\n### 1.6. Immutable Objects and Classes\n\n- **ä¸å¯å˜å¯¹è±¡**ï¼šä¸å¯å˜ç±»çš„å¯¹è±¡ï¼Œä¸€æ—¦åˆ›å»ºï¼Œå…¶å†…å®¹ä¸èƒ½æ›´æ”¹ã€‚ï¼ˆå…¸ä¾‹ï¼š`String`ï¼‰\n- **ä¸å¯å˜ç±»çš„è®¾è®¡è§„åˆ™**ï¼š\n  1.  ä¸æä¾›ä¿®æ”¹å¯¹è±¡çŠ¶æ€çš„æ–¹æ³•ã€‚\n  2.  ==å°†ç±»å£°æ˜ä¸º `final`ï¼Œé˜²æ­¢ç»§æ‰¿=ã€‚\n      - è¿˜å¯ä»¥é‡‡ç”¨ä¸€ç§æ›´ä¸ºçµæ´»çš„æ–¹å¼è®©ç±»çš„æ‰€æœ‰æ„é€ å™¨éƒ½å˜ä¸ºç§æœ‰çš„æˆ–åŒ…çº§ç§æœ‰çš„ï¼Œå¹¶æ·»åŠ å…¬å…±çš„é™æ€å·¥å‚æ¥ä»£æ›¿å…¬æœ‰çš„æ„é€ å™¨ã€‚ï¼ˆå¦‚å¸¸é‡æ± æŠ€æœ¯ï¼Œä¸‹ä¸€ç« ä¼šè¯¦ç»†ä»‹ç»ã€‚ï¼‰\n  3.  ==æ‰€æœ‰å­—æ®µå£°æ˜ä¸º `private` å’Œ `final`==ã€‚\n  4.  ç¡®ä¿æ²¡æœ‰è¿”å›å¯å˜å¯¹è±¡å¼•ç”¨çš„æ–¹æ³•ã€‚\n- **ä¸å¯å˜ç±»çš„ä¼˜ç‚¹**ï¼š\n  - ä¸å¯å˜å¯¹è±¡æ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚\n  - ==ä¸éœ€è¦è¿›è¡Œä¿æŠ¤æ€§æ‹·è´ï¼Œå› ä¸ºå¯¹è±¡çš„å¼•ç”¨ä¸ä¼šè¢«ä¿®æ”¹ã€‚ï¼ˆTODOï¼šï¼Ÿï¼‰==\n  - å¯ä»¥æä¾›é™æ€å·¥å‚ï¼ŒæŠŠé¢‘ç¹è¢«è¯·æ±‚çš„å®ä¾‹ç¼“å­˜èµ·æ¥ã€‚\n    ![|450](https://img.memset0.cn/2024/12/17/59fbk4bi.png)\n  - å¯¹äºç‰¹æ®Šä¸å¯å˜å¯¹è±¡çš„éƒ¨åˆ†å¸¸ç”¨æ–¹æ³•ï¼Œå¯ä»¥ç›´æ¥æä¾›ç»“æœã€‚\n    ![|450](https://img.memset0.cn/2024/12/17/KP1Be31g.png)\n- ==å¿…è¦æ—¶è¿›è¡Œä¿æŠ¤æ€§æ‹·è´ï¼šå¿…é¡»è¦è¿”å›å¯¹è±¡çš„åœºåˆï¼Œé‡æ–°åˆ›å»ºä¸€ä¸ªä¸´æ—¶å¯¹è±¡è¿”å›ï¼Œç¡®ä¿å½“å‰å¯¹è±¡ä¸è¢«ä¿®æ”¹==ã€‚\n  - ![|528](https://img.memset0.cn/2024/12/17/rs5sEnMw.png)\n  - å¦ä¸€ä¸ªä¾‹å­ï¼šç±»å…·æœ‰å…¬æœ‰çš„é™æ€ final æ•°ç»„åŸŸï¼Œæˆ–è€…è¿”å›è¿™ç§åŸŸçš„è®¿é—®æ–¹æ³•ï¼Œè¿™æ˜¯å®‰å…¨æ¼æ´çš„ä¸€ä¸ªå¸¸è§æ ¹æºã€‚  \n     ![|420](https://img.memset0.cn/2024/12/17/ijwg7L04.png)\n\n### 1.7. this\n\n- **ç”¨é€”**ï¼š\n  1.  å¼•ç”¨å½“å‰å¯¹è±¡ã€‚\n  2.  è°ƒç”¨ç±»çš„å…¶ä»–æ„é€ å‡½æ•°ã€‚\n- ç¤ºä¾‹ï¼š\n  ```java\n  class Circle {\n  \t\tprivate double radius;\n  \t\tpublic Circle(double radius) {\n  \t\t\t\tthis.radius = radius; // åªèƒ½é€šè¿‡ this å¼•ç”¨å½“å‰å¯¹è±¡çš„ radius å­—æ®µ\n  \t\t}\n  \t\tpublic Circle() {\n  \t\t\t\tthis(1.0); // è°ƒç”¨å¦ä¸€ä¸ªæ„é€ å‡½æ•°\n  \t\t}\n  \t\tpublic double getArea() {\n  \t\t\t\treturn this.radius * this.radius * Math.PI; // è¿™é‡Œä¸€èˆ¬çœç•¥ this\n  \t\t}\n  }\n  ```\n\n### 1.8. Package\n\n- **åŒ…(package)**ï¼šç”¨äºç»„ç»‡ç±»ï¼Œé¿å…å‘½åå†²çªã€‚\n  - ==å¦‚æœç¼ºçœ package è¯­å¥ï¼Œåˆ™ç±»å±äº**é»˜è®¤åŒ…(default package)**==ã€‚\n  - çº¦å®šä¿—ç§°çš„åŒ…å‘½åæ–¹å¼ä¸ºå°†å…¬å¸åŸŸåå€’è¿‡æ¥å†™ã€‚\n  - ==ç¼–è¯‘å™¨åœ¨ç¼–è¯‘æºæ–‡ä»¶æ—¶ä¸ä¼šæ£€æŸ¥ç›®å½•ç»“æ„ï¼Œä½†æ˜¯ä¼šåœ¨è¿è¡Œæ—¶æŠ¥é”™ã€‚==\n- **å¯¼å…¥(import)**ï¼š\n  - ä½¿ç”¨ `import` è¯­å¥å¯¼å…¥åŒ…ä¸­çš„æŸä¸ªç±»æˆ–æ•´ä¸ªåŒ…ã€‚\n  - é»˜è®¤è¡Œä¸ºï¼š`import java.lang.*`ã€‚\n  - å½“å¯¼å…¥çš„å¤šä¸ªåŒ…ä¸­å­˜åœ¨åŒåç±»æ—¶ï¼Œå¯ä»¥ç”¨é€šè¿‡æŒ‡å®šåŒ…åæ¥åŒºåˆ†ã€‚\n    - ä¸¾ä¾‹ï¼š\n      ```java\n      import java.util.*;\n      import java.sql.*;\n      Date d = new Date(); // é”™è¯¯\n      java.util.Date d = new java.util.Date(); // æ­£ç¡®\n      ```\n  - **é™æ€å¯¼å…¥(static import)**ï¼š\n    - ==ä½¿ç”¨ `import static` è¯­å¥å¯¼å…¥åŒ…ä¸­çš„é™æ€æ–¹æ³•å’Œé™æ€åŸŸ==ã€‚\n      - ç¤ºä¾‹ï¼š\n        ```java\n        import static java.lang.System.*;\n        out.println(\"Hello, World!\"); // System.out\n        exit(0); // System.exit\n        ```\n\n### 1.9. JAR\n\n- **åˆ›å»º JAR æ–‡ä»¶**ï¼š\n  - å‘½ä»¤è¡Œï¼š`jar -cvf filename.jar files`\n- **è¿è¡Œ JAR æ–‡ä»¶**ï¼š\n  - å‘½ä»¤è¡Œï¼š`java -jar filename.jar`\n- åœ¨ JAR ä¸­æ‰“åŒ…èµ„æºã€‚\n\n## 2. Ch10 Thinking in Objects\n\n### 2.1. Association & Aggregation & Composition\n\n1. **å…³è”(association)**ï¼šè¡¨ç¤ºå¯¹è±¡ä¹‹é—´çš„å¤šé‡æ€§å…³ç³»ã€‚\n   - ç¤ºä¾‹ï¼šå­¦ç”Ÿå’Œæ•™å¸ˆä¹‹é—´çš„å…³è”ã€‚\n2. **èšåˆ(aggregation)**ï¼šä¸€ç§æ–¹å‘æ€§å…³è”å…³ç³»ï¼Œè¡¨ç¤º \"has-a\" å…³ç³»ã€‚\n   - ç¤ºä¾‹ï¼šä¸€ä¸ªéƒ¨é—¨åŒ…å«å¤šä¸ªå‘˜å·¥ã€‚\n3. **ç»„åˆ(composition)**ï¼šèšåˆçš„ä¸€ç§ç‰¹æ®Šå½¢å¼ï¼ˆå³ä¹Ÿæ˜¯ä¸€ç§ \"has-a\" å…³ç³»ï¼‰ï¼Œè¡¨ç¤ºæ›´å¼ºçš„ä¾èµ–å…³ç³»ã€‚\n   - ç¤ºä¾‹ï¼šä¸€ä¸ªäººåŒ…å«ä¸€ä¸ªå¿ƒè„ï¼Œå¿ƒè„ä¸èƒ½è„±ç¦»äººå­˜åœ¨ã€‚\n   - èšåˆå’Œç»„åˆçš„åŒºåˆ«ï¼šç»„åˆæ›´ä¸ºä¸¥æ ¼ï¼Œèšåˆçš„å¤šä¸ªå¯¹è±¡å¯ä»¥å‡ç‹¬ç«‹å­˜åœ¨ï¼Œè€Œç»„åˆçš„å¤šä¸ªå¯¹è±¡ä¸èƒ½ç‹¬ç«‹å­˜åœ¨ã€‚\n\n### 2.2. Wrapper Classes\n\n- **åŒ…è£…ç±»(wrapper class)**ï¼šæŒ‡å°†åŸºæœ¬æ•°æ®ç±»å‹å°è£…ä¸ºå¯¹è±¡çš„ç±»ã€‚\n  - å¦‚ `Boolean`, `Integer`, `Double` ç­‰ç­‰ã€‚\n- ç‰¹ç‚¹ï¼š\n  1.  ==æ²¡æœ‰æ— å‚æ„é€ å™¨ï¼ˆæ€»å¾—æ¥ä¸ªå‚æ•°æ‰èƒ½è¢«åŒ…è£…å§ï¼‰==ã€‚\n  2.  åŒ…è£…ç±»å¯¹è±¡æ˜¯ä¸å¯å˜çš„ã€‚\n- **æ•°å€¼åŒ…è£…ç±»(numeric wrapper class)**ï¼š\n  - æ‰€æœ‰æ•°å€¼åŒ…è£…ç±»éƒ½ç»§æ‰¿è‡ª `Number` ç±»ï¼Œæœ‰ `doubleValue`ã€`intValue`ã€`longValue`ã€`floatValue`ã€`shortValue` ç­‰æ–¹æ³•ï¼Œç”¨äºæŠŠåŒ…è£…ç±»å¯¹è±¡è½¬æ¢ä¸ºå¯¹åº”çš„åŸºæœ¬æ•°æ®ç±»å‹ã€‚\n  - æ‰€æœ‰æ•°å€¼åŒ…è£…ç±»éƒ½æœ‰ `MAX_VALUE` å’Œ `MIN_VALUE` ä¸¤ä¸ªé™æ€å¸¸é‡ï¼š\n    - å¯¹äºæ•´æ•°ï¼ˆ`Integer`, `Short`, `Byte`, `Long`ï¼‰ï¼šç”¨æ¥è¡¨ç¤ºè¯¥ç±»å‹çš„æœ€å¤§å€¼å’Œæœ€å°å€¼ã€‚\n    - å¯¹äºæµ®ç‚¹æ•°ï¼ˆ`Float`, `Double`ï¼‰ï¼š==`MIN_VALUE` ç”¨æ¥è¡¨ç¤ºè¯¥ç±»å‹èƒ½è¡¨ç¤ºçš„æœ€å°æ­£æ•°==ï¼Œ`MAX_VALUE` ç”¨æ¥è¡¨ç¤ºè¯¥ç±»å‹èƒ½è¡¨ç¤ºçš„æœ€å¤§å€¼ã€‚\n  - æ•°å€¼åŒ…è£…ç±»çš„ `valueOf()` é™æ€æ–¹æ³•ä¸å…‰å¯ä»¥å°†åŸºæœ¬ç±»å‹è½¬åŒ–ä¸ºå¯¹åº”åŒ…è£…ç±»å¯¹è±¡ï¼Œä¹Ÿå¯ä»¥æŠŠå­—ç¬¦ä¸²è½¬åŒ–ä¸ºå¯¹åº”åŒ…è£…ç±»å¯¹è±¡ã€‚\n  - ==æ•´å‹åŒ…è£…ç±»çš„ `parseInt(str, radix)` é™æ€æ–¹æ³•è¿˜å¯ä»¥æŠŠæŒ‡å®šè¿›åˆ¶çš„å­—ç¬¦ä¸²è½¬åŒ–ä¸ºå¯¹åº”æ•´å‹åŒ…è£…ç±»==ã€‚\n  - æµ®ç‚¹æ•°åŒ…è£…ç±»çš„ `parseDouble(str)` é™æ€æ–¹æ³•è¿˜å¯ä»¥æŠŠå­—ç¬¦ä¸²è½¬åŒ–ä¸ºå¯¹åº”æµ®ç‚¹æ•°åŒ…è£…ç±»ã€‚\n  - ![|620](https://img.memset0.cn/2024/12/18/qMgyh6eq.png)\n\n### 2.3. Automatic Boxing & Unboxing\n\n- **è‡ªåŠ¨è£…ç®±(automatic boxing)**ï¼šåŸºæœ¬ç±»å‹è‡ªåŠ¨è½¬æ¢ä¸ºåŒ…è£…ç±»å¯¹è±¡ã€‚\n  - ç¤ºä¾‹ï¼š`Integer[] intArray = {2, 4, 3};`\n  - ==è‡ªåŠ¨è£…ç®±ä¼šå¸¦æ¥é¢å¤–çš„æ€§èƒ½å¼€é”€==ï¼Œåœ¨éœ€è¦é¢‘ç¹è£…ç®±å’Œæ‹†ç®±çš„åœºåˆï¼Œå»ºè®®ä½¿ç”¨åŸºæœ¬ç±»å‹ã€‚\n    - ä¸¾ä¾‹ï¼šè¿™æ®µä»£ç ç­”æ¡ˆæ˜¯æ­£ç¡®çš„ï¼Œä½†æ˜¯é€Ÿåº¦ä¼šæ…¢ç‰¹åˆ«å¤šï¼š\n      ```java\n      Long sum = 0L;\n      for (long i = 0; i < Integer.MAX_VALUE; i++) {\n      \t\tsum += i;\n      }\n      System.out.println(sum);\n      ```\n- **è‡ªåŠ¨æ‹†ç®±(automatic unboxing)**ï¼šåŒ…è£…ç±»å¯¹è±¡è‡ªåŠ¨è½¬æ¢ä¸ºåŸºæœ¬ç±»å‹ã€‚\n  - ç¤ºä¾‹ï¼š`System.out.println(intArray[0] + intArray[1] + intArray[2]);`\n\n### 2.4. `BigInteger` & `BigDecimal`\n\n- ==`BigInteger` å’Œ `BigDecimal` éƒ½æ˜¯ä¸å¯å˜ç±»==ã€‚\n- **`BigInteger`**ï¼šæ”¯æŒä»»æ„å¤§å°çš„æ•´æ•°è¿ç®—ã€‚\n  - ç¤ºä¾‹ï¼š\n    ```java\n    BigInteger a = new BigInteger(\"9223372036854775807\");\n    BigInteger b = new BigInteger(\"2\");\n    BigInteger c = a.multiply(b); // ç»“æœï¼š18446744073709551614\n    ```\n- **`BigDecimal`**ï¼šæ”¯æŒé«˜ç²¾åº¦çš„æµ®ç‚¹æ•°è¿ç®—ã€‚\n  - ç¤ºä¾‹ï¼š\n    ```java\n    BigDecimal a = new BigDecimal(1.0);\n    BigDecimal b = new BigDecimal(3);\n    BigDecimal c = a.divide(b, 20, BigDecimal.ROUND_UP);\n    System.out.println(c);\n    ```\n\n### 2.5. Interned Strings\n\n- å› ä¸ºå­—ç¬¦ä¸²æ˜¯ä¸å¯å˜çš„ä¸”è¢«é¢‘ç¹ä½¿ç”¨ï¼Œä¸ºäº†æå‡æ€§èƒ½å¹¶èŠ‚çœå†…å­˜ï¼ŒJava å¼•å…¥äº† **å­—ç¬¦ä¸²æ± (string pool)** çš„æŠ€æœ¯ï¼Œåªä¸ºæ¯ä¸€ç§ç›¸åŒçš„å­—ç¬¦ä¸²åªåˆ›å»ºä¸€ä»½å®ä¾‹ï¼Œè¿™æ ·çš„å®ä¾‹è¢«ç§°ä¸º **è¢«æ± åŒ–çš„(interned)** å­—ç¬¦ä¸²ã€‚\n- ä½¿ç”¨ `new` å…³é”®è¯åˆ›å»ºçš„å­—ç¬¦ä¸²ä¸€å®šä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„å¯¹è±¡ï¼ˆä¸ä¼šè¢«æ± åŒ–ï¼‰ï¼Œä½¿ç”¨ string initializer åˆ›å»ºçš„å¯¹è±¡ä¼šè¢«æ± åŒ–ï¼Œå³åªæœ‰åœ¨å­—ç¬¦ä¸²æ± ä¸­æ²¡æœ‰ç›¸åŒå­—ç¬¦ä¸²æ—¶æ‰ä¼šåˆ›å»ºæ–°çš„å¯¹è±¡ã€‚\n  - ç¤ºä¾‹ï¼šï¼ˆç¬¬ä¸€ä¸ªåˆ¤æ–­æ˜¯ falseï¼Œç¬¬äºŒä¸ªåˆ¤æ–­æ˜¯ trueï¼‰  \n     ![|618](https://img.memset0.cn/2024/12/18/rgcyKLVI.png)\n  - å¯ä»¥ä½¿ç”¨å­—ç¬¦ä¸²å¯¹è±¡çš„ `intern()` æ–¹æ³•æ˜¾å¼åœ°å°† `new` å…³é”®è¯åˆ›å»ºçš„å­—ç¬¦ä¸²åŠ å…¥å­—ç¬¦ä¸²æ± ã€‚\n- åƒè¿™ç§å­—ç¬¦ä¸²æ‹¼æ¥çš„æƒ…å†µï¼Œå¦‚æœä¸èƒ½åœ¨ç¼–è¯‘å™¨å¸¸é‡åŒ–å¾—åˆ°ç»“æœçš„åŒ–ï¼Œåˆ™ä¼šç¼–è¯‘åˆ° `StringBuilder` æ¥æ‹¼æ¥ï¼Œå¹¶åœ¨æœ€åè¿”å›æ—¶åˆ›å»ºä¸€ä¸ªæ–°çš„å­—ç¬¦ä¸²å¯¹è±¡ï¼Œè¿™ç§æ—¶å€™æ˜¯ä¸ä¼šè¢«è‡ªåŠ¨æ± åŒ–çš„ï¼Œéœ€è¦æ˜¾å¼è°ƒç”¨ `intern()` æ–¹æ³•ã€‚\n  - ![|397](https://img.memset0.cn/2024/12/18/RKxu0vRv.png)\n\n### 2.6. Constant Pool\n\n- Java çš„å¸¸é‡æ± æŠ€æœ¯ï¼Œæ˜¯æå‡åˆ›å»ºæŸäº›å¯¹è±¡çš„æ€§èƒ½è€Œå‡ºç°çš„ï¼Œå½“éœ€è¦ä¸€ä¸ªå¯¹è±¡æ—¶ï¼Œç›´æ¥ä»æ± ä¸­å–ä¸€ä¸ªå‡ºæ¥ï¼Œèƒ½èŠ‚çœä¸å°‘åˆ›å»ºå¯¹è±¡çš„æ—¶é—´ã€‚\n- å¸¸é‡æ± å…¶å®å°±æ˜¯ä¸€å—å†…å­˜ç©ºé—´ï¼Œå­˜åœ¨äºæ–¹æ³•åŒºä¸­ã€‚\n- å¯¹äºå­—ç¬¦ä¸²ç±»ï¼ŒJVM ç¼–è¯‘å™¨ä¼šåœ¨ç¼–è¯‘å™¨å°†å­—ç¬¦ä¸²å­—é¢é‡å¸¸é‡åŒ–ï¼Œå³ç›´æ¥åŠ å…¥åˆ°å¸¸é‡æ± ä¸­ã€‚\n- å¯¹äºæ•´æ•°åŒ…è£…ç±»ï¼Œåªä¼šå¯¹ -128 åˆ° 127 ä¹‹é—´çš„æ•´æ•°è¿›è¡Œå¸¸é‡åŒ–ï¼Œä¸”ä¸åˆ›å»ºæˆ–ç®¡ç†è¶…å‡ºè¿™ä¸€èŒƒå›´çš„æ•´æ•°åŒ…è£…ç±»å¯¹è±¡ã€‚\n  - ä¸ºäº†æ€§èƒ½æå‡ï¼Œåº”å°½é‡ä½¿ç”¨ `Integer.valueOf(int)` æ–¹æ³•æ¥åˆ›å»ºå¯¹è±¡ï¼Œè€Œä¸æ˜¯ä½¿ç”¨ `new Integer(int)` æ–¹æ³•ã€‚\n  - ç¤ºä¾‹ï¼šè¿™é‡Œåˆ’çº¢æ¡†çš„ä¸¤ä¸ªéƒ¨åˆ†çš„åŒºåˆ«æ˜¯å‰è€…å¯ä»¥åœ¨ç¼–è¯‘å™¨ä¼˜åŒ–ï¼Œåè€…åˆ™åœ¨è¿è¡Œè‡ªåŠ¨æ‹†ç®±å¹¶è®¡ç®—ã€‚\n    ![|422](https://img.memset0.cn/2024/12/18/scbQfK7B.png)\n- å¯¹äºæµ®ç‚¹æ•°åŒ…è£…ç±»ï¼Œæ²¡æœ‰å®ç°å¸¸é‡æ± ã€‚\n\n### 2.7. `StringBuilder` & `StringBuffer`\n\n- **`StringBuilder`**ï¼š\n  - ==éçº¿ç¨‹å®‰å…¨==ï¼Œä½†æ€§èƒ½æ›´é«˜ã€‚é€‚ç”¨äºå•çº¿ç¨‹åœºæ™¯ã€‚\n  - æ–¹æ³•ï¼š\n    - `+StringBuilder()`ï¼šæ„é€ ç©º StringBuilderï¼Œé»˜è®¤å®¹é‡ä¸º 16ã€‚\n    - `+StringBuilder(capacity: int)`ï¼šæ„é€ ç©º StringBuilderï¼Œå®¹é‡ä¸º `capacity`ã€‚\n    - `+StringBuilder(s: String)`ï¼šæ„é€ ä¸€ä¸ª StringBuilderï¼Œå†…å®¹ä¸ºå­—ç¬¦ä¸² `s`ã€‚\n    - `+append(data: char[]) : StringBuilder`ï¼šå°†å­—ç¬¦æ•°ç»„è¿½åŠ åˆ°æ­¤å­—ç¬¦ä¸²ç”Ÿæˆå™¨ä¸­ã€‚\n    - `+append(data: char[], offset: int, len: int) : StringBuilder`ï¼šå°†å­—ç¬¦æ•°ç»„ä» `offset` å¼€å§‹ï¼Œé•¿åº¦ä¸º `len` çš„å­—ç¬¦è¿½åŠ åˆ°æ­¤å­—ç¬¦ä¸²ç”Ÿæˆå™¨ä¸­ã€‚\n    - `+append(v: aPrimitiveType) : StringBuilder`ï¼šå°†åŸå§‹ç±»å‹çš„å€¼ä½œä¸ºå­—ç¬¦ä¸²è¿½åŠ ã€‚\n    - `+append(s: String) : StringBuilder`ï¼šå°†å­—ç¬¦ä¸²è¿½åŠ åˆ°æ­¤å­—ç¬¦ä¸²ç”Ÿæˆå™¨ä¸­ã€‚\n    - `+delete(startIndex: int, endIndex: int) : StringBuilder`ï¼šåˆ é™¤æŒ‡å®šèŒƒå›´å†…çš„å­—ç¬¦ã€‚\n    - `+deleteCharAt(index: int) : StringBuilder`ï¼šåˆ é™¤æŒ‡å®šç´¢å¼•å¤„çš„å­—ç¬¦ã€‚\n    - `+insert(index: int, data: char[], offset: int, len: int) : StringBuilder`ï¼šå°†å­—ç¬¦æ•°ç»„ä» `offset` å¼€å§‹ï¼Œé•¿åº¦ä¸º `len` çš„å­—ç¬¦æ’å…¥åˆ°æŒ‡å®šç´¢å¼•å¤„ã€‚\n    - `+insert(offset: int, data: char[], len: int) : StringBuilder`ï¼šåœ¨æŒ‡å®šä½ç½®æ’å…¥å­—ç¬¦æ•°ç»„ã€‚\n    - `+insert(offset: int, s: String) : StringBuilder`ï¼šåœ¨æŒ‡å®šä½ç½®æ’å…¥å­—ç¬¦ä¸²ã€‚\n    - `+replace(startIndex: int, endIndex: int, s: String) : StringBuilder`ï¼šç”¨æŒ‡å®šå­—ç¬¦ä¸²æ›¿æ¢æŒ‡å®šèŒƒå›´å†…çš„å­—ç¬¦ã€‚\n    - `+reverse() : StringBuilder`ï¼šåè½¬æ­¤å­—ç¬¦ä¸²ç”Ÿæˆå™¨ä¸­çš„å­—ç¬¦ã€‚\n    - `+setCharAt(index: int, ch: char) : void`ï¼šåœ¨æŒ‡å®šç´¢å¼•å¤„è®¾ç½®æ–°å­—ç¬¦ã€‚\n    - `+toString() : String`ï¼šè¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²å¯¹è±¡ã€‚\n    - `+capacity() : int`ï¼šè¿”å›æ­¤å­—ç¬¦ä¸²ç”Ÿæˆå™¨çš„å®¹é‡ã€‚\n    - `+charAt(index: int) : char`ï¼šè¿”å›æŒ‡å®šç´¢å¼•å¤„çš„å­—ç¬¦ã€‚\n    - `+length() : int`ï¼šè¿”å›å­—ç¬¦ä¸²ç”Ÿæˆå™¨ä¸­çš„å­—ç¬¦æ•°ã€‚\n    - `+setLength(newLength: int) : void`ï¼šè®¾ç½®å­—ç¬¦ä¸²ç”Ÿæˆå™¨çš„æ–°é•¿åº¦ã€‚\n    - `+substring(startIndex: int) : String`ï¼šè¿”å›ä» startIndex å¼€å§‹åˆ°æœ«å°¾çš„å­å­—ç¬¦ä¸²ã€‚\n    - `+substring(startIndex: int, endIndex: int) : String`ï¼šè¿”å›ä» startIndex åˆ° endIndex-1 çš„å­å­—ç¬¦ä¸²ã€‚\n    - `+trimToSize() : void`ï¼šå‡å°‘ç”¨äºå­—ç¬¦ä¸²ç”Ÿæˆå™¨çš„å­˜å‚¨ç©ºé—´å¤§å°ã€‚\n- **`StringBuffer`**ï¼š\n  - çº¿ç¨‹å®‰å…¨ï¼Œé€‚ç”¨äºå¤šçº¿ç¨‹åœºæ™¯ã€‚\n  - æ¥å£ä¸ `StringBuilder` ç›¸åŒã€‚\n\n### 2.8. Enum\n\n- ä½¿ç”¨ `enum` å…³é”®å­—å®šä¹‰ã€‚\n- ==æ¯ä¸ªæšä¸¾å€¼éƒ½æ˜¯è¯¥æšä¸¾ç±»çš„å®ä¾‹==ï¼Œæ‰€æœ‰æšä¸¾ç±»éƒ½æ˜¯ `java.lang.Enum` çš„å­ç±»ã€‚\n  - æ²¡æœ‰å¯è®¿é—®çš„æ„é€ å™¨ï¼Œä¸èƒ½é€šè¿‡ `new` å…³é”®è¯åˆ›å»ºæšä¸¾ç±»ï¼Œæ˜¯çœŸæ­£çš„ final ç±»ã€‚\n- ==æä¾›ç¼–è¯‘æ—¶çš„ç±»å‹å®‰å…¨æ£€æŸ¥==ï¼Œè‹¥å£°æ˜å‚æ•°çš„ç±»å‹ä¸ºæšä¸¾ç±»ï¼Œåˆ™åªèƒ½ä¼ å…¥è¯¥å‚æ•°çš„é null å¯¹è±¡å¼•ç”¨ä¸€å®šå±äºè¯¥æšä¸¾ç±»çš„æŸä¸ªå€¼ã€‚\n- ==åœ¨ enum ç±»å¤–ä½¿ç”¨æšä¸¾å€¼æ—¶ï¼Œéœ€è¦ä½¿ç”¨ `enumName.enumValue` çš„å®Œå…¨é™å®šåå½¢å¼==ã€‚\n- å¯ä»¥åœ¨ `switch` è¯­å¥ä¸­ä½¿ç”¨ï¼Œæ­¤æ—¶å¯ä»¥ä¸ä½¿ç”¨å®Œå…¨é™å®šåã€‚\n- æ–¹æ³•ï¼š\n  - `ordinal()` æ–¹æ³•ï¼šè¿”å›è¯¥æšä¸¾å€¼çš„é¡ºåºï¼Œè¿™ä¸ªé¡ºåºå°±æ˜¯æ ¹æ®æšä¸¾å€¼å£°æ˜çš„é¡ºåºç¡®å®šçš„ï¼Œä» 0 å¼€å§‹ã€‚\n  - `name()` æ–¹æ³•ï¼šè¿”å›è¯¥æšä¸¾å€¼çš„åç§°ã€‚\n  - `toString()` æ–¹æ³•ï¼šè¿”å›è¯¥æšä¸¾å€¼çš„åç§°ã€‚\n  - `values()` é™æ€æ–¹æ³•ï¼šè¿”å›æšä¸¾ç±»çš„æ‰€æœ‰å€¼ã€‚\n  - `valueOf(name: String)` é™æ€æ–¹æ³•ï¼šå¯ä»¥é€šè¿‡æšä¸¾å€¼çš„åå­—è¿”å›å¯¹åº”çš„æšä¸¾å€¼å®ä¾‹ã€‚\n- é«˜çº§ç”¨æ³•ï¼ˆ**å…³è”æ•°æ®**ï¼‰ï¼šæ„é€ å‡½æ•°å‚æ•°é€šè¿‡æ‹¬å·ç»™å‡ºï¼Œæ–¹æ³•é€šè¿‡å¤§æ‹¬å·ç»™å‡ºï¼›ä¸¤è€…éƒ½å¯ç¼ºçœã€‚\n  - åœ¨ä¸€äº›éœ€è¦ç”¨åˆ°æšä¸¾ç±»ç¼–å·çš„åœ°æ–¹ï¼Œä¸å»ºè®®ç›´æ¥ç”¨ `ordinal()` æ–¹æ³•å¾—åˆ°ç¼–å·ï¼Œå› ä¸ºè¿™ç§æ—¶å€™è¿”å›çš„å€¼å°±å’Œä»£ç ä¸­ç¼–ç çš„é¡ºåºæœ‰å…³äº†ï¼Œå¯ä»¥è€ƒè™‘é€šè¿‡è¿™ç§æ–¹å¼ï¼š\n    ```java\n    public enum Fruit {\n        APPLE(1), PEAR(2), ORANGE(3); // æ¯ä¸ªæšä¸¾å€¼çš„æ„é€ å‡½æ•°å‚æ•°\n        private final int number; // å®šä¹‰ä¸€ä¸ªå­—æ®µï¼Œç”¨äºå­˜å‚¨æ°´æœç¼–å·\n        Fruit(int num) { // æ„é€ å‡½æ•°ï¼Œç”¨äºåˆå§‹åŒ–æ¯ä¸ªæšä¸¾å€¼çš„å­—æ®µ\n            number = num;\n        }\n        public int numberOfFruit() {\n            return number;\n        }\n    }\n    ```\n  - ç‰¹å®šäºå¸¸é‡çš„æ–¹æ³•å®ç°ï¼š\n    ```java\n    public enum Operation {\n    \t\tPLUS { double apply(double x, double y) { return x + y; } },\n    \t\tMINUS { double apply(double x, double y) { return x - y; } },\n        TIMES { double apply(double x, double y) { return x * y; } },\n        DIVIDE { double apply(double x, double y) { return x / y; } };\n        abstract double apply(double x, double y);\n    }\n    ```\n  - **ç­–ç•¥æšä¸¾**ï¼š  \n     ![|561](https://img.memset0.cn/2024/12/18/WOszsFdr.png)\n\n## 3. Ch11 Inheritance and Polymorphism\n\n### 3.1. Superclasses and Subclasses\n\n- ==è¶…ç±»çš„æ„é€ å‡½æ•°æ˜¯å¦ä¼šè¢«ç»§æ‰¿ä¸ä¼šè¢« **ç»§æ‰¿(inherite)**ï¼Œä½†å¯ä»¥æ˜¾å¼æˆ–éšå¼è°ƒç”¨==ã€‚\n  - æ˜¾å¼è°ƒç”¨ï¼šå¿…é¡»ä½¿ç”¨ `super` å…³é”®å­—ã€‚\n    - ä½¿ç”¨ `super` è°ƒç”¨å¿…é¡»æ”¾åœ¨æ„é€ å‡½æ•°çš„ç¬¬ä¸€è¡Œã€‚\n    - ==ä¸èƒ½ä½¿ç”¨è¶…ç±»æ„é€ å‡½æ•°çš„åç§°æ¥è°ƒç”¨è¶…ç±»çš„æ„é€ å‡½æ•°==ã€‚\n  - å¦‚æœæœªæ˜¾å¼è°ƒç”¨ï¼Œ==ä¼šé»˜è®¤è°ƒç”¨è¶…ç±»çš„æ— å‚æ„é€ å‡½æ•°ï¼ˆæ²¡æœ‰å°±ä¼š CEï¼‰ï¼Œä¸”é¡ºåºåœ¨å­ç±»æ„é€ å‡½æ•°ä¹‹å‰==ã€‚\n- ä½¿ç”¨ `super.methodName()` è°ƒç”¨è¶…ç±»çš„æ–¹æ³•ã€‚\n- è°ƒç”¨é¡ºåºç±»åˆå§‹åŒ–æ—¶æ„é€ å‡½æ•°çš„è°ƒç”¨é¡ºåºï¼š\n  - åˆå§‹åŒ–å¯¹è±¡çš„å­˜å‚¨ç©ºé—´ä¸ºé»˜è®¤å€¼ï¼ˆ`0`ã€`null` æˆ– `false`ï¼‰ã€‚\n  - è°ƒç”¨çˆ¶ç±»çš„æ„é€ å‡½æ•°ã€‚\n  - æŒ‰é¡ºåºåˆ†åˆ«è°ƒç”¨ç±»æˆå‘˜å˜é‡å’Œå®ä¾‹æˆå‘˜å˜é‡çš„åˆå§‹åŒ–è¡¨è¾¾å¼ã€‚\n  - è°ƒç”¨å­ç±»çš„æ„é€ å‡½æ•°å‰©ä½™éƒ¨åˆ†ã€‚\n- å½“å­ç±»çš„ **å®ä¾‹å˜é‡(instance variable)** å’Œè¶…ç±»çš„å˜é‡é‡åæ—¶ï¼Œ==å­ç±»å˜é‡ä¼šéšè—è¶…ç±»å˜é‡==ã€‚\n  - æ³¨æ„ï¼Œè¿™å¹¶ä¸ä»¥ä¸ºç€è¶…ç±»å˜é‡ä¼šè¢«è¦†ç›–ï¼Œé‡åçš„å®ä¾‹å˜é‡å’Œç±»å˜é‡æ˜¯ä¸¤ä¸ªä¸åŒçš„å˜é‡ï¼Œéƒ½ä¼šè¢«ä¿ç•™ã€‚\n  - å¯ä»¥ä½¿ç”¨ `super.variableName` è®¿é—®è¢«éšè—çš„è¶…ç±»å˜é‡ã€‚\n  - å¦‚æœæˆ‘ä»¬æŠŠå­ç±»å®ä¾‹èµ‹å€¼ç»™è¶…ç±»å¯¹è±¡çš„å¼•ç”¨ï¼Œä¹Ÿä¼šè®¿é—®åˆ°è¢«éšè—çš„ç±»å˜é‡ã€‚\n- ==ç»§æ‰¿æ—¶ä¸è¶…ç±»é‡åçš„é™æ€æ–¹æ³•å’Œé™æ€å˜é‡çš„å¤„ç†ï¼Œéƒ½éµå¾ªç±»ä¼¼çš„æ–¹å¼==ã€‚\n\n### 3.2. Overriding\n\n- å­ç±»å¯ä»¥é‡å†™ä»è¶…ç±»ç»§æ‰¿çš„æ–¹æ³•ï¼Œè¿™ç§ç‰¹æ€§ç§°ä¸º **é‡å†™(overriding)**ã€‚\n- **è¦æ±‚**ï¼š\n  - æ–¹æ³•ç­¾åï¼ˆæ–¹æ³•åå’Œå‚æ•°åˆ—è¡¨ï¼‰å¿…é¡»å®Œå…¨ç›¸åŒã€‚\n  - åªæœ‰å¯è®¿é—®çš„æ–¹æ³•æ‰èƒ½è¢«é‡å†™ï¼ˆå³ private çš„æ–¹æ³•ä¸èƒ½è¢«é‡å†™ï¼‰ã€‚\n    - å¦åˆ™å…¶å®æ˜¯å®ç°äº†ä¸¤ä¸ªæ— å…³çš„æ–¹æ³•ã€‚\n  - ==é™æ€æ–¹æ³•ä¸èƒ½è¢«é‡å†™ï¼Œåªèƒ½è¢«éšè—==ã€‚\n  - ==é‡å†™åçš„æ–¹æ³•ä¸èƒ½æ¯”è¢«é‡å†™çš„æ–¹æ³•æ‹¥æœ‰æ›´ä¸¥æ ¼çš„è®¿é—®æƒé™==ã€‚\n- `@Override` æ³¨è§£ï¼š==ç¼–è¯‘å™¨ä¼šè´Ÿè´£æ£€æŸ¥æ˜¯å¦çœŸçš„é‡å†™äº†æ–¹æ³•ï¼Œå¦åˆ™ä¼šæŠ¥ CE==ã€‚æ¨èå§‹ç»ˆä½¿ç”¨ `@Override` æ³¨è§£ï¼Œå°½ç®¡å®ƒä¸æ˜¯å¿…é¡»çš„ã€‚\n- ==é‡è½½çš„æ–¹æ³•é€‰æ‹©æ˜¯é™æ€ç»‘å®šçš„ï¼ˆcompile-timeï¼‰ï¼Œ è€Œé‡å†™çš„æ–¹æ³•é€‰æ‹©æ˜¯åŠ¨æ€ç»‘å®šçš„ï¼ˆruntimeï¼‰==ã€‚\n- ==åœ¨çˆ¶ç±»æ„é€ å‡½æ•°ä¸­è°ƒç”¨è¢«é‡å†™çš„æ–¹æ³•ï¼Œè°ƒç”¨çš„å®é™…ä¸Šæ˜¯å­ç±»çš„é‡å†™åçš„æ–¹æ³•==ã€‚ï¼ˆè¿™ä¹Ÿæ˜¯åŠ¨æ€ç»‘å®šæœºåˆ¶çš„ä¸€ä¸ªä½“ç°ã€‚ï¼‰\n  - æ³¨æ„ï¼šå¦‚æœçˆ¶ç±»ä¸­çš„æ–¹æ³•æ˜¯ `private` çš„è¯ï¼Œé‚£è¿™é‡Œå®é™…ä¸Šæ²¡æœ‰å‘ç”Ÿé‡å†™ï¼Œè°ƒç”¨çš„è¿˜æ˜¯çˆ¶ç±»çš„æ–¹æ³•ã€‚\n\n### 3.3. Polymorphism\n\n- **å¤šæ€(polymorphism)**ï¼šä¸€ä¸ªè¶…ç±»ç±»å‹çš„å˜é‡å¯ä»¥å¼•ç”¨å­ç±»çš„å¯¹è±¡ã€‚\n  - ç¤ºä¾‹ï¼š\n    ```java\n    GeometricObject obj = new Circle();\n    ```\n- é€‰ç”¨çš„æ–¹æ³•è°ƒç”¨ï¼ˆå¦‚æœå­˜åœ¨é‡å†™çš„æƒ…å†µï¼Œåˆ™ï¼‰åœ¨è¿è¡Œæ—¶è§£æï¼Œå°±æ˜¯ä¸Šæ–‡æåˆ°çš„åŠ¨æ€ç»‘å®šæœºåˆ¶ã€‚\n\n### 3.4. Generic Programming & Object Casting\n\n- **æ³›å‹ç¼–ç¨‹(generic programming)**ï¼šå…è®¸æˆ‘ä»¬ç¼–å†™å¯ä»¥å¤„ç†å¤šç§ç±»å‹çš„ä»£ç ï¼Œè€Œä¸éœ€è¦ä¸ºæ¯ç§ç±»å‹å•ç‹¬ç¼–å†™ä»£ç ï¼›å¤šæ€æ˜¯å®ç°æ³›å‹ç¼–ç¨‹çš„åŸºç¡€ã€‚æˆ‘\n- **å‘ä¸Šè½¬æ¢(upcasting)**ï¼šå­ç±»å¯¹è±¡å¯ä»¥éšå¼è½¬æ¢ä¸ºè¶…ç±»ç±»å‹ã€‚\n  - ç¤ºä¾‹ï¼š\n    ```java\n    Object o = new Student();\n    ```\n- **å‘ä¸‹è½¬æ¢(downcasting)**ï¼šè¶…ç±»è½¬åŒ–ä¸ºå­ç±»ç±»å‹æ—¶å¿…é¡»æ˜¾å¼è½¬æ¢ã€‚\n  - å‘ä¸‹è½¬æ¢å¹¶ä¸æ€»æ˜¯æˆåŠŸï¼Œ==åœ¨ç±»å‹è½¬æ¢å¤±è´¥æ—¶ä¼šæŠ›å‡ºä¸€ä¸ªå¼‚å¸¸==ã€‚è€Œä¸æ˜¯åƒ C++ çš„ `dynamic_cast` ä¸€æ ·è¿”å›ä¸€ä¸ªç©ºæŒ‡é’ˆã€‚\n  - å¯ä»¥ä½¿ç”¨ `instanceof` æ£€æŸ¥èƒ½å¦è¿›è¡Œç±»å‹è½¬æ¢ã€‚\n  - ç¤ºä¾‹ï¼š\n    ```java\n    Student s = (Student) o;\n    ```\n- **`instanceof` è¿ç®—ç¬¦**ï¼šç”¨äºæµ‹è¯•å¯¹è±¡æ˜¯å¦æ˜¯æŸä¸ªç±»çš„å®ä¾‹ã€‚\n  - ç¤ºä¾‹ï¼š\n    ```java\n    if (o instanceof Circle) {\n        Circle c = (Circle) o;\n    }\n    ```\n\n### 3.5. `equals` method & `==` operator\n\n- `==` è¿ç®—ç¬¦ç”¨äºæ¯”è¾ƒä¸¤ä¸ªå¯¹è±¡çš„å¼•ç”¨æ˜¯å¦ç›¸ç­‰ï¼Œå³æ¯”è¾ƒä¸¤ä¸ªå¯¹è±¡æ˜¯å¦æŒ‡å‘åŒä¸€ä¸ªå†…å­˜åœ°å€ã€‚\n  - `==` åªèƒ½ç”¨äºæ¯”è¾ƒåŸºæœ¬ç±»å‹çš„å†…å®¹æ˜¯å¦ç›¸åŒï¼Œåœ¨æ¯”è¾ƒå¯¹è±¡å¼•ç”¨ç±»å‹æ—¶ï¼Œåªä¼šæ¯”è¾ƒå¼•ç”¨æ˜¯å¦ç›¸åŒè€Œä¸ä¼šæ¯”è¾ƒå†…å®¹ã€‚\n- `equals` æ–¹æ³•ç”¨äºæ¯”è¾ƒä¸¤ä¸ªå¯¹è±¡çš„å†…å®¹æ˜¯å¦ç›¸ç­‰ï¼Œå³æ¯”è¾ƒä¸¤ä¸ªå¯¹è±¡çš„å±æ€§å€¼æ˜¯å¦ç›¸åŒã€‚\n  - å¯¹äºè‡ªå·±å®šä¹‰çš„ç±»ï¼Œè¿™éœ€è¦é‡å†™ `equals` æ–¹æ³•ã€‚\n  - **é‡å†™ `equals` æ–¹æ³•**ã€‚\n    - ==`Object.equals` æ–¹æ³•çš„å‚æ•°æ˜¯ `Object` ç±»å‹ï¼Œä¸ºäº†æˆåŠŸé‡å†™æˆ‘ä»¬éœ€è¦ä¿æŒè¿™ä¸€æ–¹æ³•ç­¾åç›¸åŒï¼Œå¹¶ç”¨ `instanceof` æ£€æŸ¥å‚æ•°æ˜¯å¦æ˜¯å½“å‰ç±»çš„å®ä¾‹==ã€‚\n    - ```java\n                      public class Bigram {\n                          private final char first;\n                          private final char second;\n                          public Bigram(char first, char second) {\n                              this.first = first;\n                              this.second = second;\n                          }\n                          public boolean equals(Bigram b) { // é”™è¯¯\n                              return b.first == first && b.second == second;\n                          }\n                          @Override public boolean equals(Object o) { // æ­£ç¡® (éœ€è¦ä¸ Object ç±»çš„ equals æ–¹æ³•ç­¾åç›¸åŒ)\n                              if (!(o instanceof Bigram)) return false;\n                              Bigram b = (Bigram) o;\n                              return b.first == first && b.second == second;\n                          }\n                      }\n      ```\n\n### 3.6. The `final` Modifier\n\n- **`final` ç±»**ï¼šä¸èƒ½è¢«ç»§æ‰¿ã€‚\n- **`final` æ–¹æ³•**ï¼šä¸èƒ½è¢«å­ç±»é‡å†™ã€‚\n- **`final` å˜é‡**ï¼šä¸èƒ½è¢«ä¿®æ”¹ã€‚\n  - å¦‚æœæ˜¯åŸºæœ¬ç±»å‹å˜é‡ï¼Œå¯ä»¥ç†è§£ä¸ºç±»ä¼¼å¸¸é‡çš„æ¦‚å¿µï¼ˆåªèƒ½è¢«èµ‹å€¼ä¸€æ¬¡ï¼Œä¹‹åä¸èƒ½è¢«ä¿®æ”¹ï¼‰ã€‚\n  - å¦‚æœæ˜¯å¯¹è±¡å¼•ç”¨å˜é‡ï¼Œåˆ™åªæ˜¯å¼•ç”¨çš„åœ°å€æ˜¯å¸¸é‡ï¼Œè€Œå¯¹è±¡å†…éƒ¨çš„å†…å®¹æ˜¯å¯ä»¥æ›´æ”¹çš„ã€‚\n\n### 3.7. Review: Handling Objects\n\n- **ç±»åŠ è½½è¿‡ç¨‹**ï¼šç¬¬ä¸€æ¬¡ä½¿ç”¨ç±»æ—¶ï¼Œæ‰ä¼šåŠ è½½ç±»\n  - åˆ†é…å†…å­˜ä¿å­˜ç±»çš„ä¿¡æ¯\n  - ç»™ç±»å˜é‡ï¼ˆé™æ€å˜é‡ï¼‰èµ‹é»˜è®¤å€¼\n  - åŠ è½½çˆ¶ç±»\n  - è®¾ç½®çˆ¶å­å…³ç³»\n  - æ‰§è¡Œç±»åˆå§‹åŒ–ä»£ç \n    - å®šä¹‰é™æ€å˜é‡æ—¶çš„èµ‹å€¼è¯­å¥\n    - é™æ€åˆå§‹åŒ–ä»£ç å—\n- **å¯¹è±¡åˆ›å»ºè¿‡ç¨‹**ï¼š\n  - åˆ†é…å†…å­˜\n  - å¯¹æ‰€æœ‰å®ä¾‹å˜é‡èµ‹é»˜è®¤å€¼ï¼ˆ`0`ã€`null` æˆ– `false`ï¼‰\n  - æ‰§è¡Œå®ä¾‹åˆå§‹åŒ–ä»£ç \n- **æ–¹æ³•è°ƒç”¨è¿‡ç¨‹**ï¼š\n  - ç”±äºæ˜¯åŠ¨æ€ç»‘å®šï¼Œæ‰€ä»¥è¿™ä¸€å®ä¾‹æ˜¯ä»€ä¹ˆç±»å°±ä»ä»€ä¹ˆç±»å¼€å§‹æ‰¾æ–¹æ³•ã€‚\n  - å¦‚æœåœ¨å½“å‰ç±»ä¸­æ‰¾ä¸åˆ°ï¼Œå°±ä¾æ¬¡å‘çˆ¶ç±»å¯»æ‰¾ï¼Œç›´åˆ°æ‰¾åˆ°ä¸ºæ­¢ã€‚\n  - å¦‚æœæ‰¾ä¸åˆ°æ–¹æ³•ï¼Œåˆ™æŠ¥ `NoSuchMethodError` é”™è¯¯ã€‚\n  - å¦‚æœå­˜åœ¨é‡è½½çš„æƒ…å†µï¼Œåˆ™ä¼šæ ¹æ®å‚æ•°é“¾è¡¨é€‰æ‹©æœ€åŒ¹é…çš„æ–¹æ³•ï¼Œå¦‚æœåŒæ—¶å­˜åœ¨å¤šä¸ªæœ€ä¼˜åŒ¹é…ï¼Œåˆ™ä¼šæŠ¥é”™ï¼ˆä¸è¿‡éœ€è¦æ³¨æ„ï¼Œå¯èƒ½çˆ¶ç±»çš„æ–¹æ³•è¢«å­ç±»é‡å†™äº†ï¼Œè¿™ç§æ—¶å€™åªä¼šæ‰¾åˆ°å­ç±»çš„æ–¹æ³•ï¼‰ã€‚\n- å¦‚ä½•åº”å¯¹ç»§æ‰¿çš„åŒé¢æ€§?\n  - é¿å…ä½¿ç”¨ç»§æ‰¿ï¼š\n    - ä½¿ç”¨ `final` é™åˆ¶ç»§æ‰¿ã€‚\n    - ä¼˜å…ˆä½¿ç”¨ç»„åˆè€Œéç»§æ‰¿ã€‚\n  - æ­£ç¡®ä½¿ç”¨ç»§æ‰¿ï¼š\n    - ç¡®ä¿è¶…ç±»è®¾è®¡ç¨³å®šã€‚\n    - ä½¿ç”¨æ¥å£ä»£æ›¿ç»§æ‰¿ã€‚\n\n### 3.8. Decorator Pattern\n\n- **è£…é¥°å™¨æ¨¡å¼(decorator pattern)**ï¼šå…è®¸æˆ‘ä»¬é€šè¿‡å°†å¯¹è±¡æ”¾å…¥åŒ…å«è¡Œä¸ºçš„ç‰¹æ®Šå°è£…å¯¹è±¡ä¸­æ¥ä¸ºåŸå¯¹è±¡ç»‘å®šæ–°çš„è¡Œä¸ºã€‚\n\n### 3.9. Nested Classes\n\n- **åµŒå¥—ç±»(nested class)**ï¼šåœ¨ä¸€ä¸ªç±»ä¸­åµŒå¥—å¦ä¸€ä¸ªç±»ã€‚å¤–é¢çš„ç±»å« **å¤–éƒ¨ç±»(outer class)**ï¼Œé‡Œé¢çš„ç±»å« **å†…éƒ¨ç±»(inner class)**ã€‚\n  - å†…éƒ¨ç±»å’Œå¤–éƒ¨ç±»å¯ä»¥äº’ç›¸è®¿é—®å¯¹æ–¹çš„ç§æœ‰æˆå‘˜å˜é‡å’Œæ–¹æ³•ï¼Œå¤šä¸ªå†…éƒ¨ç±»å¯ä»¥ç›¸äº’è®¿é—®å¯¹æ–¹çš„ç§æœ‰æˆå‘˜å˜é‡å’Œæ–¹æ³•ã€‚\n  - å†…éƒ¨ç±»å¯ä»¥å£°æ˜ä¸º private ä»è€Œå®ç°å¯¹å¤–å®Œå…¨éšè—ï¼Œæ‹¥æœ‰æ›´å¥½çš„å°è£…æ€§ã€‚\n- å†…éƒ¨ç±»éœ€è¦è°ƒç”¨æ–¹æ³•æ—¶ï¼š\n  - é¦–å…ˆæ£€æŸ¥å†…éƒ¨ç±»æ˜¯å¦æœ‰è¯¥æ–¹æ³•ï¼Œå¦‚æœæœ‰å°±è°ƒç”¨ã€‚\n  - å¦‚æœå†…éƒ¨ç±»æ²¡æœ‰è¯¥æ–¹æ³•ï¼Œåˆ™æ£€æŸ¥å¹¶è°ƒç”¨å¤–éƒ¨ç±»çš„æ–¹æ³•ã€‚\n  - ==å¦‚æœå†…éƒ¨ç±»å’Œå¤–éƒ¨ç±»çš„æ–¹æ³•é‡åä¸”æƒ³è¦è°ƒç”¨å¤–éƒ¨ç±»çš„æ–¹æ³•ï¼Œéœ€è¦ä½¿ç”¨ `OuterClass.this.methodName()`==ã€‚\n  - ==å¦‚æœå†…éƒ¨ç±»å’Œå¤–éƒ¨ç±»çš„æ–¹æ³•é‡åä½†å‚æ•°åˆ—è¡¨ä¸åŒï¼Œåˆ™ Java ä¼šæ ¹æ®å‚æ•°åˆ—è¡¨é€‰æ‹©æœ€åŒ¹é…çš„æ–¹æ³•ï¼Œæ³¨æ„è¿™ä¸€è¿‡ç¨‹åªåœ¨å†…éƒ¨ç±»ä¸­è¿›è¡Œï¼Œè€Œä¸ä¼šè·¨è¶Šåˆ°å¤–éƒ¨ç±»çš„æ–¹æ³•==ã€‚\n- å››ç§å†…éƒ¨ç±»ï¼š\n  - **é™æ€å†…éƒ¨ç±»(static inner class)**ï¼š\n    - ä½¿ç”¨ `static` ä¿®é¥°ã€‚\n    - å¯ä»¥è®¿é—®å¤–éƒ¨ç±»çš„é™æ€æˆå‘˜å˜é‡å’Œé™æ€æ–¹æ³•ï¼Œä½†æ˜¯ä¸èƒ½è®¿é—®å¤–éƒ¨ç±»çš„å®ä¾‹æˆå‘˜å˜é‡å’Œå®ä¾‹æ–¹æ³•ã€‚\n    - å¯ä»¥åœ¨å¤–éƒ¨ç±»å¤–è¢«ä½¿ç”¨ï¼Œä¾‹ï¼š`new OuterClass.StaticInnerClass()`ã€‚\n  - **æˆå‘˜å†…éƒ¨ç±»(member inner class)**ï¼š\n    - æ²¡æœ‰ `static` ä¿®é¥°ã€‚\n    - æˆå‘˜å†…éƒ¨ç±»éœ€è¦ä¸ä¸€ä¸ªå¤–éƒ¨ç±»å®ä¾‹ç»‘å®šï¼Œå¯ä»¥è®¿é—®å¤–éƒ¨ç±»çš„æ‰€æœ‰æˆå‘˜å˜é‡å’Œæ–¹æ³•ã€‚\n    - åœ¨å¤–éƒ¨ç±»å¤–ä½¿ç”¨æ—¶éœ€è¦å¤–éƒ¨ç±»å®ä¾‹æ‰èƒ½åˆ›å»ºã€‚`outer.new InnerClass()`ã€‚\n  - **æ–¹æ³•å†…éƒ¨ç±»(local class)**ï¼š\n    - å®šä¹‰åœ¨æ–¹æ³•ä¸­ä¸”åªèƒ½åœ¨æ–¹æ³•ä¸­ä½¿ç”¨ã€‚\n    - æ–¹æ³•å†…éƒ¨ç±»ä¹ŸåŒºåˆ†æ˜¯å¦æ˜¯ `static` ä¿®é¥°çš„ï¼Œå¦‚æœæ˜¯ `static` åˆ™åªèƒ½è®¿é—®å¤–éƒ¨ç±»çš„é™æ€æˆå‘˜ï¼Œå¦åˆ™å¯ä»¥è®¿é—®æ‰€æœ‰æˆå‘˜ã€‚\n    - ==æ–¹æ³•å†…éƒ¨ç±»è®¿é—®æ–¹æ³•ä¸­çš„å‚æ•°å’Œå±€éƒ¨å˜é‡æ—¶ï¼Œè¿™äº›å˜é‡éœ€è¦å£°æ˜ä¸º `final` çš„==ã€‚è¿™äº›å˜é‡å®é™…ä¸Šä¼šåœ¨æ–¹æ³•å†…éƒ¨ç±»åˆ›å»ºæ—¶è¢«å¤åˆ¶ä¸€ä»½ä½œä¸ºæ–¹æ³•å†…éƒ¨ç±»è‡ªå·±çš„æˆå‘˜å˜é‡æ‰€ä½¿ç”¨ã€‚\n  - **åŒ¿åå†…éƒ¨ç±»(anonymous class)**ï¼š\n    - åŒ¿åå†…éƒ¨ç±»æ²¡æœ‰å•ç‹¬çš„ç±»å®šä¹‰ï¼Œè€Œæ˜¯åœ¨åˆ›å»ºå¯¹è±¡çš„åŒæ—¶å®šä¹‰ç±»ã€‚\n    - åŒ¿åå†…éƒ¨ç±»æ²¡æœ‰æ„é€ å‡½æ•°ï¼Œä½†å¯ä»¥é€šè¿‡å‚æ•°åˆ—è¡¨è°ƒç”¨å¯¹åº”çš„çˆ¶ç±»æ„é€ å‡½æ•°ã€‚\n    - å’Œæ–¹æ³•å†…éƒ¨ç±»ç›¸åŒï¼Œå¯ä»¥è®¿é—®å¤–éƒ¨ç±»çš„æ‰€æœ‰å˜é‡å’Œæ–¹æ³•ï¼Œä¹Ÿå¯ä»¥è®¿é—®æ–¹æ³•ä¸­çš„ `final` å‚æ•°å’Œå±€éƒ¨å˜é‡ã€‚\n\n## 4. Ch12 Abstract Classes and Interfaces\n\n### 4.1. Abstract Classes\n\n- **æŠ½è±¡ç±»(abstract class)** æ˜¯ç›¸å¯¹äº **å…·ä½“ç±»(concrete class)** è€Œè¨€çš„ï¼š\n  - æŠ½è±¡ç±»æ˜¯ä¸€ç§ä¸èƒ½ç›´æ¥å®ä¾‹åŒ–çš„ç±»ï¼ˆå³ä¸èƒ½é€šè¿‡ new æ“ä½œåˆ›å»ºå¯¹è±¡ï¼‰ã€‚\n  - æŠ½è±¡ç±»å¯ä»¥åŒ…å«æŠ½è±¡æ–¹æ³•ï¼ˆæ²¡æœ‰å®ç°çš„æ–¹æ³•ï¼‰å’Œå…·ä½“æ–¹æ³•ï¼ˆæœ‰å®ç°çš„æ–¹æ³•ï¼‰ã€‚éæŠ½è±¡ç±»ä¸èƒ½åŒ…å«æŠ½è±¡æ–¹æ³•ã€‚\n  - ==æŠ½è±¡æ–¹æ³•å¿…é¡»åœ¨å­ç±»ä¸­è¢«å®Œå…¨å®ç°ï¼Œå¦åˆ™å­ç±»ä¹Ÿå¿…é¡»æ˜¯æŠ½è±¡ç±»==ã€‚\n- å³ä½¿çˆ¶ç±»æ˜¯å…·ä½“ç±»ï¼Œå­ç±»ä¹Ÿå¯ä»¥æ˜¯æŠ½è±¡ç±»ã€‚\n- å³ä½¿çˆ¶ç±»ä¸­å®ç°äº†æŸä¸€æ–¹æ³•ï¼Œå­ç±»ä¹Ÿå¯ä»¥é‡å†™è¯¥æ–¹æ³•ä¸ºæŠ½è±¡æ–¹æ³•ã€‚\n- ==æŠ½è±¡ç±»ä¸èƒ½å®ä¾‹åŒ–ï¼Œä½†å¯ä»¥ä½œä¸ºä¸€ç§æ•°æ®ç±»å‹ä½¿ç”¨==ã€‚ä¾‹å¦‚å¯ä»¥å®šä¹‰ä¸€ä¸ªæŠ½è±¡ç±»æ•°ç»„ï¼Œç”¨äºå­˜æ”¾å…¶ä½œä¸ºå…·ä½“ç±»çš„å­ç±»å¯¹è±¡ã€‚\n\n### 4.2. Interfaces\n\n- **æ¥å£(interface)** æ˜¯ä¸€ç§ç‰¹æ®Šçš„ç±»çš„ç»“æ„ï¼Œç”¨äºå®šä¹‰ç±»çš„è¡Œä¸ºè§„èŒƒã€‚\n  - ä¸€ä¸ªç±»åªèƒ½ç»§æ‰¿ä¸€ä¸ªæŠ½è±¡ç±»ï¼Œä½†æ˜¯==ä¸€ä¸ªç±»å¯ä»¥å®ç°å¤šä¸ªæ¥å£==ã€‚\n    - ==å¦‚æœå¤šä¸ªæ¥å£ä¸­å­˜åœ¨ç›¸åŒçš„æ–¹æ³•ç­¾åï¼Œåˆ™ä¼šè¢«ç¼–è¯‘å™¨æ£€æµ‹å¹¶æŠ¥ CE==ã€‚\n  - æ¥å£ä¸­åªèƒ½åŒ…å«å¸¸é‡å’ŒæŠ½è±¡æ–¹æ³•ã€‚\n    - æ‰€æœ‰æ–¹æ³•é»˜è®¤æ˜¯ `public abstract` çš„ã€‚\n    - æ‰€æœ‰æˆå‘˜å˜é‡é»˜è®¤æ˜¯ `public static final` çš„ã€‚\n  - æ¥å£ä¸­ä¸èƒ½æœ‰æ„é€ å™¨ã€‚\n  - ï¼ˆJava 8 æ–°å¢ï¼‰é™æ€æ–¹æ³•ï¼š\n    - å±äºæ¥å£æœ¬èº«ï¼Œè€Œä¸æ˜¯å®ç°ç±»ã€‚\n    - ==åªèƒ½é€šè¿‡æ¥å£åè°ƒç”¨ï¼Œè€Œä¸èƒ½é€šè¿‡å®ç°ç±»æˆ–å¯¹è±¡è°ƒç”¨==ã€‚\n  - ï¼ˆJava 8 æ–°å¢ï¼‰é»˜è®¤æ–¹æ³•ï¼š\n    - é€šè¿‡ `default` å…³é”®å­—ä¿®é¥°ã€‚\n    - æä¾›äº†æ¥å£æ–¹æ³•çš„é»˜è®¤å®ç°ï¼Œå®ç°ç±»å¯ä»¥é€‰æ‹©é‡å†™è¯¥é»˜è®¤æ–¹æ³•ã€‚\n  - ï¼ˆJava 9 æ–°å¢ï¼‰ç§æœ‰æ–¹æ³•ï¼š\n    - åªèƒ½åœ¨æ¥å£ä¸­è¢«å…¶ä»–é»˜è®¤æ–¹æ³•å’Œæˆ–é™æ€æ–¹æ³•è°ƒç”¨ï¼Œä¸èƒ½è¢«å®ç°ç±»è®¿é—®ã€‚\n  - ï¼ˆJava 9 æ–°å¢ï¼‰ç§æœ‰é™æ€æ–¹æ³•ï¼š\n    - åªèƒ½åœ¨æ¥å£ä¸­è¢«å…¶ä»–é™æ€æ–¹æ³•è°ƒç”¨ï¼Œä¸èƒ½è¢«å®ç°ç±»æˆ–é»˜è®¤æ–¹æ³•è®¿é—®ã€‚\n  - æ¥å£å¯ä»¥é€šè¿‡ `extends` å…³é”®è¯ç»§æ‰¿å¦ä¸€ä¸ªæ¥å£ã€‚\n- ç›¸æ¯”äºæŠ½è±¡ç±»è¢«è®¾è®¡ç”¨äºæè¿°â€œæ˜¯ä»€ä¹ˆâ€ï¼Œæ¥å£è¢«è®¾è®¡ç”¨äºæè¿°â€œèƒ½åšä»€ä¹ˆâ€ã€‚\n  - å¸¸ç”¨çš„æ¥å£å¦‚ï¼š`Comparable`ã€`Cloneable`ã€‚\n- ç±»ä¼¼äºæŠ½è±¡ç±»ï¼Œæ¥å£ä¸èƒ½è¢«å®ä¾‹åŒ–ï¼Œä½†å¯ä»¥ä½œä¸ºæ•°æ®ç±»å‹ä½¿ç”¨ã€‚\n- ç¤ºä¾‹ï¼šè‡ªå®šä¹‰ç±»å®ç° `Cloneable` æ¥å£ï¼Œç”¨äºæ ‡è®°ç±»çš„å¯¹è±¡å¯è¢«å…‹éš†ã€‚\n  ```java\n  @Override\n  public Object clone() {\n      try {\n          return super.clone();\n      } catch (CloneNotSupportedException ex) {\n          return null;\n      }\n  }\n  ```\n","publishedTitle":"ã€ŒJava åº”ç”¨æŠ€æœ¯ã€II. Java é¢å‘å¯¹è±¡è®¾è®¡"}},{"id":"9baa1919-5953-5e15-ae74-4b35b71654ae","fields":{"slug":"/course/java/note/3/","plainText":"\n> æœ¬ç¯‡ç¬”è®°ä¸»è¦ä»‹ç»äº† Java çš„å…­ä¸ªé«˜çº§ç‰¹æ€§ï¼šå¼‚å¸¸å¤„ç†ã€IOã€æ³›å‹ã€é›†åˆæ¡†æ¶ã€å¤šçº¿ç¨‹ä»¥åŠ Lambda è¡¨è¾¾å¼ä¸æµå¼å¤„ç†ã€‚åœ¨å¼‚å¸¸å¤„ç†éƒ¨åˆ†ï¼Œè¯¦ç»†è®²è§£äº†å¼‚å¸¸çš„åˆ†ç±»ã€æ•è·ä¸å¤„ç†æœºåˆ¶ï¼›IO éƒ¨åˆ†ä»‹ç»äº†æ–‡æœ¬å’ŒäºŒè¿›åˆ¶çš„è¾“å…¥è¾“å‡ºæ“ä½œï¼›æ³›å‹éƒ¨åˆ†é˜è¿°äº†æ³›å‹çš„ä½¿ç”¨è§„åˆ™ä¸é™åˆ¶ï¼›é›†åˆæ¡†æ¶éƒ¨åˆ†ç³»ç»Ÿåœ°ä»‹ç»äº† Java å¸¸ç”¨çš„é›†åˆç±»ï¼›å¤šçº¿ç¨‹éƒ¨åˆ†åŒ…å«äº†çº¿ç¨‹çš„åˆ›å»ºã€æ§åˆ¶ä¸åŒæ­¥æœºåˆ¶ï¼›æœ€åçš„ Lambda ä¸æµå¼å¤„ç†éƒ¨åˆ†åˆ™ä»‹ç»äº† Java çš„å‡½æ•°å¼ç¼–ç¨‹ç‰¹æ€§ã€‚<small style=\"font-style: italic; opacity: 0.5\">ï¼ˆç”± claude-3.5-sonnet ç”Ÿæˆæ‘˜è¦ï¼‰</small>\n\n<!-- more -->\n\n## 1. Ch13 Exception Handling and Text IO\n\n### 1.1. Exceptions\n\n- **å¼‚å¸¸(exception)**Â  æ˜¯ç¨‹åºè¿è¡Œæ—¶å‘ç”Ÿçš„é”™è¯¯äº‹ä»¶ï¼Œå¯èƒ½å¯¼è‡´ç¨‹åºæ— æ³•æ­£å¸¸è¿è¡Œã€‚\n- å¸¸è§çš„å¼‚å¸¸ï¼š\n  - `ArithmeticException`ï¼šé™¤é›¶é”™è¯¯ã€‚\n  - `InputMismatchException`ï¼šè¾“å…¥æ•°æ®ç±»å‹ä¸åŒ¹é…ã€‚\n  - `NullPointerException`ï¼šè®¿é—®æœªåˆå§‹åŒ–çš„å¯¹è±¡ã€‚\n- **å¼‚å¸¸åˆ†ç±»**ï¼š\n  - ![|576](https://img.memset0.cn/2024/12/22/3gCP2gwM.png)\n  - ä¸ŠåŠéƒ¨åˆ†çš„ `Exception` æ˜¯ç¨‹åºçº§é”™è¯¯ï¼Œå¯ä»¥æ•è·å¹¶å¤„ç†ã€‚\n    - è¿è¡Œæ—¶å¼‚å¸¸ï¼ˆ`RuntimeException`ï¼‰é€šå¸¸ç”±é€»è¾‘é”™è¯¯å¼•å‘ï¼Œå±äº **éæ£€æŸ¥å‹å¼‚å¸¸(unchecked exception)**ã€‚\n      - ä¸éœ€è¦å¼ºåˆ¶æ•è·ï¼Œé€šå¸¸ç”±é€»è¾‘é”™è¯¯å¼•å‘ã€‚\n    - éè¿è¡Œæ—¶å¼‚å¸¸ï¼ˆå¦‚ Â `IOException` ç­‰ï¼‰éœ€è¦æ˜¾å¼å¤„ç†ï¼Œå±äº **æ£€æŸ¥å‹å¼‚å¸¸(checked exception)**ã€‚\n      - ==ç¼–è¯‘å™¨å¼ºåˆ¶ç¨‹åºå‘˜æ£€æŸ¥å¹¶å¤„ç†==ï¼Œå³ç¨‹åºå‘˜åº”è¯¥ä½¿ç”¨ä½¿ç”¨ `try-catch` å—è¿›è¡Œæ•è·è¿™äº›å¼‚å¸¸å¹¶è¿›è¡Œæ“ä½œã€‚\n  - ä¸‹åŠéƒ¨åˆ†çš„ `Error` æ˜¯ç³»ç»Ÿçº§é”™è¯¯ï¼Œç”± JVM æ£€æµ‹ï¼Œé€šå¸¸ä¸å¯æ¢å¤ï¼Œæ¯”å¦‚å†…å­˜ä¸è¶³ã€‚\n- **æŠ›å‡ºå¼‚å¸¸**ï¼šç”¨ `throw` å…³é”®è¯æŠ›å‡ºå¼‚å¸¸ç¤ºä¾‹ï¼Œå¼‚å¸¸ç¤ºä¾‹é€šå¸¸ä½¿ç”¨ `new` è¿ç®—è¿›è¡Œåˆ›å»ºã€‚\n  - è¯­æ³•ï¼š`throw new TheException();`\n- **å£°æ˜å¼‚å¸¸**ï¼šå®šä¹‰æ–¹æ³•æ—¶ç”¨ `throws` å…³é”®è¯å£°æ˜å¯èƒ½æŠ›å‡ºçš„å¼‚å¸¸ï¼Œå¤šä¸ªå¼‚å¸¸ä¹‹é—´ç”¨é€—å·éš”å¼€ã€‚\n  - ==ä½¿ç”¨è¿™ç§æ–¹æ³•å£°æ˜çš„å¼‚å¸¸æ˜¯æ£€æŸ¥å‹å¼‚å¸¸ï¼Œå¿…é¡»åœ¨è°ƒç”¨è¯¥æ–¹æ³•çš„ä»£ç ä¸­è¿›è¡Œæ˜¾ç¤ºæ•è·ï¼Œå¦åˆ™ä¼šæŠ¥ CE==ã€‚\n  - è¯­æ³•ï¼š`public void myMethod() throws IOException`\n  - è°ƒç”¨æ—¶ï¼Œå¿…é¡»ç”¨ï¼š`try { } catch(IOException ex) { }` æ¥å¤„ç†å¯èƒ½æŠ›å‡ºçš„å¼‚å¸¸ã€‚\n\n### 1.2. Exception Handling\n\n- ç”¨ `try-catch` å—æ•è·å¼‚å¸¸ã€‚\n  - è¯­æ³•ï¼š`try { } catch(ExceptionType ex) { }`\n- `finally` å—ï¼š\n  - `finally` å—ä¸­çš„ä»£ç æ— è®ºæ˜¯å¦å‘ç”Ÿå¼‚å¸¸éƒ½ä¼šæ‰§è¡Œã€‚\n  - ä½¿ç”¨ `finally` å—ä¸åœ¨ `try-catch` å—ä¹‹åè·Ÿè¯­å¥çš„åŒºåˆ«æ—¶ï¼š==å¦‚æœåœ¨ `catch` å—ä¸­æŠ›å‡ºå¼‚å¸¸ï¼ˆæˆ–è€… return ç­‰æƒ…å†µï¼‰ï¼Œåˆ™ `try-catch` å—ä¹‹åçš„ä»£ç ä¸ä¼šæ‰§è¡Œï¼Œä½†æ˜¯ `finally` ä¸­çš„ä»£ç å§‹ç»ˆä¼šæ‰§è¡Œ==ã€‚  \n     ![|494](https://img.memset0.cn/2024/12/22/aEfAfKjt.png)\n  - `finally` å…³é”®å­—ä¿è¯æ— è®ºç¨‹åºä½¿ç”¨ä½•ç§æ–¹å¼é€€å‡º `try-catch` å—ï¼Œ`finally` å—ä¸­çš„ä»£ç éƒ½ä¼šè¢«æ‰§è¡Œã€‚æ›´å…·ä½“çš„ï¼Œ`finally` å—ä¼šåœ¨ä»¥ä¸‹æƒ…å†µå‘ç”Ÿä¹‹åæ‰§è¡Œï¼š\n    - try å—ä¸­çš„ä»£ç æ­£å¸¸æ‰§è¡Œå®Œæ¯•ã€‚\n    - åœ¨ try å—ä¸­æŠ›å‡ºå¼‚å¸¸ã€‚\n    - åœ¨ try å—ä¸­æ‰§è¡Œ returnã€breakã€continueã€‚\n    - catch å—ä¸­ä»£ç æ‰§è¡Œå®Œæ¯•ã€‚\n    - åœ¨ catch å—ä¸­æŠ›å‡ºå¼‚å¸¸ã€‚\n    - åœ¨ catch å—ä¸­æ‰§è¡Œ returnã€breakã€continue\n  - é€šå¸¸ä½¿ç”¨ `finally` å—æ¥é‡Šæ”¾èµ„æºã€‚\n- **å¤šä¸ª `catch` å—çš„æƒ…å†µ**ï¼š\n  - æ‹¥æœ‰å¤šä¸ª `catch` å—æ—¶ï¼ŒJVM ä¼šç”±ä¸Šè€Œä¸‹æ¥æ£€æµ‹æ¯ä¸ªå¼‚å¸¸æ˜¯å¦è¢«æ•è·ã€‚\n  - **ä¸å¯è¾¾ä»£ç æ£€æµ‹æœºåˆ¶**ï¼šå¦‚æœå…ˆ `catch` äº†ä¸€ä¸ªå¼‚å¸¸ï¼Œåˆ `catch` äº†å¦ä¸€ä¸ªå¼‚å¸¸çš„å­ç±»ï¼Œåˆ™åè€…æ˜¯ä¸å¯è¾¾çš„ã€‚å› ä¸ºæ— è®ºæŠ›å‡ºä»€ä¹ˆå¼‚å¸¸ï¼Œéƒ½ä¼šè¢«å…ˆå‰çš„ `catch` å—æ•è·ã€‚==ç¼–è¯‘å™¨ä¼šæ£€æµ‹è¿™ç§ä¸å¯è¾¾çš„ `catch` å—ï¼Œå¹¶æŠ¥ CE==ã€‚\n    - ==æ‰€ä»¥æ•è·å­ç±»å¼‚å¸¸çš„ `catch` å—è¦æ”¾åœ¨æ•è·çˆ¶ç±»å¼‚å¸¸çš„ `catch` å—ä¹‹å‰==ã€‚\n- æ•è·åˆ°å¼‚å¸¸ `e` åï¼š\n  - ä½¿ç”¨ `e.getMessage()` è·å–å¼‚å¸¸ä¿¡æ¯ã€‚\n  - ä½¿ç”¨ `e.printStackTrace()` æ‰“å°å¼‚å¸¸è°ƒç”¨å †æ ˆã€‚\n  - å¦‚æœéœ€è¦è¿›ä¸€æ­¥æŠ›å‡ºå¼‚å¸¸ï¼Œå»ºè®®å¸¦ä¸Š `e` çš„å¼‚å¸¸ä¿¡æ¯ï¼šå¯ä»¥ä½¿ç”¨ `Throwable(Throwable cause)` æˆ–è€… `Throwable(String message, Throwable cause)` çš„æ„é€ æ–¹æ³•ã€‚\n\n### 1.3. Assertions\n\n- **æ–­è¨€(assertions)**ï¼šç”¨äºéªŒè¯ç¨‹åºä¸­çš„æŸäº›å‡è®¾æ˜¯å¦æˆç«‹ã€‚\n- è¯­æ³•ï¼š\n  - `assert condition;`ï¼Œå…¶ä¸­ `condition` æ˜¯ä¸€ä¸ªå¸ƒå°”è¡¨è¾¾å¼ã€‚\n  - `assert condition : message;`ï¼Œå…¶ä¸­ `message` å¯ä»¥æ˜¯åŸºæœ¬æ•°æ®ç±»å‹æˆ–å¯¹è±¡ã€‚\n- å½“æ–­è¨€å¤±è´¥æ—¶ï¼ŒJVM ä¼šæŠ›å‡º `AssertionError` å¼‚å¸¸ã€‚\n- è®¾è®¡åŸåˆ™ï¼š\n  - æ–­è¨€ä»…ç”¨äºå¼€å‘é˜¶æ®µçš„å†…éƒ¨æ£€æŸ¥ã€‚\n  - ä¸åº”åœ¨å…¬å…±æ–¹æ³•ä¸­ä½¿ç”¨æ–­è¨€æ£€æŸ¥å‚æ•°ã€‚\n- æ–­è¨€é»˜è®¤åœ¨è¿è¡Œæ—¶ç¦ç”¨ï¼Œéœ€è¦åœ¨å‘½ä»¤è¡Œæ‰‹åŠ¨ä½¿ç”¨ `-enableassertions` æˆ– `-ea` é€‰é¡¹å¯ç”¨ã€‚\n\n### 1.4. Text IO\n\n- `File` ç±»ï¼šæä¾›æ–‡ä»¶å’Œè·¯å¾„çš„æŠ½è±¡ã€‚\n  - **å¸¸ç”¨æ–¹æ³•**ï¼š\n    - `exists()`ï¼šæ£€æŸ¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨ã€‚\n    - `createNewFile()`ï¼šåˆ›å»ºæ–°æ–‡ä»¶ã€‚\n    - `delete()`ï¼šåˆ é™¤æ–‡ä»¶ã€‚\n- ä½¿ç”¨ `Scanner` ç±»è¯»å–æ•°æ®ã€‚\n  - ==ä½¿ç”¨ `new Scanner(Paths.get(path))` ä»æ–‡ä»¶ä¸­åˆ›å»º `Scanner` å¯¹è±¡ï¼Œæ³¨æ„ä¸èƒ½ç›´æ¥å†™å­—ç¬¦ä¸²==ã€‚\n  - ==ä½¿ç”¨ `new Scanner((new URL(url)).openStream())` ä»ç½‘ç»œèµ„æºä¸­åˆ›å»º `Scanner` å¯¹è±¡==ã€‚\n  - ==ç¬¬äºŒä¸ªå‚æ•°ï¼ˆå¯é€‰ï¼‰ç”¨äºæŒ‡å®šç¼–ç ï¼Œå¦åˆ™ä½¿ç”¨è¯¥ç³»ç»Ÿçš„é»˜è®¤ç¼–ç ==ã€‚\n- ä½¿ç”¨ `PrintWriter` ç±»å‘æ–‡ä»¶å†™å…¥æ•°æ®ã€‚\n  - æ”¯æŒ `print(...)`ã€`println(...)`ã€`printf(...)` ç­‰æ–¹æ³•ã€‚\n  - ç¬¬äºŒä¸ªå‚æ•°ï¼ˆå¯é€‰ï¼‰ç”¨äºæŒ‡å®šç¼–ç ï¼Œå¦åˆ™ä½¿ç”¨è¯¥ç³»ç»Ÿçš„é»˜è®¤ç¼–ç ã€‚\n\n## 2. Ch14 Binary IO\n\n### 2.1. Binary IO Basic\n\n- å‡ ä¹æ‰€æœ‰æ–¹æ³•éƒ½éœ€è¦æ˜¾ç¤ºæ•æ‰ `java.io.Exception` å¼‚å¸¸ï¼Œæ•…åº”æ˜¾å¼å£°æ˜æˆ–æ•æ‰ã€‚\n- `inputStream.read()` çš„è¿”å›å€¼å’Œ `outputStream.write(int b)` éƒ½æ˜¯ `int`ï¼Œä½†å®é™…ä¸Šéƒ½æ˜¯ä»¥ `byte` ä¸ºå•ä½è¯»å†™çš„ã€‚\n  - å…¶ä¸­ `inputStream.read()` åœ¨ EOF æ—¶ä¼šè¿”å› -1ï¼Œè¿™å°±æ˜¯ä¸ºä»€ä¹ˆéœ€è¦ç”¨ `int` è€Œä¸æ˜¯ `byte` è¡¨ç¤ºã€‚\n- `DataInputStream` åœ¨åˆ°è¾¾æ–‡ä»¶æœ«å°¾åç»§ç»­è¯»å–æ•°æ®ä¼šæŠ›å‡º `EOFException` å¼‚å¸¸ã€‚\n- `Reader` æ˜¯è¯»å–å­—ç¬¦æµçš„æŠ½è±¡ç±»ï¼Œ`Writer` æ˜¯å†™å…¥å­—ç¬¦æµçš„æŠ½è±¡ç±»ã€‚\n  - `InputStreamReader`ï¼šå­—èŠ‚æµè½¬å­—ç¬¦æµ\n  - `OutputStreamWrite`ï¼šå­—ç¬¦æµè½¬å­—èŠ‚æµ\n  - `BufferedReader`ã€`BufferedWriter`ï¼šå­—ç¬¦ç¼“å†²æµ\n  - `FileReader`ï¼š`InputStreamReader` ç±»çš„ç›´æ¥å­ç±»ï¼Œç”¨æ¥è¯»å–==å­—ç¬¦==æ–‡ä»¶\n  - `FileWriter`ï¼š`OutputStreamWriter` ç±»çš„ç›´æ¥å­ç±»ï¼Œç”¨æ¥å†™å…¥==å­—ç¬¦==æ–‡ä»¶\n\n### 2.2. Object IO Stream\n\n- `transient` å…³é”®å­—ï¼šåœ¨åºåˆ—åŒ–æ—¶å¿½ç•¥ï¼ˆé™æ€æˆå‘˜ä¹Ÿä¼šè¢«å¿½ç•¥ï¼‰ã€‚\n- å¦‚æœä¸€ä¸ªå¯¹è±¡ä¸æ­¢ä¸€æ¬¡å†™å…¥å¯¹è±¡æµï¼Œä¸ä¼šå­˜å‚¨å¯¹è±¡çš„å¤šä»½å‰¯æœ¬ã€‚JVM ä¼šå°†å¯¹è±¡çš„å†…å®¹å’Œåºå·ä¸€èµ·å†™å…¥å¯¹è±¡æµã€‚\n- ååºåˆ—åŒ–åçš„å¯¹è±¡ï¼Œä¸éœ€è¦è°ƒç”¨æ„é€ å‡½æ•°é‡æ–°æ„é€ ã€‚\n- åºåˆ—å‰çš„å¯¹è±¡ä¸åºåˆ—åŒ–åçš„å¯¹è±¡æ˜¯æ·±å¤åˆ¶ã€‚\n- ç±»éœ€è¦æ˜¾ç¤ºåœ°å®ç° `Serializable` æ¥å£æ‰èƒ½è¢«åºåˆ—åŒ–ã€‚ï¼ˆå³ä½¿æˆå‘˜éƒ½å¯ä»¥åºåˆ—åŒ–ä¹Ÿéœ€è¦è¿™ä¹ˆåšï¼‰\n- å¦‚æœæ•°ç»„ä¸­çš„æ‰€æœ‰å…ƒç´ éƒ½æ˜¯å¯åºåˆ—åŒ–çš„ï¼Œè¿™ä¸ªæ•°ç»„å°±æ˜¯å¯åºåˆ—åŒ–çš„ã€‚\n- _24-25 ç§‹å†¬æœŸæœ«è€ƒè¯•è¿˜è€ƒå¯Ÿäº†å­ç±»/çˆ¶ç±»ä¸­åªæœ‰ä¸€ä¸ªå®ç°äº†åºåˆ—åŒ–æ¥å£åœ¨åºåˆ—åŒ–/ååºåˆ—åŒ–æ—¶çš„è¡Œä¸ºï¼Œè¯»è€…å¯ä»¥è‡ªè¡ŒæŸ¥é˜…ç›¸å…³èµ„æ–™_ã€‚\n\n### 2.3. Piped IO Stream\n\n- PipedOutputStream å’Œ PipedInputStream çš„ä½œç”¨æ˜¯è®©å¤šçº¿ç¨‹å¯ä»¥é€šè¿‡ç®¡é“è¿›è¡Œçº¿ç¨‹é—´çš„é€šè®¯ã€‚PipedReader å’Œ PipedWriter å’Œè¿™ä¸¤ä¸ªçš„åŒºåˆ«ä¹Ÿç±»ä¼¼ï¼šæ“ä½œå­—ç¬¦è€Œä¸æ˜¯å­—èŠ‚ã€‚\n- æˆ‘ä»¬åœ¨çº¿ç¨‹ A ä¸­å‘ PipedOutputStream ä¸­å†™å…¥æ•°æ®ï¼Œè¿™äº›æ•°æ®ä¼šè‡ªåŠ¨çš„å‘é€åˆ°ä¸ PipedOutputStream å¯¹åº”çš„ PipedInputStream ä¸­ï¼Œè¿›è€Œå­˜å‚¨åœ¨ PipedInputStream çš„ç¼“å†²ä¸­ï¼›æ­¤æ—¶ï¼Œçº¿ç¨‹ B é€šè¿‡è¯»å– PipedInputStream ä¸­çš„æ•°æ®ã€‚å°±å¯ä»¥å®ç°ï¼Œçº¿ç¨‹ A å’Œçº¿ç¨‹ B çš„é€šä¿¡ã€‚\n\n## 3. Ch16 Generics\n\n- æ„é€ æ–¹æ³•ä¸­ä¸éœ€è¦å†™æ³›å‹ï¼ˆå¦‚æ˜¯ `Stack()` è€Œä¸æ˜¯ `Stack<E>()`ï¼‰\n- æ³›å‹æ–¹æ³•è‹¥ç¼–è¯‘å™¨å¯ä»¥æ¨æ–­åˆ™å¯çœç•¥ï¼Œå¦åˆ™ç”¨ç±»ä¼¼ `GenericMethodDemo.<Integer>print(integers)` çš„è¯­æ³•ã€‚\n- **æœ‰ç•Œæ³›å‹ç±»å‹(bounded generic type)**ï¼š`<E extends GeometricObject>` è¡¨ç¤º `E` å¿…é¡»æ˜¯ `GeometricObject` æˆ–å…¶å­ç±»ã€‚\n- æ³›å‹ç±»å‹ä¹‹é—´æ²¡æœ‰ç»§æ‰¿å…³ç³»\n  - å¦‚ `Integer` å’Œ `Number` æœ‰ç»§æ‰¿å…³ç³»ä½†æ˜¯ `GenericStack<Integer>` å’Œ `GenericStack<Number>` æ²¡æœ‰\n  - `List<Integer> list = new List<Object>();` æŠ¥é”™ä¸”==åä¹‹äº¦ç„¶==\n- ä¸‰ç§é€šé…\n  - **unbound wildcard**ï¼š`<?>` é€‚ç”¨äºä»»ä½•ç±»å‹\n  - **bound wildcard**ï¼š`<? extends T>` ç±»å‹å‚æ•°å¿…é¡»æ˜¯ T æˆ–å…¶å­ç±»ã€‚\n    - `List<? extends Number> list = new ArrayList<Integer>();`\n    - ä¸èƒ½æ·»åŠ  `Number` æˆ– `Integer` æˆ– `Double` åˆ° list ä¸­\n  - **lower-bound wildcard**ï¼š`<? super T>` è¡¨ç¤ºç±»å‹å‚æ•°å¿…é¡»æ˜¯ T æˆ–å…¶çˆ¶ç±»ã€‚\n    - `List<? super Integer> list = new ArrayList<Number>();`\n    - åªèƒ½æ·»åŠ  `Integer` æˆ– `Integer` çš„å­ç±»åˆ° list ä¸­\n- æ³›å‹çš„é™åˆ¶\n  - ä¸èƒ½åˆ›å»ºæ³›å‹ç±»å‹çš„å®ä¾‹\n    - `new E()` ä¼š CE\n  - ä¸èƒ½åˆ›å»ºæ³›å‹æ•°ç»„\n    - `new E[10]` ä¼š CEï¼Œåº”æ”¹ä¸º `(E[]) new Object[10]`\n  - æ³›å‹ç±»çš„é™æ€ä¸Šä¸‹æ–‡ä¸­ä¸èƒ½ä½¿ç”¨ç±»å‹å‚æ•°\n    - æ³›å‹ç±»çš„æ‰€æœ‰å®ä¾‹éƒ½==æœ‰ç›¸åŒçš„è¿è¡Œæ—¶ç±»==ï¼Œæ‰€ä»¥æ³›å‹ç±»çš„é™æ€å˜é‡å’Œæ–¹æ³•æ˜¯è¢«å®ƒçš„æ‰€æœ‰å®ä¾‹å…±äº«çš„ã€‚\n    - åœ¨é™æ€æ–¹æ³•ã€æ•°æ®åŸŸæˆ–åˆå§‹åŒ–è¯­å¥ä¸­ï¼Œä¸ºäº†ç±»è€Œå¼•ç”¨æ³›å‹å‚æ•°æ˜¯éæ³•çš„ã€‚\n  - æ³›å‹ç±»ä¸èƒ½ç»§æ‰¿ `Throwable`\n    - `class MyException<T> extends Exception {}` ä¼š CE\n    - ä¸»è¦æ˜¯ä¸ºäº† catch çš„é—®é¢˜\n- `ArrayList<String>` ä¸æ˜¯ä¸€ä¸ªç±»ï¼Œæ‰€ä»¥ `ArrayList<String> list1 = new ArrayList<String>();` åè°ƒç”¨ `list1 instanceof ArrayList<String>` æ˜¯é”™è¯¯çš„ã€‚\n\n## 4. Ch17 Java Collections Framework\n\n- Collection æ¥å£å…³ç³»å›¾ï¼ˆ==P22==ï¼‰\n  - `Map` æ˜¯ç‹¬ç«‹çš„æ¥å£ï¼Œä¸ç»§æ‰¿è‡ª `Collection`\n  - `ArrayList` å’Œ `LinkedList` å®ç°äº† `List` æ¥å£ã€‚\n  - `HashSet` å’Œ `TreeSet` å®ç°äº† `Set` æ¥å£ã€‚\n  - `HashMap` å’Œ `TreeMap` å®ç°äº† `Map` æ¥å£ã€‚\n- `addAll`ã€`removeAll`ã€`retainAll` ç±»ä¼¼äºé›†åˆçš„å¹¶ã€å·®ã€äº¤ã€‚\n- Set\n  - `HashSet`\n    - é€šè¿‡ `hashCode` å’Œ `equals` æ–¹æ³•ä¿è¯å…ƒç´ å”¯ä¸€æ€§ã€‚\n    - é›†åˆå…ƒç´ å¯ä»¥æ˜¯ nullï¼Œä½†åªèƒ½æ”¾å…¥ä¸€ä¸ª null\n  - `LinkedHashSet`\n    - é¢å¤–ä½¿ç”¨åŒå‘é“¾è¡¨ç»´æŠ¤å…ƒç´ çš„æ’å…¥é¡ºåºï¼ˆä¼¼ä¹è®¿é—®ä¹Ÿè¿˜ä¼šè¢«æåˆ°æœ€å‰ï¼Œå³éµå¾ª LRUï¼‰ã€‚\n  - `TreeSet`\n    - `TreeSet` æ˜¯ `SortedSet` æ¥å£çš„å”¯ä¸€å®ç°ç±»\n    - `SortedSet` æ˜¯ Set çš„ä¸€ä¸ªå­æ¥å£ã€‚first()å’Œ last()è¿”å›é›†åˆä¸­çš„ç¬¬ä¸€ä¸ªå’Œæœ€åä¸€ä¸ªå…ƒç´ ï¼›headSet(toElement)å’Œ tailSet(fromElement)è¿”å›é›†åˆä¸­å…ƒç´ å°äº toElement å’Œå¤§äº fromElement çš„é‚£éƒ¨åˆ†ã€‚\n    - NavigableSet æ‰©å±•äº† SortedSetï¼Œæä¾›å¯¼èˆªæ–¹æ³• lower(e),floor(e), ceiling(e)å’Œ higher(e)ï¼Œåˆ†åˆ«è¿”å›å°äºã€å°äºæˆ–ç­‰äºã€å¤§äºæˆ–ç­‰äºã€å¤§äºä¸€ä¸ªå…ƒç´ çš„å…ƒç´ ï¼Œè‹¥æ²¡è¿™æ ·çš„å…ƒç´ ï¼Œåˆ™è¿”å› nullã€‚\n    - pollFirst()å’Œ pollLast()åˆ™åˆ†åˆ«åˆ é™¤å’Œè¿”å› TreeSet ä¸­çš„ç¬¬ä¸€ä¸ªå’Œæœ€åä¸€ä¸ªå…ƒç´ ã€‚\n- List\n  - ArrayListï¼šåŸºäºåŠ¨æ€æ•°ç»„ã€‚\n    - æ”¯æŒéšæœºè®¿é—®ï¼Œè®¿é—®é€Ÿåº¦å¿«ã€‚æ’å…¥å’Œåˆ é™¤æ“ä½œæ•ˆç‡ä½ï¼ˆç‰¹åˆ«æ˜¯ä¸­é—´ä½ç½®ï¼‰ã€‚\n  - LinkedListï¼šåŸºäºåŒå‘é“¾è¡¨ã€‚\n    - æ’å…¥å’Œåˆ é™¤é€Ÿåº¦å¿«ã€‚æŸ¥è¯¢æ•ˆç‡è¾ƒä½ã€‚\n- Mapï¼š`HashMap`ã€`TreeMap`ã€`LinkedHashMap`ã€‚\n  - å¯¹äº `HashMap` å’Œ `LinkedHashMap`ï¼Œè‡ªå®šä¹‰å¯¹è±¡ä½œä¸º key æ—¶éœ€è¦é‡å†™ `hashcode()` å’Œ `equals()` æ–¹æ³•\n- ArrayList ä¸­è¿­ä»£å™¨çš„é™·é˜±\n  - åœ¨è¿­ä»£è¿‡ç¨‹ä¸­ï¼Œè°ƒç”¨å®¹å™¨çš„åˆ é™¤æ–¹æ³•ï¼Œåˆ™ä¼šæŠ›å‡ºå¼‚å¸¸\n  - è¿­ä»£å™¨å†…éƒ¨ä¼šç»´æŠ¤ç´¢å¼•ä½ç½®ç›¸å…³çš„æ•°æ®ï¼ˆåŒ…å«æœ€è¿‘è¿”å›çš„å…ƒç´ çš„ç´¢å¼•å’Œä¸‹ä¸€ä¸ªè¿”å›çš„å…ƒç´ çš„ç´¢å¼•ï¼‰ï¼Œåœ¨è¿­ä»£è¿‡ç¨‹ä¸­ï¼Œå®¹å™¨ä¸èƒ½å‘ç”Ÿç»“æ„æ€§å˜åŒ–\n- `List<String> a = new ArrayList<String>();` å’Œ `List<String> a = new ArrayList<>();` éƒ½æ˜¯åˆæ³•çš„å†™æ³•ã€‚\n- `Map`Â  ä¸èƒ½ç›´æ¥ä½¿ç”¨ Â `Iterator`Â  éå†ï¼Œä½†å¯ä»¥é€šè¿‡ Â `entrySet()`ã€`keySet()`Â  æˆ– Â `values()`Â  æ–¹æ³•é—´æ¥è·å–å¯è¿­ä»£çš„é›†åˆã€‚\n  `for (Map.Entry<String, Integer> entry : map.entrySet()) { System.out.println(entry.getKey() + \": \" + entry.getValue()); }`\n\n## 5. Ch25 Multithreading\n\n- åˆ›å»ºçº¿ç¨‹\n  - å®ç° `Runnable` æ¥å£å¹¶å°†å®ä¾‹ä¼ é€’ç»™ `Thread` æ„é€ å‡½æ•°\n  - ç»§æ‰¿ `Thread` ç±»ï¼šé‡å†™ `run()` æ–¹æ³•\n- çº¿ç¨‹æ§åˆ¶\n  - ä½¿ç”¨ `run()` å¯åŠ¨åœ¨å½“å‰çº¿ç¨‹åˆ›å»ºï¼Œä½¿ç”¨ `start()` å¯åŠ¨åœ¨æ–°çº¿ç¨‹åˆ›å»º\n  - `Thread.yield()`ï¼šè®©å‡ºå½“å‰çº¿ç¨‹çš„ CPU æ—¶é—´ç‰‡ã€‚\n  - `Thread.sleep(long millis)` é™æ€æ–¹æ³•ï¼šå½“å‰çº¿ç¨‹ä¼‘çœ æŒ‡å®šæ—¶é—´ã€‚\n  - `anotherThread.join()`ï¼šç­‰å¾…å¦ä¸€ä¸ªçº¿ç¨‹ç»“æŸã€‚\n  - ä¸­æ–­\n    - InterruptedExceptionï¼šæ˜¯ sleep å’Œ join çš„å¿…æ£€å¼‚å¸¸ï¼Œæ³¨æ„æ”¾åœ¨å¾ªç¯ä½“ä¸­è¦æ‰‹åŠ¨ breakã€‚\n    - çº¿ç¨‹çš„ç”Ÿå‘½å‘¨æœŸ\n      - Newï¼ˆæ–°å»ºï¼‰ï¼šçº¿ç¨‹å¯¹è±¡è¢«åˆ›å»ºï¼Œä½†æœªè°ƒç”¨ `start()` æ–¹æ³•ã€‚\n      - Runnableï¼ˆå°±ç»ªï¼‰ï¼šè°ƒç”¨ `start()` æ–¹æ³•åï¼Œçº¿ç¨‹å¤„äºå¯è¿è¡ŒçŠ¶æ€ï¼Œä½†å¯èƒ½æœªè·å¾— CPU æ—¶é—´ã€‚\n      - Runningï¼ˆè¿è¡Œï¼‰ï¼šçº¿ç¨‹è·å¾— CPU æ—¶é—´ï¼Œæ­£åœ¨æ‰§è¡Œä»»åŠ¡ã€‚\n      - Blockedï¼ˆé˜»å¡ï¼‰ï¼šçº¿ç¨‹ç­‰å¾…æŸäº›èµ„æºï¼ˆå¦‚é”æˆ– IOï¼‰ã€‚\n      - Terminatedï¼ˆç»ˆæ­¢ï¼‰ï¼šçº¿ç¨‹æ‰§è¡Œå®Œæ¯•æˆ–è¢«ä¸­æ–­ã€‚\n    - `isAlive()`ï¼šç”¨äºæ£€æŸ¥çº¿ç¨‹æ˜¯å¦å¤„äºæ´»åŠ¨çŠ¶æ€ï¼ˆReadyã€Blocked æˆ– Runningï¼‰\n    - `interrupt()`ï¼šè®¾ç½®ä¸­æ–­æ ‡å¿—ã€‚å¯¹äºå—é˜»å¡ï¼ˆ`Object.wait()`ã€`Thread.join()`ã€`Thread.sleep()`ï¼‰çš„çº¿ç¨‹ï¼Œå°†å…¶å”¤é†’å¹¶æŠ›å‡º InterruptedExceptionï¼›å¦åˆ™å°†æš‚æ—¶ä¸èµ·ä½œç”¨ã€‚\n    - `isInterrupted()`ï¼šæ£€æŸ¥çº¿ç¨‹çš„ä¸­æ–­æ ‡å¿—æ˜¯å¦è¢«è®¾ç½®ã€‚ä¸ä¼šæ¸…é™¤ä¸­æ–­æ ‡å¿—ã€‚\n  - ä¼˜å…ˆçº§æ§åˆ¶\n    - `setPriority(int newPriority)`ï¼šè®¾ç½®çº¿ç¨‹çš„ä¼˜å…ˆçº§ã€‚\n    - `Thread.MAX_PRIORITY` / `Thread.MIN_PRIORITY` / `Thread.NORM_PRIORITY`\n- **çº¿ç¨‹åŒæ­¥(thread synchronization)**\n  - å†…å­˜å¯è§æ€§é—®é¢˜ï¼šä¸€ä¸ªçº¿ç¨‹å¯¹å…±äº«å˜é‡çš„ä¿®æ”¹ï¼Œå¯èƒ½ä¸è¢«å¦ä¸€ä¸ªçº¿ç¨‹åŠæ—¶çœ‹åˆ°ã€‚å› ä¸ºæ¯ä¸ªçº¿ç¨‹éƒ½æœ‰è‡ªå·±çš„å·¥ä½œå†…å­˜ï¼Œè€Œå…±äº«å˜é‡å­˜å‚¨åœ¨ä¸»å†…å­˜ä¸­ã€‚å¦‚æœçº¿ç¨‹å¯¹å…±äº«å˜é‡çš„ä¿®æ”¹æ²¡æœ‰åŠæ—¶åˆ·æ–°åˆ°ä¸»å†…å­˜å°±å¯èƒ½å‡ºç°é—®é¢˜ã€‚\n  - `volatile` å…³é”®è¯ï¼šä¿è¯å˜é‡çš„å¯è§æ€§ã€‚\n  - `synchronized` å…³é”®è¯æˆ– `synchronized` å—\n    - æˆå‘˜æ–¹æ³•åŠ  `synchronized` ç›¸å½“äºå¯¹ `this` ä¸Šé”ï¼Œé™æ€æ–¹æ³•åŠ  `synchronized` ç›¸å½“äºå¯¹ `XXClass.class` ä¸Šé”ã€‚\n    - åŠŸèƒ½\n      - ä¿è¯å¯è§æ€§ï¼šé‡Šæ”¾é”æ—¶ï¼Œæ‰€æœ‰çš„å†™å…¥éƒ½ä¼šå†™å›å†…å­˜ï¼Œè·å¾—é”åï¼Œä¼šä»å†…å­˜ä¸­è¯»æœ€æ–°æ•°æ®ã€‚\n      - ä¿è¯äº’æ–¥æ€§ï¼šåŒä¸€æ—¶åˆ»åªæœ‰ä¸€ä¸ªçº¿ç¨‹å¯ä»¥æ‰§è¡Œ synchronized å—ä¸­çš„ä»£ç ã€‚\n    - å¯é‡å…¥æ€§ï¼šå¯¹åŒä¸€ä¸ªçº¿ç¨‹ï¼Œå®ƒåœ¨è·å¾—é”ä¹‹åï¼Œåœ¨è°ƒç”¨å…¶ä»–éœ€è¦åŒæ ·é”çš„ä»£ç æ—¶ï¼Œå¯ä»¥ç›´æ¥è°ƒç”¨ã€‚\n- `wait()` & `notify()`\n  - å¿…é¡»åœ¨ `synchronized` æ–¹æ³•æˆ–ä»£ç å—ä¸­ä½¿ç”¨ã€‚\n  - ![|804](https://img.memset0.cn/2025/01/12/hixSD3p6.png)\n  - ç”¨æ³•\n    - `wait()`ï¼šå½“å‰çº¿ç¨‹ç­‰å¾…ï¼Œé‡Šæ”¾é”ã€‚\n    - `notify()`ï¼šå”¤é†’ä¸€ä¸ªç­‰å¾…çº¿ç¨‹ã€‚\n    - `notifyAll()`ï¼šå”¤é†’æ‰€æœ‰ç­‰å¾…çº¿ç¨‹ã€‚\n  - æœºåˆ¶\n    - æŠŠå½“å‰çº¿ç¨‹æ”¾å…¥æ¡ä»¶ç­‰å¾…é˜Ÿåˆ—ï¼Œé‡Šæ”¾å¯¹è±¡é”ï¼Œé˜»å¡ç­‰å¾…ï¼Œçº¿ç¨‹çŠ¶æ€å˜ä¸º WAITING æˆ– TIMED_WAITINGã€‚\n    - ç­‰å¾…æ—¶é—´åˆ°æˆ–è¢«å…¶ä»–çº¿ç¨‹è°ƒç”¨ notify/notifyAll ä»æ¡ä»¶é˜Ÿåˆ—ä¸­ç§»é™¤ï¼Œè¿™æ˜¯ï¼Œè¦é‡æ–°ç«äº‰å¯¹è±¡é”\n    - å¦‚æœèƒ½è·å¾—é”ï¼Œçº¿ç¨‹å˜ä¸º RUNNABLEï¼Œå¹¶ä» wait è°ƒç”¨ä¸­è¿”å›\n    - å¦åˆ™ï¼Œçº¿ç¨‹åŠ å…¥å¯¹è±¡é”ç­‰å¾…é˜Ÿåˆ—ï¼Œçº¿ç¨‹å˜ä¸º BLOCKEDï¼Œåªæœ‰åœ¨è·å¾—é”åæ‰ä¼šä» wait è°ƒç”¨ä¸­è¿”å›ã€‚\n\n## 6. Ch28 Lambda & Stream & RTTI\n\n- Lambda è¡¨è¾¾å¼æ˜¯ä¸€ç§ç‰¹æ®Šçš„åŒ¿åå†…éƒ¨ç±»ã€‚\n- ä»»ä½•å¯ä»¥æ¥å—ä¸€ä¸ªå‡½æ•°å¼æ¥å£ï¼ˆFunctional Interface, FIï¼‰å®ä¾‹çš„åœ°æ–¹ï¼Œéƒ½å¯ä»¥ä½¿ç”¨ Lambda è¡¨è¾¾å¼ã€‚\n- å‡½æ•°å¼æ¥å£ï¼šåªèƒ½æœ‰ä¸€ä¸ªæŠ½è±¡æ–¹æ³•ã€‚å¯ä»¥æœ‰å¤šä¸ªé™æ€æ–¹æ³•å’Œé»˜è®¤æ–¹æ³•ã€‚æ¥å£ä¸­çš„æ–¹æ³•é»˜è®¤æ˜¯ `public abstract`ã€‚\n  - `java.util.function` åŒ…ä¸­åŒ…å«äº†å¤šç§å‡½æ•°å¼æ¥å£ï¼Œä¾‹å¦‚ï¼š`Function`ï¼šæ¥æ”¶å‚æ•°å¹¶è¿”å›ç»“æœã€‚`Predicate`ï¼šæ¥æ”¶å‚æ•°å¹¶è¿”å›å¸ƒå°”å€¼ã€‚`Consumer`ï¼šæ¥æ”¶å‚æ•°ä½†æ— è¿”å›å€¼ã€‚`Supplier`ï¼šæ— å‚æ•°ä½†è¿”å›ç»“æœã€‚\n- Stream å¯¹è±¡ï¼šå®ç°äº† Â `java.util.stream.Stream`Â  æ¥å£ã€‚\n  - ç”Ÿæˆæµï¼š`stream()` æˆ– `parallelStream()` æˆ– `Stream.of(\"a1\", \"a2\", \"a3\")`\n  - å¸¸ç”¨æ–¹æ³•ï¼š\n    - filterï¼šè¿‡æ»¤æ»¡è¶³æ¡ä»¶çš„å…ƒç´ ã€‚\n    - mapï¼šæ˜ å°„ä¸ºæ–°å€¼\n    - flatMapï¼šæ˜ å°„æˆæµå¹¶ flat æˆä¸€ä¸ª\n    - distinctï¼šå»é‡ï¼ˆåŸºäº `hashCode` å’Œ `equals`ï¼‰\n    - sortedï¼šæ’åº\n    - limit(int n)ï¼šåªä¿ç•™å‰è‡³å¤š $n$ ä¸ª\n    - skip(int n)ï¼šè·³è¿‡å‰ $n$ ä¸ª\n  - ç»ˆç«¯æ“ä½œï¼š\n    - `boolean allMatch(Predicate<? super T> predicate);` æ£€æŸ¥æ˜¯å¦åŒ¹é…æ‰€æœ‰å…ƒç´ ã€‚\n    - `boolean anyMatch(Predicate<? super T> predicate);` æ£€æŸ¥æ˜¯å¦è‡³å°‘åŒ¹é…ä¸€ä¸ªå…ƒç´ ã€‚\n    - `boolean noneMatch(Predicate<? super T> predicate);` æ£€æŸ¥æ˜¯å¦æ²¡æœ‰åŒ¹é…æ‰€æœ‰å…ƒç´ ã€‚\n    - `Optional<T> findFirst();` è¿”å›å½“å‰æµä¸­çš„ç¬¬ä¸€ä¸ªå…ƒç´ ã€‚\n    - `Optional<T> findAny();` è¿”å›å½“å‰æµä¸­çš„ä»»æ„å…ƒç´ ã€‚\n    - `long count();` è¿”å›æµä¸­å…ƒç´ æ€»æ•°ã€‚\n    - `Optional<T> max(Comparator<? super T> comparator);` è¿”å›æµä¸­æœ€å¤§å€¼ã€‚\n    - `Optional<T> min(Comparator<? super T> comparator);` è¿”å›æµä¸­æœ€å°å€¼ã€‚\n    - `T reduce(T identity, BinaryOperator<T> accumulator);` å¯ä»¥å°†æµä¸­å…ƒç´ åå¤ç»“åˆèµ·æ¥ï¼Œå¾—åˆ°ä¸€ä¸ªå€¼ã€‚è¿”å› Tã€‚è¿™æ˜¯ä¸€ä¸ªå½’çº¦æ“ä½œã€‚\n    - `collect`ï¼šè½¬åŒ–ä¸ºå…¶ä»–å½¢å¼ï¼Œå¦‚ `.collect(Collectors.toSet())`ã€`toList()`\n- `IntStream` ä¸ `getAsInt()`\n- RTTI\n  - `object.getClass()` æˆ– `TheClass.class` æ¥è·å–ç±»å¯¹è±¡ã€‚\n  - `clazz.isInstance(obj)` åˆ¤æ–­ `obj` æ˜¯ä¸æ˜¯å½“å‰ç±»æˆ–å½“å‰ç±»å­ç±»çš„å®ä¾‹\n  - `getSuperclass()`ã€`getInterfaces()`ã€`getModifiers()`\n  - Method ç±»\n    - invoke()\n    - instanceof è¿ç®—ç¬¦\n","publishedTitle":"ã€ŒJava åº”ç”¨æŠ€æœ¯ã€III. Java é«˜çº§ç‰¹æ€§"}},{"id":"a205e15f-98e2-571b-b777-c4f3cf2eff3b","fields":{"slug":"/course/ads/note/1/","plainText":"\n> æœ¬ç¯‡ç¬”è®°æ¦‚è¿°äº†äºŒå‰æœç´¢æ ‘çš„åŸºæœ¬æ¦‚å¿µåŠå…¶å˜ç§ï¼ŒåŒ…æ‹¬ AVL æ ‘ã€Splay æ ‘ã€çº¢é»‘æ ‘å’Œ B+ æ ‘ã€‚é¦–å…ˆä»‹ç»äº† AVL æ ‘çš„å®šä¹‰ã€æ’å…¥å’Œåˆ é™¤æ“ä½œï¼Œä»¥åŠå¦‚ä½•ç»´æŠ¤æ ‘çš„å¹³è¡¡ã€‚æ¥ç€è®¨è®ºäº† Splay æ ‘çš„æ—‹è½¬æ“ä½œå’Œå‡æ‘Šåˆ†æï¼Œéšåä»‹ç»äº†çº¢é»‘æ ‘çš„æ’å…¥å’Œåˆ é™¤ç­–ç•¥ï¼Œæœ€åè®²è§£äº† B+ æ ‘çš„ç»“æ„ç‰¹æ€§åŠå…¶åˆ†è£‚å’Œæ’å…¥è¿‡ç¨‹ã€‚æ•´ä½“ä¸Šï¼Œç¬”è®°æä¾›äº†å¯¹è¿™äº›æ•°æ®ç»“æ„çš„æ·±å…¥ç†è§£å’Œæ“ä½œæ–¹æ³•ã€‚<small style=\"font-style: italic; opacity: 0.5\">ï¼ˆç”± gpt-4o-mini ç”Ÿæˆæ‘˜è¦ï¼‰</small>\n\n<!-- more -->\n\n## 1. AVL Tree\n\n> [!info]- Fun Factï¼šAVL æ ‘åå­—çš„ç”±æ¥\n>\n> Adelson-Velskii-Landis Trees åˆ†åˆ«æ˜¯è®ºæ–‡çš„ä¸‰ä½ä½œè€…çš„åå­—ã€‚\n\n1. ç©ºäºŒå‰æ ‘æ˜¯ä¸€ä¸ª **AVL æ ‘(AVL tree)**ã€‚\n2. å¦‚æœ T æ˜¯ä¸€æ£µ AVL æ ‘ï¼Œé‚£ä¹ˆå…¶å·¦å³å­æ ‘ä¹Ÿæ˜¯ AVL æ ‘ï¼Œå¹¶ä¸” $|h(ls) - h(rs)| \\le 1$ï¼Œå…¶ä¸­ $h(x)$ æ˜¯å­æ ‘ $x$ çš„é«˜åº¦ã€‚\n3. æ ‘é«˜ä¸º $O(\\log n)$ã€‚\n\n**å¹³è¡¡å› å­(balance factor)**ï¼šå³å­æ ‘é«˜åº¦ $-$ å·¦å­æ ‘é«˜åº¦ã€‚ï¼ˆæŒ‰ç…§å®šä¹‰ï¼Œå¯¹äºä»»æ„èŠ‚ç‚¹éƒ½æœ‰ $BF(\\text{node})=-1,0\\text{ or } 1$ï¼‰\n\n> [!example]- è¯æ˜ï¼šæ ‘é«˜ä¸º $O(\\log n)$\n> ç”¨ $f_n$ è¡¨ç¤ºæ ‘é«˜ä¸º $n$ çš„ AVL æ ‘æœ€å°‘æœ‰å¤šå°‘ä¸ªèŠ‚ç‚¹ã€‚\n>\n> $$\n> f_n = \\left\\{\\begin{aligned}\n> &1\\quad&(n=1)\\\\\n> &2\\quad&(n=2)\\\\\n> &f_{n-1} + f_{n-2} + 1 \\quad&(n>2)\\\\\n> \\end{aligned}\\right.\n> $$\n>\n> æ³¨æ„åˆ° $f_n$ çš„é€šé¡¹æ˜¯ç±»ä¼¼äºæ–æ³¢é‚£å¥‘æ•°åˆ—çš„ã€‚åŒç†æ ‘é«˜ä¸º $n$ çš„ AVL æ ‘æœ€å¤šçš„èŠ‚ç‚¹æ•° $g_n$ ä¹Ÿæ˜¯æŒ‡æ•°çº§çš„ï¼Œæ•… AVL æ ‘çš„æ ‘é«˜ä¸º $\\Theta(\\log n)$ã€‚\n\n### 1.1. Insertion\n\nå…ˆä¸ä¸€èˆ¬çš„äºŒå‰å¹³è¡¡æ ‘ç±»ä¼¼ï¼Œå…ˆè¿›è¡Œä¸€æ¬¡å¤±è´¥çš„æŸ¥æ‰¾ï¼Œå¯ä»¥å®šä½è¦æ’å…¥çš„ä½ç½®ã€‚æ’å…¥çš„ä½ç½®ä¸€å®šæ˜¯ä¸€ä¸ªå¶å­èŠ‚ç‚¹ã€‚ä¹‹åè‡ªåº•å‘ä¸Šæ£€æŸ¥æœ‰æ²¡æœ‰èŠ‚ç‚¹çš„å¹³è¡¡è¢«ç ´åï¼Œå¦‚æœæœ‰ï¼Œå…¶ $BF$ å€¼è¦ä¹ˆä¸º $-2$ è¦ä¹ˆä¸º $2$ã€‚æˆ‘ä»¬åˆ†ç±»è®¨è®ºè¿›è¡Œè°ƒæ•´ã€‚\n\nç§°å¹³è¡¡è¢«ç ´åçš„èŠ‚ç‚¹ä¸º**å¤±è¡¡èŠ‚ç‚¹(trouble finder)**ï¼Œå¯¼è‡´å¹³è¡¡è¢«ç ´åçš„èŠ‚ç‚¹ï¼ˆå³åˆšæ’å…¥çš„èŠ‚ç‚¹ï¼‰ä¸º**è‚‡äº‹è€…(trouble maker)**ï¼Œåªéœ€è¦å¯¹äº trouble finder & maker ä¹‹é—´çš„å­æ ‘è¿›è¡Œè°ƒæ•´ã€‚\n\nåœ¨è°ƒæ•´å¹³è¡¡æ—¶ï¼Œæˆ‘ä»¬åªéœ€è¦å…³æ³¨ trouble finderï¼š\n\n- æ˜¯å·¦å­æ ‘åé‡ï¼ˆ$BF = -2$ï¼‰è¿˜æ˜¯å³å­æ ‘åé‡ï¼ˆ$BF = 2$ï¼‰ï¼Ÿ\n- æ˜¯åé‡çš„å­æ ‘çš„å·¦å­æ ‘åé‡è¿˜æ˜¯åé‡çš„å­æ ‘çš„å³å­æ ‘åé‡ï¼Ÿ\n\nè¿™é‡Œä»¥å·¦å­æ ‘åé‡ï¼ˆ$BF = -2$ï¼‰ä¸ºä¾‹ï¼Œå³å­æ ‘åé‡çš„æƒ…å†µæ˜¯å¯¹ç§°çš„ã€‚å½“å·¦å­æ ‘çš„å·¦å­æ ‘åé‡ï¼ˆ$\\text{height}[A]\\ge \\text{height}[C]$ï¼‰æ—¶ï¼Œéœ€è¦æ‰§è¡Œ**å•æ—‹(single rotation)**ï¼š\n\n![å•æ—‹ï¼ˆçº¢è‰²æ ‡æ³¨çš„æ˜¯æ ‘é«˜ï¼‰|600](https://img.memset0.cn/2024/02/26/bT4d0Ls7.png)\n\n> [!hint] Hintï¼šAVL æ ‘çš„å·¦æ—‹å’Œå³æ—‹\n> é‡ç‚¹å…³æ³¨è“æ¡†æ¡†å‡ºçš„èŠ‚ç‚¹åœ¨æ—‹è½¬å‰åçš„å˜åŒ–ï¼ˆå³æ—‹çš„æƒ…å†µä¸å·¦æ—‹å¯¹ç§°ï¼‰ã€‚\n\nå½“å·¦å­æ ‘çš„å³å­æ ‘åé‡æ—¶ï¼ˆ$\\text{height}[A]< \\text{height}[C]$ï¼‰ï¼Œéœ€è¦æ‰§è¡Œ**åŒæ—‹(double rotation)**ï¼š\n\n![åŒæ—‹|600](https://img.memset0.cn/2024/02/26/Yad7iBp1.png)\n\n> [!example]- Qï¼šä¸ºä»€ä¹ˆåŒæ—‹ï¼Ÿ\n> è§‚å¯Ÿéœ€è¦è¢«æ—‹è½¬çš„ç‚¹ï¼ˆ$D,B,C$ï¼‰ï¼Œåªé€šè¿‡ä¸€æ¬¡æ—‹è½¬ä¸èƒ½ç»´æŠ¤å…¶ä¸­åºéå†ä¸å˜çš„æ€§è´¨ã€‚\n\nå®¹æ˜“å‘ç°ï¼Œåªéœ€è¦åœ¨ç¦» trouble maker æœ€è¿‘çš„ trouble finder å¤„è¿›è¡Œä¸€æ¬¡å•æ—‹æˆ–åŒæ—‹å³å¯ï¼Œå› ä¸ºæ—‹è½¬å trouble finder å¤„çš„æ ‘é«˜ä¸æ’å…¥èŠ‚ç‚¹å‰ç›¸åŒï¼Œåœ¨å®ƒä¸Šé¢çš„èŠ‚ç‚¹çš„ BF å€¼åº”ä¸æ’å…¥èŠ‚ç‚¹å‰ç›¸åŒã€‚\n\nç»´æŠ¤å¹³è¡¡æ“ä½œçš„ä¼ªä»£ç å¦‚ä¸‹ï¼š\n\n```plain\nMaintain-Balanced(p)\n    if h[ls[p]] - h[rs[p]] == 2\n        if h[ls[ls[p]]] >= h[rs[ls[p]]]\n            Right-Rotate(p)\n        else\n            Left-Rotate(ls[p])\n            Right-Rotate(p)\n    else if h[ls[p]] - h[rs[p]] == -2\n        if h[ls[rs[p]]] <= h[rs[rs[p]]]\n            Left-Rotate(p)\n        else\n            Right-Rotate(rs[p])\n            Left-Rotate(p)\n```\n\n### 1.2. Deletion\n\nå…ˆå®šä½è¦åˆ é™¤çš„èŠ‚ç‚¹ï¼Œå¦‚æœæ˜¯å¶å­åˆ™ç›´æ¥åˆ é™¤ï¼Œå¦åˆ™æ‰¾åˆ°å…¶å‰é©±ï¼ˆå·¦å­æ ‘ä¸­æœ€å³çš„èŠ‚ç‚¹ï¼‰æˆ–åç»§ï¼ˆå³å­æ ‘ä¸­æœ€å·¦çš„èŠ‚ç‚¹ï¼‰å°†å…¶æ›¿æ¢ã€‚è¿™æ ·å¯ä»¥ä¿è¯æ¯æ¬¡åˆ é™¤æ“ä½œå®é™…åˆ æ‰çš„ç‚¹ä¸€å®šæ˜¯å¶å­ã€‚\n\nåˆ é™¤èŠ‚ç‚¹åä¹Ÿè¦åº”ç”¨è°ƒæ•´æ“ä½œï¼Œç»´æŠ¤å¹³è¡¡çš„æ–¹æ³•ç±»ä¼¼æ’å…¥æ“ä½œã€‚\n\n> [!quote] Useful Links\n>\n> - [Lecture 1 | AVL Trees & Splay Trees - Isshiki ä¿®'s Notebook (isshikih.top)](https://note.isshikih.top/cour_note/D2CX_AdvancedDataStructure/Lec01/)\n> - [AVL æ ‘ - OI Wiki (oi-wiki.org)](https://oi-wiki.org/ds/avl/)\n\n## 2. Splay Tree\n\n**ç”Ÿé•¿æ ‘(Splay Tree)** å•æ¬¡æ“ä½œçš„**å‡æ‘Šæˆæœ¬(averaged cost)** ä¸º $O(\\log n)$ï¼Œä½†æœ€åæƒ…å†µä¸‹å•æ¬¡æ˜¯ $O(n)$ çš„ã€‚\n\n### 2.1. Rotate\n\nSplay æ ‘çš„æ ¸å¿ƒæ€æƒ³æ˜¯æ¯æ¬¡å°†è¢«è®¿é—®çš„èŠ‚ç‚¹æ—‹è½¬åˆ°æ ¹ï¼Œç§°ä¸º Splay æ“ä½œã€‚å¦‚æœè¿˜æ˜¯ç”¨å‰é¢çš„æ—‹è½¬æ–¹å¼ï¼Œå¤æ‚åº¦æ˜¯å¯èƒ½è¢«å¡åˆ° $O(n^2)$ çš„ï¼š\n\n![qXVDgA80.png|487](https://img.memset0.cn/2024/02/26/qXVDgA80.png)\n\nè¿™é‡Œéœ€è¦å¼•å…¥ Splay çš„æ—‹è½¬æ–¹å¼ï¼šè®¾å½“å‰èŠ‚ç‚¹ $X$ çš„çˆ¶èŠ‚ç‚¹ä¸º $P$ï¼Œçˆ¶èŠ‚ç‚¹çš„çˆ¶èŠ‚ç‚¹ä¸º $G$ éƒ½å­˜åœ¨ã€‚å®šä¹‰å¯¹ $X$ çš„æ—‹è½¬æ“ä½œ $Rotate(X)$ ä¸ºå°† $X$ æ—‹è½¬åˆ° $P$ çš„ä½ç½®ï¼Œå³ $X$ çš„çˆ¶äº²å°†å˜ä¸º $G$ï¼Œä¸”ç»´æŒå¹³è¡¡æ ‘çš„ä¸­åºéå†ä¸å˜ã€‚å½“ $X$ æ˜¯ $P$ çš„å·¦å­©å­æ—¶å®šä¹‰è¿™æ ·çš„æ—‹è½¬ä¸ºå³æ—‹ï¼Œå½“ $X$ æ˜¯ $P$ çš„å³å­©å­æ—¶å®šä¹‰è¿™æ ·çš„æ—‹è½¬ä¸ºå·¦æ—‹ã€‚\n\nï¼ˆæ³¨æ„è¿™é‡Œçš„ $Rotate$ å‡½æ•°çš„å‚æ•°å’Œä¸Šæ–‡ AVL æ ‘ä¸­çš„è¯´æ³•å¹¶ä¸ä¸€æ ·ï¼Œå³ $Rotate(X)$ å¯¹åº”ç€ $LeftRotate(P)$ æˆ– $RightRotate(P)$ï¼Œè‡³äºåˆ°åº•æ˜¯å“ªä¸ªå–å†³äº $X$ å’Œ $P$ çš„ä½ç½®å…³ç³»ã€‚ç›¸å½“äºä¸€ä¸ªè¯´çš„æ—¶è½¬ä¸Šæ¥ï¼Œå¦ä¸€ä¸ªè¯´çš„æ˜¯è½¬ä¸‹å»ï¼Œæ‰€ä»¥è¿˜éœ€è¦è®¨è®ºæ˜¯ä»å·¦è¾¹è¿˜æ˜¯å³è¾¹ä¸‹å»ï¼‰\n\n![ï¼ˆè¿™é‡Œçº¢è‰²èŠ‚ç‚¹ä»£è¡¨ Xï¼Œé»„è‰²èŠ‚ç‚¹ä»£è¡¨ Pï¼‰|575](https://img.memset0.cn/2024/02/26/gn7NSlBu.png)\n\nå¯ä»¥é€šè¿‡ç²¾å·§çš„å®ç°è®©ä»£ç è‡ªè¡Œå†³å®šå·¦æ—‹è¿˜æ˜¯å³æ—‹ï¼Œä¸‹æ–‡æˆ‘ä»¬ä¹Ÿç›´æ¥ç”¨ $Rotate$ æ“ä½œæ¥è¡¨ç¤ºï¼ˆè‡ªåŠ¨å†³å®šçš„ï¼‰å·¦æ—‹æˆ–å³æ—‹ã€‚\n\næ¥ä¸‹æ¥ï¼šè®¨è®º $X,P,G$ æ˜¯å¦åœ¨åŒä¸€ç›´çº¿ä¸Šã€‚è‹¥åœ¨ï¼Œåˆ™åº”ç”¨ Zig-Zig æ“ä½œï¼Œæ—‹è½¬ $Rotate(P),\\,Rotate(X)$ï¼ˆè™½ç„¶æ—‹è½¬çš„ä¸æ˜¯åŒä¸€ä¸ªç‚¹ï¼Œä½†æ˜¯ä¸¤æ¬¡æ—‹è½¬çš„æ–¹å‘ç›¸åŒï¼‰ï¼š\n\n![Zig-Zig|390](https://img.memset0.cn/2024/02/26/5hObMV2e.png)\n\nè‹¥ä¸åœ¨ï¼Œåˆ™åº”ç”¨ Zig-Zag æ“ä½œï¼Œæ—‹è½¬ $Rotate(X),\\,Rotate(X)$ï¼ˆè™½ç„¶éƒ½æ˜¯æ—‹è½¬åŒä¸€ä¸ªç‚¹ï¼Œä½†æ˜¯ä¸¤æ¬¡æ—‹è½¬çš„æ–¹å‘ä¸åŒï¼‰ï¼š\n\n![Zig-Zag|400](https://img.memset0.cn/2024/02/26/E1wvUUKl.png)\n\nè¿™æ ·å­ Splay æ ‘çš„å¤æ‚åº¦å°†ä¼šå¾—åˆ°ä¿è¯ï¼Œå…·ä½“è¯æ˜å‚è§ä¸‹é¢çš„**å‡æ‘Šåˆ†æ(amortized analysis)** ç¯èŠ‚ã€‚\n\n### 2.2. Amortized Analysis\n\n**å‡æ‘Šåˆ†æ(amortized analysis)** åˆ†ä¸ºä¸‰ç§ï¼š\n\n- **èšåˆåˆ†æ(aggregate analysis)**ï¼šæ€»æ—¶é—´å¤æ‚åº¦ä¸º $T(n)$ï¼Œåˆ™å•æ¬¡æ“ä½œçš„å‡æ‘Šå¤æ‚åº¦ä¸º $T(n)/n$ã€‚\n- **æ ¸ç®—æ³•(accounting method)**ï¼šæ¯æ¶ˆè€— $1$ çš„æ—¶é—´è¿›è¡Œæ“ä½œï¼Œå°±ä¸ºä¹‹åçš„æ“ä½œç´¯è®¡ $1$ çš„ä¿¡ç”¨ã€‚æ“ä½œè¦ä¹ˆæ¶ˆè€—æ—¶é—´è¦ä¹ˆæ¶ˆè€—ä¿¡ç”¨ã€‚\n- **åŠ¿èƒ½æ³•(potential method)**ï¼šåˆ©ç”¨åŠ¿èƒ½å‡½æ•°è¿›è¡Œåˆ†æã€‚\n\n> [!important] å‡æ‘Šåˆ†æä¹‹åŠ¿èƒ½æ³•\n>\n> å®šä¹‰ $c_i$ è¡¨ç¤ºç¬¬ $i$ æ¬¡æ“ä½œçš„å®é™…æˆæœ¬ï¼Œ$\\hat{c_i}$ è¡¨ç¤ºç¬¬ $i$ æ¬¡æ“ä½œåçš„å‡æ‘Šæˆæœ¬ã€‚$D_i$ è¡¨ç¤ºç¬¬ $i$ æ¬¡æ“ä½œåçš„æ•°æ®ç»“æ„ï¼Œ$\\Phi(D_i)$ è¡¨ç¤ºç¬¬ $i$ æ¬¡æ“ä½œåçš„åŠ¿èƒ½å‡½æ•°ã€‚æˆ‘ä»¬æœ‰ï¼š\n>\n> $$\n> \\hat{c_i} - c_i = Credit_i = \\Phi(D_i) - \\Phi(D_{i-1})\n> $$\n>\n> $$\n> \\begin{aligned}\n> \\sum_{i=1}^n \\hat{c_i} &= \\sum_{i=1}^n \\left(c_i + \\Phi(D_i) - \\Phi(D_{i-1})\\right)\\\\\n> &= \\left(\\sum_{i=1}^n c_i\\right) + \\Phi(D_n) - \\Phi(D_0)\n> \\end{aligned}\n> $$\n>\n> åªéœ€è¦å¯¹äºæ‰€æœ‰ $n$ éƒ½æ»¡è¶³ $\\Phi(D_n)-\\Phi(D_0)\\ge 0$ï¼Œå°±å¯ä»¥ç”¨å‡æ‘Šæˆæœ¬æ¥ç¡®å®šå®é™…æˆæœ¬çš„ä¸Šé™ã€‚ä¸€ä¸ªå¥½çš„åŠ¿èƒ½å‡½æ•°çš„å®ç°åº”è¯¥æœ‰ $\\Phi(D_0)=0$ï¼Œè¿™æ ·åªéœ€ $\\Phi(D_n)\\ge 0 = \\Phi(D_0)$ã€‚\n\nç°åœ¨é—®é¢˜çš„å…³é”®åœ¨äºç¡®å®šåŠ¿èƒ½å‡½æ•°ã€‚å¦‚æœç®€å•çš„å°†èŠ‚ç‚¹é«˜åº¦å’Œå®šä¹‰ä¸ºåŠ¿èƒ½å‡½æ•°ï¼Œè™½ç„¶é‡çº§æ­£ç¡®äº†ï¼Œä½†æ˜¯åœ¨ Splay çš„è¿‡ç¨‹ä¸­æœ‰è®¸å¤šèŠ‚ç‚¹çš„é«˜åº¦ä¼šå‘ç”Ÿå˜åŒ–ï¼Œä¸”æ•°é‡ä¸ç¡®å®šï¼Œè¿™æ ·å®šä¹‰çš„åŠ¿èƒ½å‡½æ•°å¾ˆéš¾åˆ†æã€‚\n\nä¸€ä¸ªå¯ç”¨çš„åŠ¿èƒ½å‡½æ•°æ˜¯æ ‘ä¸­æ‰€æœ‰èŠ‚ç‚¹çš„ $\\text{rank}$ ä¹‹å’Œï¼Œæˆ‘ä»¬ç”¨ $R(i)$ è¡¨ç¤ºèŠ‚ç‚¹ $i$ çš„ $\\text{rank}$ï¼Œæœ‰\n\n$$\nR(i) = \\log S(i)\n$$\n\nTBD\n\n## 3. Red Black Tree\n\n![npUGjy8F.png|557](https://img.memset0.cn/2024/03/04/npUGjy8F.png)\n\n- æ¯æ¡ä»å¶å­åˆ°æ ¹çš„è·¯å¾„ä¸­é»‘èŠ‚ç‚¹æ•° $\\geq$ çº¢èŠ‚ç‚¹æ•°ã€‚\n- æ¯ä¸ªå¶å­ç»“ç‚¹çš„å·¦å³æŒ‡é’ˆéƒ½æŒ‡å‘ NILï¼Œå®šä¹‰ NIL éƒ½æ˜¯é»‘èŠ‚ç‚¹ã€‚â€”â€”è¡¥ä¸Š NIL åï¼Œæ•´æ£µæ ‘ä¸­çš„é»‘èŠ‚ç‚¹æ•° $\\geq$ çº¢èŠ‚ç‚¹æ•°ã€‚\n\nä½œå‡ºä»¥ä¸‹å®šä¹‰ï¼š\n\n- The **black-height** of any node $x$, denoted by $bh(x)$ï¼šä»èŠ‚ç‚¹ $x$ åˆ°ä»»æ„å¶å­çš„æœ€çŸ­è·¯å¾„ä¸Šçš„é»‘ç‚¹æ•°é‡ã€‚\n\n### 3.1. Insertion\n\n> è¿™é‡Œä»‹ç» bottom-up çš„æ’å…¥æ–¹æ³•ã€‚çº¢é»‘æ ‘æ˜¯å­˜åœ¨ top-down çš„æ’å…¥æ–¹å¼çš„ï¼Œä½†è¿™é‡Œä¸å±•å¼€ã€‚\n\n- **Step 1**ï¼šå…ˆé€šè¿‡ä¸€æ¬¡å¤±è´¥çš„æŸ¥æ‰¾ç¡®å®šè¦æ’å…¥çš„ä½ç½®ï¼ˆNIL èŠ‚ç‚¹ï¼‰ï¼Œå°†å…¶æ›¿æ¢ä¸ºæ–°èŠ‚ç‚¹å¹¶æŸ“æˆçº¢è‰²ã€‚ç”±äºæ–°èŠ‚ç‚¹è‡ªå¸¦ä¸¤ä¸ªé»‘è‰²çš„ NIL ç»“ç‚¹ï¼Œæ‰€ä»¥æ ‘çš„ black-height ä¸å˜ï¼Œä½†å¯èƒ½å‡ºç°è¿ç»­çš„çº¢èŠ‚ç‚¹ã€‚\n\n- **Step 2**ï¼šè‡ªåº•å‘ä¸Šå¤„ç†è¿ç»­çš„çº¢èŠ‚ç‚¹çš„é—®é¢˜ï¼Œåˆ†ä»¥ä¸‹ä¸‰ç§æƒ…å†µè®¨è®ºï¼š\n  ![yKhJJP8i.png|280](https://img.memset0.cn/2024/03/04/yKhJJP8i.png)\n\n### 3.2. Deletion\n\n- å…„çº¢è½¬å…„é»‘ã€‚çˆ¶å…„æ¢è‰²å…„æ—‹å‡ã€‚ï¼ˆcase 1ï¼‰\n- å…„é»‘è¿œé»‘è¿‘ä¾„çº¢ï¼Œä¾„å…„æ¢è‰²ä¾„æ—‹å‡ã€‚ï¼ˆcase 3ï¼‰\n- å…„é»‘è¿œçº¢åŒ–å…¶é»‘ï¼Œçˆ¶å…„æ¢è‰²å…„æ—‹å‡ã€‚ï¼ˆcase 4ï¼‰\n- å…„ä¾„å…¨é»‘åˆ™å…„çº¢ï¼Œé»‘çˆ¶ä¸å½“åˆ™ä¸Šä¼ ã€‚ï¼ˆcase 2ï¼‰\n\n![0ut1PH2M.png|549](https://img.memset0.cn/2024/06/24/0ut1PH2M.png)\n\n![IjiC44te.png|544](https://img.memset0.cn/2024/06/24/IjiC44te.png)\n\n## 4. B+ Tree\n\n**å®šä¹‰**ï¼šA B+ tree of order $M$ is a tree with the following structural properties:\n\n- (1) The root is either a leaf or has between $2$ and $M$ children.\n- (2) All non-leaf nodes (except the root) have between $\\lceil M/2 \\rceil$ and $M$ children.\n- (3) All leaves are at the same depth.\n\nå¯ä»¥æ³¨æ„åˆ°ï¼š\n\n1. B+ æ ‘çš„æ‰€æœ‰æ•°æ®éƒ½å­˜å‚¨åœ¨å¶å­èŠ‚ç‚¹ï¼Œéå¶èŠ‚ç‚¹åªå­˜å‚¨ç´¢å¼•ä¿¡æ¯ã€‚\n2. æ¯ä¸€ä¸ªéå¶èŠ‚ç‚¹ä¸Šæœ€å¤šå­˜å‚¨ $M-1$ ä¸ªç´¢å¼•ï¼Œæ¯ä¸€ä¸ªå¶å­èŠ‚ç‚¹ä¸Šæœ€å¤šå­˜å‚¨ $M$ ä¸ªæ•°æ®ã€‚\n3. å¯¹äºéå¶èŠ‚ç‚¹çš„ç¬¬ $i$ ä¸ªç´¢å¼•ï¼Œå…¶å€¼ç­‰äºå…¶ç¬¬ $i+1$ ä¸ªå­æ ‘çš„å¶å­èŠ‚ç‚¹æœ€å°å€¼ã€‚ï¼ˆæ ¹æ®è¿™ä¸€æ€§è´¨å¯ä»¥è¿›è¡ŒæŸ¥æ‰¾ï¼‰\n\n![B+ æ ‘ç¤ºæ„å›¾|467](https://img.memset0.cn/2024/03/06/tbIAaCu7.png)\n\n### 4.1. Split\n\nB+ æ ‘çš„æ ¸å¿ƒåœ¨äºå…¶åˆ†è£‚æ“ä½œã€‚å¯ä»¥æŠŠ $M$ çš„é™åˆ¶çœ‹åšå¯¹è¿å‡ºå»çš„è¾¹æ•°çš„é™åˆ¶ï¼Œå¶å­èŠ‚ç‚¹ç›¸å½“äºæ˜¯è¿å‡ºå»è‡³å¤š $M$ æ¡èŠ‚ç‚¹â€”æ•°æ®çš„è¾¹ï¼Œè¿™æ ·å¯ä»¥æŠŠéå¶èŠ‚ç‚¹å’Œå¶å­èŠ‚ç‚¹çš„æƒ…å†µç»Ÿä¸€çœ‹å¾…ã€‚\n\nå½“æŸä¸ªèŠ‚ç‚¹å·²ç»è¿å‡ºå» $M$ æ¡è¾¹ï¼Œéœ€è¦å¡ç¬¬ $M+1$ æ¡è¾¹çš„æ—¶å€™ï¼Œéœ€è¦åˆ†è£‚ã€‚åˆ†è£‚ä¼šäº§ç”Ÿä¸€ä¸ªå’ŒåŸèŠ‚ç‚¹åŒçº§çš„èŠ‚ç‚¹ï¼Œå°±åœ¨åŸèŠ‚ç‚¹çš„å³ä¾§ã€‚åŸèŠ‚ç‚¹çš„å‰ $\\lceil(M+1)/2\\rceil$ ä¸ªå­©å­è¿˜å±äºè‡ªå·±ï¼Œå‰©ä¸‹çš„ $\\lfloor(M+1)/2\\rfloor$ ä¸ªå­©å­éœ€è¦äº¤ç»™æ–°åˆ›å»ºçš„èŠ‚ç‚¹ã€‚\n\nå¦‚æœåˆ†è£‚çš„è¿‡ç¨‹ä¸­ï¼Œå¯¼è‡´çˆ¶èŠ‚ç‚¹ä¹Ÿè¶…å‡ºäº† $M$ çš„é™åˆ¶ï¼Œå°±éœ€è¦å¯¹çˆ¶èŠ‚ç‚¹ä¹Ÿè¿›è¡Œåˆ†è£‚ï¼Œä»¥æ­¤ç±»æ¨ã€‚å¦‚æœçˆ¶èŠ‚ç‚¹å·²ç»æ˜¯æ ¹èŠ‚ç‚¹ï¼Œå°±åˆ›å»ºä¸€ä¸ªæ–°æ ¹å†è¿›è¡Œåˆ†è£‚ï¼Œæ­¤æ—¶æ ‘é«˜ä¼šå¢åŠ  $1$ï¼Œå…¶ä»–æƒ…å†µä¸‹æ ‘é«˜ä¸ä¼šæ”¹å˜ã€‚\n\n### 4.2. Insertion\n\nå…ˆè¿›è¡Œä¸€æ¬¡æŸ¥æ‰¾ç¡®å®šéœ€è¦æ’å…¥çš„èŠ‚ç‚¹å¹¶æ‰§è¡ŒæŒ‚åœ¨é‚£ä¸ªå¶å­èŠ‚ç‚¹ä¸Šï¼Œæ¥ä¸‹æ¥è¿›è¡Œ bottom-up çš„ç»´æŠ¤å³å¯ã€‚\n\n![è¯¾ä»¶ä¸­ç»™å‡ºçš„ä¼ªä»£ç |464](https://img.memset0.cn/2024/03/06/TDgpEcGD.png)\n\n### 4.3. Complexity Analysis\n\nä¸€èˆ¬æ¥è¯´æˆ‘ä»¬å– $M=3$ï¼ˆ2-3 æ ‘ï¼‰æˆ– $M=4$ï¼ˆ2-3-4 æ ‘ï¼‰ã€‚å½“ $M$ ä¸æ˜¯å¸¸æ•°çº§åˆ«æ—¶ï¼Œéœ€è¦ç”¨äºŒåˆ†æŸ¥æ‰¾å¯¹æ’å…¥è¿‡ç¨‹è¿›è¡Œä¼˜åŒ–ã€‚\n\nTBDï¼šå¤æ‚åº¦åˆ†æ\n","publishedTitle":"ã€Œé«˜çº§æ•°æ®ç»“æ„ä¸ç®—æ³•åˆ†æã€ç¬¬ä¸€éƒ¨åˆ†ï¼šäºŒå‰æœç´¢æ ‘"}},{"id":"e2ba34d8-1e0a-5f3a-b4d8-f9b2e5cc6d11","fields":{"slug":"/course/ads/note/2/","plainText":"\n> æœ¬ç¯‡ç¬”è®°ä¸»è¦ä»‹ç»äº†å¯å¹¶å †çš„æ¦‚å¿µåŠå…¶ç›¸å…³æ“ä½œï¼ŒåŒ…æ‹¬å·¦å€¾å †ã€æ–œå †å’ŒäºŒé¡¹å †çš„å®šä¹‰ã€æ“ä½œåŠå¤æ‚åº¦åˆ†æã€‚å·¦å€¾å †é€šè¿‡ç©ºè·¯å¾„é•¿åº¦æ¥å®šä¹‰èŠ‚ç‚¹çš„ç»“æ„ï¼Œæ–œå †åˆ™é€šè¿‡è‡ªé€‚åº”çš„æ–¹å¼è¿›è¡Œåˆå¹¶ï¼Œè€ŒäºŒé¡¹å †åˆ™æ˜¯ç”±å¤šä¸ªå †æœ‰åºæ ‘ç»„æˆçš„æ£®æ—ã€‚æ¯ç§å †çš„åˆå¹¶ã€æ’å…¥å’Œåˆ é™¤æ“ä½œéƒ½æœ‰å…¶ç‹¬ç‰¹çš„å®ç°æ–¹å¼å’Œå¤æ‚åº¦åˆ†æã€‚<small style=\"font-style: italic; opacity: 0.5\">ï¼ˆç”± gpt-4o-mini ç”Ÿæˆæ‘˜è¦ï¼‰</small>\n\n<!-- more -->\n\n## 1. Leftist Heap\n\n**ç©ºè·¯å¾„é•¿åº¦(null path length)**ï¼š$Npl(X)$ å®šä¹‰ä¸ºä»èŠ‚ç‚¹ $X$ ä»»æ„æ²¡æœ‰ä¸¤ä¸ªå­©å­çš„å­èŠ‚ç‚¹çš„æœ€çŸ­è·ç¦»ã€‚ç‰¹åˆ«åœ°ï¼Œå®šä¹‰ $Npl(\\text{NULL})=-1$ï¼Œå¯¹äºå¶å­èŠ‚ç‚¹æˆ–åªæœ‰ä¸€ä¸ªå­©å­çš„å­èŠ‚ç‚¹ï¼Œå…¶ $Npl$ æ˜¾ç„¶ä¸º $0$ã€‚æ˜¾ç„¶æœ‰ï¼š\n\n$$\nNpl(X)= 1+\\min\\{Npl(C) \\mid C \\text{ is a child of } X\\}\n$$\n\n**å·¦å€¾å †(leftist heap)**ï¼šå¯¹äºå·¦å€¾å †çš„æ¯ä¸ªèŠ‚ç‚¹ï¼Œå…¶å·¦èŠ‚ç‚¹çš„ $Npl$ å€¼å¤§äºç­‰äºå³èŠ‚ç‚¹çš„ $Npl$ å€¼ã€‚\n\n### 1.1. Operations\n\n#### 1.1.1. Merge\n\né€’å½’åˆå¹¶ï¼Œæ¯æ¬¡æ’å…¥åˆ°å³ä¾§ã€‚æ’å…¥åå¦‚æœå³å­æ ‘çš„ $Npl$ æ›´å¤§åˆ™äº¤æ¢å·¦å³å­æ ‘ã€‚\n\nä¹Ÿæœ‰ä¸€ç§ä¸â€œäº¤æ¢â€å·¦å³å­©å­çš„æ–¹æ³•ï¼Œå®šä¹‰ä¸€ä¸ª $rc$ å‡½æ•°æ¯æ¬¡æ ¹æ®å·¦å³å­©å­çš„ $Npl$ è¿”å› $Npl$ è¾ƒå°çš„åº—ä½œä¸ºå³èŠ‚ç‚¹å³å¯ã€‚\n\n#### 1.1.2. Insert\n\nçœ‹åšä¸ä¸€ä¸ªå•èŠ‚ç‚¹çš„å­æ ‘åˆå¹¶ã€‚\n\n#### 1.1.3. DeleteMin\n\nåˆ å»æ ¹ï¼Œåˆå¹¶æ ¹èŠ‚ç‚¹çš„ä¸¤ä¸ªå­æ ‘ã€‚\n\n### 1.2. Complexity Analysis\n\nTBD\n\n## 2. Skew Heap\n\n**æ–œå †(Skew Heap)**ï¼Œä¹Ÿå«åš**è‡ªé€‚åº”å †(self-adjusting heap)** æ˜¯å¦ä¸€ç§å¯å¹¶å †ï¼Œå®ƒä¸éœ€è¦è®°å½•ä»»æ„ä¸€ä¸ªèŠ‚ç‚¹çš„è·ç¦»ï¼Œåªæ˜¯åœ¨åˆå¹¶æ“ä½œä¸Šæœ‰æ‰€æ”¹å˜ã€‚\n\n### 2.1. Operations\n\n#### 2.1.1. Merge (Recursive)\n\n- æ¯”è¾ƒä¸¤ä¸ªå †ï¼›è®¾ $p$ æ˜¯å…·æœ‰æ›´å°çš„ $root$ çš„é”®å€¼çš„å †ï¼Œ$q$ æ˜¯å¦ä¸€ä¸ªå †ï¼Œ$r$ æ˜¯åˆå¹¶åçš„ç»“æœå †ã€‚\n- æ ¹æ®å †æ€§è´¨ï¼Œé€‰ $p$ çš„æ ¹èŠ‚ç‚¹ä½œä¸º $r$ çš„æ ¹èŠ‚ç‚¹ã€‚\n- ä»¤ $r$ çš„å³å­æ ‘ä¸º $p$ çš„å·¦å­æ ‘ã€‚\n- ä»¤ $r$ çš„å·¦å­æ ‘ä¸º $p$ çš„å³å­æ ‘ä¸ $q$ åˆå¹¶çš„ç»“æœã€‚\n\n![5AvjjzEn.png|439](https://img.memset0.cn/2024/03/18/5AvjjzEn.png)\n\n#### 2.1.2. Merge (Non-recursive)\n\n- æŠŠæ¯ä¸ªå †çš„æ¯æ£µï¼ˆé€’å½’æ„ä¹‰ä¸‹ï¼‰æœ€å³å­æ ‘åˆ‡ä¸‹æ¥ã€‚è¿™ä½¿å¾—å¾—åˆ°çš„æ¯æ£µæ ‘çš„å³å­æ ‘å‡ä¸ºç©ºã€‚\n- æŒ‰ $root$ çš„é”®å€¼çš„å‡åºæ’åˆ—è¿™äº›æ ‘ã€‚\n- è¿­ä»£åˆå¹¶å…·æœ‰æœ€å¤§ $root$ é”®å€¼çš„ä¸¤æ£µæ ‘ï¼š\n  - å…·æœ‰æ¬¡å¤§ $root$ é”®å€¼çš„æ ‘çš„å³å­æ ‘å¿…å®šä¸ºç©ºã€‚æŠŠå…¶å·¦å­æ ‘ä¸å³å­æ ‘äº¤æ¢ã€‚ç°åœ¨è¯¥æ ‘çš„å·¦å­æ ‘ä¸ºç©ºã€‚\n  - å…·æœ‰æœ€å¤§ $root$ é”®å€¼çš„æ ‘ä½œä¸ºå…·æœ‰æ¬¡å¤§ $root$ é”®å€¼æ ‘çš„å·¦å­æ ‘ã€‚\n\n![llycHoJp.png|327](https://img.memset0.cn/2024/03/18/llycHoJp.png)\n\n### 2.2. Complexity Analysis\n\n**é‡èŠ‚ç‚¹(heavy node)**ï¼šç§°ä¸€ä¸ªèŠ‚ç‚¹ $p$ æ˜¯ heavy çš„ï¼Œå½“ä¸”ä»…å½“å®ƒå³å­æ ‘çš„èŠ‚ç‚¹æ•°å¤§äºç­‰äºå·¦å­æ ‘çš„èŠ‚ç‚¹æ•°ã€‚\n\nè¿›è¡Œå‡æ‘Šåˆ†æï¼Œå®šä¹‰åŠ¿èƒ½å‡½æ•°\n\n$$\n\\Phi(D_i) = \\text{the number of heavy nodes}\n$$\n\nè€ƒè™‘ç¬¬ $i$ æ¬¡åˆå¹¶è¿‡ç¨‹ï¼Œå®ƒä»¬**å³è·¯å¾„ä¸Šçš„**è½»é‡èŠ‚ç‚¹ä¸ªæ•°åˆ†åˆ«ä¸º $l_p,\\ h_p$ å’Œ $l_q,\\ h_q$ã€‚åˆ™ä¸€æ¬¡åˆå¹¶çš„å®é™…ä»£ä»·ä¸º\n\n$$\nc_i = l_p+ l_q+h_p+h_q\n$$\n\nå¦å¤–æ³¨æ„åˆ°ï¼Œä¸€æ¬¡æ“ä½œåï¼Œé‡èŠ‚ç‚¹ä¸€å®šå˜æˆè½»èŠ‚ç‚¹ï¼Œä½†æ˜¯è½»èŠ‚ç‚¹ä¸ä¸€å®šå˜æˆé‡èŠ‚ç‚¹ã€‚è¿™æ˜¯å› ä¸º\n\n- å¯¹äºä¸€ä¸ªé‡èŠ‚ç‚¹ï¼ŒåŸå…ˆè¾ƒå¤§çš„å³å­æ ‘äº¤æ¢åˆ°å³ä¾§ä¸”ä¼šä¸å¦ä¸€æ£µæ ‘åˆå¹¶ï¼Œä»è€Œå˜å¾—æ›´å¤§ï¼Œæ•…é‡èŠ‚ç‚¹åˆå¹¶åä¸€å®šå˜æˆè½»èŠ‚ç‚¹ã€‚\n- å¯¹äºä¸€ä¸ªè½»èŠ‚ç‚¹ï¼Œè™½ç„¶è¾ƒé‡çš„å­æ ‘è¢«æ¢åˆ°å³ä¾§ï¼Œä½†æ˜¯ç”±äºå·¦å­æ ‘å’Œå¦ä¸€ä¸ªæ ‘åˆå¹¶å¯èƒ½å˜å¾—æ›´å¤§ï¼Œæ•…åˆå¹¶åæœ‰å¯èƒ½æ˜¯è½»èŠ‚ç‚¹ä¹Ÿæœ‰å¯èƒ½æ˜¯é‡èŠ‚ç‚¹ã€‚\n\næ•…åŠ¿èƒ½å¢åŠ é‡\n\n$$\n\\Phi(D_{i+1}) - \\Phi(D_i) \\leq l_p+l_q-h_p-h_q = O(\\log N)\n$$\n\nè€Œå³è·¯å¾„ä¸Šçš„è½»èŠ‚ç‚¹çš„æ•°æ˜¯ $O(\\log n)$ çº§åˆ«çš„ï¼Œæ‰€ä»¥æ€»å¤æ‚åº¦ä¸º $O(n\\log n)$ã€‚\n\n## 3. Binomial Queue\n\n**äºŒé¡¹å †(binomial queue)**ï¼šA binomial queue is not a heap-ordered tree, but rather a collection of heap-ordered trees, known as a forest. Each heap-ordered tree is a binomial tree.\n\n**äºŒé¡¹æ ‘(binomial tree)**ï¼šA binomial tree of height $0$ is a one-node tree. A binomial tree, $B_k$, of height $k$ is formed by attaching a binomial tree, $B_{k-1}$, to the root of another binomial tree, $B_{k-1}$.\n\n![|500](https://img.memset0.cn/2024/03/25/kWPGWSjF.png)\n\n> [!important] Observation\n>\n> $B_k$ consists of a root with $k$ children, which are $B_0,B_1,\\ldots B_{k-1}$. $B_k$ has exactly nodes. The number of nodes at depth $d$ is $\\displaystyle\\binom{k}{d}$.\n\næ³¨æ„åˆ°äºŒé¡¹æ ‘æœ‰ä»¥ä¸‹é‡è¦æ€§è´¨ï¼š\n\n- äºŒé¡¹æ ‘ $B_k$ çš„æ€»ç»“ç‚¹æ•°æ˜¯ $2^k$ï¼Œè¿™æ„å‘³ç€æˆ‘ä»¬æƒ³è¦æ„å»ºä¸€é¢—å¤§å°ä¸º $n$ çš„äºŒé¡¹å †æ—¶ï¼Œå¯ä»¥å¯¹ $n$ è¿›è¡ŒäºŒè¿›åˆ¶æ‹†åˆ†ã€‚\n- äºŒé¡¹æ ‘çš„åˆå¹¶æ˜¯ç®€å•çš„ï¼Œå¯ä»¥é€šè¿‡ä¸¤ä¸ª $B_{k-1}$ é€šè¿‡ $O(1)$ çš„å¤æ‚åº¦ç›´æ¥å¾—åˆ° $B_k$ï¼Œå¹¶ä¸”ç»´æŒå †æ€§è´¨ä¸å˜ã€‚\n\n### 3.1. Operations\n\n#### 3.1.1. FindMin\n\næšä¸¾ binomal queue ä¸­çš„æ¯ä¸ªå †ï¼Œå–ä»–ä»¬çš„æ ¹èŠ‚ç‚¹çš„æœ€å°å€¼ã€‚ç”±äº binomal queue ä¸­çš„å †çš„æ•°é‡æ˜¯ $O(\\log n)$ çš„ï¼Œæ•…è¿™ä¸€æ“ä½œçš„å¤æ‚åº¦ä¸º $O(\\log n)$ã€‚\n\n#### 3.1.2. Merge / Insert\n\nå¯ä»¥ç±»æ¯”äºŒè¿›åˆ¶æ•°çš„ç«–å¼åŠ æ³•ï¼Œæ¥ç¡®å®šéœ€è¦æŒ‰ç…§ä»€ä¹ˆæ ·çš„é¡ºåºå°†å“ªäº› binomal trees åˆå¹¶ï¼Œè¿™é‡Œåˆ«å¿˜äº†è¦è€ƒè™‘**è¿›ä½**ã€‚\n\n![|600](https://img.memset0.cn/2024/03/25/Me4cgHFD.png)\n\n#### 3.1.3. DeleteMin\n\næ‰¾åˆ°æ ¹èŠ‚ç‚¹å€¼æœ€å°çš„ binomal treeï¼Œè®¾ä¸º $B_{k-1}$ å°†å…¶æ ¹èŠ‚ç‚¹åˆ é™¤ï¼Œå…¶å­©å­åº”åˆ†åˆ«ä¸º $B_0,B_1,\\cdots,B_{k-1}$ï¼Œå°†è¿™äº›å­©å­è§†ä¸ºå¦ä¸€ä¸ª binomal queueï¼Œå’ŒåŸ binonal queue åˆ é™¤ $B_k$ åçš„ç»“æœåˆå¹¶ï¼Œåº”ç”¨ä¸Šé¢çš„ Merge ç®—æ³•å³å¯ã€‚\n\n### 3.2. Implementation\n\nå®ç°æ—¶ä¸ºäº†æ–¹ä¾¿å¿«é€Ÿå®ç°å­©å­çš„**é¡ºåºéå†**ï¼Œåœ¨å­˜å‚¨å­©å­æ—¶å¯ä»¥è€ƒè™‘ä½¿ç”¨**é“¾è¡¨**çš„æ–¹å¼ï¼Œæˆ–è€…è¯´ï¼Œä½¿ç”¨**å·¦å„¿å­å³å…„å¼Ÿ(left-child , right-sibling)** çš„è¿æ¥æ–¹å¼ã€‚\n\nå¦ä¸€æ–¹é¢ï¼Œæˆ‘ä»¬çš„é“¾è¡¨æœ€å¥½æŒ‰ç…§ $B_{k-1},B_{k-2},\\cdots,B_0$ çš„æ–¹æ³•å­˜å‚¨è¿™äº›æ•°ï¼Œè¿™æ ·åœ¨åˆå¹¶çš„æ—¶å€™ä¸ç”¨éå†å­©å­é“¾è¡¨ä¹Ÿèƒ½ç»´æŒå·¦å„¿å­æœ‰å…„å¼Ÿçš„ç»“æ„ï¼Œå…·ä½“è‡ªå·±ç”»ä¸ªå›¾å°±çŸ¥é“äº†ã€‚\n\n![|550](https://img.memset0.cn/2024/03/25/UHW79OoD.png)\n\n### 3.3. Complexity Analysis\n\n> [!note] Claim\n>\n> A binomial queue of $n$ can be built by $n$ **successive(è¿ç»­)** insertions in $O(n)$ time.\n\nå¯ä»¥ç”¨å‡æ‘Šåˆ†æè¯æ˜ï¼Œå…·ä½“è¯æ˜è¿‡ç¨‹ç•¥ã€‚\n\n$$\n\\begin{aligned}\nc_i &::= \\text{cost of the }i\\text{th insertion.}\\\\\n\\Phi_i &::= \\text{number of trees after the }i\\text{th insertion } (\\Phi_0=0)\n\\end{aligned}\n$$\n","publishedTitle":"ã€Œé«˜çº§æ•°æ®ç»“æ„ä¸ç®—æ³•åˆ†æã€ç¬¬äºŒéƒ¨åˆ†ï¼šå¯å¹¶å †"}},{"id":"37a52659-ec66-5012-b0ee-cf31b51ccf76","fields":{"slug":"/course/ads/note/3/","plainText":"\n> æœ¬ç¯‡ç¬”è®°æ¦‚è¿°äº†ç»å…¸ç®—æ³•çš„å¤šç§ç±»å‹ï¼ŒåŒ…æ‹¬å€’æ’ç´¢å¼•ã€å›æº¯ç®—æ³•ã€åˆ†æ²»æ³•ã€åŠ¨æ€è§„åˆ’ã€è´ªå¿ƒç®—æ³•ã€è¿‘ä¼¼ç®—æ³•ã€å±€éƒ¨æœç´¢ã€éšæœºåŒ–ç®—æ³•ã€å¹¶è¡Œç®—æ³•ä»¥åŠå¤–éƒ¨æ’åºã€‚æ¯ç§ç®—æ³•éƒ½é…æœ‰å…·ä½“çš„ä¾‹å­å’Œå¤æ‚åº¦åˆ†æï¼Œå¸®åŠ©è¯»è€…ç†è§£å…¶åº”ç”¨åœºæ™¯å’Œå®ç°æ–¹å¼ã€‚é€šè¿‡è¿™äº›å†…å®¹ï¼Œè¯»è€…å¯ä»¥æŒæ¡ç®—æ³•è®¾è®¡çš„åŸºæœ¬æ€æƒ³å’ŒæŠ€å·§ï¼Œä¸ºè§£å†³å®é™…é—®é¢˜æä¾›ç†è®ºåŸºç¡€å’Œå®è·µæŒ‡å¯¼ã€‚<small style=\"font-style: italic; opacity: 0.5\">ï¼ˆç”± gpt-4o-mini ç”Ÿæˆæ‘˜è¦ï¼‰</small>\n\n<!-- more -->\n\n## 1. å€’æ’ç´¢å¼• Inverted File Index\n\n### 1.1. Optimize a Search Engine\n\nè¯»å–æ—¶çš„å¤„ç†ï¼š\n\n- word stemming\n- stop words\n\n**é˜ˆå€¼(thresholding)**ï¼š\n\n- document: åªæ£€ç´¢å‰é¢ $x$ ä¸ªæŒ‰æƒé‡æ’åºçš„æ–‡æ¡£\n- queryï¼šæŠŠå¸¦æŸ¥è¯¢çš„ terms æŒ‰ç…§å‡ºç°çš„é¢‘ç‡å‡åºæ’åº\n\næœç´¢å¼•æ“çš„**ç›¸å…³æ€§åº¦é‡(relevance measurement)**ï¼š\n\n- **å‡†ç¡®ç‡(precision)**ï¼šæŒ‡æ£€ç´¢å‡ºç›¸å…³æ–‡æ¡£æ•°ä¸æ£€ç´¢å‡ºçš„æ–‡æ¡£æ€»æ•°çš„æ¯”ç‡ï¼Œè¡¡é‡çš„æ˜¯æ£€ç´¢ç³»ç»Ÿçš„æŸ¥å‡†ç‡ $P_R=R_R/(R_R+I_R)$ã€‚\n- **å¬å›ç‡(recall)**ï¼šæŒ‡æ£€ç´¢å‡ºçš„ç›¸å…³æ–‡æ¡£æ•°å’Œæ–‡æ¡£åº“ä¸­æ‰€æœ‰çš„ç›¸å…³æ–‡æ¡£æ•°çš„æ¯”ç‡ï¼Œè¡¡é‡çš„æ˜¯æ£€ç´¢ç³»ç»Ÿçš„æŸ¥å…¨ç‡ $R_R=R_R/(R_R+R_N)$ã€‚\n\n![6dDuxn44.png|302](https://img.memset0.cn/2024/06/22/6dDuxn44.png)\n\n## 2. å›æº¯ Backtracing\n\n- è§£ç©ºé—´çº¦æŸ\n\næ±‚è§£é—®é¢˜çš„ä¸€ä¸ªå¯é æ–¹æ³•æ˜¯æ‰¾å‡ºæ‰€æœ‰å¯èƒ½å¾—æƒ…å†µï¼Œé€ä¸€æ£€æŸ¥ï¼Œæ‰¾åˆ°æ­£ç¡®ç­”æ¡ˆã€‚**å›æº¯(backtracing)** ç®—æ³•åˆ©ç”¨äº†**å‰ªæ(pruning)** ï¼Œå¯ä»¥å‡å°‘å¯¹å¤§é‡å·²çŸ¥ä¸å¯èƒ½çš„æƒ…å†µçš„æ˜¾ç¤ºæ£€æŸ¥ã€‚\n\n- å°½é‡é€‰æ‹©ä»å°‘åˆ°å¤šçš„æœç´¢æ–¹å¼ï¼Œè¿™æ ·åœ¨å‰ªæçš„æ—¶å€™å¯ä»¥ä¸€æ¬¡æ€§å‰ªæ‰æ›´å¤šçš„æƒ…å†µæ•°ã€‚\n\n### 2.1. Minimax Search & Î±-Î² Pruning\n\nå®šä¹‰ goodness å‡½æ•°ä¸º $f(P) = W_\\text{Computer} - W_\\text{Human}$ï¼Œåˆ™ Human æƒ³è¦æœ€å°åŒ– $f(P)$ è€Œ Computer æƒ³è¦æœ€å¤§åŒ– $f(P)$ã€‚\n\n$\\alpha-\\beta$ å‰ªæçš„æ ¸å¿ƒæ€æƒ³ï¼šæ ¹æ®å½“å‰å±€é¢å¯ä»¥æ¨å®šä¸ä¼šå½±å“ä¸Šå±‚èŠ‚ç‚¹ç»“æœçš„å°±å¯ä»¥è¿›è¡Œå‰ªæã€‚\n\n> [!example] ä¹ é¢˜\n>\n> Given the following game tree, which node in the right subtree is the first node to be pruned with Î±-Î² pruning algorithm?\n>\n> ![|400](https://img.memset0.cn/2024/04/22/qHOiJ06o.png)\n>\n> > [!quote]- ç­”æ¡ˆ\n> > Dã€‚å¯ä»¥åˆ†æè€ŒçŸ¥ï¼šæ— è®ºèŠ‚ç‚¹ $d$ çš„å€¼æ˜¯å¤šå°‘ï¼Œéƒ½ä¸ä¼šå½±å“åˆ°æ ¹èŠ‚ç‚¹ $68$ çš„å€¼ï¼Œæ•…å¯ä»¥è¿›è¡Œå‰ªæã€‚\n> >\n> > å¦å¤–å·¦å­æ ‘ä¸­å¯ä»¥å‡æ‰çš„èŠ‚ç‚¹æ˜¯ $38$ã€‚\n\n### 2.2. Examples\n\n> [!summary] Eight Queens\n>\n> ï¼ˆå…«çš‡åé—®é¢˜ï¼‰åœ¨æ£‹ç›˜ä¸­æ‰¾åˆ°å…«ä¸ªä½ç½®æ”¾ç½®çš‡åï¼Œä½¿å¾—å®ƒä»¬éƒ½ä¸åŒè¡Œä¸”ä¸åŒåˆ—ï¼Œä¹Ÿä¸èƒ½åŒæ—¶ä½äºå¯¹è§’çº¿ä¸Šã€‚\n\nåœ¨æ¸¸æˆæ ‘ä¸Šè¿›è¡Œ DFS æœç´¢ã€‚\n\n> [!summary] Turnpike Reconstruction Problem\n>\n> åœ¨ä¸€æ¡ç›´çº¿ä¸Šæ‰¾åˆ° $n$ ä¸ªåœ°æ–¹å»ºç«‹åŠ æ²¹ç«™ï¼Œå·²çŸ¥å®ƒä»¬ä¸¤ä¸¤ä¹‹é—´çš„è·ç¦»ï¼ˆå…± $\\dfrac{n(n-1)}{2}$ å¯¹ï¼‰ï¼Œæ±‚å‡ºæ‰€æœ‰åŠ æ²¹ç«™çš„ä½ç½®ï¼Œå‡å®šç¬¬ä¸€ä¸ªåŠ æ²¹ç«™çš„åæ ‡æ˜¯ $0$ã€‚\n\nå°±æ˜¯æš´æœã€‚åœ¨ DFS è¿‡ç¨‹ä¸­ç»´æŠ¤æœªåˆ†é…çš„è·ç¦»é›†åˆï¼Œè¿˜æœ‰å½“å‰çš„å¤„ç†åŒºé—´ï¼Œæ¯æ¬¡ä»è·ç¦»é›†åˆä¸­æ‰¾åˆ°æœ€å¤§çš„è·ç¦» $D$ï¼Œçœ‹æ–°çš„åŠ æ²¹ç«™åº”å½“æ”¾åœ¨ $x_1+D$ çš„ä½ç½®è¿˜æ˜¯ $x_n-D$ çš„ä½ç½®å³å¯ã€‚\n\n> [!summary] Stick Problem\n>\n> ç»™ä¸€ä¸ªä»è‹¥å¹²æ ¹é•¿åº¦ä¸º $L$ çš„å¤§æ£å­é‡Œåˆ‡å‡ºæ¥çš„å°æ£å­é•¿åº¦é›†åˆï¼Œæ±‚æœ€å°çš„å¯èƒ½çš„ $L$ã€‚\n\nä»å°åˆ°å¤§æšä¸¾ $L$ ç„¶åå°†åŸæ¥é€šè¿‡å›æº¯æ³•è¿›è¡Œæœç´¢ã€‚\n\n> [!summary] Tic-tac-toe Game (play with computer)\n>\n> ç»å…¸äº•å­—æ£‹å°æ¸¸æˆã€‚\n\nè¿™é‡Œå®šä¹‰ $W_\\text{Player}$ ä¸º Player èƒ½å¤Ÿèµ¢å¾—èƒœåˆ©çš„å¯èƒ½æ•°ï¼ˆå¦‚æœæŠŠå‰©ä¸‹æ‰€æœ‰å„è‡ªéƒ½å¡«ä¸Šä½ çš„æ£‹å­ï¼Œå¯ä»¥æœ‰å¤šå°‘ä¸ªä¸‰è¿ï¼‰ï¼Œå¯ä»¥ä¸€å®šç¨‹åº¦ä¸Šè¡¨å¾å±€é¢å¯¹äºè‡ªå·±çš„ä¼˜åŠ£æƒ…å†µã€‚å®šä¹‰ goodness å‡½æ•° $f(P)=W_\\text{AI}-W_\\text{Player}$ï¼Œä½¿ç”¨ Minimax æœç´¢äº¤æ›¿è¿›è¡Œé€‰æ‰‹â€”â€”è®¡ç®—æœºçš„å¯¹å¼ˆï¼Œéœ€è¦ä½¿ç”¨ $\\alpha-\\beta$ å‰ªæã€‚\n\n## 3. åˆ†æ²» Divide & Conquer\n\n- **åˆ†æ²»(divide conquer)**\n\n### 3.1. Complexity Analysis\n\nåˆ†æåˆ†æ²»ç®—æ³•çš„å¤æ‚åº¦æœ‰ä¸‰ç§å¸¸ç”¨çš„æ–¹æ³•ï¼š\n\n- **ä»£æ¢æ³•(substitution method)**ï¼šå…ˆçŒœå¯¹ç­”æ¡ˆï¼Œç„¶åä½¿ç”¨æ•°å½’è¯æ˜ã€‚\n- **é€’å½’æ ‘æ³•(recursion-tree method)**ï¼šå†™æˆå¤šå‰çº¿æ®µæ ‘çš„å½¢å¼ï¼Œæ¯ä¸€å±‚åˆ†åˆ«è®¡ç®—ï¼Œæœ€ååŠ èµ·æ¥ã€‚\n- **ä¸»æ–¹æ³•(master method)**ï¼šç”¨ä¸»å®šç†è§£å†³ã€‚\n\n### 3.2. Master Theorems\n\n> [!important] **ä¸»å®šç†(master theorems)**\n>\n> ![](https://img.memset0.cn/2024/04/22/ggv99pe2.png)\n>\n> ![](https://img.memset0.cn/2024/04/22/YLitclF0.png)\n\n> [!example] ä¹ é¢˜\n>\n> For each of the following recurrences, choose the one that we cannot apply the Master Theorems to solve.\n>\n> A. $T(n) = 3 T(n/3) +n / \\lg n$\n>\n> B. $T(n) = 4 T(n/2) +n / \\lg n$\n>\n> C. $T(n) = 4 T(n/2) +n^2 / \\lg n$\n>\n> D. $T(n) = 3 T(n/4) +n \\lg n$\n>\n> > [!quote]- ç­”æ¡ˆ\n> > ACï¼Ÿç„¶è€Œ pta ä¸Šçš„ç­”æ¡ˆæ˜¯ Aã€‚\n\n### 3.3. Examples\n\n> [!summary] Closest Point Problem\n>\n> ç»™å¹³é¢ä¸Š $n$ ä¸ªç‚¹ï¼Œæ±‚è§£æœ€è¿‘ç‚¹å¯¹ã€‚\n\n## 4. åŠ¨æ€è§„åˆ’ Dynamic Programming\n\n- **èƒŒåŒ…é—®é¢˜(the knapsack problem)**\n\n### 4.1. Examples\n\n> [!summary] Fibonacci Numbers\n>\n> $a_n=a_{n-1}+a_{n-2}$ï¼Œæ±‚è§£ $a_n$ã€‚\n\nä¸¤ç§å®ç°ï¼šå¯å‘å¼æœç´¢æˆ–è€…ç›´æ¥åºåˆ— DPï¼Œéƒ½æ˜¯ç”¨ä¸€å¼ è¡¨æ¥å­˜ $a_n$ã€‚\n\n> [!summary] Ordering Matrix Multiplications\n>\n> å®‰æ’ $n$ ä¸ªçŸ©é˜µçš„ä¹˜æ³•çš„è®¡ç®—é¡ºåºï¼Œæœ€å°åŒ–è®¡ç®—é‡ã€‚ï¼ˆç¬¬ $i$ ä¸ªçŸ©é˜µ $M_i$ çš„å¤§å°æ˜¯ $r_{i-1}\\times r_i$ï¼‰\n\nåŒºé—´ DPï¼Œ$f[i][j]=f[i][k]+f[k+1][j]+r[i-1]\\times r[k]\\times r[j]$ã€‚\n\n> [!summary] Optimal Binary Search Tree\n>\n> ç»™ $n$ ä¸ªè¯çš„æœç´¢é¢‘ç‡ï¼Œåº”å¦‚ä½•æ„å»º BST ä»¥æœ€å°åŒ– access æœŸæœ›ä»£ä»·ï¼Ÿç›¸æ¯”äº Haffman ç¼–ç é—®é¢˜ï¼Œæˆ‘ä»¬ç¡®å®šäº†ä¸­åºéå†ï¼Œä¸”å†…éƒ¨èŠ‚ç‚¹ä¸Šä¹Ÿèƒ½æœ‰é”®å€¼ã€‚\n>\n> ![sHVVVUcH.png|600](https://img.memset0.cn/2024/04/15/sHVVVUcH.png)\n\nä»**æœ€ä¼˜å­ç»“æ„**è½¬ç§»ï¼šæœ€ä¼˜æ–¹æ¡ˆçš„ä¸¤æ£µå­æ ‘ä¸€å®šæ˜¯æœ€ä¼˜æ–¹æ¡ˆã€‚å®šä¹‰ $w_{i,j}  =\\sum_{k=i}^j p_k$ï¼Œ$c_{i,j}$ è¡¨ç¤ºç»™åŒºé—´ $[i,j]$ èŠ‚ç‚¹å»ºæ ‘çš„æœ€å°èŠ±è´¹ï¼Œåˆ™æœ‰è½¬ç§»ï¼š\n\n$$\nc_{i,j}\n= \\min\\limits_{i\\le k\\le j} \\{p_k + w_{i,k-1} + c_{i,k-1} + w_{k+1,j} + c_{k+1,j} \\}\n= w_{i,j} + \\min \\{c_{i,k-1}+c_{k+1,j}\\}\n$$\n\n> [!summary] All-Pairs Shortest Path\n>\n> æ±‚ä»»æ„ä¸¤ç‚¹é—´æœ€çŸ­è·¯å¾„ã€‚\n\næˆ‘çœ‹äº†çœ‹æ€ä¹ˆæ„Ÿè§‰å°±æ˜¯ Floyd å•Šï¼Ÿ\n\n> [!summary] Product Assembly\n>\n> æœ‰ $n$ æ­¥çš„å·¥åºï¼Œå¯ä»¥åœ¨ä¸¤æ¡ç”Ÿäº§çº¿ä¹‹é—´åˆ‡æ¢ï¼Œæ¶ˆè€—çš„æ—¶é—´å’Œæœ¬æ¬¡åŠä¸Šåƒæ¬¡åœ¨å“ªæ¡ç”Ÿäº§çº¿å®Œæˆæœ‰å…³ï¼Œæ±‚æœ€ä¼˜ç”Ÿäº§æµç¨‹ã€‚\n>\n> ![|400](https://img.memset0.cn/2024/06/22/sQMmQMdC.png)\n\næˆ‘çœ‹äº†çœ‹æ€ä¹ˆæ„Ÿè§‰å°±æ˜¯ç›´æ¥ DP å•Šï¼Ÿ\n\n## 5. è´ªå¿ƒ Greedy\n\n### 5.1. Examples\n\n> [!summary] Activity Selection Problem\n>\n> ![ZfAxMf1F.png|620](https://img.memset0.cn/2024/06/14/ZfAxMf1F.png)\n\nDP åšæ³•ï¼šè®¾ $dp_{i}$ è¡¨ç¤ºå‰ $i$ ä¸ªå•ä½æ—¶é—´é‡Œæœ€å¤šé€‰å‡ ä¸ªï¼Œæ‰¾åˆ°æ‰€æœ‰ $f_t-1=i$ çš„æ´»åŠ¨ï¼Œä» $dp_{s_t - 1} + 1$ è½¬ç§»ã€‚æ—¶é—´å¤æ‚åº¦ $O(n^2)$ï¼Œä¸å¤Ÿä¼˜ç§€ã€‚\n\nè´ªå¿ƒåšæ³•ï¼šæŠŠæ‰€æœ‰åŒºé—´æŒ‰ç…§å³ç«¯ç‚¹æ’åºï¼Œæ¯æ¬¡å–å³ç«¯ç‚¹æœ€å°çš„ï¼Œå³é€‰æ‹©å°½æ—©ç»“æŸçš„æ´»åŠ¨ï¼ˆåè¿‡æ¥ä¹Ÿå¯ï¼Œå³é€‰æ‹©æœ€è¿Ÿå¼€å§‹çš„æ´»åŠ¨ï¼‰ï¼Œç„¶åæŠŠæœ‰é‡åˆçš„éƒ½åˆ æ‰ï¼Œå¦‚æ­¤å¾ªç¯ç›´åˆ°ç»“æŸã€‚æ—¶é—´å¤æ‚åº¦ $O(n\\log n)$ã€‚\n\n> [!summary] Huffman Codes\n>\n> å“ˆå¤«æ›¼ç¼–ç é—®é¢˜ã€‚\n\nå»º Huffman æ ‘çš„è¿‡ç¨‹æ­£ä½“ç°äº†è´ªå¿ƒæ€æƒ³ã€‚\n\n## 6. è¿‘ä¼¼ Approximation\n\n### 6.1. Approximation Ratio\n\nè®¾ $C$ ä¸ºæˆ‘ä»¬ç®—æ³•çš„ costï¼Œ$C^\\ast$ ä¸ºæœ€ä¼˜è§£çš„ costï¼Œå®šä¹‰**è¿‘ä¼¼ç‡(approximation ratio)** ä¸ºï¼š\n\n$$\n\\max\\left(\\dfrac{C}{C^\\ast},\\dfrac{C^\\ast}{C}\\right) \\le \\rho(n)\n$$\n\n- ç§°è¿™æ ·çš„ç®—æ³•ä¸º $\\rho(n)$-approximation algorithm\n- approximation scheme: è¿‘ä¼¼ç‡ $\\rho(n)=1+\\epsilon$ çš„ç®—æ³•ï¼Œå³ $(1+\\epsilon)$-approximation algorithm\n- `PTAS`ï¼špolynomial-time approximation scheme å…³äº $n$ æˆå¤šé¡¹å¼å¤æ‚åº¦çš„ç®—æ³• (è®¾ $\\epsilon$ ä¸ºå¸¸æ•°)\n- `FPTAS`ï¼šfully polynomial-time approximation scheme å…³äº $n$ å’Œ $\\epsilon$ éƒ½æˆå¤šé¡¹å¼å¤æ‚åº¦çš„\n  ç®—æ³•\n\n### 6.2. On-line & Off-line Algorithms\n\nåœ¨è¯»å…¥æ•°æ®çš„æ—¶å€™è¿›è¡Œå†³ç­–ï¼Œä¸€æ—¦å†³ç­–ä¹‹åä¸èƒ½ä¿®æ”¹ã€‚\n\n### 6.3. Examples\n\n> [!summary] Approximate Bin Packing\n>\n> Given $N$ items of sizes $S_{1},S_{2},\\cdots,S_{N}$, such that $0<S_i\\leq1$ for all $1\\leq i\\leq N$. Pack these items in the fewest number of bins, each of which has unit capacity.\n>\n> â€”â€”è¿™ä¸€é—®é¢˜æ˜¯ NP-Hard çš„ã€‚\n\nNext Fit åšæ³•ï¼šä¾æ¬¡è¯»å…¥æ¯ä¸ªç‰©å“ï¼Œçœ‹çœ‹æ˜¯å¦èƒ½å’Œå‰ä¸€ä¸ªç‰©å“æ”¾åœ¨åŒä¸€ä¸ª binï¼Œå¦‚æœä¸è¡Œçš„è¯å°±å¼€ä¸€ä¸ªæ–° binã€‚\n\n> [!quote]- è¯æ˜ï¼šè®¾æœ€ä¼˜è§£ä¸º $M$ï¼Œåˆ™ç”¨ Next Fit åšæ³•å¾—åˆ°çš„è§£ä¸è¶…è¿‡ $2M-1$ã€‚\n>\n> è®¾ç”¨ Next Fit åšæ³•ç”Ÿæˆçš„è§£ä¸º $2M$ï¼ˆæˆ– $2M+1$ï¼‰ï¼Œé‚£ä¹ˆæœ‰ $S_{2i-1}+S_{2i} > 1 \\space (1\\le i\\le M)$ï¼Œæ•… $\\sum_{i=1}^{2M} S_i > M$ï¼Œæ•…è‡³å°‘éœ€è¦ $M+1$ ä¸ª binã€‚\n\nFirst Fit åšæ³•ï¼šä¾æ¬¡è¯»å…¥æ¯ä¸ªç‰©å“ï¼Œæ‰«ææ‰€æœ‰å·²æœ‰çš„ç®±å­ï¼Œæ‰¾åˆ°ç¬¬ä¸€ä¸ªèƒ½æ”¾ä¸‹çš„æ”¾ï¼Œå¦‚æœä¸å­˜åœ¨åˆ™æ–°å¼€ä¸€ä¸ªç®±å­æ”¾ã€‚è®¾æœ€ä¼˜è§£ä¸º $M$ï¼Œåˆ™å¾—åˆ°çš„è§£ä¸è¶…è¿‡ $1.7M$ã€‚\n\nBest Fit åšæ³•ï¼šä¾æ¬¡è¯»å…¥æ¯ä¸ªç‰©å“ï¼Œåœ¨å¯ä»¥æ”¾ä¸‹è¿™ä¸€ç‰©å“çš„ç®±å­ä¸­é€‰å‰©ä½™ç©ºé—´æœ€å°çš„ï¼Œå¦‚æœä¸å­˜åœ¨åˆ™æ–°å¼€ä¸€ä¸ªç®±å­æ”¾ã€‚è®¾æœ€ä¼˜è§£ä¸º $M$ï¼Œåˆ™å¾—åˆ°çš„è§£ä¸è¶…è¿‡ $1.7M$ã€‚\n\nè¿™é‡Œçš„ Next Fitã€First Fit å’Œ Best Fit åšæ³•éƒ½æ˜¯åœ¨çº¿åšæ³•ï¼Œå¦‚æœå…è®¸ç¦»çº¿ï¼Œåˆ™å¯å°†æ‰€æœ‰ç‰©å“æŒ‰ç…§ä½“ç§¯ä»å¤§åˆ°å°æ’åºï¼Œç„¶ååº”ç”¨ First Fitï¼ˆæˆ– Best Fitï¼‰åšæ³•ã€‚è®¾æœ€ä¼˜è§£ä¸º $M$ï¼Œåˆ™å¾—åˆ°çš„è§£ä¸è¶…è¿‡ $\\dfrac{11 M+6}{9}$ã€‚\n\n> [!summary] The Knapsack Problem (0-1 Version)\n>\n> å°±æ˜¯ 0-1 èƒŒåŒ…é—®é¢˜ã€‚\n\n- ç”¨ DP è§£å†³çš„å¤æ‚åº¦æ˜¯æŒ‡æ•°çº§çš„ï¼Œå› ä¸ºç‰©å“å¤§å°å’Œ $n$ ä¸åŒé˜¶ï¼Œå®é™…ä¸Š Knapsack é—®é¢˜æ˜¯ **NP-Hard é—®é¢˜**ï¼ŒKnapsack çš„åˆ¤å®šæ˜¯ NPC é—®é¢˜ã€‚\n- å¦‚æœå°†ç‰©å“çš„å¤§å°ç¼©æ”¾åˆ° $poly(n)$ çš„èŒƒå›´ï¼Œåˆ™æœ‰å¤šé¡¹å¼å¤æ‚åº¦çš„ DPï¼Œä½†ç®—æ³•ä¹Ÿå˜æˆäº†è¿‘ä¼¼ç®—æ³•ã€‚\n\nå¦‚æœä½¿ç”¨è´ªå¿ƒåšæ³•ï¼Œæ¯æ¬¡é€‰ï¼ˆå¯é€‰çš„ï¼‰é‡Œä»·å€¼æœ€é«˜æˆ–æ€§ä»·æ¯”æœ€é«˜çš„ï¼ˆä¸¤ç§åšæ³•åˆ†åˆ«åšä¸€æ¬¡ï¼‰ï¼Œå¯ä»¥è¯æ˜è¿‘ä¼¼æ¯”ä¸º $2$ã€‚\n\n> [!quote]- è¯æ˜ï¼šè´ªå¿ƒåšæ³•çš„è¿‘ä¼¼æ¯”ä¸º $2$ã€‚\n>\n> è¿™é‡Œ $P_\\text{Greedy}$ æ˜¯ä¸¤ç§è´ªå¿ƒåšæ³•å¾—åˆ°ç»“æœçš„ maxã€‚\n>\n> ![|550](https://img.memset0.cn/2024/06/14/zGqxpFu0.png)\n>\n> ![|700](https://img.memset0.cn/2024/06/23/f7vNK3he.png)\n\n> [!summary] The K-center Problem\n>\n> å¹³é¢ä¸Šç»™å®š $n$ ä¸ªç‚¹ï¼Œç¡®å®š $K$ ä¸ªåœ†å¿ƒçš„ä½ç½®è¦†ç›–æ‰€æœ‰ç‚¹å¹¶ä½¿æœ€å¤§åœ†çš„åŠå¾„æœ€å°ã€‚\n>\n> ![|400](https://img.memset0.cn/2024/06/14/w3TDaglB.png)\n\n> [!quote] å®šç†ï¼šé™¤é $\\text{P}=\\text{NP}$ï¼Œå¦åˆ™ä¸å­˜åœ¨ $\\text{ratio}<2$ çš„è§£æ³•ã€‚\n>\n> è‹¥ K-center å­˜åœ¨ $(2-\\epsilon)$-approximationï¼Œåˆ™å¯ç”¨äºç²¾ç¡®æ±‚è§£ Dominating Set é—®é¢˜ï¼Œè€Œåè€…æ˜¯ä¸€ä¸ª NPC é—®é¢˜ã€‚\n\n## 7. å±€éƒ¨æœç´¢ Local Search\n\n- $S \\sim S'$ï¼š$S'$ æ˜¯ $S$ çš„ä¸€ä¸ª**ç›¸é‚»è§£(neighboring solution)**ï¼Œåªéœ€è¦å¯¹ $S$ è¿›è¡Œä¸€ä¸ªå¾®å°çš„ä¿®æ”¹å°±å¯ä»¥å¾—åˆ°ã€‚\n- $N(S)$ï¼š$S$ çš„**é‚»åŸŸ(nerghborhood)**ï¼Œå³ $\\{S'\\mid S\\sim S'\\}$ã€‚\n- ç§° $S^\\ast$ æ˜¯ $S$ çš„ local optimumï¼Œå³ $S^\\ast\\in N(S)$ ä¸”æ˜¯å…¶ä¸­æœ€ä¼˜çš„ã€‚\n\n### 7.1. Gradient Descent\n\nçˆ¬å±±â€”â€”æ¢¯åº¦ä¸‹é™æ³•ï¼šæ¯æ¬¡åœ¨é‚»åŸŸä¸­é€‰ä¸€ä¸ª**æœ€ä¼˜çš„**è½¬ç§»ï¼Œå¦‚æœæ‰¾ä¸åˆ°åˆ™é€€å‡ºã€‚\n\nå®¹æ˜“é™·å…¥==å±€éƒ¨æœ€ä¼˜è§£==ä¸­ã€‚\n\n### 7.2. The Metropolis Algorithm\n\næ¨¡æ‹Ÿé€€ç«â€”â€”Metropolis ç®—æ³•ï¼šæ¯æ¬¡åœ¨é‚»åŸŸä¸­éšæœºé€‰ä¸€ä¸ªè½¬ç§»ï¼Œå¦‚æœæ¯”å½“å‰æƒ…å†µæ›´æœ‰åˆ™ä»¥ä¸€å®šæ¦‚ç‡ $-e^{\\dfrac{\\Delta cost}{k T}}$ æ¥æ”¶ï¼Œå¦åˆ™æ¦‚ç‡æ¥æ”¶ä¸”è¿™ä¸€æ¦‚ç‡éšè¿­ä»£æ¬¡æ•°æŒ‡æ•°ä¸‹é™ã€‚\n\n### 7.3. Examples\n\n> [!summary] Vertex Cover Problem\n>\n> æœ€å°ç‚¹è¦†ç›–é—®é¢˜ã€‚\n\nç›´æ¥ä½¿ç”¨çˆ¬å±±é—®é¢˜å®¹æ˜“é™·åœ¨ e å±€éƒ¨æœ€ä¼˜è§£ï¼Œå»ºè®®ä½¿ç”¨æ¨¡æ‹Ÿé€€ç«ç®—æ³•ã€‚\n\n> [!summary] Hopfield Neural Network\n>\n> ç»™å®š $G=(V,E)$ å…¶ä¸­è¾¹æƒæœ‰æ­£è´Ÿï¼Œç»™æ¯ä¸ªèŠ‚ç‚¹åˆ†é…ä¸€ä¸ª $s_u\\in\\{-1,1\\}$ï¼Œç§°ä¸€ä¸ªç‚¹æ˜¯ state assignment å½“ä¸”ä»…å½“\n>\n> ![|600](https://img.memset0.cn/2024/06/15/fReDCwxW.png)\n>\n> ![|474](https://img.memset0.cn/2024/06/15/hWEqLUNB.png)\n\nstate-flipping ç®—æ³•ï¼šæ¯æ¬¡åè½¬ä¸€ä¸ªä¸ç¨³å®šçš„èŠ‚ç‚¹ä½œä¸ºè½¬ç§»ã€‚\n\n> [!quote]- è¯æ˜ï¼šState-flipping ç®—æ³•ä¸€å®šèƒ½è¾¾åˆ°ä¸€ä¸ªç¨³å®šçŠ¶æ€ï¼Œä¸”æœ€å¤šåè½¬ $W = \\sum_e |w_e|$ æ¬¡ã€‚\n>\n> ![|500](https://img.memset0.cn/2024/06/15/zRE5pyxX.png)\n\n> [!summary] Maximal Cut Problem\n>\n> æœ€å¤§å‰²é—®é¢˜ã€‚æŠŠç‚¹é›†åˆ’åˆ†ä¸ºä¸¤éƒ¨åˆ† $A,B$ï¼Œæœ€å¤§åŒ– $w(A,B) = \\sum_{u\\in A, v\\in B} w_{u,v}$ã€‚\n\né‡‡ç”¨ç±»ä¼¼äºä¸Šä¸€é—®çš„è½¬ç§»ï¼Œå³ç¿»è½¬ä¸€ä¸ªç‚¹çš„çŠ¶æ€ã€‚è‹¥è¿›è¡Œçˆ¬å±±ç®—æ³•ï¼Œå¯ä»¥å¾—åˆ°ä¸€å±€éƒ¨æœ€ä¼˜è§£ $A,B$ã€‚è®¾æœ€ä¼˜è§£ä¸º $A^\\ast,B^\\ast$ã€‚\n\n> [!quote]- è¯æ˜ï¼š$w(A,B) \\ge \\dfrac{1}{2} w(A^\\ast, B^\\ast)$ã€‚\n>\n> ![|500](https://img.memset0.cn/2024/06/15/V5n2aolc.png)\n\nbig-improvement-flip ç®—æ³•ï¼šå½“æ–°çš„å±€éƒ¨æœ€ä¼˜è§£çš„å¢é•¿çš„å¹…åº¦å°äº $\\dfrac{2\\varepsilon}{|v|} w(A,B)$ çš„æ—¶å€™å°±åœæ­¢ï¼Œè¿™æ ·ç®—æ³•å¯ä»¥åœ¨ä¸€å®šè¿‘ä¼¼æ¯”çš„ä»£ä»·ä¸‹ä¿è¯åœ¨å¤šé¡¹å¼å¤æ‚åº¦å†…ç»“æŸã€‚\n\n> [!important] å®šç†\n>\n> è¿™æ ·å°±æœ‰ $(2+\\varepsilon) w(A,B) \\ge w(A^\\ast, B^\\ast)$ï¼Œå¯ä»¥åœ¨æœ€å¤š $O\\left(\\dfrac{n}{\\varepsilon} \\log W\\right)$ æ¬¡ç¿»è½¬åç»“æŸã€‚\n\n## 8. éšæœºåŒ– Randomize\n\næœ‰ä¸¤ç§éšæœºç®—æ³•ï¼š\n\n- æœ‰éå¸¸é«˜çš„æ¦‚ç‡ç»™å‡ºæ­£ç¡®ç­”æ¡ˆã€‚efficient randomized algorithms that only need to yield the correct answer with high probability\n- æ€»æ˜¯æ­£ç¡®çš„ï¼Œå¹¶åœ¨æœŸæœ›ä¸­è¿è¡Œçš„å¾ˆæœ‰æ•ˆç‡ã€‚ randomized algorithms that are always correct, and run efficiently in expectation\n\n### 8.1. Random Shuffle\n\nç»™æ¯ä¸ªå…ƒç´ åˆ†é…ä¸€ä¸ªéšæœºçš„ keyï¼š`a[i].key = rng() % (n * n * n)`ï¼Œç„¶åæ ¹æ® key è¿›è¡Œæ’åºã€‚æ ¹æ®ç”Ÿæ—¥ç¢°æ’ï¼Œè¿™é‡Œå– $N^3$ ä½œä¸ºæ¨¡æ•°å°±èƒ½æœ‰ä¸€ä¸ªä¸é”™çš„æ•ˆæœã€‚\n\n### 8.2. Examples\n\n> [!summary] The Hiring Problem\n>\n> - Hire an office assistant from headhunter.\n> - Interview a different applicant per day for $N$ days.\n> - Interviewing Cost = $C_{i} \\ll$ Hiring Cost $=C_{h}$\n> - Analyze interview & hiring cost instead of running time\n> - Assume $M$ people are hired. Total Cost: $O(N C_{i} + M C_{h})$.\n>\n> æ€»èŠ±è´¹ = é¢è¯•æ¬¡æ•° $\\times$ æ¯æ¬¡é¢è¯•çš„èŠ±è´¹ $+$ é›‡ä½£äººæ•° $\\times$ é›‡ä½£è´¹ç”¨ã€‚\n\nä¸€ç§ç®€å•çš„åšæ³•ï¼šçœ‹åˆ°æ¯”å…ˆå‰æ›´å¥½çš„äººå°±é›‡ä½£ï¼Œä½†æ˜¯åœ¨é¢è¯•è€…æŒ‰ç…§ä¼˜ç§€ç¨‹åº¦é€’å¢é¡ºåºè¿›æ¥çš„æ—¶å€™å°±ä¼šçˆ†ç‚¸ã€‚ä¸å¦¨è¿›è¡Œéšæœºæ’åºï¼Œåˆ™æœŸæœ›èŠ±è´¹ä¸º $O(C_h \\ln N + N C_i)$ã€‚\n\n> [!summary] Online Hiring Problem - Hire at Once\n>\n> å°†å‰é¢çš„é—®é¢˜æ”¹ä¸ºåœ¨çº¿ï¼Œä½†åªèƒ½é›‡ä½£ä¸€æ¬¡ã€‚\n\nä¸€ç§è¾ƒé«˜æ¦‚ç‡æˆåŠŸçš„è§£ï¼šå…ˆé¢è¯•å‰ $k$ ä¸ªäººä½†ä¸€å®šä¸ä»ä¸­é›‡ä½£ï¼Œç„¶åä¾æ¬¡é¢è¯•ç¬¬ $k+1\\cdots N$ ä¸ªäººï¼Œå…¶ä¸­ç¬¬ä¸€ä¸ªæ»¡è¶³æ¯”å‰ $k$ ä¸ªäººä¼˜ç§€å³ $A_j = \\max_{i=1}^k A_i$ çš„äººè¿›è¡Œé›‡ä½£ã€‚å¯ä»¥è¯æ˜å– $k = \\dfrac{N}{e}$ æ—¶æœ€ä¼˜ã€‚\n\n> [!quote]- è¯æ˜ï¼šæœ€ä¼˜è§£ $k = \\dfrac{N}{e}$ã€‚\n>\n> æ ¹æ®å¾®ç§¯åˆ†çš„çŸ¥è¯†æˆ‘ä»¬æœ‰ï¼š\n>\n> $$\n> \\ln N-\\ln k = \\int_k^N \\dfrac{1}{x}\\text dx \\le \\sum_{i=k}^{N-1} \\dfrac{1}{i} \\le \\int_{k-1}^{N-1} \\dfrac{1}{i}  \\text dx = \\ln (N-1) - \\ln(k-1)\n> $$\n>\n> é‚£ä¹ˆå–åˆ°æœ€ä¼˜è§£çš„æ¦‚ç‡ä¸ºï¼š\n>\n> $$\n> Pr[S] = \\sum_{i=k+1}^N Pr[S_i] = \\dfrac{k}{N} \\sum_{i=k}^{N-1} \\dfrac{1}{i} \\sim \\dfrac kN \\ln \\left(\\dfrac Nk\\right)\n> $$\n>\n> æ ¹æ®é«˜ä¸­æ•°å­¦çš„çŸ¥è¯†å¯ä»¥çŸ¥é“å– $\\dfrac N k=e$ æ—¶æœ€å¤§å³ $k=\\dfrac{N}{e}$ï¼Œä¸”æ¦‚ç‡ä¸º $\\dfrac{1}{e}$ã€‚\n\n> [!summary] Quicksort\n>\n> ä¼—æ‰€å‘¨çŸ¥ï¼Œç›´æ¥é€‰ä¸­é—´ä½ç½®ä½œä¸º pivot çš„å¿«é€Ÿæ’åºæ˜¯å¯ä»¥è¢«å¡åˆ° $O(n^2)$ çš„ï¼Œé‚£åº”è¯¥æ€ä¹ˆé€‰å‘¢ã€‚\n\néšæœºä¸€ä¸ªæ•°ä½œä¸º pivotï¼Œä½†å¦‚æœè¿™ä¸€ pivot æ˜¯æœ€å°çš„ 1/4 æˆ–æœ€å¤§çš„ 1/4 åˆ™é‡é€‰ï¼ŒæœŸæœ›æ„ä¹‰ä¸‹åªé‡é€‰ä¸€æ¬¡ã€‚\n\nè¿™æ ·è‡³å°‘ä¼šå°†è§„æ¨¡åˆ’åˆ†ä¸º $\\dfrac{n}{4}$ å’Œ $\\dfrac{3n}{4}$ï¼Œå¯ä»¥è¯æ˜å¤æ‚åº¦æ˜¯ $O(n\\log n)$ã€‚\n\n## 9. å¹¶è¡Œç®—æ³• Parallel Algorithm\n\nä¸¤ä¸ªæ¨¡å‹ï¼šParallel Random Access Machine (PRAM)ï¼›Work-Depth (WD)ã€‚\n\n### 9.1. PRAM Model\n\n![yfN9mtsC.png|524](https://img.memset0.cn/2024/06/23/yfN9mtsC.png)\n\n![fN50Vo13.png|776](https://img.memset0.cn/2024/06/23/fN50Vo13.png)\n\n### 9.2. WD Model\n\n![HrnJ84fN.png|782](https://img.memset0.cn/2024/06/23/HrnJ84fN.png)\n\nã€WD-presentation Sufficiently Theoremã€‘An algorithm in the WD mode can be implememnt by any $P(n)$ processors within $O(W(n)/P(n) + T(n))$ time, using the same concurrent-write convention as in the WD presentation.\n\n> [!summary] Maximal Finding\n>\n> æ‰¾ $n$ ä¸ªæ•°çš„æœ€å¤§å€¼ï¼Œå¹¶è¡Œç®—æ³•ã€‚\n\n- Replace \"+\" by \"max\" in the summation algorithm. $T(n)=O(\\log n),\\ W(n)=O(n)$\n- Compare al pairs (find $B(i)=0$). $T(n)=O(1),\\ W(n)=O(n^{2})$\n- Doubly-logarithmic Paradigm: Parition by $n^{1/2}$. $T(n)=O(\\log \\log n),\\ W(n)=O(n \\log \\log n)$\n- Paritition by $h=\\log \\log n$. $T(n) = O(\\log \\log n),\\ W(n) =O(n)$\n- Random Sampling. $n^{7/8}=n^{3/4} \\times n^{1/8},\\ n^{3/4}=n^{1/2} \\times n^{1/4}$. $M(n^{7/8}) \\sim T = O(1),\\ W=O(n)$.\n\n## 10. å¤–éƒ¨æ’åº External Sorting\n\næˆ‘ä»¬åªæœ‰æœ‰é™çš„å†…å­˜ï¼ˆåªèƒ½å­˜æ”¾ $M$ ä¸ªæ•°ï¼‰å’Œè‹¥å¹² tapeï¼ˆä¸€ç§ç‰¹æ®Šçš„å­˜å‚¨ç»“æ„ï¼Œåªèƒ½é¡ºåºè¯»å†™ï¼‰ï¼Œéœ€è¦è§£å†³æ’åºé—®é¢˜ã€‚\n\nè¿™ä¸ªå…·ä½“çš„è¿‡ç¨‹ç‰¹åˆ«æŠ½è±¡æˆ‘æ‡’å¾—è®°å½•äº†ï¼Œå¯ä»¥çœ‹ä¸€ä¸‹åˆ«äººçš„ç¬”è®°ã€‚ä¸è¿‡åˆ«å› ä¸ºè¿™ä¸ªæ˜¯æœ€åä¸€è®²å°±ä¸çœ‹äº†ï¼Œä¼¼ä¹æ˜¯æ¯å¹´å¿…è€ƒçš„å†…å®¹ã€‚\n","publishedTitle":"ã€Œé«˜çº§æ•°æ®ç»“æ„ä¸ç®—æ³•åˆ†æã€ç¬¬ä¸‰éƒ¨åˆ†ï¼šç®—æ³•"}},{"id":"f66de247-c16f-57bb-b9b5-d83aaa370203","fields":{"slug":"/course/physics/note/6/","plainText":"\n> æœ¬ç¯‡ç¬”è®°ä»‹ç»äº†é™ç”µå­¦çš„åŸºæœ¬æ¦‚å¿µå’Œå®šå¾‹ã€‚é¦–å…ˆè®¨è®ºäº†ç”µè·çš„åŸºæœ¬æ€§è´¨å’Œåº“ä»‘å®šå¾‹ï¼Œå¼•å…¥äº†ç”µåœºå¼ºåº¦çš„æ¦‚å¿µï¼Œå¹¶é˜è¿°äº†ç”µé€šé‡å’Œé«˜æ–¯å®šç†ã€‚éšåè¯¦ç»†æ¢è®¨äº†ç”µåŠ¿å’Œç”µåŠ¿èƒ½çš„å…³ç³»ï¼Œä»¥åŠå®ƒä»¬ä¸ç”µåœºçš„è”ç³»ã€‚æœ€ååˆ†æäº†å¯¼ä½“åœ¨é™ç”µå¹³è¡¡æ—¶çš„ç‰¹æ€§ï¼ŒåŒ…æ‹¬å¯¼ä½“è¡¨é¢çš„ç”µè·åˆ†å¸ƒå’Œé™ç”µå±è”½ç°è±¡ï¼Œå¹¶è®¨è®ºäº†å„ç§å…¸å‹å¸¦ç”µä½“ï¼ˆå¦‚å¸¦ç”µçƒå£³ã€çƒä½“ã€ç›´çº¿å’Œå¹³é¢ï¼‰çš„ç”µåœºä¸ç”µåŠ¿åˆ†å¸ƒã€‚<small style=\"font-style: italic; opacity: 0.5\">ï¼ˆç”± claude-3.5-sonnet ç”Ÿæˆæ‘˜è¦ï¼‰</small>\n\n<!-- more -->\n\n## 1. Ch13 é™ç”µåœº\n\n### 1.1. ç”µè·Â·ç”µåœºÂ·ç”µåœºå¼ºåº¦\n\n- **ç”µè·é‡å­åŒ–**ï¼šå¸¦ç”µç²’å­çš„ç”µé‡åªèƒ½æ˜¯åŸºæœ¬ç”µè· $e=1.60217733 \\times 10^{-19} \\text{ C}$ çš„æ•´å€æ•°ã€‚\n- **åº“ä»‘å®šå¾‹**ï¼š$\\displaystyle{\\color{blue}\\boldsymbol{F}_{12} =\\dfrac{1}{4\\pi \\varepsilon_{0} }\\frac{q_1q_2}{r^2}\\hat{\\boldsymbol{r}}_{12} }$ã€‚\n- **ç”µåœºå¼ºåº¦**ï¼šå•ä½è¯•éªŒç”µè·ï¼ˆç”µé‡å°ï¼Œå¯çœ‹æˆç‚¹ç”µè·ï¼‰åœ¨è¯¥ç‚¹æ‰€å—ç”µåœºåŠ›ï¼Œ$\\displaystyle{\\color{blue}\\boldsymbol{E} = \\dfrac{\\boldsymbol{F}}{q_{0}}} \\displaystyle{ = \\frac1{4\\pi\\varepsilon_0}\\int\\frac{\\mathrm{d}q}{r^2}\\hat{r}}$ï¼ˆç¬¬äºŒä¸ªç­‰å·ä¸º **åœºå¼ºå åŠ åŸç†**ï¼‰ã€‚\n  - çº¿åˆ†å¸ƒï¼š$\\text{d}q = \\lambda \\text{d}l$ï¼›é¢åˆ†å¸ƒï¼š$\\text{d} q = \\sigma \\text{d} s$ï¼›ä½“åˆ†å¸ƒï¼š$\\text{d}q = \\rho \\text{d}V$ã€‚\n- **ç”µé€šé‡**ï¼š$\\Phi_E=\\displaystyle{\\int_{S}\\boldsymbol{E}\\cdot\\text{d}\\boldsymbol{S}}$ã€‚\n- **ç”µé€šé‡çš„é«˜æ–¯å®šç†**ï¼š$\\color{blue}\\Phi_{E} = \\displaystyle{\\oint_{S} \\boldsymbol{E} \\cdot \\text{d}\\boldsymbol{S}=\\frac{1}{\\varepsilon_0}\\sum_iq_{i(\\text{å†…})}}$ï¼ˆè¿™é‡Œ $S$ æ˜¯é—­åˆæ›²é¢ï¼‰ï¼›å³é—­åˆæ›²é¢çš„ç”µé€šé‡ç­‰äºå†…éƒ¨ç”µè·é‡é™¤ä»¥ $\\varepsilon_{0}$ï¼Œä¸€èˆ¬å– $\\boldsymbol{E}$ ä¸ $\\text{d}\\boldsymbol{S}$ åŒå‘çš„æƒ…å†µæ–¹ä¾¿è®¡ç®—ã€‚\n  - å¯¹äºå‡åŒ€å¸¦ç”µçƒé¢ï¼šå¯¹äºçƒé¢å¤–ä»»ä¸€ç‚¹ï¼Œæœ‰ $\\boldsymbol{E}=\\dfrac q{4\\pi\\varepsilon_0r^2}\\hat{\\boldsymbol{r}}$ã€‚\n  - å¯¹äºè½´å¯¹ç§°åˆ†å¸ƒï¼ˆåŒ…æ‹¬æ— é™é•¿å‡åŒ€å¸¦ç”µçš„ç›´çº¿ï¼Œåœ†æŸ±é¢ï¼Œåœ†æŸ±ä½“ç­‰ï¼‰ï¼š$E=\\dfrac\\lambda{2\\pi\\varepsilon_0r}$ã€‚\n  - å¯¹äºæ— é™å¤§å¹³é¢ç”µè·ï¼ˆåŒ…æ‹¬æ— é™å¤§çš„å‡åŒ€å¸¦ç”µå¹³é¢ï¼Œå¹³æ¿ç­‰ï¼‰ï¼š$E=\\dfrac{\\sigma}{2\\varepsilon_0}$ã€‚\n\n### 1.2. ç”µåŠ¿\n\n- **é™ç”µåœºç¯è·¯å®šç†**ï¼šå¯¹äºä»»æ„é—­åˆæ›²çº¿ $L$ï¼Œæœ‰ $\\displaystyle{\\oint_{L} \\boldsymbol{E} \\cdot \\text{d} \\boldsymbol{l}  = 0}$ã€‚\n- **ç”µåŠ¿èƒ½**ï¼šå½“è¯•éªŒç”µè· $q_{0}$ ä» $a$ ç§»åˆ° $b$ï¼Œå…¶é—´ç”µåœºåŠ›ï¼ˆä¿å®ˆåŠ›ï¼‰æ‰€åšçš„åŠŸåº”ç­‰äºç”µè·é™ç”µåŠ¿èƒ½å¢é‡çš„è´Ÿå€¼ï¼Œ$\\displaystyle{\\color{blue}W_{ab}=q_0\\int_a^b\\boldsymbol{E}\\cdot\\mathrm{d}\\boldsymbol{l}=-(W_{b}-W_{a})=-\\Delta W}$ã€‚\n  - ç”µè·ä»é«˜ç”µåŠ¿èƒ½ç‚¹ç§»å‘ä½ç”µåŠ¿èƒ½ç‚¹ï¼Œç”µåŠ¿èƒ½å‡å°ï¼Œç”µåœºåŠ›åšæ­£åŠŸï¼›<br>ç”µè·ä»ä½ç”µåŠ¿èƒ½ç‚¹ç§»å‘é«˜ç”µåŠ¿èƒ½ç‚¹ï¼Œç”µåŠ¿èƒ½å¢åŠ ï¼Œç”µåœºåŠ›åšè´ŸåŠŸã€‚\n  - ç”µåŠ¿èƒ½æ˜¯ç›¸å¯¹çš„ï¼Œéœ€è¦è§„å®šä¸€ä¸ªç”µåŠ¿èƒ½ä¸º $0$ çš„å‚è€ƒç‚¹ã€‚ä¸€èˆ¬é€‰æ— é™è¿œç‚¹æˆ–æ¥åœ°ä¸º $0$ã€‚è§„å®šæ— é™è¿œç‚¹ä¸º $0$ æ—¶æœ‰ $\\displaystyle{W_{P} = q_{0} \\int_{P}^{\\infty} q_{0} \\boldsymbol{E} \\cdot \\text{d}\\boldsymbol{l}}$ã€‚\n  - å¯¹äºç‚¹ç”µè·ç”µåœºçš„æƒ…å†µå¯ä»¥æ¨å‡º $W_{ab}=\\displaystyle{\\int_{r_{a}}^{r_{b}} \\dfrac{1}{4\\pi \\epsilon_{0}} \\dfrac{q_{0}q}{r^{2}} \\text{d}r = \\dfrac{q_{0}q}{4\\pi \\epsilon_{0}} \\left( \\dfrac{1}{r_{1}}-\\dfrac{1}{r_{2}} \\right)}$ã€‚\n- **ç”µåŠ¿**ï¼šæŸç‚¹ç”µåŠ¿èƒ½ä¸å…¶ç”µè·é‡çš„æ¯”å€¼ï¼Œæ˜¯åªä¸ä½ç½®æœ‰å…³çš„å‡½æ•°ï¼Œ$\\color{blue}\\displaystyle{U_P=\\frac{W_P}{q_0}=\\int_P^{P_{0}}\\boldsymbol{E}\\cdot\\mathrm{d}\\boldsymbol{l}}$ï¼ˆè¿™é‡Œ $P_{0}$ æ˜¯åŠ¿èƒ½é›¶ç‚¹ï¼‰ã€‚\n  - **ç”µåœºå’Œç”µåŠ¿çš„å…³ç³»**ï¼š$\\boldsymbol{E} = -\\nabla \\boldsymbol{V}$ã€‚\n  - é™ç”µåŠ›ä¸ç”µåŠ¿èƒ½çš„å…³ç³»ï¼š$\\boldsymbol{F} = -\\nabla \\boldsymbol{U}$ã€‚\n  - ç‚¹ç”µè·åœ¨ç”µåœºä¸­çš„ç”µåŠ¿ï¼š$U_{p} = \\dfrac{q}{4\\pi \\varepsilon_{0} r}$ã€‚\n- **ç”µåŠ¿å·®** / **ç”µå‹**ï¼š$U_{ab} =\\displaystyle{U_a-U_b = \\int_{a}^{\\infty} \\boldsymbol{E} \\cdot \\text{d}\\boldsymbol{l}- \\int_{b}^{\\infty} \\boldsymbol{E} \\cdot \\text{d}\\boldsymbol{l} =\\int_a^b\\boldsymbol{E}\\cdot\\mathrm{d}\\boldsymbol{l}}$ã€‚\n  - æ²¿ç€ç”µåœºçº¿æ–¹å‘ï¼Œç”µåŠ¿é™ä½ã€‚\n- å¸¸è§å¸¦ç”µä½“çš„ç”µåœºä¸ç”µåŠ¿åˆ†å¸ƒï¼š\n  - å‡åŒ€å¸¦ç”µçƒå£³\n    - ç”µåœºï¼š$E=\\begin{cases}0\\quad& r <R\\\\ \\dfrac{q}{4 \\pi \\varepsilon_{0} r^{2}}\\quad&r > R\\end{cases}$\n    - ç”µåŠ¿ï¼š$U=\\begin{cases} \\dfrac{q}{4 \\pi \\varepsilon_{0}R}\\quad& r<R\\\\ \\dfrac{q}{4\\pi \\varepsilon_{0}r}\\quad&r>R\\end{cases}$\n  - å‡åŒ€å¸¦ç”µçƒä½“\n    - ç”µåœºï¼š$E=\\begin{cases} \\dfrac{rq}{4 \\pi \\varepsilon_{0} R^{3}}\\quad& r<R\\\\ \\dfrac{q}{4 \\pi \\varepsilon_{0} r^{2}}\\quad& r>R\\end{cases}$\n  - <img src=\"https://img.memset0.cn/2024/10/30/xujrh4hf.png\" width=\"100\" align=\"right\"/>å‡åŒ€æ— é™é•¿å¸¦ç”µç›´çº¿\n    - ç”µåœºï¼š$E= \\dfrac{\\lambda}{2\\pi \\varepsilon_{0} r} = \\dfrac{1}{\\varepsilon_{0}}\\dfrac{\\lambda \\text{d}l}{2\\pi r \\cdot \\text{d}l}$\n  - <img src=\"https://img.memset0.cn/2024/10/30/upKcfkIJ.png\" width=\"145\" align=\"right\">å‡åŒ€æ— é™å¤§å¸¦ç”µå¹³é¢\n    - ç”µåœºï¼š$E=\\dfrac{\\sigma}{2\\varepsilon_{0}}=\\dfrac{1}{\\varepsilon_{0}} \\dfrac{\\sigma S}{2S}$\n      - æ¨è®ºï¼šæ— é™å¤§å¹³è¡Œæ¿ç”µå®¹å™¨å†…éƒ¨ç”µåœºï¼š$E=\\dfrac{\\sigma}{\\varepsilon_{0}}$ï¼ˆåœ¨å¤–éƒ¨æ¥è‡ªä¸¤å—ææ¿çš„ç”µåœºç›¸äº’æŠµæ¶ˆï¼‰\n\n## 2. Ch14 é™ç”µåœºä¸­çš„å¯¼ä½“å’Œç”µä»‹è´¨\n\n### 2.1. å¯¼ä½“\n\n- **é™ç”µå¹³è¡¡**ï¼šå¤–ç”µåœºå¼•èµ·å¯¼ä½“ä¸Šè‡ªç”±ç”µå­çš„ç§»åŠ¨ï¼Œä½¿å¯¼ä½“å¸¦ä¸Šç­‰é‡å¼‚å·çš„ **æ„Ÿåº”ç”µè·**ï¼›æ„Ÿåº”ç”µè·æ¿€å‘é™„åŠ ç”µåœºï¼Œæ”¹å˜å¯¼ä½“å†…å¤–çš„ç”µåœºã€‚å½“å¯¼ä½“å†…çš„å¤–ç”µåœºä¸é™„åŠ ç”µåœºæ­£å¥½ç›¸äº’æŠµæ¶ˆæ—¶ï¼Œå¯¼ä½“ä¸Šçš„è‡ªç”±ç”µå­åœæ­¢å®è§‚è¿åŠ¨ï¼Œå¯¼ä½“è¾¾åˆ° **é™ç”µå¹³è¡¡**ã€‚\n  - å¯¼ä½“å†…éƒ¨åœºå¼ºå¤„å¤„ä¸ºé›¶ ã€‚\n  - å¯¼ä½“æ˜¯ä¸€ä¸ªç­‰åŠ¿ä½“ï¼Œå¯¼ä½“è¡¨é¢æ˜¯ä¸€ä¸ªç­‰åŠ¿é¢ã€‚\n  - ç”µè·åªåˆ†å¸ƒåœ¨å¯¼ä½“çš„è¡¨é¢ä¸Šï¼Œæ‰€æœ‰ç”µè·çš„ä»£æ•°å’Œç­‰äºåˆå§‹ç”µè·é‡ã€‚\n  - å¯¼ä½“è¡¨é¢åœºå¼ºï¼š$E=\\dfrac{\\sigma}{\\varepsilon_{0}}$ã€‚\n- **é™ç”µå±è”½**ï¼šåˆ©ç”¨æ¥åœ°ç©ºè…”å¯¼ä½“å°†è…”å†…å¸¦ç”µä½“ä¸å¤–ç•Œéš”ç»çš„ç°è±¡ã€‚è…”å¤–ç”µåœºä¸èƒ½ç©¿å…¥è…”å†…ï¼Œè…”å†…ç”µåœºæ’ä¸ºé›¶ï¼›å¯¼ä½“æ¥åœ°å¯ä»¥å±è”½å†…ç”µåœºã€‚\n  - åº”ç”¨ï¼šé«˜å‹å¸¦ç”µä½œä¸šï¼Œç”µæ°”è®¾å¤‡é‡‘å±ç½©æ¥åœ°ç­‰ã€‚\n\nTBDï¼šè¡¥å……ä¸€ä¸‹ç©ºè…”ç›¸å…³çš„å„ç§åˆ†æã€‚\n\n> [!example]- é™ç”µåœºä¸­çš„å¯¼ä½“åˆ†æï¼ˆ$+q_1\\ll+q_{2}$ï¼‰\n>\n> | **å›¾ç¤º**                                                               | **åˆ†æ**                                                                                                                                    |\n> | ---------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------- |\n> | <img src=\"https://img.memset0.cn/2024/10/31/DBIgvIXp.png\" width=\"380\"> | ç°æ„Ÿåº”ç”µè· $+q_2$ï¼Œ$B$ çƒæ‰€å¸¦ç”µé‡ $+q_2$ ä¸çƒå£³å†…è¡¨é¢æ‰€å¸¦ç”µé‡ $-q_2$ å¯¹å¤–äº§ç”Ÿç”µåœºå®Œå…¨æŠµæ¶ˆï¼Œæ•… $A$ çƒå—åˆ°çƒå£³å¤–è¡¨é¢ç”µè· $+q_2$ çš„æ–¥åŠ›ã€‚      |\n> | <img src=\"https://img.memset0.cn/2024/10/31/A2970WHV.png\" width=\"380\"> | åœ¨çƒå£³å¤–è¡¨é¢å°†å‡ºç°å¸¦ç”µé‡åˆ†åˆ«ä¸º $+qâ€™$ å’Œ $-qâ€™$ çš„æ„Ÿåº”ç”µè·ã€‚æ€»ç”µè·è™½ä¸ºé›¶ï¼Œä½†è´Ÿç”µè·é è¿‘ $A$ çƒï¼Œè€Œæ­£ç”µè·è¿œç¦» $A$ çƒï¼Œæ•… $A$ çƒæ€»ä½“ä¸Šå—å¸å¼•åŠ›ã€‚ |\n> | <img src=\"https://img.memset0.cn/2024/10/31/GbSd92xQ.png\" width=\"380\"> | $B$ çƒä¸çƒå£³å†…è¡¨é¢æ¥è§¦ï¼Œåˆ™æ„æˆä¸€ä½“ï¼Œ$B$ çƒæ‰€å¸¦çš„ç”µè· $+q_2$ å…¨éƒ¨è½¬ç§»åˆ°äº†çƒå£³å¤–è¡¨é¢ã€‚                                                        |\n> | <img src=\"https://img.memset0.cn/2024/10/31/X0XWaMm0.png\" width=\"380\"> | æ¥åœ°çƒå£³ç”µåŠ¿ä¸ºé›¶ï¼Œçƒå£³è¡¨é¢çš„æ­£æ„Ÿåº”ç”µè·ä¸å¤§åœ°æ‰€å¸¦çš„è´Ÿç”µè·ä¸­å’Œï¼Œåªå‰©è´Ÿæ„Ÿç”Ÿç”µè· $-qâ€™$ã€‚                                                        |\n> | <img src=\"https://img.memset0.cn/2024/10/31/1rzKR7Ee.png\" width=\"380\"> | å†…è¡¨é¢å‡ºç°æ„Ÿåº”ç”µè· $-q_2$ï¼Œç”±äºæ¥åœ°ï¼Œå¤–è¡¨é¢æ„Ÿåº”ç”µè·ä»ä¸º $-qâ€™$ã€‚                                                                             |\n> | <img src=\"https://img.memset0.cn/2024/10/31/bcfxmxnH.png\" width=\"380\"> | æ‹†åœ°çº¿åï¼Œçƒå£³æ‰€å¸¦æ€»ç”µé‡ä¸º $-(q_2+qâ€™)$ï¼Œå½“ $B$ çƒç§»å»åï¼Œè¿™äº›ç”µè·å…¨éƒ¨è·‘åˆ°å¤–è¡¨é¢ï¼Œæ•… $A$ çƒå—å¸å¼•åŠ›ã€‚                                        |\n\n### 2.2. ç”µå®¹\n\n- **å­¤ç«‹çƒå¯¼ä½“ç”µå®¹**ï¼š$\\displaystyle{C=\\dfrac{q}{U}=4\\pi \\varepsilon_{0}R}$ã€‚\n- **ç”µå®¹å™¨çš„ç”µå®¹**ï¼š$\\color{blue}C=\\dfrac{Q}{U_{A}-U_{B}}$ï¼ˆå•ä½ä¸º $\\text{F}$ï¼‰ï¼›æ³¨æ„ï¼Œè¿™é‡Œçš„å¸¦ç”µé‡ $Q$ æ˜¯==ä¸€ä¾§==ææ¿å¸¦ç”µé‡çš„==ç»å¯¹å€¼==ã€‚\n  - å¹³è¡Œæ¿ç”µå®¹å™¨ï¼š$C=\\dfrac{Q}{U_{A}-U_{B}}=\\displaystyle{\\dfrac{\\varepsilon_{0}S}{d}}$\n  - åœ†æŸ±å½¢ç”µå®¹å™¨ï¼š$\\displaystyle{C=\\frac{2\\pi\\varepsilon_0l}{\\ln\\frac{R_B}{R_A}}}$\n  - çƒå½¢ç”µå®¹å™¨ï¼š$\\displaystyle{C=4\\pi\\varepsilon_0\\frac{R_AR_B}{R_B-R_A}}$\n- **ç”µå®¹å™¨çš„ä¸²è”**ï¼šæ€»ç”µåŠ¿å·®ä¸ºæ¯ä¸ªç”µå®¹å™¨ç”µåŠ¿å·®çš„å’Œï¼Œææ¿ç”µé‡éƒ½ç›¸åŒï¼›$\\displaystyle{\\frac1C=\\frac1{C_1}+\\frac1{C_2}+\\cdots+\\frac1{C_N}}$ã€‚\n- **ç”µå®¹å™¨çš„å¹¶è”**ï¼šæ€»ç”µé‡ä¸ºæ¯ä¸ªç”µå®¹å™¨æ‰€å¸¦ç”µé‡çš„å’Œï¼Œä¸¤æ¿é—´ç”µåŠ¿å·®éƒ½ç›¸åŒï¼›$C=C_1+C_2+\\cdots+C_N$ã€‚\n- ç”µä»‹è´¨å……æ»¡ç”µå®¹å™¨å¯å¢å¤§ç”µå®¹ $\\varepsilon_{r}$ å€ï¼Œå³ $C=\\varepsilon_{r} C_0$ã€‚\n\n### 2.3. ç”µä»‹è´¨çš„æåŒ–\n\n- **ç”µä»‹è´¨**ï¼šæ˜¯ç”µçš„éå¯¼ä½“ï¼ˆç»ç¼˜ä»‹è´¨ï¼‰ã€‚åœ¨å¤–ç”µåœºä¸­æ—¶ï¼Œå¯¹ç”µåœºæœ‰å½±å“ã€‚å¤„äºé™ç”µå¹³è¡¡æ—¶ï¼Œå†…éƒ¨åœºå¼ºä¸ä¸ºé›¶ã€‚\n- **ç”µä»‹è´¨çš„æåŒ–**ï¼šç”µä»‹è´¨åœ¨å¤–åœºä¸­æ—¶ï¼Œåœ¨ä¸å¤–ç”µåœº $\\boldsymbol{E}_{0}$ å‚ç›´çš„è¡¨é¢å±‚é‡Œä¼šå‡ºç°ä¸èƒ½è‡ªç”±ç§»åŠ¨çš„æ­£è´Ÿç”µè·å±‚ï¼Œè¿™ä¸€ç°è±¡ç§°ä¸º **ç”µä»‹è´¨çš„æåŒ–**ï¼Œè¿™äº›ç”µè·ç§°ä¸º **æŸç¼šç”µè·** æˆ– **æåŒ–ç”µè·**ã€‚\n- **ç”µä»‹è´¨ä¸­çš„åœºå¼º**ï¼šæåŒ–ç”µè·ä¼šæ¿€å‘ç”µåœº $\\boldsymbol{E'}$ï¼Œä¸è‡ªç”±ç”µè·æ¿€å‘çš„ç”µåœº $\\boldsymbol{E}_{0}$ ä½œçŸ¢é‡å’Œå¯ä»¥å¾—åˆ°ç”µä»‹è´¨ä¸­çš„åˆåœºå¼º $\\boldsymbol{E}=\\boldsymbol{E}_{0}+\\boldsymbol{E}'$ã€‚\n- **æåŒ–å¼ºåº¦**ï¼šæŸç‚¹å¯¹åº”çš„ä½“ç§¯å¾®å…ƒä¸­æ‰€æœ‰åˆ†å­ç”µçŸ©çš„çŸ¢é‡å’Œ $\\boldsymbol{P}$ï¼›å¤–åŠ ç”µåœºä¸å¤ªå¤§æ—¶ï¼Œæœ‰çº¿æ€§å…³ç³» $\\boldsymbol{P}=\\varepsilon_{0} \\chi_{e} \\boldsymbol{E}=\\varepsilon_{0} (\\varepsilon_{r} - 1) \\boldsymbol{E}$ã€‚\n  - **æåŒ–ç”µè·é¢å¯†åº¦**ï¼šå‡åŒ€ç”µä»‹è´¨æåŒ–æ—¶ï¼Œç”µä»‹è´¨è¡¨é¢ä¸ŠæŸç‚¹å¤„çš„æåŒ–ç”µè·é¢å¯†åº¦ $\\sigma'$ ç­‰äºæåŒ–å¼ºåº¦åœ¨è¯¥ç‚¹è¡¨é¢çš„æ³•å‘åˆ†é‡ $\\color{blue}\\sigma'=\\boldsymbol{P}\\cdot \\boldsymbol{e}_{n}$ã€‚\n- **ç”µä½ç§»**ï¼šä¸ºäº†ä¸è€ƒè™‘æåŒ–ç”µè·å’Œé™„åŠ ç”µåœºï¼Œå¼•å…¥ç”µä½ç§» $\\color{blue}\\boldsymbol{D}=\\varepsilon_{0} \\boldsymbol{E}+\\boldsymbol{P}=\\varepsilon_{0} \\varepsilon_{r} \\boldsymbol{E}=\\varepsilon \\boldsymbol{E}$ã€‚ç”µä½ç§»å¹¶æ²¡æœ‰å®é™…ç‰©ç†æ„ä¹‰ã€‚\n- **ç”µä»‹è´¨ä¸­çš„é«˜æ–¯å®šç†**ï¼šé€šè¿‡ç”µåœºä¸­ä»»æ„é—­åˆæ›²é¢çš„ä½ç§»ç”µé€šé‡ï¼Œç­‰äºè¯¥é—­åˆé¢æ‰€åŒ…å›´çš„==è‡ªç”±ç”µè·==çš„ä»£æ•°å’Œã€‚$\\displaystyle{\\oint_{S} \\boldsymbol{D} \\cdot \\text{d} \\boldsymbol{S} = \\sum q_{0}}$ï¼ˆè¿™é‡Œ $S$ æ˜¯é—­åˆæ›²é¢ï¼‰ã€‚\n\n### 2.4. é™ç”µåœºä¸­çš„èƒ½é‡\n\n- **ç‚¹ç”µè·ç³»ç»Ÿçš„èƒ½é‡**ï¼š$\\color{blue}\\displaystyle{W=\\dfrac{1}{2} \\sum q_{i} U_{i}}$ï¼Œè¿™é‡Œ $U_{i}$ åœ¨ç‚¹ç”µè· $q_{i}$ å¤„é™¤äº† $q_{i}$ ä»¥å¤–æ‰€æœ‰ç”µè·äº§ç”Ÿçš„ç”µåŠ¿ã€‚\n  - å¯ä»¥é€šè¿‡è€ƒè™‘å°†æ¯ä¸ªç”µè·ä¾æ¬¡ï¼ˆæ‰€ä»¥è¿™é‡Œä¼šæœ‰ä¸€ä¸ª $1 / 2$ çš„ç³»æ•°ï¼‰ç§»åˆ°æ— ç©·è¿œå¤„å¾—åˆ°ã€‚\n- **ç”µåœºèƒ½é‡**ï¼šå®šä¹‰å•ä½ä½“ç§¯ä¸Šçš„ç”µåœºèƒ½é‡ä¸º **ç”µèƒ½å¯†åº¦** $\\color{blue}\\omega_{e}=\\dfrac{1}{2} \\varepsilon E^{2} = \\dfrac{1}{2} DE$ï¼Œåˆ™ $\\displaystyle{W=\\int_{V} \\omega_{e} \\text{d} V}$ã€‚\n  - **ç”µå®¹å™¨çš„èƒ½é‡**ï¼š$W=\\dfrac{1}{2} \\dfrac{Q^{2}}{C}$ã€‚\n","publishedTitle":"ã€Œå¤§å­¦ç‰©ç†(ä¹™)ã€VI. é™ç”µå­¦"}},{"id":"5527af52-776a-5650-aab5-2b983262131f","fields":{"slug":"/course/physics/note/7/","plainText":"\n> æœ¬ç¯‡ç¬”è®°ä»‹ç»äº†é™ç£å­¦çš„åŸºæœ¬æ¦‚å¿µå’Œå®šå¾‹ã€‚é¦–å…ˆè®¨è®ºäº†ç”µæµçš„åŸºæœ¬æ€§è´¨ï¼ŒåŒ…æ‹¬ç”µæµå¼ºåº¦ã€ç”µæµå¯†åº¦å’Œç¨³æ’ç”µæµçš„æ¦‚å¿µï¼Œä»¥åŠç”µåŠ¨åŠ¿å’Œæ¬§å§†å®šå¾‹ã€‚éšåè¯¦ç»†é˜è¿°äº†ç£åœºçš„äº§ç”Ÿå’Œç‰¹æ€§ï¼Œé‡ç‚¹ä»‹ç»äº†æ¯•å¥¥-è¨ä¼å°”å®šå¾‹ï¼Œå¹¶åˆ†æäº†å¤šç§è½½æµå¯¼ä½“ï¼ˆç›´å¯¼çº¿ã€åœ†çº¿åœˆã€èºçº¿ç®¡ç­‰ï¼‰äº§ç”Ÿçš„ç£åœºåˆ†å¸ƒã€‚åŒæ—¶è¿˜è®¨è®ºäº†è¿åŠ¨ç”µè·äº§ç”Ÿçš„ç£åœºï¼Œä»¥åŠç£åœºçš„å®‰åŸ¹ç¯è·¯å®šç†åŠå…¶åº”ç”¨ã€‚<small style=\"font-style: italic; opacity: 0.5\">ï¼ˆç”± claude-3.5-sonnet ç”Ÿæˆæ‘˜è¦ï¼‰</small>\n\n<!-- more -->\n\n## 1. Ch15 ç”µæµÂ·ç£åœº\n\n### 1.1. ç”µæµÂ·ç”µåŠ¨åŠ¿\n\n> ç”µè·çš„å®šå‘ç§»åŠ¨å½¢æˆç”µæµã€‚è€Œç”µè·çš„ç§»åŠ¨éœ€è¦æœ‰èƒ½ç§»åŠ¨çš„å¸¦ç”µç²’å­ï¼Œè¢«æˆä¸º**è½½æµå­**ï¼Œä¸»è¦æ˜¯ç”µå­æˆ–ç¦»å­ã€‚è¿™ä¸ªå®šå‘ç§»åŠ¨çš„é€Ÿåº¦å’Œæ— è§„åˆ™è¿åŠ¨çš„é€Ÿåº¦ä¸åŒï¼Œè¢«ç§°ä¸º**æ¼‚ç§»é€Ÿåº¦**ï¼Œå…¶æ•°é‡çº§ä¸º Â $10^{-3} \\text{ m}\\cdot \\text{s}^{-1}$ã€‚\n\n- **ç”µæµå¼ºåº¦**ï¼šå•ä½æ—¶é—´å†…é€šè¿‡æŸä¸€æˆªé¢çš„ç”µé‡ï¼Œ$\\color{blue} I=\\dfrac{\\text{d}q}{\\text{d}t}$ï¼Œæ˜¯æ ‡é‡ã€‚\n  - è®¾ç”µæµå…ƒ $I \\text{d}l$ çš„æ¨ªæˆªé¢ç§¯ä¸º $S$ï¼Œå•ä½æ—¶é—´å†…æœ‰ $n$ ä¸ªå®šå‘è¿åŠ¨çš„æ­£ç”µè·ï¼Œå¸¦ç”µé‡ $q$ï¼Œé€Ÿåº¦ $v$ï¼Œåˆ™ $I=qnvS$ã€‚\n- **ç”µæµå¯†åº¦**ï¼šå•ä½æ—¶é—´å†…é€šè¿‡å•ä½ç•Œé¢çš„ç”µé‡ï¼š$j=\\dfrac{\\text{d}I}{\\text{d}S_{\\perp}}$ï¼Œ$\\boldsymbol{j}$ çš„æ–¹å‘ä¸ºæ­£ç”µè·è½½æµå­çš„æ–¹å‘ã€‚\n  - $\\boldsymbol{j}$ æ„æˆäº†ä¸€ä¸ªçŸ¢é‡åœºï¼Œå¯ä»¥é€šè¿‡ $\\color{blue} \\boldsymbol{I}=\\displaystyle{\\int_{S} \\boldsymbol{j}\\cdot \\text{d}\\boldsymbol{S}}$ æ±‚å¾—é€šè¿‡å¯¼ä½“ä»»æ„æˆªé¢çš„ç”µæµå¼ºåº¦ã€‚\n- ç¨³æ’ç”µæµï¼šå¯¼ä½“ä¸­å„ç‚¹ç”µæµå¯†åº¦çŸ¢é‡ $\\boldsymbol{j}$ æˆ–é€šè¿‡å¯¼ä½“ä»»ä¸€æˆªé¢çš„ç”µæµå¼ºåº¦ $I$ ä¸éšæ—¶é—´å˜åŒ–çš„ç”µæµã€‚\n\n> åœ¨å¯¼ä½“ä¸­çš„é™ç”µå¹³è¡¡ä¸€ç« ä¸­æˆ‘ä»¬çœ‹åˆ°ï¼Œå¦‚æœä¸ç»´æŒä½¿å¾—è½½æµå­è¿åŠ¨çš„ç”µåœºï¼Œç”µæµå¾ˆå¿«å°±ä¼šæ¶ˆå¤±ã€‚è¿™é‡Œä¹Ÿæœ‰ç”µé˜»ç”Ÿçƒ­çš„åŸå› ã€‚æ­¤æ—¶ï¼Œä¸ºäº†ç»´æŒç”µæµï¼Œéœ€è¦å°†å¯¼ä½“ä¸Šç”µåŠ¿èƒ½è¾ƒä½ç‚¹çš„è½½æµå­æ¬åˆ°è¾ƒé«˜çš„åœ°æ–¹ã€‚å¯¹äºç¨³å®šç”µæµï¼Œå…¶ç”µåœºä¸å˜ï¼Œæ˜¯é™ç”µåœºï¼Œæœ‰ç¯è·¯ç§¯åˆ†ä¸º $0$ã€‚æ•…éœ€è¦éé™ç”µåŠ›åšåŠŸã€‚è¿™ä¸€éé™ç”µåŠ›é€šå¸¸ç”¨ç”µåŠ¨åŠ¿è¡¡é‡ã€‚\n\n- **ç”µåŠ¨åŠ¿**ï¼šç”µè· $q$ å—éé™ç”µåŠ›åšåŠŸ $W$ å’Œ $q$ çš„æ¯”å€¼ï¼Œå³ $\\displaystyle{\\mathcal{E}=\\dfrac{W_{AB}}{q}=\\oint_{A}^{B} \\boldsymbol{E}_{k} \\cdot \\text{d}\\boldsymbol{l}}$ã€‚\n  - ç”µåŠ¨åŠ¿ä¸ç”µåŠ¿çš„é‡çº²ä¸€è‡´ï¼Œä½†æ˜¯ç‰©ç†æ„ä¹‰ä¸åŒï¼Œä¸èƒ½ç­‰åŒçœ‹å¾…ã€‚\n- **æ¬§å§†å®šå¾‹**ï¼š$I=\\dfrac{U}{R}$ã€‚\n- ç”µé˜»ï¼š$R=\\rho \\dfrac{l}{S}$ï¼Œç”µé˜»ç‡ $\\rho$ï¼Œç”µå¯¼ç‡ $\\gamma=\\dfrac{1}{\\rho}$ã€‚\n  - ç”µæµå¯†åº¦ç­‰äºç”µå¯¼ç‡ä¹˜ä»¥ç”µåœºå¼ºåº¦ã€‚\n\n### 1.2. ç£åŠ›Â·ç£åœº\n\n- **ç£æ„Ÿåº”å¼ºåº¦**ï¼šå®šä¹‰å¼ $B=\\dfrac{F_{\\text{max}}}{qv}$ï¼Œæ–¹å‘æ²¿ $\\boldsymbol{F}_{\\text{m}} \\times \\boldsymbol{v}$ çš„æ–¹å‘ï¼Œå¯é€šè¿‡å³æ‰‹èºæ—‹æ³•åˆ™ç¡®å®šã€‚å•ä½ $\\text{T}$ï¼ˆç‰¹æ–¯æ‹‰ï¼‰ï¼Œ$1\\text{ T} = 1 \\text{ N} \\cdot (\\text{A} \\cdot \\text{m})^{-1}$ã€‚\n- **ç”µæµäº§ç”Ÿçš„ç£åœº**ï¼ˆæ¯•å¥¥-è¨ä¼å°”å®šå¾‹ï¼‰ï¼šç”µæµæº $I\\text{d}\\boldsymbol{l}$ åœ¨ç‚¹ $P$ äº§ç”Ÿçš„ç£åœºä¸ºï¼š$\\color{blue}\\text{d}\\boldsymbol{B}=\\displaystyle{\\dfrac{\\mu_{0}}{4\\pi} \\frac{I\\text{d}\\boldsymbol{l} \\times \\hat{r}}{r^{2}}}$ï¼Œè¿™é‡Œ $\\boldsymbol{r}$ ä¸ºç”µæµå…ƒæŒ‡å‘ $P$ çš„çŸ¢é‡ã€‚\n  - $\\mu_{0}=4 \\pi \\times 10^{-7} \\text{ N/A}^2$ ä¸ºçœŸç©ºç£å¯¼ç‡ã€‚\n  - **å³æ‰‹èºæ—‹å®šåˆ™**ï¼š<img src=\"https://img.memset0.cn/2024/10/25/t4tEFQnR.png\" width=\"101\" align=\"right\">\n    - è‹¥æ˜¯ç›´çº¿ç”µæµäº§ç”Ÿçš„ç£åœºï¼Œå¤§æ‹‡æŒ‡æŒ‡å‘ç”µæµæ–¹å‘ï¼Œåˆ™å…¶å®ƒå››æŒ‡çš„ç»•è¡Œæ–¹å‘å°±æ˜¯ $B$ çš„æ–¹å‘ã€‚\n    - è‹¥æ˜¯ç¯å½¢ç”µæµäº§ç”Ÿçš„ç£åœºï¼Œå…¶å®ƒå››æŒ‡çš„ç»•è¡Œæ–¹å‘ä¸ºç”µæµæ–¹å‘ï¼Œåˆ™å¤§æ‹‡æŒ‡æŒ‡å‘ $B$ çš„æ–¹å‘ã€‚\n  - <img src=\"https://img.memset0.cn/2024/11/02/ZW9zfbCp.png\" width=\"100\" align=\"right\">è½½æµç›´å¯¼çº¿çš„ç£åœºï¼šå…¶ä¸­ä»»æ„ç”µæµå…ƒ $I\\text{d}\\boldsymbol{l}$ åœ¨åŒä¸€ç‚¹ $P$ å¤„äº§ç”Ÿçš„å…ƒç£åœº $\\text{d}\\boldsymbol{B}$ çš„æ–¹å‘éƒ½ç›¸åŒï¼Œæ•…æ€»ç£æ„Ÿåº”å¼ºåº¦å¤§å°ä¸ºæ¯ä¸€å¾®å…ƒçš„ä»£æ•°å’Œï¼š$\\color{blue}B=\\displaystyle{\\dfrac{\\mu_{0}}{4\\pi} \\int_{A_{1}}^{A_{2}} \\dfrac{I \\text{d} l \\sin \\theta}{r^{2}} = \\dfrac{\\mu_{0}}{4\\pi}  \\dfrac{I}{r_{0}} \\left( \\cos \\theta_{1} - \\cos \\theta_{2} \\right)}$ã€‚\n    - å¯¹äºæ— é™é•¿å¯¼çº¿ï¼Œå¯è®¤ä¸º $\\theta_{1}=0$ï¼Œ$\\theta_{2} =\\pi$ï¼Œåˆ™ $B=\\dfrac{\\mu_{0}I}{2 \\pi r_{0}}$ã€‚\n    - å¯¹äºæ— é™é•¿ç›´å¯¼çº¿ç«¯ç‚¹æ‰€åœ¨å‚ç›´å¹³é¢å†…ï¼Œå¯è®¤ä¸º $\\theta_{1}=\\dfrac{\\pi}{2}$ï¼Œ$\\theta_{2}=\\pi$ï¼Œåˆ™ $B=\\dfrac{\\mu_{0}I}{4\\pi r_{0}}$ã€‚\n    - å¯¹äºè½½æµç›´å¯¼çº¿å»¶é•¿çº¿ä¸Šçš„ä¸€ç‚¹ï¼Œ$B=0$ã€‚\n  - <img src=\"https://img.memset0.cn/2024/11/02/8oIY3lel.png\" align=\"right\" width=\"195\">è½½æµåœ†çº¿åœˆè½´çº¿ä¸Šçš„ç£åœºï¼šä»»æ„ç”µæµå…ƒåœ¨è½´çº¿ä¸ŠåŒä¸€ç‚¹ $P$ ä¸Šäº§ç”Ÿçš„å…ƒç£åœºå¤§å°ç›¸ç­‰ï¼Œä½†æ˜¯æ–¹å‘å„ä¸ç›¸åŒï¼Œå…¶ä¸­å‚ç›´äºè½´çº¿çš„åˆ†é‡ç›¸äº’æŠµæ¶ˆï¼Œåªå‰©ä¸‹æ²¿è½´çº¿çš„åˆ†é‡ï¼š$\\displaystyle{B=\\oint \\text{d}B \\sin \\alpha =\\dfrac{\\mu_{0}}{4\\pi} \\dfrac{I\\sin \\alpha}{R^{2}+x^{2}}\\oint \\text{d}l =  \\dfrac{\\mu_{0}IR^{2}}{2(R^{2}+x^{2})^{3/2}}}$ã€‚\n    - åœ¨åœ†çº¿åœˆä¸­å¿ƒå¤„ï¼Œ$x=0$ï¼Œåˆ™ $B=\\dfrac{\\mu_{0}I}{2R}$ã€‚\n      - åœ¨è§’åº¦ä¸º $\\theta$ çš„åœ†å¼§ç”µæµä¸­å¿ƒå¤„ï¼Œ$B=\\dfrac{\\mu_{0} I}{2 R} \\dfrac{\\theta}{2\\pi}$ã€‚\n    - åœ¨è½´çº¿ä¸Šè¿œç¦»åœ†çº¿åœˆå¤„ï¼Œ$r_{0} \\gg R$ï¼Œåˆ™ $B=\\dfrac{\\mu_{0}}{2\\pi} \\dfrac{IS}{x^{3}}$ã€‚\n      - å¼•å…¥ç£çŸ© $\\boldsymbol{p}_{m}=IS \\boldsymbol{e}_{n}$ï¼Œåˆ™æœ‰ $B=\\dfrac{\\mu_{0}}{2\\pi} \\dfrac{\\boldsymbol{p}_{m}}{x^{3}}$ã€‚\n  - <img src=\"https://img.memset0.cn/2024/10/30/54pTZkEr.png\" width=\"180\" align=\"right\">è½½æµç›´èºçº¿ç®¡å†…éƒ¨çš„ç£åœºï¼ˆæ¨èç”¨å®‰åŸ¹ç¯è·¯å®šç†åˆ†æï¼‰ï¼šåœ¨èºçº¿ç®¡ä¸Šå– $\\text{d}l$ï¼Œç›¸å½“äºç”µæµå¼ºåº¦ä¸º $In\\text{d}l$ çš„åœ†ç”µæµï¼Œæ•… $\\displaystyle{\\boldsymbol{B}=\\int \\dfrac{\\mu_{0} IR^{2} n \\text{ d}l}{2 (R^{2}+l^{2})^{3/2}} = \\int_{\\beta_{1}}^{\\beta_{2}} -\\dfrac{\\mu_{0}}{2} nI \\sin \\beta \\text{d} \\beta} = \\dfrac{\\mu_{0}}{2} n I \\left( \\cos \\beta_{2} - \\cos \\beta_{1} \\right)$ã€‚\n    - å½“ $L\\gg R$ æ—¶ï¼Œ$\\beta_{1}\\to\\pi$ï¼Œ$\\beta_{2}\\to0$ï¼Œåˆ™ $B=\\mu_{0} nI$ã€‚\n    - åœ¨é•¿ç›´èºçº¿ç®¡ä¸¤ç«¯ç‚¹å¤„ï¼Œ$\\beta_{1}\\to \\dfrac{\\pi}{2}$ï¼Œ$\\beta_{2}\\to\\pi$ï¼Œåˆ™ $B=\\dfrac{1}{2} \\mu_{0} n I$ã€‚\n- **ç”µè·äº§ç”Ÿçš„ç£åœº**ï¼šä»¥é€Ÿåº¦ $\\boldsymbol{v}$ è¿åŠ¨ç”µè· $q$ äº§ç”Ÿçš„ç£åœºä¸ºï¼š$\\color{blue}\\boldsymbol{B}=\\dfrac{\\mu_{0}}{4\\pi} \\dfrac{q(\\boldsymbol{v}\\times \\hat{r})}{r^{2}}$ã€‚\n  - **ç”µè·è¿åŠ¨çš„ç­‰æ•ˆç”µæµ**ï¼šåœ¨æœ‰å¤šç”µè·ï¼ˆå°¤å…¶æ˜¯è¿ç»­åˆ†å¸ƒç”µè·ï¼‰è¿›è¡ŒåŒ€é€Ÿè¿åŠ¨æ—¶ï¼Œå¯è€ƒå¯ŸæŸæˆªé¢å•ä½æ—¶é—´å†…é€šè¿‡çš„ç”µè·é‡è€Œæ±‚ç­‰æ•ˆç”µæµ $I$ã€‚\n    - åœ¨ $v\\ll c$ çš„æƒ…å†µä¸‹ï¼Œæ’é€Ÿè¿åŠ¨çš„ç‚¹ç”µè·äº§ç”Ÿçš„ç”µåœºå¯è®¤ä¸ºå’Œè¯¥ç‚¹çš„é™æ­¢ç”µè·çš„é™ç”µåœºæ²¡æœ‰åŒºåˆ«ï¼Œå³ $\\boldsymbol{E}=\\dfrac{1}{4\\pi \\epsilon_{0}} \\dfrac{q}{r^{2}} \\hat{r}$ã€‚\n- **ç£åœºçš„å®‰åŸ¹ç¯è·¯å®šç†**ï¼šåœ¨ç£åœºä¸­ï¼Œæ²¿ä»»æ„é—­åˆæ›²çº¿çš„ç£æ„Ÿåº”å¼ºåº¦çš„çº¿ç§¯åˆ†ç­‰äºçœŸç©ºç£å¯¼ç‡ $\\mu_{0}$ ä¹˜ä»¥ç©¿è¿‡è¯¥ç¯è·¯æ‰€æœ‰ç”µæµçš„ä»£æ•°å’Œï¼š$\\color{blue}\\displaystyle{\\oint_{L} \\boldsymbol{B} \\cdot \\text{ d} \\boldsymbol{l} = \\mu_{0} \\sum_{S_{L}} I_{å†…}}$ã€‚\n  - <img src=\"https://img.memset0.cn/2024/10/25/a5RY173l.png\" width=\"95\" align=\"right\">æ— é™é•¿è½½æµåœ†æŸ±ä½“å†…å¤–çš„ç£åœºï¼šè®¾åœ†æŸ±æˆªé¢åŠå¾„ä¸º $R$ï¼Œå–è·ç¦»è½´ä¸º $r$ çš„ä¸€ç‚¹è€ƒå¯Ÿç£åœº $B$ï¼Œæ²¿åŠå¾„ä¸º $r$ çš„åœ†ä¸€å‘¨çš„ç£æ„Ÿåº”å¼ºåº¦ç¯ç§¯åˆ†ï¼ˆå³ç»•ç£æ„Ÿåº”çº¿ä¸€å‘¨ï¼‰ä¸º $\\displaystyle{\\oint_{L} B \\text{d} l = B \\cdot 2 \\pi r}$ã€‚\n    - å½“ $r>R$ æ—¶ï¼š$B=\\dfrac{\\mu_{0}}{2\\pi} \\dfrac{I}{r}$ã€‚\n    - å½“ $r<R$ æ—¶ï¼š\n      - è‹¥ä¸ºç”µæµé¢ï¼ˆç”µæµä»…åˆ†å¸ƒåœ¨å¯¼ä½“è¡¨é¢ï¼‰åˆ†å¸ƒï¼Œåˆ™ $B\\cdot 2 \\pi r=0$ å³ $B=0$ï¼›\n      - è‹¥ä¸ºç”µæµä½“åˆ†å¸ƒï¼ˆç”µæµå‡åŒ€åˆ†å¸ƒåœ¨æ•´ä¸ªå¯¼ä½“ä¸­ï¼‰ï¼Œåˆ™ $B \\cdot 2 \\pi r=\\mu_{0} I \\dfrac{\\pi r^{2}}{\\pi R^{2}}$ï¼Œæ•… $B=\\dfrac{\\mu_{0}}{2\\pi} \\dfrac{Ir}{R^{2}}$ã€‚\n  - <img src=\"https://img.memset0.cn/2024/11/02/JTUiUlqg.png\" align=\"right\" width=\"120\">è½½æµèºç»•ç¯å†…çš„ç£åœºï¼šè®¾èºç»•ç¯å†…å¤–å¾„ $r_{1},r_{2}$ï¼Œæ€»åŒæ•° $N$ï¼Œç”µæµ $I$ã€‚å–ç®¡å†…ä¸€ç‚¹ $P$ï¼Œè·ç¦»è½´çº¿è·ç¦» $r\\in(r_{1},r_{2})$ï¼Œåˆ™ $\\displaystyle{\\oint_{L}B \\cdot \\text{d}l=B\\cdot 2\\pi r=\\mu_{0} NI}$ï¼Œæ•… $B=\\mu_{0} \\dfrac{N}{2R} I$ã€‚\n  - <img src=\"https://img.memset0.cn/2024/10/25/sr3rYKQJ.png\" align=\"right\" width=\"180\">è½½æµé•¿ç›´èºçº¿ç®¡å†…çš„ç£åœºï¼šè®¾èºçº¿ç®¡é•¿ $l$ï¼Œæ€»åŒæ•° $N$ï¼Œé€šç”µæµ $I$ã€‚å–ç®¡å†…ä¸€ç‚¹ $P$ï¼Œå¦‚å›¾ä½œä¸€çŸ©å½¢é—­åˆå›è·¯ $ABCDA$ï¼Œå…¶ä¸­ $AD,DC,BC$ æ®µå‡æœ‰ $B\\cdot \\text{d}l=0$ï¼Œæ•… $\\displaystyle{\\oint_{L} B\\cdot \\text{d}l=\\int_{AB}B\\cdot \\text{d}l=B\\cdot |AB|}$ã€‚è€ƒè™‘è¢«åŒ…å›´çš„æ€»ç”µæµä¸º $I'=\\dfrac{N}{l} I \\cdot |AB|$ï¼Œæ•… $B=\\mu_{0} \\dfrac{N}{l} I$ã€‚\n    - å¦‚æœç”¨ $n$ è¡¨ç¤ºå•ä½é•¿åº¦ç¯ç»•çš„çº¿åœˆåŒæ•°ï¼Œåˆ™èºç»•ç¯å’Œèºçº¿ç®¡çš„å…¬å¼éƒ½å¯ä»¥ç»Ÿä¸€ä¸º $\\color{blue}B=\\mu_{0} nI$ã€‚\n  - <img src=\"https://img.memset0.cn/2024/11/02/uBGmxDdc.png\" align=\"right\" width=\"150\">æ— é™å¤§è½½æµå¹³é¢çš„ç£åœºï¼š$\\color{blue}B=\\dfrac{\\mu_{0}}{2} j$ï¼Œè¿™é‡Œ $j$ ä¸ºç”µæµçº¿å¯†åº¦ï¼Œç£åœºæ–¹å‘ä¸å¹³é¢å¹³è¡Œï¼Œå¯ä»¥é€šè¿‡å³æ‰‹èºæ—‹å®šåˆ™ç¡®å®šã€‚\n- **ç£é€šé‡**ï¼šç±»ä¼¼äºå¼•å…¥ç”µé€šé‡çš„æ–¹æ³•ï¼Œå®šä¹‰ç£é€šé‡ä¸ºï¼š$\\Phi_{B}=\\displaystyle{\\int_{S}\\boldsymbol{B}\\cdot \\text{d}\\boldsymbol{S}}$ã€‚\n  - å•ä½ä¸º $\\text{Wb}$ï¼ˆéŸ¦ä¼¯ï¼‰ã€‚\n- **ç£åœºçš„é«˜æ–¯å®šç†**ï¼šç”±äºè‡ªç„¶ç•Œä¸å­˜åœ¨ç£è·ï¼Œæ•…ä»»æ„å°é—­æ›²çº¿é¢çš„ç£é€šé‡ä¸º $0$ï¼Œå³ $\\displaystyle{\\oint_{S}\\boldsymbol{B}\\cdot \\text{d}\\boldsymbol{S}=0}$ã€‚\n\n> [!example]- åˆ†ææ— é™é•¿è½½æµç›´å¯¼çº¿çš„äº§ç”Ÿçš„ç£åœº\n>\n> - $B=\\displaystyle{\\dfrac{\\mu_{0}}{4\\pi} \\int_{A_{1}}^{A_{2}} \\dfrac{I \\text{d} l \\sin \\theta}{r^{2}}}$ï¼Œéœ€è¦è½¬åŒ–æˆå…³äºè§’åº¦çš„ç§¯åˆ†ï¼Œé‡ç‚¹åœ¨äº $\\text dl$ å’Œ $r$ çš„éƒ¨åˆ†ã€‚\n>   - $\\text dl$ï¼šè€ƒè™‘ $l=\\dfrac{r_0}{\\tan\\theta}$ï¼Œæ•… $\\text dl=-\\dfrac{r_0 \\text d\\theta}{\\sin^2\\theta}$ã€‚\n>   - $r=\\dfrac{r_0}{\\sin\\theta}$ã€‚\n> - ç»¼ä¸Šå¾—åˆ° $\\displaystyle{B=\\dfrac{\\mu_0}{4\\pi}\\int_{\\theta_1}^{\\theta_2} \\frac{I \\left(-\\frac{r_0\\text d\\theta}{\\sin^2 \\theta}\\right) \\sin\\theta}{\\left(\\frac{r_0}{\\sin\\theta}\\right)^2} = -\\frac{\\mu_0}{4\\pi} \\int_{\\theta_1}^{\\theta_2} \\frac{I \\sin\\theta \\text d\\theta}{r_0} = \\frac{\\mu_0 I}{4\\pi r_0} (\\cos\\theta_1-\\cos\\theta_2)}$ã€‚\n\n### 1.3. ç£åœºä¸­çš„ä½œç”¨åŠ›\n\n- **å®‰åŸ¹åŠ›**ï¼šå®‰åŸ¹åŠ›æ˜¯æ´›ä¼¦å…¹åŠ›çš„å®è§‚è¡¨ç°ã€‚è½½æµå¯¼çº¿ï¼ˆå¯ä»¥ç­‰æ•ˆä¸ºä»èµ·ç‚¹åˆ°ç»ˆç‚¹çš„ç›´å¯¼çº¿ $\\boldsymbol{L}$ï¼‰åœ¨ç£åœº $\\boldsymbol{B}$ ä¸­æ‰€å—å®‰åŸ¹åŠ›ä¸º $\\displaystyle{\\color{blue} \\boldsymbol{F}=\\int_{L} I\\text{d} \\boldsymbol{l} \\times \\boldsymbol{B}=I \\boldsymbol{L}\\times \\boldsymbol{B}}$ã€‚\n  - ä¸¤æ ¹å¹³è¡Œè½½æµç›´å¯¼çº¿çš„ä½œç”¨åŠ›ï¼š$F_{m}=\\dfrac{\\mu_{0}}{2\\pi} \\dfrac{I_{1}I_{2}}{d}$ï¼ˆ$\\mu_{0}=2\\pi k=4\\pi \\times 10^{-7} \\text{ N} \\cdot \\text{A}^{-2}$ï¼‰ã€‚\n- **ç£çŸ©**ï¼šç£çŸ©æ˜¯ä¸é—­åˆå›è·¯æœ‰å…³çš„ç‰©ç†é‡ $\\color{blue}\\boldsymbol{p}_{m}=NI S\\boldsymbol{e}_{n}$ï¼Œè¿™é‡Œ $N$ æ˜¯çº¿åœˆåŒæ•°ï¼Œå¯¹äºå…¶ä¸­ä»»ä¸€åŒçš„å›´æˆçš„å¹³é¢ï¼Œ$S$ æ˜¯å…¶é¢ç§¯ï¼Œ$\\boldsymbol{e}_{n}$ æ˜¯å…¶æ³•å‘é‡ã€‚\n- **è½½æµå¹³é¢çº¿åœˆçš„ç£åŠ›çŸ©**ï¼š\n  - å‡åŒ€ç£åœºå¯¹è½½æµçº¿åœˆçš„åˆä½œç”¨åŠ›ä¸º $0$ï¼Œä½†å­˜åœ¨åŠ›çŸ© $\\color{blue}\\boldsymbol{M}=\\boldsymbol{p}_{m} \\times \\boldsymbol{B}$ã€‚\n  - ä¸€èˆ¬ç£åœºå¯¹è½½æµçº¿åœˆçš„ç£åŠ›çŸ©ä¸º $\\color{blue}\\text{d}\\boldsymbol{M}=\\boldsymbol{r}\\times (I\\text{d}\\boldsymbol{l} \\times \\boldsymbol{B})$ã€‚\n\n## 2. Ch16 ç‰©è´¨ä¸­çš„ç£åœº\n\n### 2.1. ç£ä»‹è´¨\n\n> åˆ†å­æœ¬èº«å…·æœ‰ç£çŸ©ï¼ˆ**å›ºæœ‰ç£çŸ©** $\\boldsymbol{p}_{m}$ï¼‰ï¼Œå¯è®¤ä¸ºç”±ç­‰æ•ˆçš„åœ†ç”µæµï¼ˆ**åˆ†å­ç”µæµ**ï¼‰äº§ç”Ÿã€‚ç”±äºç£çŸ©å–å‘æ— è§„åˆ™ï¼Œå®ƒä»¬ç›¸äº’æŠµæ¶ˆï¼Œå¯¼è‡´ç£ä»‹è´¨ä¸æ˜¾ç£æ€§ã€‚ç£ä»‹è´¨å¤„äºå¤–ç£åœºæ—¶ï¼Œæ¯ä¸ªåˆ†å­å‡äº§ç”Ÿä¸å¤–ç£åœºæ–¹å‘ç›¸åçš„ **é™„åŠ ç£çŸ©** $\\Delta \\boldsymbol{p}_{m}$ã€‚é¡ºç£è´¨çš„ $\\boldsymbol{p}_{m}$ è¿œå¤§äº $\\Delta \\boldsymbol{p}_{m}$ï¼Œä¸”åˆ†å­å—åˆ°çš„ç£åŠ›çŸ©å°½å¯èƒ½ä½¿å›ºæœ‰ç£åœºè½¬å‘å¤–ç£åœºæ–¹å‘ï¼›æŠ—ç£è´¨çš„ $\\boldsymbol{p}_{m}$ ä¸º $0$ï¼Œé™„åŠ ç£çŸ©æ˜¯äº§ç”Ÿç£åŒ–çš„å”¯ä¸€åŸå› ã€‚\n\n- **ç£ä»‹è´¨**ï¼šåœ¨ç£åœºçš„ä½œç”¨ä¸‹èƒ½å¤Ÿè·å¾—ç£çŸ©çš„ç‰©è´¨ã€‚ç£ä»‹è´¨å†…çš„ç£æ„Ÿåº”å¼ºåº¦ $\\boldsymbol{B}$ ä¸ºçœŸç©ºä¸­åŸæ¥çš„ç£æ„Ÿåº”å¼ºåº¦ $\\boldsymbol{B}_{0}$ å’Œé™„åŠ ç£æ„Ÿåº”å¼ºåº¦ $\\boldsymbol{B}'$ çš„å’Œï¼Œå³ $\\boldsymbol{B}=\\boldsymbol{B}_{0}+\\boldsymbol{B}'$ã€‚\n- **åˆ†å­ç”µæµ**ï¼šåˆ†å­æˆ–åŸå­ä¸­æ‰€æœ‰ç”µå­å¯¹å¤–ç•Œæ‰€äº§ç”Ÿç£æ•ˆåº”æ€»å’Œå¯ä»¥ç­‰æ•ˆäºä¸€ä¸ªåœ†ç”µæµ $I$ã€‚\n- **åˆ†å­ç£çŸ©**ï¼šæ¯ä¸€ä¸ªåˆ†å­ç”µæµéƒ½å…·æœ‰ç£çŸ©ï¼Œå…·æœ‰å…³ç³» $\\boldsymbol{p}_{m} = I S \\boldsymbol{e}_{n}$ã€‚\n- **ç£åŒ–å¼ºåº¦**ï¼šè¡¨å¾ç£ä»‹è´¨ç£åŒ–ç¨‹åº¦ã€‚å®šä¹‰ä¸ºæŸä½“ç§¯å¾®å…ƒå†…åˆ†å­çš„æ€»ç£çŸ©ä¹‹å’Œ $\\color{blue}\\displaystyle{\\boldsymbol{M}=\\sum \\dfrac{\\boldsymbol{p}_{m}}{\\text{d}V}}$ã€‚\n  - é¡ºç£è´¨ $\\boldsymbol{M}$ ä¸ $\\boldsymbol{B}_{0}$ åŒå‘ï¼ŒæŠ—ç£è´¨ $\\boldsymbol{M}$ ä¸ $\\boldsymbol{B}_{0}$ åå‘ã€‚\n  - å¦‚æœä»‹è´¨å†…å„ç‚¹çš„ $\\boldsymbol{M}$ éƒ½ç›¸åŒï¼Œç§°ä¸ºå‡åŒ€ç£åŒ–ï¼Œå¦åˆ™ç§°ä¸ºä¸å‡åŒ€ç£åŒ–ã€‚\n- **ç£åŒ–ç”µæµ** / **æŸç¼šç”µæµ**ï¼šç”±ç£ä»‹è´¨ä¸­å„åˆ†å­çš„åˆ†å­ç”µæµå åŠ è€Œæˆï¼Œä»…åœ¨ç£ä»‹è´¨è¡¨é¢äº§ç”Ÿçš„ç­‰æ•ˆç¯å½¢ç”µæµï¼ˆæˆ–è€…è¯´æ˜¯å®è§‚ä¸Šæœªè¢«æŠµæ¶ˆè€Œæ²¿åœ†æŸ±é¢æµåŠ¨çš„ç”µæµï¼‰ï¼Œå¸¸ç”¨ $I_{\\text{m}}$ è¡¨ç¤ºã€‚\n  - ç£ä»‹è´¨è¡¨é¢ä¸ŠæŸå¤„ **ç£åŒ–ç”µæµçº¿å¯†åº¦** $j_{\\text{m}}$ ç­‰äºè¯¥ç‚¹ç£åŒ–å¼ºåº¦ $\\boldsymbol{M}$ æ²¿è¡¨é¢çš„==åˆ‡å‘åˆ†é‡==ï¼š$\\displaystyle{M=\\sum \\dfrac{p_{m}}{\\Delta V}=\\dfrac{j_{m}lS}{Sl}=j_{m}}$ï¼Œå…¶æ­£è´Ÿå¯ä»¥é€šè¿‡è€ƒå¯Ÿæ˜¯é¡ºç£è´¨è¿˜æ˜¯æŠ—ç£è´¨å¾—åˆ°ã€‚\n\n### 2.2. ç£åœºå¼ºåº¦\n\n- **ç£åœºå¼ºåº¦**ï¼šå®šä¹‰å¼ï¼š$\\color{blue}\\boldsymbol{H}=\\dfrac{\\boldsymbol{B}}{\\mu_{0}} - \\boldsymbol{M}$ï¼Œå•ä½ $\\text{A/m}$ã€‚\n  - **æŸç¼šç”µæµä¸ç£åŒ–å¼ºåº¦çš„å…³ç³»**ï¼šä»‹è´¨å†… $M=j_{\\text{m}}$ï¼Œç£åŒ–å¼ºåº¦ $\\boldsymbol{M}$ å¯¹é—­åˆå›è·¯çš„çº¿ç§¯åˆ†ç­‰äºé€šè¿‡å›è·¯æ‰€åŒ…å›´çš„æŸç¼šç”µæµï¼Œå³ $\\displaystyle{\\oint_{L} \\boldsymbol{M}\\cdot\\text{d}\\boldsymbol{l}=j_{\\text{m}} |AB|=\\sum_{L\\text{å†…}}I_{\\text{m}}}$ã€‚è¿™è™½ç„¶æ˜¯é€šè¿‡å‡åŒ€ç£ä»‹è´¨ä¸çŸ©å½¢é—­åˆå›è·¯æ¨å¯¼å‡ºçš„ï¼Œä½†å¯¹äºä»»ä½•æƒ…å†µéƒ½æ™®éé€‚ç”¨ã€‚\n- **ç£åŒ–ç‡**ï¼šå¯¹äºå„å‘åŒæ€§çš„ç”µä»‹è´¨ï¼Œ$\\boldsymbol{M}$ ä¸ $\\boldsymbol{H}$ æˆæ­£æ¯”ï¼š$\\color{blue}\\boldsymbol{M}=\\chi_{m}\\boldsymbol{H}$ï¼Œå…¶ä¸­ $\\chi_{m}$ ç§°ä¸ºç£åŒ–ç‡ã€‚\n  - å¯¹äºæŠ—ç£è´¨ï¼š$\\chi_{m}<0$ï¼Œ$\\mu_r<1$ï¼Œ$B<B_{0}$ã€‚\n  - å¯¹äºé¡ºç£è´¨ï¼š$\\chi_{m}>0$ï¼Œ$\\mu_{r}>1$ï¼Œ$B>B_{0}$ã€‚\n  - å¯¹äºé“ç£è´¨ï¼š$\\chi_{m}$ å¾ˆå¤§ä¸”ä¸æ˜¯å¸¸æ•°ï¼Œ$B\\gg B_{0}$ã€‚\n- **ç›¸å¯¹ç£å¯¼ç‡**ï¼šç›¸å¯¹ç£å¯¼ç‡ $\\color{blue}\\mu_{r}=1+\\chi_{m}$ï¼Œæœ‰ $\\boldsymbol{B}=\\mu_{0}\\mu_{r}\\boldsymbol{H}=\\mu_{0}(1+\\chi_{m}) \\boldsymbol{H}=\\mu_{0}\\boldsymbol{H}+\\mu_{0}\\boldsymbol{M}$ã€‚\n- **æœ‰ç£ä»‹è´¨æ—¶çš„å®‰åŸ¹ç¯è·¯å®šç†**ï¼š$\\color{blue}\\displaystyle{\\oint_{L} \\boldsymbol{H}\\cdot\\text{d}\\boldsymbol{l}=\\sum I_{0}}$ã€‚\n  - æœ‰ä»‹è´¨æ—¶çš„ç£åœºé«˜æ–¯å®šç†ä¾ç„¶æˆç«‹ï¼Œå³é—­åˆæ›²çº¿é¢ç§¯åˆ†ä¸º $0$ã€‚\n\n## 3. Ch19 å¸¦ç”µç²’å­åœ¨ç”µåœºå’Œç£åœºä¸­çš„è¿åŠ¨\n\n- **æ´›ä¼¦å…¹åŠ›**ï¼šé€Ÿåº¦ä¸º $\\boldsymbol{v}$ çš„è¿åŠ¨ç”µè·åœ¨ç£æ„Ÿåº”å¼ºåº¦ä¸º $\\boldsymbol{B}$ çš„æŸç‚¹å—åˆ°çš„ç£åœºä½œç”¨åŠ›ï¼ˆ**æ´›ä¼¦å…¹åŠ›**ï¼‰ä¸º $\\boldsymbol{F}=q \\boldsymbol{v} \\times \\boldsymbol{B}$ã€‚\n  - è‹¥ç©ºé—´ä¸­åŒæ—¶å­˜åœ¨ç”µåœº $E$ å’Œç£åœº $B$ï¼Œåˆ™ç”µè·æ‰€å—ä½œç”¨åŠ›ä¸º $\\boldsymbol{F}=q\\boldsymbol{E}+q \\boldsymbol{v} \\times \\boldsymbol{B}$ã€‚\n    - è€ƒè™‘ç›¸å¯¹è®ºæ•ˆåº”åï¼š$q\\boldsymbol{E}+q\\boldsymbol{v}\\times \\boldsymbol{B}=\\dfrac{\\text{d}}{\\text{d} t} \\left( \\dfrac{m\\boldsymbol{v}}{\\sqrt{1-(v/c)^{2}}} \\right)$ã€‚\n- **å¸¦ç”µç²’å­åœ¨ç£åœºä¸­çš„è¿åŠ¨**ï¼š\n  - $\\boldsymbol{v}\\parallel \\boldsymbol{B}$ï¼šå¸¦ç”µç²’å­ä½œåŒ€é€Ÿç›´çº¿è¿åŠ¨ã€‚\n  - $\\boldsymbol{v}\\perp \\boldsymbol{B}$ï¼šå¸¦ç”µç²’å­ä½œåŒ€é€Ÿåœ†å‘¨è¿åŠ¨ï¼Œåœ†å‘¨åŠå¾„ $R=\\dfrac{mv}{qB}$ï¼Œå‘¨æœŸ $T=\\dfrac{2\\pi m}{qB}$ã€‚\n  - $\\boldsymbol{v}$ ä¸ $\\boldsymbol{B}$ å‘ˆä»»æ„å¤¹è§’ $\\theta$ï¼Œåˆ™å¸¦ç”µç²’å­ä½œç­‰é—´è·èºæ—‹çº¿è¿åŠ¨ï¼Œè¿åŠ¨åŠå¾„ $R=\\dfrac{mv_{\\perp}}{qB}=\\dfrac{mv \\sin \\theta}{qB}$ï¼Œèºè·ï¼š$h=\\dfrac{2\\pi m v_{\\parallel}}{qB}=\\dfrac{2\\pi mv \\cos \\theta}{qB}$ã€‚\n- **éœå°”æ•ˆåº”**ï¼šåœ¨ç£åœºä¸­è½½æµå¯¼ä½“ä¸Šå‡ºç°æ¨ªå‘ç”µåŠ¿å·®çš„ç°è±¡ï¼Œå…¶éœå°”ç”µå‹ä¸º $V_H=R_{H} \\dfrac{IB}{d}$ï¼Œ$d$ ä¸ºå¯¼ä½“æ¿çš„åšåº¦ã€‚\n  - **éœå°”ç³»æ•°**ï¼š$R_{H}=\\dfrac{1}{nq}$ï¼Œè‹¥æµ‹å¾— $R_{H}$ï¼Œå°±å¯ä»¥æ±‚å‡ºå¯¼ä½“ä¸­è½½æµå­çš„æµ“åº¦ã€‚\n\n## 4. Ch17 ç”µç£æ„Ÿåº”\n\n- **æ³•æ‹‰ç¬¬ç”µç£æ„Ÿåº”å®šå¾‹** / **æ¥æ¬¡å®šå¾‹**ï¼š$\\mathcal{E}_{i}=- \\dfrac{\\text{d}\\Phi_{B}}{\\text{d}t}$ã€‚\n- **ç”µåŠ¨åŠ¿**ï¼šæ˜¯æŒ‡åœ¨ç”µæºå†…éƒ¨ï¼Œå°†å•ä½æ­£ç”µè·ä»è´Ÿæç»ç”µæºå†…éƒ¨ç§»åˆ°æ­£ææ—¶éé™ç”µåŠ›æ‰€ä½œçš„åŠŸï¼Œ$\\displaystyle{\\mathcal{E}=\\dfrac{\\text{d} A}{\\text{d} q} =\\oint_{-}^{+} \\boldsymbol{E}_{k} \\cdot \\text{d} \\boldsymbol{l}}$ã€‚\n- **æ„Ÿç”Ÿç”µåŠ¨åŠ¿**ï¼šç”±äºç£åœºå˜åŒ–è€Œäº§ç”Ÿçš„ç”µåœºç§°ä¸º **æ¶¡æ—‹ç”µåœº**ï¼Œæ¶¡æ—‹ç”µåœºäº§ç”Ÿçš„ç”µåŠ¨åŠ¿ç§°ä¸ºæ„Ÿç”Ÿç”µåŠ¨åŠ¿ï¼Œ$\\displaystyle{\\color{blue}\\mathcal{E}=\\oint_{L}\\boldsymbol{E}_{\\text{æ—‹}} \\cdot \\text{d}\\boldsymbol{l}=-\\dfrac{\\text{d}\\Phi_{B}}{\\text{d}t}}$ã€‚\n  - åŠå¾„ä¸º $r$ çš„æ— é™é•¿åœ†æŸ±å†…æ²¿è½´çº¿æ–¹å‘é€šéšæ—¶é—´å‡åŒ€å˜åŒ–çš„ç£åœº $B$ï¼Œåˆ™æ¶¡æ—‹ç”µåœºåˆ†å¸ƒï¼š$E_{æ—‹}=-\\dfrac{r}{2} \\dfrac{\\text{d}B}{\\text{d}t},\\space r\\leq R;\\quad E_{æ—‹}=-\\dfrac{R^{2}}{2r} \\dfrac{\\text{d}B}{\\text{d}t},\\space r\\geq R$ã€‚å…¶ä¸­ $- \\dfrac{\\text{d}\\boldsymbol{B}}{\\text{d}t}$ ä¸ $\\boldsymbol{E}_{\\text{æ—‹}}$ åœ¨æ–¹å‘ä¸Šæ»¡è¶³å³æ‰‹èºæ—‹å®šåˆ™ã€‚\n- **æ¥æ¬¡å®šå¾‹**ï¼šæ„Ÿåº”ç”µæµæ€»æ˜¯ä½¿æ„Ÿåº”ç”µæµæ‰€æ¿€å‘çš„ç£åœºå»é˜»æ­¢åŸç£é€šé‡çš„å˜åŒ–ã€‚å¯ç”¨äºåˆ¤æ–­æ„Ÿåº”ç”µæµçš„æ–¹å‘ã€‚\n- **åŠ¨ç”Ÿç”µåŠ¨åŠ¿**ï¼šå¯¼ä½“åœ¨æ’å®šç£åœºä¸­è¿åŠ¨æ—¶äº§ç”Ÿçš„æ„Ÿåº”ç”µåŠ¨åŠ¿ï¼Œ$\\displaystyle{\\mathcal{E}_{ab}= -\\dfrac{\\text{d}  \\Phi_{B}}{\\text{d}  t} = \\int_{a}^{b} (\\boldsymbol{v} \\times \\boldsymbol{B})\\cdot \\text{d}\\boldsymbol{l}}$ã€‚\n  - è‹¥ $\\mathcal{E}_{ab}<0$ï¼Œåˆ™ $V_{a}<V_{b}$ï¼›è‹¥ $\\mathcal{E}_{ab}>0$ï¼Œåˆ™ $V_a>V_{b}$ã€‚\n","publishedTitle":"ã€Œå¤§å­¦ç‰©ç†(ä¹™)ã€VII. ç”µç£å­¦"}},{"id":"d6a749a4-211b-5027-85ad-afe7c283f16f","fields":{"slug":"/course/physics/note/8/","plainText":"\n> æœ¬ç¯‡ç¬”è®°ä¸»è¦ä»‹ç»äº†å…‰å­¦çš„ä¸‰ä¸ªé‡è¦ç« èŠ‚ï¼šå…‰çš„å¹²æ¶‰ã€å…‰çš„è¡å°„å’Œå…‰çš„åæŒ¯ã€‚åœ¨å…‰çš„å¹²æ¶‰éƒ¨åˆ†ï¼Œè¯¦ç»†è®¨è®ºäº†å…‰æºçš„åŸºæœ¬æ¦‚å¿µã€æŠ˜å°„ç‡ã€å…‰ç¨‹ç­‰åŸºç¡€çŸ¥è¯†ï¼Œä»¥åŠæ¨æ°åŒç¼å®éªŒã€æ´›åŸƒé•œå®éªŒå’Œè–„è†œå¹²æ¶‰ç­‰å…¸å‹å®éªŒã€‚åœ¨å…‰çš„è¡å°„éƒ¨åˆ†ï¼Œä»‹ç»äº†æƒ æ›´æ–¯åŸç†ï¼Œå¹¶å¯¹å•ç¼è¡å°„å’Œå…‰æ …è¡å°„è¿›è¡Œäº†æ·±å…¥åˆ†æã€‚æœ€ååœ¨å…‰çš„åæŒ¯éƒ¨åˆ†ï¼Œè®¨è®ºäº†ä¸åŒç±»å‹çš„å…‰æŸã€åæŒ¯ç‰‡çš„åŸç†ï¼Œä»¥åŠé©¬å•æ–¯å®šå¾‹å’Œå¸ƒå„’æ–¯ç‰¹å®šå¾‹ç­‰é‡è¦è§„å¾‹ã€‚<small style=\"font-style: italic; opacity: 0.5\">ï¼ˆç”± claude-3.5-sonnet ç”Ÿæˆæ‘˜è¦ï¼‰</small>\n\n<!-- more -->\n\n## 1. Ch20 å…‰çš„å¹²æ¶‰\n\n### 1.1. å…‰çš„åŸºæœ¬æ¦‚å¿µ\n\n- **å…‰æº**ï¼šèƒ½å¤Ÿå‘å°„å…‰æ³¢çš„ç‰©ä½“ç§°ä¸ºå…‰æºã€‚\n  - çƒ­è¾å°„å…‰æºï¼šå°†çƒ­èƒ½è½¬åŒ–ä¸ºè¾å°„ã€‚\n  - å†·å…‰æºï¼šä¸å‘¨å›´æ¸©åº¦ç›¸åŒï¼Œä¸éœ€è¦åŠ çƒ­ã€‚\n  - æ™®é€šå…‰æºï¼šæ¿€å‘æ€åŸå­çš„è‡ªå‘è¾å°„ï¼Œé¢‘ç‡ã€ç›¸ä½ã€æŒ¯åŠ¨æ–¹å‘æˆ–ä¼ æ’­æ–¹å‘ä¸ç›¸åŒï¼›è°±çº¿å®½åº¦ $\\Delta \\lambda: 10^{-3} \\sim 10^{-1} \\text{ nm}$ã€‚\n  - æ¿€å…‰å…‰æºï¼šåŸå­çš„å—æ¿€è¾å°„ï¼Œé¢‘ç‡ã€ç›¸ä½ã€æŒ¯åŠ¨æ–¹å‘å’Œä¼ æ’­æ–¹å‘éƒ½ç›¸åŒï¼›è°±çº¿å®½åº¦ $\\Delta \\lambda: 10^{-9}\\text{ nm}$ã€‚\n- å•è‰²å…‰ä¸å¤è‰²å…‰\n  - **å•è‰²å…‰**ï¼šå…·æœ‰å•ä¸€é¢‘ç‡çš„å…‰æ³¢ã€‚\n  - å¤è‰²å…‰ï¼šä¸åŒé¢‘ç‡å•è‰²å…‰çš„æ··åˆå…‰ã€‚\n- å…‰å¼ºï¼š\n  - è°±çº¿å®½åº¦ $\\Delta \\lambda$ï¼šè°±çº¿åœ¨å…‰å¼º $I_{0}/2$ å¤„çš„æ³¢é•¿èŒƒå›´ã€‚\n- **æŠ˜å°„ç‡**ï¼šåŒé¢‘ç‡çš„å…‰æ³¢åœ¨ä¸åŒä»‹è´¨ä¸­ï¼Œå…¶æ³¢é€Ÿå’Œæ³¢é•¿ä¸ä¸€æ ·ã€‚\n  - è®¾å…‰åœ¨çœŸç©ºä¸­çš„æ³¢é€Ÿä¸º $c_{0}$ï¼Œåˆ™åœ¨ **æŠ˜å°„ç‡** ä¸º $n$ çš„ä»‹è´¨ä¸­çš„æ³¢é€Ÿ $c$ æ»¡è¶³ $n=\\dfrac{c_{0}}{c}$ã€‚\n  - è®¾å…‰åœ¨çœŸç©ºä¸­çš„æ³¢é•¿ä¸º $\\lambda$ï¼Œåˆ™åœ¨ **æŠ˜å°„ç‡** ä¸º $n$ çš„ä»‹è´¨ä¸­çš„æ³¢é•¿ $\\lambda_{n} = \\dfrac{c}{\\nu} =\\dfrac{\\lambda}{n}$ã€‚\n- **å…‰ç¨‹**ï¼šå…‰åœ¨æŠ˜å°„ç‡ä¸º $n$ çš„ä»‹è´¨ä¸­ç»è¿‡çš„è·¯ç¨‹ä¸º $r$ æ—¶ï¼Œç§° $L=nr$ ä¸ºå…‰ç¨‹ã€‚\n  - è¿™æ˜¯ä¸ºäº†æ–¹ä¾¿è®¡ç®—å…‰çš„ç›¸ä½å˜åŒ–æ‰€å®šä¹‰çš„æ¦‚å¿µï¼Œå› ä¸ºç»è¿‡å…‰ç¨‹ä¸º $L$ æ‰€å¼•èµ·çš„ç›¸ä½å·®å˜åŒ–ä¸ºï¼š$\\Delta \\varphi = 2\\pi \\dfrac{r}{\\lambda_{n}} = \\dfrac{2\\pi}{\\lambda} nr=\\dfrac{2\\pi}{\\lambda} L$ï¼ˆ$\\lambda$ï¼šçœŸç©ºä¸­çš„æ³¢é•¿ï¼‰ã€‚\n  - **ç­‰å…‰ç¨‹æ€§**ï¼šå…‰çº¿é€šè¿‡é€é•œä¼šæ”¹å˜å®ƒçš„ä¼ æ’­æ–¹å‘ï¼Œä½†ä¸äº§ç”Ÿé™„åŠ çš„å…‰ç¨‹å·®ã€‚å³ï¼Œç‰©ç‚¹ä¸è±¡ç‚¹ä¹‹é—´å„å…‰çº¿çš„å…‰ç¨‹éƒ½ç›¸ç­‰ï¼Œè§‚æµ‹ä»ªå™¨ä¸ä¼šå¸¦æ¥é™„åŠ çš„å…‰ç¨‹å·®ã€‚\n- **åŠæ³¢æŸå¤±**ï¼šå¦‚æœå…‰æ˜¯ä»å…‰æŸä»‹è´¨ä¼ å‘å…‰å¯†ä»‹è´¨ï¼Œåˆ™åœ¨å…¶åˆ†ç•Œé¢ä¸Š==åå°„==æ—¶å°†å‘ç”Ÿ **åŠæ³¢æŸå¤±**ï¼Œå³ç›¸ä½æœ‰ $\\pi$ çš„çªå˜ã€‚æŠ˜å°„æ³¢æ²¡æœ‰åŠæ³¢æŸå¤±ã€‚\n\n### 1.2. å…‰çš„å¹²æ¶‰\n\n> <img src=\"https://img.memset0.cn/2024/11/27/k6yl4GCX.png\" align=\"right\" width=\"160\">è®¾ç¬¦åˆç›¸å¹²æ¡ä»¶çš„ä¸¤å…‰çŸ¢é‡ $E_{1},E_{2}$ åœ¨å…¶åŸç‚¹æœ‰ï¼š\n>\n> $$\n> \\begin{aligned}E_1&=E_{10}\\cos(\\omega t+\\varphi_{10})\\\\ E_2&=E_{20}\\cos(\\omega t+\\varphi_{20})\\end{aligned}\n> $$\n>\n> åˆ™åœ¨ $P$ ç‚¹ï¼š\n>\n> $$\n> \\begin{aligned}&E_1=E_{10}\\cos(\\omega t-{\\color{green}2\\pi n_{1}r_1/\\lambda}+\\varphi_{10})\\\\ &E_2=E_{20}\\cos(\\omega t-{\\color{green}2\\pi n_{2}r_2/\\lambda}+\\varphi_{20})\\\\ &({\\color{green}2\\pi n_{i}r_{{i}}/\\lambda\\ (i=1,2)}\\text{: ä»å…‰æº }S\\text{ åˆ° }P\\text{ çš„ç›¸ä½å˜åŒ–é‡})\\end{aligned}\n> $$\n>\n> çŸ¢é‡åˆæˆçš„ç»“æœä¸ºï¼š\n>\n> $$\n> \\begin{aligned}E_0^2=E_{10}^2+E_{20}^2+2E_{10}E_{20}\\cos\\Delta\\varphi\\\\ \\Delta\\varphi=(\\varphi_{20}-\\varphi_{10})-\\frac{2\\pi}\\lambda(n_{2}r_2-n_{1}r_1)\\end{aligned}\n> $$\n>\n> åˆ™å…‰å‘ç”Ÿå¹²æ¶‰çš„åˆ¤æ®ä¸ºï¼š\n>\n> $$\n> \\Delta \\varphi = \\begin{cases}\\pm 2k \\pi,\\quad &k = 0, 1, 2, \\ldots\\ (\\text{å¹²æ¶‰åŠ å¼º})\\\\ \\pm (2k+1) \\pi, \\quad &k=0, 1, 2,\\ldots\\ (\\text{å¹²æ¶‰å‡å¼±})\\end{cases}\n> $$\n>\n> å½“ $\\varphi_{10} = \\varphi_{20}$ æ—¶ï¼Œç”¨ $\\delta=n_{2}r_{2}-n_{1}r_{1}=L_2-L_{1}$ æ¥è¡¨ç¤ºå…‰ç¨‹å·®ï¼Œåˆ™æœ‰\n>\n> $$\n> \\delta = \\begin{cases}\\pm (2k) \\frac{\\lambda}{2},&\\quad k=0,1,2,...\\ (\\text{å¹²æ¶‰åŠ å¼º})\\\\\\pm(2k+1)\\frac\\lambda2,&\\quad k=0,1,2,...\\ (\\text{å¹²æ¶‰å‡å¼±})\\end{cases}\n> $$\n\n- å…‰çš„å¹²æ¶‰æ¡ä»¶ï¼šé¢‘ç‡ç›¸åŒã€æŒ¯åŠ¨æ–¹å‘ç›¸åŒã€==ç›¸ä½å·®æ’å®š==ã€‚\n  - ç›¸å¹²å…‰çš„è·å¾—æ–¹æ³•\n    - åˆ†æ³¢é˜µé¢æ³•ï¼šåŒä¸€æ³¢é˜µé¢çš„ä¸åŒéƒ¨åˆ†åˆ†ç¦»å‡ºä¸¤æŸç›¸å¹²å…‰ã€‚\n    - åˆ†æŒ¯å¹…æ³•ï¼šåå°„å…‰å’ŒæŠ˜å°„å…‰ä½œä¸ºä¸¤æŸç›¸å¹²å…‰ã€‚\n- <img src=\"https://img.memset0.cn/2024/11/27/FeDtxCoY.png\" align=\"right\" width=\"360\">**æ¨æ°åŒç¼å®éªŒ**ï¼ˆåˆ©ç”¨åˆ†æ³¢é˜µé¢æ³•è·å¾—ç›¸å¹²å…‰ï¼‰\n  - ä¸€èˆ¬è®¤ä¸ºå®éªŒåœ¨çœŸç©ºï¼ˆæˆ–ç©ºæ°”ï¼‰ä¸­è¿›è¡Œï¼Œåˆ™å…‰ç¨‹å·®ä¸ºï¼š$\\delta = r_{2} - r_{1} \\approx d \\sin \\theta \\approx d \\tan \\theta = d \\cdot \\dfrac{x}{D}$ã€‚\n  - ç›¸é‚»ä¸¤æ˜çº¹ï¼ˆæˆ–æš—çº¹ï¼‰çš„é—´è·ï¼Œå®é™…ä¸Šå°±æ˜¯å…‰ç¨‹å·®æ”¹å˜ $\\lambda$ çš„ä½ç½®ï¼Œæœ‰ $\\Delta x = \\dfrac{D}{d} \\lambda$ã€‚\n  - å±ä¸­å¿ƒå¤„ç”±äº $\\delta = r_{2}-r_{1} = 0$ï¼Œæ˜¯ç›¸é•¿å¹²æ¶‰ï¼Œç§°ä¸º **ä¸­å¤®äº®çº¹**ï¼Œæ•…æœ‰ï¼šæ˜æ¡çº¹ $x_{\\pm k}= \\pm k \\dfrac{D}{d} \\lambda$ï¼Œæš—æ¡çº¹ $x_{\\pm k} = \\pm (2k+1) \\dfrac{D}{2d} \\lambda$ã€‚\n  - æ¨è®ºï¼š$\\Delta x\\propto\\lambda$ï¼Œæ•…å¤è‰²å…‰åšå®éªŒæ—¶ï¼Œçº¢å…‰åœ¨å¤–ï¼Œç´«å…‰åœ¨å†…ã€‚\n- <img src=\"https://img.memset0.cn/2024/11/27/vUQTODOM.png\" align=\"right\" width=\"190\">**æ´›åŸƒé•œå®éªŒ**ï¼ˆä¹Ÿæ˜¯åˆ©ç”¨åˆ†æ³¢é˜µé¢æ³•è·å¾—ç›¸å¹²å…‰ï¼‰\n  - å°†å±å¹•ç§»è‡³ $NM$ çš„ä½ç½®ï¼Œä¸¤å…‰æŸåˆ° $N$ ç‚¹çš„å‡ ä½•è·¯å¾„ç›¸åŒä½ç›¸å·®ä¸ºé›¶ï¼Œä½†åœ¨ $N$ å¤„å‡ºç°çš„æ˜¯æš—ç‚¹ï¼Œè¿™è¯´æ˜åå°„å…‰æœ‰ **åŠæ³¢æŸå¤±**ã€‚\n- **è–„è†œå¹²æ¶‰**\n  - <img src=\"https://img.memset0.cn/2024/11/27/v79drNJ7.png\" align=\"right\" width=\"200\">**ç­‰å€¾å¹²æ¶‰**ï¼ˆåšåº¦å‡åŒ€çš„è–„è†œäº§ç”Ÿçš„å¹²æ¶‰ï¼‰\n    - å•è‰²å…‰ç…§å°„åˆ°å¹³è¡Œçš„å¹³é¢è–„è†œä¸Šï¼Œåœ¨ $A$ ç‚¹äº§ç”Ÿåå°„å’ŒæŠ˜å°„ï¼Œå½¢æˆ $a,b$ ä¸¤å…‰æŸï¼Œå…¶å…‰ç¨‹å·®ä¸ºï¼š$\\delta = n_{2} (AC + CB) - n_{1} AD + \\delta'$ã€‚\n      - å…¶ä¸­ $\\delta'$ æ˜¯åŠæ³¢æŸå¤±äº§ç”Ÿçš„é™„åŠ å…‰ç¨‹å·®ï¼š\n        - å½“ $n_{1}>n_{2}>n_{3}$ æˆ– $n_{1}<n_{2}<n_{3}$ æ—¶ï¼Œ$\\delta'=0$ï¼›\n        - å½“ $n_{1} < n_{2} > n_{3}$ æˆ– $n_{1} > n_{2} < n_{3}$ æ—¶ï¼Œ$\\delta'=\\dfrac{\\lambda}{2}$ã€‚\n      - æ¨è®ºï¼šå½“å…‰==å‚ç›´å…¥å°„==æ—¶ï¼Œå…‰ç¨‹å·®ä¸ºï¼š$\\color{blue}\\delta = 2n_{2} e + \\delta'$ã€‚\n  - **ç­‰åšå¹²æ¶‰**ï¼ˆåšåº¦ä¸å‡åŒ€çš„è–„è†œäº§ç”Ÿçš„å¹²æ¶‰ï¼‰\n    - <img src=\"https://img.memset0.cn/2024/11/28/7gzEGie5.png\" align=\"right\" width=\"220\">**åŠˆå°–è†œå¹²æ¶‰**ï¼š\n      - è®¾ $n$ ä¸ºä¸­é—´ä»‹è´¨æŠ˜å°„ç‡ï¼Œ$e$ ä¸ºè¯¥ä½ç½®è–„è†œåšåº¦ï¼Œåˆ™å…‰ç¨‹å·®ä¸ºï¼š$\\color{blue} \\delta = 2ne + \\dfrac{\\lambda}{2}$ï¼ˆä¸¤æŸåå°„å…‰åº”åˆšå¥½ä¸€ä¸ªæœ‰åŠæ³¢æŸå¤±å¦ä¸€ä¸ªæ²¡æœ‰ï¼‰ã€‚\n      - ç›¸é‚»ä¸¤æ˜çº¹ï¼ˆæˆ–æš—çº¹ï¼‰ä¹‹é—´çš„è·ç¦»ä¸º $l=\\dfrac{\\lambda}{2 n \\sin \\theta}$ï¼Œä¸è†œçš„åšåº¦ $e$ æ— å…³ã€‚\n    - <img src=\"https://img.memset0.cn/2024/11/28/hQxCQUeM.png\" align=\"right\" width=\"145\">**ç‰›é¡¿ç¯**ï¼š\n      - åŒç†ï¼Œè®¾å¯¹åº”ä½ç½®çš„åšåº¦ä¸º $e$ï¼Œåˆ™å…‰ç¨‹å·®ä¹Ÿæ˜¯ï¼š$\\delta = 2ne + \\dfrac{\\lambda}{2}$ã€‚\n      - è®¾åŠå¾„ä¸º $r$ï¼Œæ›²ç‡åŠå¾„ä¸º $R$ï¼Œåˆ™å¯¹åº”åšåº¦å¯ä»¥ç”¨ $\\color{blue}e \\approx \\dfrac{r^{2}}{2R}$ è¿‘ä¼¼è®¡ç®—ã€‚\n      - ä»£å…¥è§£å¾— $k$ çº§æ˜ç¯åŠå¾„ä¸º $r_{k}=\\sqrt{\\left( k-\\dfrac{1}{2}\\right) R \\lambda}$ï¼Œ$k$ çº§æš—ç¯åŠå¾„ä¸º $r_{k}=\\sqrt{kR\\lambda}$ï¼Œæ³¨æ„ç‰›é¡¿ç¯ä¸­é—´æ˜¯ä¸€ä¸ªæš—æ–‘ã€‚\n- å…‰çš„å¹²æ¶‰çš„åº”ç”¨ï¼ˆæ³¨æ„åˆ¤æ–­åŠæ³¢æŸå¤±ï¼‰\n  - å¢é€è†œï¼šåˆ©ç”¨è–„è†œå¹²æ¶‰ä½¿åå°„å…‰å‡å°ã€‚\n  - é«˜åå°„è†œï¼šåˆ©ç”¨è–„è†œå¹²æ¶‰æŠ˜å°„å…‰å‡å°ã€‚\n\n## 2. Ch21 å…‰çš„è¡å°„\n\n- **å…‰çš„è¡å°„ç°è±¡**ï¼šå…‰åœ¨ä¼ æ’­è¿‡ç¨‹ä¸­ï¼Œç»•è¿‡éšœç¢ç‰©è€Œåç¦»äº†ç›´çº¿ä¼ æ’­çš„ç°è±¡ã€‚\n- <img src=\"https://img.memset0.cn/2024/11/21/sqlgveyx.png\" width=\"110\" align=\"right\">**æƒ æ›´æ–¯åŸç†**ï¼šåª’è´¨ä¸­æ³¢æº $S$ æ‰€åˆ°è¾¾çš„ä»»ä¸€ç‚¹éƒ½å¯ä»¥çœ‹ä½œä¸€ä¸ªæ–°çš„å­æ³¢æºï¼›è¿™äº›å­æ³¢æºå‘ç©ºé—´å‘å°„çƒé¢å­æ³¢ï¼Œåœ¨ä»¥åçš„ä»»ä¸€æ—¶åˆ»ï¼Œè¿™äº›å­æ³¢çš„åŒ…ç»œé¢å°±æ˜¯æ³¢åœ¨è¯¥æ—¶åˆ»çš„æ–°çš„æ³¢é˜µé¢ã€‚â€”â€”è§£å†³äº†æ³¢çš„==ä¼ æ’­æ–¹å‘==é—®é¢˜\n- å…‰çš„è¡å°„çš„åˆ†ç±»\n  - <img src=\"https://img.memset0.cn/2024/11/28/yWNVRwwm.png\" align=\"right\" width=\"125\">**è²æ¶…å°”(è¿‘åœº)è¡å°„**ï¼šæ˜¯æŒ‡å½“å…‰æºå’Œæ¥æ”¶å±ç¦»éšœç¢ç‰©ï¼ˆè¡å°„å±ï¼‰çš„è·ç¦»ä¸º==æœ‰é™è¿œ==æ—¶ï¼Œæˆ–ä¸¤è€…ä¹‹ä¸€ç¦»è¡å°„å±çš„è·ç¦»ä¸º==æœ‰é™è¿œ==æ—¶ï¼Œæ‰€å‘ç”Ÿçš„è¡å°„ç°è±¡ã€‚\n  - **å¤«ç…ç¦¾è´¹(è¿œåœº)è¡å°„**ï¼šæ˜¯æŒ‡è¡å°„å±ç¦»å…‰æºå’Œæ¥æ”¶å±==æ— é™è¿œ==çš„è¡å°„ï¼Œç›¸å½“äºå…¥å°„å…‰å’Œè¡å°„å…‰éƒ½ä¸ºå¹³è¡Œå…‰ã€‚å®éªŒä¸Šå¯åˆ©ç”¨ä¸¤ä¸ªé€é•œæ¥å®ç°ã€‚\n- <img src=\"https://img.memset0.cn/2024/11/29/zM3rQnWf.png\" align=\"right\" width=\"55\"><img src=\"https://img.memset0.cn/2024/11/28/6iAkSe4I.png\" align=\"right\" width=\"250\">**å•ç¼è¡å°„**ï¼šè®¾å¹³è¡Œå…‰å‚ç›´å…¥å°„å•ç¼ï¼ˆå¦‚æœä¸æ˜¯å‚ç›´å…¥å°„ï¼Œè€Œæ˜¯å­˜åœ¨å…¥å°„è§’ $i$ï¼Œåˆ™å°†ä¸‹é¢çš„ $\\sin \\theta$ æ›¿æ¢ä¸º $\\sin \\theta +\\sin i$ï¼‰ã€‚\n  - å½“ $\\theta$ ä¸å¤§æ—¶ï¼Œ$\\sin \\theta \\approx \\tan \\theta = \\dfrac{x}{f}$ã€‚\n  - å•ä¸ªåŠæ³¢å¸¦å®½åº¦ä¸º $\\dfrac{\\lambda}{2}$ã€‚\n    - æ˜æš—æ¡çº¹\n      - ä¸­å¤®æ˜çº¹ä¸­å¿ƒï¼š$\\theta=0$ï¼Œæ³¨æ„å®½åº¦æ˜¯å…¶ä»–æ˜çº¹çš„ä¸¤å€ã€‚\n      - æš—çº¹ä¸­å¿ƒï¼š$a \\sin \\theta = \\pm k \\lambda,\\quad k=1,2,\\cdots$\n      - æ˜çº¹ä¸­å¿ƒï¼š$a \\sin \\theta = \\pm (2k+1) \\dfrac{\\lambda}{2}, \\quad k=1,2,\\cdots$\n- <img src=\"https://img.memset0.cn/2024/11/29/WIw0aSlz.png\" width=\"220\" align=\"right\">**å…‰æ …è¡å°„**ï¼š\n  - **å…‰æ …å¸¸æ•°** $d=a+b$ï¼Œå…¶ä¸­ $a$ ä¸ºé€å…‰ç¼çš„å®½åº¦ï¼Œ$b$ ä¸ºä¸é€å…‰è£‚ç—•çš„å®½åº¦ã€‚\n  - **ä¸»æå¤§æ˜çº¹**ï¼š$d \\sin \\theta = \\pm k \\lambda,\\ k=0,1,2,\\cdots$ æ»¡è¶³è¯¥æ–¹ç¨‹çš„ $\\theta$ åˆå¯ä»¥çœ‹åˆ°æ˜çº¹ã€‚ç”±äº $-\\dfrac{\\pi}{2} < \\theta < \\dfrac{\\pi}{2}$ï¼Œä¸»æå¤§æ˜çº¹çš„ä¸ªæ•°æ˜¯==æœ‰é™çš„==ã€‚\n  - ç¼ºçº§ï¼šæŸäº›è¡å°„è§’ $\\theta$ åŒæ—¶æ»¡è¶³å…‰æ …æ–¹ç¨‹å’Œå•ç¼è¡å°„çš„æš—çº¹æ¡ä»¶å—ï¼Œæ­¤æ—¶åŸå®šçš„ä¸»æå¤§æ˜çº¹å°±ä¼šå˜æˆæš—çº¹ï¼š$\\begin{cases}a \\sin \\theta = k_{1} \\lambda \\quad \\text{(å•ç¼è¡å°„æš—çº¹)}\\\\ d \\sin \\theta = k_{2} \\lambda \\quad \\text{(å…‰æ …ä¸»æå¤§)}\\end{cases} \\Longrightarrow {\\color{blue}k_{2} = \\dfrac{d}{a} k_{1}}$ã€‚\n  - **å…‰æ …åˆ†è¾¨æœ¬é¢†** $\\color{blue}R=\\dfrac{\\overline{\\lambda}}{\\Delta \\lambda} = k N$ã€‚TBDã€‚\n\n## 3. Ch22 å…‰çš„åæŒ¯\n\n- å…‰æŸçš„åˆ†ç±»\n  - **çº¿åæŒ¯å…‰**ï¼šç©ºé—´å„ç‚¹çš„å…‰çŸ¢é‡éƒ½æ²¿åŒä¸€ä¸ªå›ºå®šçš„æ–¹å‘æŒ¯åŠ¨ã€‚\n  - **è‡ªç„¶å…‰**ï¼šä¸¤ä¸ªæŒ¯åŠ¨æ–¹å‘äº’ç›¸å‚ç›´ã€ç›¸ä½å·®éšæœºã€ç­‰æŒ¯å¹…çš„çº¿åæŒ¯å…‰ç»„åˆã€‚\n  - **éƒ¨åˆ†åæŒ¯å…‰**ï¼šä»‹äºè‡ªç„¶å…‰å’Œçº¿åæŒ¯å…‰ä¹‹é—´ï¼ŒæŒ¯åŠ¨åœ¨å„ä¸ªæ–¹å‘ä¸Šçš„æŒ¯å¹…ä¸åŒã€‚\n- åæŒ¯ç‰‡ï¼šï¼ˆç†æƒ³åæŒ¯ç‰‡ï¼‰å¹³è¡ŒäºæŒ‡å®šæ–¹å‘çš„æŒ¯åŠ¨åˆ†é‡å®Œå…¨é€šè¿‡ï¼Œå‚ç›´äºæŒ‡å®šæ–¹å‘çš„æŒ¯åŠ¨åˆ†é‡å®Œå…¨å¸æ”¶ã€‚\n- <img src=\"https://img.memset0.cn/2024/11/29/IIBZ1JrS.png\" align=\"right\" width=\"120\">**é©¬å•æ–¯å®šå¾‹**ï¼šè®¾èµ·åå™¨å’Œæ£€åå™¨çš„åæŒ¯åŒ–æ–¹å‘æˆ $\\alpha$ è§’ï¼Œå…¥å°„åˆ°æ£€åå™¨çš„å…‰å¼ºä¸º $I_{1}$ï¼Œé€å°„å…‰å¼ºä¸º $I_{2}$ï¼Œåˆ™ $\\color{blue} I = I_{0} \\cos^{2} \\alpha$ã€‚\n  - å½“ $\\alpha=0$ æ—¶ $I=I_{\\max} = I_{0}$ï¼›å½“ $\\alpha=\\dfrac{\\pi}{2}$ æ—¶ï¼Œ$I=0$ã€‚\n- <img src=\"https://img.memset0.cn/2024/11/29/SAC1oLiB.png\" align=\"right\" width=\"195\">**å¸ƒå„’æ–¯ç‰¹å®šå¾‹**ï¼šå½“å…‰çº¿ä»¥ $i_{B}$ ï¼ˆç§°ä¸º **å¸ƒå„’æ–¯ç‰¹è§’**ï¼‰å…¥å°„å¹¶ä¸”æ»¡è¶³ $\\color{blue}i_{B} +r =90\\degree$ æ—¶ï¼Œåå°„å…‰çº¿æ˜¯å®Œå…¨åæŒ¯å…‰ï¼Œè€ŒæŠ˜å°„å…‰çº¿ä»æ˜¯éƒ¨åˆ†åæŒ¯å…‰ï¼Œä¸” $\\color{blue}\\tan i_{B}=\\dfrac{n_{2}}{n_{1}}=n_{21}$ã€‚\n","publishedTitle":"ã€Œå¤§å­¦ç‰©ç†(ä¹™)ã€VIII. å…‰å­¦"}},{"id":"e9568e1a-3a4f-5d38-8f22-58824a89b96e","fields":{"slug":"/course/ptms/note/1/","plainText":"\n> æœ¬ç¯‡ç¬”è®°ä¸»è¦ä»‹ç»äº†æ¦‚ç‡è®ºçš„åŸºæœ¬æ¦‚å¿µã€‚é¦–å…ˆå®šä¹‰äº†éšæœºè¯•éªŒã€æ ·æœ¬ç©ºé—´å’Œéšæœºäº‹ä»¶ç­‰åŸºç¡€æœ¯è¯­ã€‚ç„¶åè¯¦ç»†è®¨è®ºäº†äº‹ä»¶ä¹‹é—´çš„å…³ç³»å’Œè¿ç®—ï¼ŒåŒ…æ‹¬åŒ…å«ã€ç›¸ç­‰ã€å’Œäº‹ä»¶ã€ç§¯äº‹ä»¶ç­‰ã€‚æ¥ç€å¼•å…¥äº†é¢‘ç‡çš„æ¦‚å¿µåŠå…¶æ€§è´¨ï¼Œä½œä¸ºæ¦‚ç‡çš„åŸºç¡€ã€‚æœ€åç»™å‡ºäº†æ¦‚ç‡çš„ä¸¥æ ¼å®šä¹‰åŠå…¶åŸºæœ¬æ€§è´¨ã€‚è¿™äº›å†…å®¹ä¸ºåç»­å­¦ä¹ æ¦‚ç‡è®ºå¥ å®šäº†é‡è¦åŸºç¡€ã€‚<small style=\"font-style: italic; opacity: 0.5\">ï¼ˆç”± claude-3.5-sonnet ç”Ÿæˆæ‘˜è¦ï¼‰</small>\n\n<!-- more -->\n\n## 1. æ¦‚ç‡è®ºçš„åŸºæœ¬æ¦‚å¿µ\n\n- <span class=\"m-definition\">(æ ·æœ¬ç©ºé—´)</span> å°†éšæœºè¯•éªŒ $E$ çš„æ‰€æœ‰å¯èƒ½ç»“æœç»„æˆçš„é›†åˆç§°ä¸º **æ ·æœ¬ç©ºé—´**ï¼Œè®°ä¸º $S$ï¼Œæ ·æœ¬ç©ºé—´çš„å…ƒç´ ï¼Œå³ $E$ çš„æ¯ä¸ªç»“æœï¼Œç§°ä¸º **æ ·æœ¬ç‚¹**ã€‚\n- <span class=\"m-definition\">(éšæœºäº‹ä»¶)</span> ç§°è¯•éªŒ $E$ çš„æ ·æœ¬ç©ºé—´ $S$ çš„å­é›†ä¸º **éšæœºäº‹ä»¶**ï¼Œç®€ç§° **äº‹ä»¶**ã€‚åœ¨æ¯æ¬¡è¯•éªŒä¸­ï¼Œå½“ä¸”ä»…å½“è¿™ä¸ªé›†åˆä¸­çš„ä¸€ä¸ªæ ·æœ¬ç‚¹å‡ºç°æ—¶ï¼Œç§°è¿™ä¸€äº‹ä»¶ **å‘ç”Ÿ**ã€‚\n    - ç”±ä¸€ä¸ªæ ·æœ¬ç‚¹ç»„æˆçš„äº‹ä»¶ç§°ä¸º **åŸºæœ¬äº‹ä»¶**ã€‚\n    - æ ·æœ¬ç©ºé—´ $S$ åŒ…å«æ‰€æœ‰çš„æ ·æœ¬ç‚¹ï¼Œåˆ™æ¯æ¬¡è¯•éªŒä¸­ $S$ æ€»æ˜¯å‘ç”Ÿï¼Œç§° $S$ ä¸º **å¿…ç„¶äº‹ä»¶**ã€‚\n    - ç©ºé›† $\\varnothing$ ä¸åŒ…å«ä»»ä½•æ ·æœ¬ç‚¹ï¼Œæ¯æ¬¡è¯•éªŒ $\\varnothing$ éƒ½ä¸å‘ç”Ÿï¼Œç§° $\\varnothing$ ä¸º **ä¸å¯èƒ½äº‹ä»¶**ã€‚\n- <span class=\"m-definition\">(äº‹ä»¶çš„å…³ç³»ä¸è¿ç®—)</span> è®¾è¯•éªŒ $E$ çš„æ ·æœ¬ç©ºé—´ä¸º $S$ï¼Œè€Œ $A,B,A_k \\subset S$ã€‚\n    - è‹¥ $A \\subset B$ï¼Œåˆ™ç§°äº‹ä»¶ $B$ **åŒ…å«** äº‹ä»¶ $A$ï¼Œäº‹ä»¶ $A$ çš„å‘ç”Ÿå¿…å¯¼è‡´äº‹ä»¶ $B$ å‘ç”Ÿã€‚\n        - è‹¥ $A \\subset B \\land B \\subset A$ å³ $A = B$ï¼Œåˆ™ç§°äº‹ä»¶ $A$ ä¸äº‹ä»¶ $B$ **ç›¸ç­‰**ã€‚\n    - äº‹ä»¶ $A \\cup B = \\{x \\mid x \\in A \\text{ or } x \\in B\\}$ ç§°ä¸ºäº‹ä»¶ $A$ ä¸äº‹ä»¶ $B$ çš„ **å’Œäº‹ä»¶**ï¼Œå½“ä¸”ä»…å½“ $A,B$ ä¸­è‡³å°‘æœ‰ä¸€ä¸ªå‘ç”Ÿæ—¶ï¼Œäº‹ä»¶ $A \\cup B$ å‘ç”Ÿã€‚\n    - äº‹ä»¶ $A \\cap B = \\{x \\mid x \\in A \\text{ and } x \\in B\\}$ ç§°ä¸ºäº‹ä»¶ $A$ ä¸äº‹ä»¶ $B$ çš„ **ç§¯äº‹ä»¶**ï¼Œä¹Ÿè®°ä½œ $AB$ã€‚ç§° $\\bigcap_{k=1}^n A_k$ ä¸ºå¯åˆ—ä¸ªäº‹ä»¶ $A_1, A_2, \\cdots$ çš„ç§¯äº‹ä»¶ã€‚\n    - äº‹ä»¶ $A - B = \\{x \\mid x \\in A \\text{ and } x \\notin B\\}$ ç§°ä¸ºäº‹ä»¶ $A$ ä¸äº‹ä»¶ $B$ çš„ **å·®äº‹ä»¶**ã€‚\n    - è‹¥ $A \\cap B = \\varnothing$ï¼Œåˆ™ç§°äº‹ä»¶ $A$ ä¸äº‹ä»¶ $B$ **äº’ä¸ç›¸å®¹** æˆ– **äº’æ–¥** çš„ã€‚\n    - è‹¥ $A \\cup B = S\\land A \\cap B = \\varnothing$ï¼Œåˆ™ç§°äº‹ä»¶ $A$ ä¸äº‹ä»¶ $B$ äº’ä¸º **é€†äº‹ä»¶**ï¼Œåˆç§°äº‹ä»¶ $A$ ä¸äº‹ä»¶ $B$ äº’ä¸º **å¯¹ç«‹äº‹ä»¶**ã€‚\n- <span class=\"m-definition\">(é¢‘ç‡)</span> åœ¨ç›¸åŒçš„æ¡ä»¶ä¸‹ï¼Œè¿›è¡Œäº† $n$ æ¬¡è¯•éªŒã€‚åœ¨è¿™ $n$ æ¬¡è¯•éªŒä¸­ï¼Œäº‹ä»¶ $A$ å‘ç”Ÿçš„æ¬¡æ•° $n_A$ ç§°ä¸ºäº‹ä»¶ $A$ å‘ç”Ÿçš„ **é¢‘æ•°**ã€‚æ¯”å€¼ $n_A/n$ ç§°ä¸ºäº‹ä»¶ $A$ å‘ç”Ÿçš„ **é¢‘ç‡**ï¼Œå¹¶è®°åš $f_n(A)$ã€‚\n    - <span class=\"m-proposition\">(é¢‘ç‡çš„åŸºæœ¬æ€§è´¨)</span>\n        - $0 \\leq f_n(A) \\leq 1$\n        - $f_n(S) = 1$\n        - è‹¥ $A_1, \\cdots, A_k$ æ˜¯ä¸¤ä¸¤äº’ä¸ç›¸å®¹çš„äº‹ä»¶ï¼Œåˆ™ $f_n(A_1 \\cup \\cdots \\cup A_k) = f_n(A_1) + \\cdots + f_n(A_k)$\n    - é¢‘ç‡ $f_n(A)$ åæ˜ äº†äº‹ä»¶ $A$ å‘ç”Ÿçš„ **é¢‘ç¹ç¨‹åº¦**ã€‚\n- <span class=\"m-definition\">(æ¦‚ç‡)</span> è®¾ $E$ æ˜¯éšæœºè¯•éªŒï¼Œ$S$ æ˜¯å®ƒçš„æ ·æœ¬ç©ºé—´ã€‚å¯¹äº $E$ çš„æ¯ä¸€äº‹ä»¶ $A$ èµ‹äºˆä¸€ä¸ªå®æ•°ï¼Œè®°ä¸º $P(A)$ï¼Œç§°ä¸ºäº‹ä»¶ $A$ çš„ **æ¦‚ç‡**ï¼Œå¦‚æœé›†åˆå‡½æ•° $P(\\cdot)$ æ»¡è¶³ï¼šâ‘  **éè´Ÿæ€§**ï¼šå¯¹äºæ¯ä¸€äº‹ä»¶ $A$ï¼Œæœ‰ $P(A) \\geq 0$ï¼›â‘¡ **è§„èŒƒæ€§**ï¼šå¯¹äºå¿…ç„¶äº‹ä»¶ï¼Œæœ‰ $P(S) = 1$ï¼›â‘¢ **å¯åˆ—å¯åŠ æ€§**ï¼šè®¾ $A_1, A_2, \\cdots$ æ˜¯ä¸¤ä¸¤äº’ä¸ç›¸å®¹äº‹ä»¶ï¼Œæœ‰ $\\displaystyle{P(A_1 \\cup A_2 \\cup \\cdots) = P(A_1) + P(A_2) +  \\cdots}$ã€‚\n    - <span class=\"m-proposition\">(æ¦‚ç‡çš„åŠ æ³•å…¬å¼)</span> $P(A\\cup B)=P(A)+P(B)-P(AB)$ï¼Œå¯ä»¥æ¨å¹¿åˆ°æ›´ä¸€èˆ¬æƒ…å½¢ã€‚\n- <span class=\"m-definition\">(å¤å…¸æ¦‚å‹)</span> è‹¥è¯•éªŒçš„æ ·æœ¬ç©ºé—´==åªåŒ…å«æœ‰é™ä¸ªå…ƒç´ ==ä¸”å…¶ä¸­æ¯ä¸ªåŸºæœ¬äº‹ä»¶å‘ç”Ÿçš„å¯èƒ½æ€§ç›¸åŒã€‚åˆ™ç§°è¿™ç§è¯•éªŒä¸º **å¤å…¸æ¦‚å‹** æˆ– **ç­‰å¯èƒ½æ¦‚å‹**ã€‚\n    - <span class=\"m-theorem\">(å®é™…æ¨æ–­å®šç†)</span> äººä»¬åœ¨é•¿æœŸçš„å®è·µä¸­æ€»ç»“å¾—åˆ°â€œæ¦‚ç‡å¾ˆå°çš„äº‹ä»¶åœ¨ä¸€æ¬¡è¯•éªŒä¸­å®é™…ä¸Šå‡ ä¹æ˜¯ä¸å‘ç”Ÿçš„â€ã€‚å¦‚æœæˆ‘ä»¬è®¡ç®—å‡ºä¸€ä¸ªäº‹ä»¶å‘ç”Ÿçš„æ¦‚ç‡æä½ï¼Œåˆ™å¯ä»¥è®¤ä¸ºè¿™ä¸€äº‹ä»¶ä¸ä¼šå‘ç”Ÿã€‚\n- <span class=\"m-definition\">(ç‹¬ç«‹è¯•éªŒ)</span> æŒ‡ä»»ä¸€æ¬¡å­è¯•éªŒå‡ºç°çš„ç»“æœéƒ½ä¸å½±å“å…¶ä»–å„å­è¯•éªŒå‡ºç°çš„ç»“æœã€‚\n- <span class=\"m-definition\">(é‡å¤è¯•éªŒ)</span> å¦‚æœå„å­è¯•éªŒæ˜¯åœ¨ç›¸åŒæ¡ä»¶ä¸‹è¿›è¡Œçš„ã€‚\n\n## 2. æ¡ä»¶æ¦‚ç‡ä¸ç‹¬ç«‹æ€§\n\n- <span class=\"m-definition\">(æ¡ä»¶æ¦‚ç‡)</span> è®¾ $A,B$ æ˜¯ä¸¤ä¸ªäº‹ä»¶ï¼Œä¸” $P(A) > 0$ã€‚ç§° $\\displaystyle{P(B|A) = \\frac{P(AB)}{P(A)}}$ ä¸ºåœ¨äº‹ä»¶ $A$ å‘ç”Ÿçš„æ¡ä»¶ä¸‹äº‹ä»¶ $B$ å‘ç”Ÿçš„ **æ¡ä»¶æ¦‚ç‡**ã€‚\n    - <span class=\"m-proposition\">(æ¡ä»¶æ¦‚ç‡çš„æ€§è´¨)</span> æ¡ä»¶æ¦‚ç‡ $P(\\cdot\\vert A)$ ç¬¦åˆæ¦‚ç‡çš„æ‰€æœ‰æ€§è´¨ï¼š\n        - **éè´Ÿæ€§**ï¼šå¯¹äºæ¯ä¸€äº‹ä»¶ $B$ï¼Œæœ‰ $P(B|A) \\geq 0$\n        - **è§„èŒƒæ€§**ï¼šå¯¹äºå¿…ç„¶äº‹ä»¶ $S$ï¼Œæœ‰ $P(S|A) = 1$\n        - **å¯åˆ—å¯åŠ æ€§**ï¼šè®¾ $B_1, B_2, \\cdots$ æ˜¯ä¸¤ä¸¤äº’ä¸ç›¸å®¹äº‹ä»¶ï¼Œåˆ™æœ‰ $\\displaystyle{P\\left(\\bigcup_{i=1}^\\infty B_i|A\\right) = \\sum_{i=1}^\\infty P(B_i|A)}$\n    - <span class=\"m-theorem\">(ä¹˜æ³•å…¬å¼)</span> è®¾ $P(A) > 0$ï¼Œåˆ™æœ‰ $P(AB) = P(B|A)P(A)$ã€‚\n        - æ›´ä¸€èˆ¬åœ°ï¼Œè®¾ $A_1, \\cdots, A_n$ ä¸º $n$ ä¸ªäº‹ä»¶ï¼Œ$n \\geq 2$ï¼Œä¸” $P(A_1 \\cdots A_{n-1}) > 0$ï¼Œåˆ™æœ‰ $\\displaystyle{P(A_1 \\cdots A_n) = P(A_n|A_1 \\cdots A_{n-1})P(A_{n-1}|A_1 \\cdots A_{n-2}) \\cdots P(A_2|A_1)P(A_1)}$ã€‚\n- <span class=\"m-definition\">(åˆ’åˆ†)</span> è®¾ $S$ ä¸ºè¯•éªŒ $E$ çš„æ ·æœ¬ç©ºé—´ï¼Œ$B_{1},\\cdots,B_{n}$ ä¸º $E$ çš„ä¸€ç»„äº‹ä»¶ï¼Œè‹¥æ»¡è¶³ï¼šâ‘  å¯¹äºä»»æ„ $i\\neq j$ï¼Œ$B_i\\cap B_{j}=\\varnothing$ï¼›â‘¡ $B_{1}\\cup B_{2}\\cup \\cdots B_{n}=S$ã€‚åˆ™ç§° $B_{1},\\cdots,B_{n}$ ä¸ºæ ·æœ¬ç©ºé—´ $S$ çš„ä¸€ä¸ª **åˆ’åˆ†**ã€‚\n- <span class=\"m-theorem\">(å…¨æ¦‚ç‡å…¬å¼)</span> è®¾è¯•éªŒ $E$ çš„æ ·æœ¬ç©ºé—´ä¸º $S$ï¼Œ$A$ ä¸º $E$ çš„äº‹ä»¶ï¼Œ$B_1,\\ldots,B_n$ ä¸º $S$ çš„ä¸€ä¸ªåˆ’åˆ†ï¼Œä¸” $P(B_i) > 0$ï¼Œåˆ™ $P(A) = P(A|B_1)P(B_1) + \\cdots + P(A|B_n)P(B_n)$ã€‚\n- <span class=\"m-theorem\">(è´å¶æ–¯å…¬å¼)</span> è®¾è¯•éªŒ $E$ çš„æ ·æœ¬ç©ºé—´ $S$ï¼Œ$A$ ä¸º $E$ çš„äº‹ä»¶ï¼Œ$B_1, \\cdots, B_n$ ä¸º $S$ çš„ä¸€ä¸ªåˆ’åˆ†ï¼Œ$P(B_i) > 0$ï¼Œä¸”æ›´è¿›ä¸€æ­¥åœ°æœ‰ $P(A) > 0$ åˆ™ $\\displaystyle{P(B_i|A) = \\frac{P(A|B_i)P(B_i)}{\\sum_{j=1}^n P(A|B_j)P(B_j)}}$ã€‚\n    - ç‰¹åˆ«åœ°ï¼Œå– $n = 2$ï¼Œåˆ™ï¼š\n        - $P(A) = P(A|B)P(B) + P(A|\\overline{B})P(\\overline{B})$\n        - $\\displaystyle{P(B|A) = \\frac{AB}{A} = \\frac{P(A|B)P(B)}{P(A|B)P(B) + P(A|\\overline{B})P(\\overline{B})}}$\n    - æ‰€ä»¥è¯´è´å¶æ–¯å…¬å¼ï¼Œè§£å†³çš„æ˜¯==ç”±æœæº¯å› ==çš„æ¨ç†ã€‚\n- <span class=\"m-definition\">(ç›¸äº’ç‹¬ç«‹)</span> è®¾ $A, B$ æ˜¯ä¸¤äº‹ä»¶ï¼Œå¦‚æœæ»¡è¶³ $P(AB) = P(A)P(B)$ åˆ™ç§°äº‹ä»¶ $A, B$ **ç›¸äº’ç‹¬ç«‹**ï¼Œç®€ç§° $A, B$ **ç‹¬ç«‹**ã€‚\n    - <span class=\"m-definition\"></span> æ›´ä¸€èˆ¬åœ°ï¼Œè®¾ $A_1, \\cdots, A_n$ ä¸º $n$ ä¸ªéšæœºäº‹ä»¶ï¼Œå¦‚æœå¯¹äºå…¶ä¸­ä»»æ„ $2, 3,\\cdots , n$ ä¸ªäº‹ä»¶çš„ç§¯äº‹ä»¶çš„æ¦‚ç‡ï¼Œéƒ½ç­‰äºå„äº‹ä»¶æ¦‚ç‡ä¹‹ç§¯ï¼Œåˆ™ç§°äº‹ä»¶ $A_1, \\cdots, A_n$ **ç›¸äº’ç‹¬ç«‹**ã€‚\n        - å¯¹äº $n$ ä¸ªéšæœºäº‹ä»¶ï¼Œç›¸äº’ç‹¬ç«‹å¯ä»¥æ¨å‡ºä¸¤ä¸¤ç‹¬ç«‹ï¼Œä½†æ˜¯ä¸¤ä¸¤ç‹¬ç«‹==ä¸èƒ½æ¨å‡º==ç›¸äº’ç‹¬ç«‹ã€‚\n    - <span class=\"m-proposition\"></span> è®¾ $A, B$ æ˜¯ä¸¤äº‹ä»¶ï¼Œä¸” $P(A) > 0$ï¼Œè‹¥ $A, B$ ç›¸äº’ç‹¬ç«‹ï¼Œåˆ™ $P(B|A) = P(B)$ã€‚\n    - <span class=\"m-proposition\"></span> è‹¥äº‹ä»¶ $A, B$ ç›¸äº’ç‹¬ç«‹ï¼Œåˆ™ $A$ ä¸ $\\overline{B}$ã€$\\overline{A}$ ä¸ $B$ã€$\\overline{A}$ ä¸ $\\overline{B}$ ä¹Ÿç›¸äº’ç‹¬ç«‹ã€‚\n","publishedTitle":"ã€Œæ¦‚ç‡è®ºä¸æ•°ç†ç»Ÿè®¡ã€I. æ¦‚ç‡è®ºçš„åŸºæœ¬æ¦‚å¿µ"}},{"id":"fd819593-c34e-5c2d-8dbc-ed085347e611","fields":{"slug":"/course/ptms/note/2/","plainText":"\n> æœ¬ç¯‡ç¬”è®°ä¸»è¦ä»‹ç»äº†éšæœºå˜é‡åŠå…¶åˆ†å¸ƒçš„åŸºæœ¬æ¦‚å¿µï¼ŒåŒ…æ‹¬ç¦»æ•£å‹éšæœºå˜é‡å’Œè¿ç»­å‹éšæœºå˜é‡çš„å®šä¹‰ã€æ€§è´¨åŠå…¶åˆ†å¸ƒå¾‹ã€‚å†…å®¹æ¶µç›–äº†ä¸¤ç‚¹åˆ†å¸ƒã€äºŒé¡¹åˆ†å¸ƒã€æ³Šæ¾åˆ†å¸ƒã€å‡åŒ€åˆ†å¸ƒã€æŒ‡æ•°åˆ†å¸ƒå’Œæ­£æ€åˆ†å¸ƒç­‰é‡è¦åˆ†å¸ƒç±»å‹ï¼Œå¹¶è¯¦ç»†é˜è¿°äº†æ¯ç§åˆ†å¸ƒçš„æ¦‚ç‡å¯†åº¦å‡½æ•°å’Œåˆ†å¸ƒå‡½æ•°çš„æ€§è´¨ã€‚é€šè¿‡è¿™äº›å†…å®¹ï¼Œè¯»è€…å¯ä»¥æ›´å¥½åœ°ç†è§£éšæœºå˜é‡çš„è¡Œä¸ºåŠå…¶åœ¨æ¦‚ç‡è®ºä¸­çš„åº”ç”¨ã€‚<small style=\"font-style: italic; opacity: 0.5\">ï¼ˆç”± claude-3.5-sonnet ç”Ÿæˆæ‘˜è¦ï¼‰</small>\n\n<!-- more -->\n\n## 1. ç¦»æ•£å‹éšæœºå˜é‡åŠå…¶åˆ†å¸ƒ\n\n- <span class=\"m-definition\">(éšæœºå˜é‡)</span> è®¾éšæœºè¯•éªŒçš„æ ·æœ¬ç©ºé—´ä¸º $S = \\{e\\}$, $X = X(e)$ æ˜¯å®šä¹‰åœ¨æ ·æœ¬ç©ºé—´ $S$ ä¸Šçš„å®å€¼å•å€¼å‡½æ•°ï¼Œåˆ™ç§° $X = X(e)$ ä¸º **éšæœºå˜é‡**ã€‚\n- <span class=\"m-definition\">(æ¦‚ç‡åˆ†å¸ƒå‡½æ•°)</span> è®¾ $X$ æ˜¯ä¸€ä¸ªéšæœºå˜é‡ï¼Œ$x$ æ˜¯ä»»æ„å®æ•°ï¼Œç§° $\\displaystyle{F(x) = P\\{X \\leq x\\}, -\\infty < x < \\infty}$ ä¸º $X$ çš„ **åˆ†å¸ƒå‡½æ•°**ã€‚\n  - å¯¹äºä»»æ„å®æ•° $x_1, x_2(x_1 < x_2)$ï¼Œæœ‰ $P\\{x_1 < X \\leq x_2\\} = P\\{X \\leq x_2\\} - P\\{X \\leq x_1\\} = F(x_2) - F(x_1)$ã€‚\n- <span class=\"m-definition\">(ç¦»æ•£å‹éšæœºå˜é‡)</span> ç§°å–å€¼è‡³å¤šå¯æ•°çš„éšæœºå˜é‡ä¸º **ç¦»æ•£å‹éšæœºå˜é‡**ã€‚\n- <span class=\"m-definition\">(åˆ†å¸ƒå¾‹)</span> è®¾ç¦»æ•£å‹éšæœºå˜é‡ $X$ æ‰€æœ‰å¯èƒ½å–çš„å€¼ä¸º $x_k (k = 1,2,...)$ï¼Œ$X$ å–å„ä¸ªå¯èƒ½å€¼çš„æ¦‚ç‡ï¼Œå³äº‹ä»¶ $\\{X = x_k\\}$ çš„æ¦‚ç‡ï¼Œä¸ºç¦»æ•£å‹éšæœºå˜é‡ $X$ çš„ **åˆ†å¸ƒå¾‹**ï¼š$P\\{X=x_{k}\\}=p_{k},\\space k=1,2,\\ldots$ã€‚\n  - <span class=\"m-proposition\">(åˆ†å¸ƒå¾‹çš„åŸºæœ¬æ€§è´¨)</span>\n    - $p_{k} \\geq 0,\\space k=1,2,\\ldots$\n    - $\\sum_{k=1}^{\\infty} p_{k} = 1$\n  - åˆ†å¸ƒå¾‹ä¹Ÿå¯ä»¥ä»¥è¡¨æ ¼çš„å½¢å¼è¡¨ç¤ºã€‚\n- <span class=\"m-definition\">(ä¸¤ç‚¹åˆ†å¸ƒ)</span> è®¾éšæœºå˜é‡ $X$ æœä»ä»¥ $p\\ (0<p<1)$ ä¸ºå‚æ•°çš„ **(0-1) åˆ†å¸ƒ** æˆ– **ä¸¤ç‚¹åˆ†å¸ƒ**ï¼Œè®°ä¸º $X\\sim B(1,p)$ï¼Œåˆ™ $X$ åªèƒ½å– $0$ æˆ– $1$ ä¸¤ä¸ªå€¼ã€‚\n  - åˆ†å¸ƒå¾‹ï¼š$P\\{X=k\\}=p^{k} (1-p)^{1-k}\\ (k\\in \\{ 0,1 \\})$ï¼ˆå³ $k=1$ çš„æ¦‚ç‡ä¸º $p$ï¼Œ$k=0$ çš„æ¦‚ç‡ä¸º $1-p$ï¼‰\n  - <span class=\"m-definition\">(ä¼¯åŠªåˆ©å®éªŒ)</span> è®¾è¯•éªŒ $E$ åªæœ‰ä¸¤ä¸ªå¯èƒ½ç»“æœï¼š$A$ åŠ $\\bar{A}$ï¼Œåˆ™ç§° $E$ ä¸º **ä¼¯åŠªåˆ©è¯•éªŒ**ã€‚è®¾ $P(A) = p\\space (0 < p < 1)$ï¼Œåˆ™ $P(\\bar{A} )= 1 - p$ã€‚\n- <span class=\"m-definition\">(äºŒé¡¹åˆ†å¸ƒ)</span> è®¾éšæœºå˜é‡ $X$ æœä»ä»¥ $p,n\\ (0<p<1,\\ n\\in \\mathbb{N}_{+})$ ä¸ºå‚æ•°çš„ **äºŒé¡¹åˆ†å¸ƒ**ï¼Œè®°ä¸º $X \\sim B(n,p)$ã€‚\n  - åˆ†å¸ƒå¾‹ï¼š$\\displaystyle{P\\{ X=k \\}=\\binom nk p^{k} (1-p)^{n-k}}$\n  - <span class=\"m-definition\">($n$ é‡ä¼¯åŠªåˆ©è¯•éªŒ)</span> å°†ä¼¯åŠªåˆ©å®éªŒç‹¬ç«‹é‡å¤åœ°è¿›è¡Œ $n$ æ¬¡ï¼Œç§°è¿™ä¸€ä¸²é‡å¤çš„ç‹¬ç«‹è¯•éªŒä¸º **$\\boldsymbol{n}$ é‡ä¼¯åŠªåˆ©è¯•éªŒ**ã€‚\n- <span class=\"m-definition\">(æ³Šæ¾åˆ†å¸ƒ)</span> è®¾éšæœºå˜é‡ $X$ æœä»å‚æ•°ä¸º $\\lambda\\ (\\lambda>0)$ çš„ **æ³Šæ¾åˆ†å¸ƒ**ï¼Œè®°ä¸º $X\\sim \\Pi(\\lambda)$ æˆ– $X\\sim P(\\lambda)$ã€‚\n  - åˆ†å¸ƒå¾‹ï¼š$\\displaystyle{P\\{X = k\\} = \\frac{\\lambda^k e^{-\\lambda}}{k!},\\quad k=0,1,2,\\cdots}$\n    - $\\displaystyle{\\sum_{k=0}^{\\infty} P\\{X = k\\} = \\sum_{k=0}^{\\infty} \\frac{\\lambda^k}{k!} = e^{-\\lambda} \\sum_{k=0}^{\\infty} \\frac{\\lambda^k}{k!} = e^{-\\lambda} e^{\\lambda} = 1}$\n  - <span class=\"m-theorem\">(æ³Šæ¾å®šç†)</span> è®¾ $\\lambda>0$ æ˜¯ä¸€ä¸ªå¸¸æ•°ï¼Œ$n$ æ˜¯ä»»æ„æ­£æ•´æ•°ï¼Œè®¾ $np_{n} = \\lambda$ï¼Œåˆ™å¯¹äºä»»æ„å›ºå®šçš„éè´Ÿæ•´æ•° $k$ï¼Œæœ‰ $\\displaystyle{\\lim_{n \\to \\infty} \\binom{n}{k} p_n^k (1-p_n)^{n-k} = \\frac{\\lambda^k e^{-\\lambda}}{k!}}$ã€‚ä¹Ÿå°±æ˜¯è¯´ä»¥ $n,p$ ä¸ºå‚æ•°çš„äºŒé¡¹åˆ†å¸ƒçš„æ¦‚ç‡å€¼å¯ä»¥ç”±å‚æ•°ä¸º $\\lambda=np$ çš„æ³Šæ¾åˆ†å¸ƒçš„æ¦‚ç‡å€¼è¿‘ä¼¼ã€‚\n\n## 2. è¿ç»­å‹éšæœºå˜é‡åŠå…¶åˆ†å¸ƒ\n\n- <span class=\"m-definition\">(æ¦‚ç‡å¯†åº¦å‡½æ•°)</span> å¦‚æœå¯¹äºéšæœºå˜é‡ $X$ çš„åˆ†å¸ƒå‡½æ•° $F(x)$ï¼Œå­˜åœ¨éè´Ÿå‡½æ•° $f(x)$ ä½¿å¯¹äºä»»æ„å®æ•° $x$ æœ‰ $\\displaystyle{F(x) = \\int_{-\\infty}^x f(t)\\text dt}$ã€‚åˆ™ç§° $X$ ä¸º **è¿ç»­å‹éšæœºå˜é‡**ï¼Œå…¶ä¸­å‡½æ•° $f(x)$ ç§°ä¸º $X$ çš„ **æ¦‚ç‡å¯†åº¦å‡½æ•°**ï¼Œç®€ç§° **æ¦‚ç‡å¯†åº¦**ã€‚\n  - <span class=\"m-proposition\">(æ¦‚ç‡å¯†åº¦å‡½æ•°çš„åŸºæœ¬æ€§è´¨)</span>\n    - $f(x)\\geq0$\n    - $\\displaystyle{\\int_{-\\infty}^{\\infty} f(x) \\text{d}x} = 1$\n    - å¯¹äºä»»æ„å®æ•° $x_{1},x_{2}\\ (x_{1}\\leq x_{2})$ï¼Œæœ‰ $\\displaystyle{ P\\{x_1 < X \\leq x_2\\} = F(x_2) - F(x_1) = \\int_{x_1}^{x_2} f(x)\\text dx}$\n    - è‹¥ $f(x)$ åœ¨ç‚¹ $x$ å¤„è¿ç»­ï¼Œåˆ™ $F'(x) = f(x)$ã€‚\n- <span class=\"m-definition\">(å‡åŒ€åˆ†å¸ƒ)</span> è®¾è¿ç»­å‹éšæœºå˜é‡ $X$ åœ¨åŒºé—´ $(a,b)$ ä¸Šæœä» **å‡åŒ€åˆ†å¸ƒ**ï¼Œè®°ä¸º $X \\sim U(a,b)$ã€‚\n  - æ¦‚ç‡å¯†åº¦å‡½æ•°ï¼š$\\displaystyle{f(x) = \\begin{cases}\\dfrac{1}{b-a} & a < x < b, \\\\ 0 & \\text{other.}\\end{cases}}$\n  - æ¦‚ç‡åˆ†å¸ƒå‡½æ•°ï¼š$\\displaystyle{F(x) = \\begin{cases}0 & x < a, \\\\\\dfrac{x-a}{b-a} & a \\leq x < b, \\\\1 & x \\geq b.\\end{cases}}$\n- <span class=\"m-definition\">(æŒ‡æ•°åˆ†å¸ƒ)</span> è®¾è¿ç»­å‹éšæœºå˜é‡ $X$ æœä»å‚æ•°ä¸º $\\lambda\\ (\\lambda>0)$ çš„ **æŒ‡æ•°åˆ†å¸ƒ**ï¼Œè®°ä¸º $X \\sim \\operatorname*{Exp}(\\lambda)$ æˆ– $X \\sim E(\\lambda)$ã€‚\n  - æ¦‚ç‡å¯†åº¦å‡½æ•°ï¼š$\\displaystyle{f(x) = \\begin{cases}\\lambda e^{- x \\lambda} & x > 0,\\\\0 & x \\leq 0.\\end{cases}}$\n  - æ¦‚ç‡åˆ†å¸ƒå‡½æ•°ï¼š$\\displaystyle{F(x) = \\begin{cases}1 - e^{-x \\lambda} & x > 0 ,\\\\0 & x \\leq 0.\\end{cases}}$\n  - <span class=\"m-proposition\"></span> æœŸæœ›ï¼š$E(X)=\\dfrac{1}{\\lambda}$ï¼›æ–¹å·® $D(X)=\\dfrac{1}{\\lambda^{2}}$ã€‚\n  - <span class=\"m-proposition\"></span> $k$ é˜¶ï¼ˆåŸç‚¹ï¼‰çŸ©ï¼š$E(X^{k})=\\dfrac{k!}{\\lambda^{k}}$ã€‚\n  - <span class=\"m-proposition\">(æŒ‡æ•°åˆ†å¸ƒçš„æ— è®°å¿†æ€§)</span> è®¾ $X$ æœä»æŒ‡æ•°åˆ†å¸ƒï¼Œåˆ™ $\\forall s, t > 0$ï¼Œæœ‰ $P\\{X > s + t|X > s\\} = P\\{X > t\\}$ï¼Œè¿™ç§æ€§è´¨ç§°ä¸º **æ— è®°å¿†æ€§**ã€‚\n    - <span class=\"m-example\"></span> å¦‚æœ $X$ è¡¨ç¤ºå…ƒä»¶å¯¿å‘½ï¼Œæ— è®°å¿†æ€§è¯´æ˜åªè¦å…ƒä»¶è¿˜æ²¡åæ‰ï¼Œé‚£ä¹ˆå…ƒä»¶å‰©ä½™å¯¿å‘½ä»æœä»å‚æ•°ä¸º $\\lambda$ çš„æŒ‡æ•°åˆ†å¸ƒã€‚\n- <span class=\"m-definition\" data-content=\"æ­£æ€åˆ†å¸ƒ\"></span> è®¾è¿ç»­å‹éšæœºå˜é‡ $X$ æœä»å‚æ•°ä¸º $\\mu,\\sigma^{2}\\ (\\sigma>0)$ çš„ **æ­£æ€åˆ†å¸ƒ** æˆ– **é«˜æ–¯åˆ†å¸ƒ**ï¼Œè®°ä¸º $X \\sim N(\\mu, \\sigma^{2})$ã€‚\n  - æ¦‚ç‡å¯†åº¦å‡½æ•°ï¼š$\\displaystyle{f(x) = \\frac{1}{\\sqrt{2\\pi}\\sigma} e^{-\\frac{(x-\\mu)^2}{2\\sigma^2}},\\ -\\infty < x < \\infty}$\n  - <span class=\"m-proposition\" data-content=\"æ­£æ€åˆ†å¸ƒçš„åŸºæœ¬æ€§è´¨\"></span>\n    - $f(x)$ å…³äºç›´çº¿ $x=\\mu$ å¯¹ç§°ã€‚\n    - $f_{\\max} = f(\\mu) = \\dfrac{1}{\\sqrt{2\\pi}\\sigma}$\n    - $\\displaystyle{\\lim_{ |x-\\mu| \\to \\infty } f(x) = 0}$\n    - æ¨è®ºï¼š$E(X^2)=\\mu^{2} + \\sigma^{2}$ã€‚\n  - å½“å›ºå®š $\\sigma$ï¼Œè°ƒæ•´ $\\mu$ æ—¶ï¼Œå‡½æ•°å›¾åƒå¯ä»¥çœ‹ä½œæ²¿ç€ $x$ è½´çš„å¹³ç§»å˜æ¢ï¼›å½“å›ºå®š $\\mu$ è°ƒæ•´ $\\sigma$ æ—¶ï¼Œå‡½æ•°å›¾åƒå¯ä»¥çœ‹åš $y$ è½´æ–¹å‘ä¸Šçš„æ‹‰ä¼¸å˜æ¢ï¼Œä¸” $\\sigma$ è¶Šå°ï¼Œå›¾å½¢è¶Šé«˜è¶Šç˜¦ï¼Œ$\\sigma$ è¶Šå¤§ï¼Œå›¾å½¢è¶ŠçŸ®è¶Šèƒ–ã€‚\n  - è®¾ $\\displaystyle{\\Phi(x) = \\frac{1}{\\sqrt{2\\pi}}\\int_{-\\infty}^x e^{-t^2/2}dt}$ï¼Œåˆ™ $P(X\\leq b) = \\Phi \\left( \\dfrac{b-\\mu}{\\sigma} \\right)$ã€‚å½“ $X \\sim N(\\mu,\\sigma)$ æ—¶ $\\dfrac{X-\\mu}{\\sigma} \\sim N(0,1)$ï¼Œæ•… $\\Phi(x)$ æ˜¯å¸¸å€¼å‡½æ•°ã€‚\n    - éœ€èƒŒè¯µï¼š$\\Phi(0) = 0.5$ï¼Œ$\\Phi(1) = 0.8413$ï¼Œ$\\Phi(2) = 0.9772$ï¼Œ$\\Phi(3) = 0.9987$ã€‚\n    - <span class=\"m-proposition\"></span> $\\Phi(-x) = 1-\\Phi(x)$ã€‚\n  - <span class=\"m-proposition\"></span> è‹¥ $X \\sim N(\\mu,\\sigma^{2})$ï¼Œ$Y=aX + b$ï¼Œåˆ™ $Y \\sim N(a \\mu +b, a^{2} \\sigma^{2})$ã€‚\n- <span class=\"m-theorem\"></span> è®¾éšæœºå˜é‡ $X$ å…·æœ‰æ¦‚ç‡å¯†åº¦ $f_X(x)$, $-\\infty < x < \\infty$, åˆè®¾å‡½æ•° $g(x)$ å¤„å¤„å¯å¯¼ä¸”æ’æœ‰ $g'(x) > 0$ (æˆ–æ’æœ‰ $g'(x) < 0$), åˆ™ $Y = g(x)$ æ˜¯è¿ç»­å‹éšæœºå˜é‡ï¼Œä¸”å…¶æ¦‚ç‡å¯†åº¦ä¸º $$\\displaystyle{f_Y(y) = \\begin{cases}f_X[h(y)]|h'(y)|, & \\alpha < y < \\beta ,\\\\0, & \\text{other.}\\end{cases}}$$ å…¶ä¸­ $h(y)$ æ˜¯ $g(x)$ çš„åå‡½æ•°ï¼Œ$\\alpha = \\min\\{g(-\\infty), g(+\\infty)\\}$, $\\beta = \\max\\{g(-\\infty), g(+\\infty)\\}$ã€‚\n  - è§£å†³ç±»ä¼¼é—®é¢˜ï¼Œå…³é”®åœ¨äºæ‰¾==ç­‰ä»·äº‹ä»¶==ã€‚åœ¨è¿™ä¸€è¿‡ç¨‹ä¸­ï¼Œå¸¸å¸¸éœ€è¦é€šè¿‡==è½¬åŒ–æˆæ¦‚ç‡åˆ†å¸ƒå‡½æ•°==ä½œä¸ºåª’ä»‹ã€‚\n\n> [!example]- è¯æ˜ï¼šæ­£æ€åˆ†å¸ƒçš„æ¦‚ç‡å¯†åº¦å‡½æ•°ç§¯åˆ†ä¸º 1\n>\n> ä»¤ $(x-\\mu)/\\sigma = t$, è®° $I = \\int_{-\\infty}^{\\infty} e^{-t^2/2} \\text{d} t$ï¼Œåˆ™æœ‰\n>\n> $$\n> I^2 = \\int_{-\\infty}^{\\infty} \\int_{-\\infty}^{\\infty} e^{-(t^2+u^2)/2} \\text{d} t\\text{d} u\n> $$\n>\n> åˆ©ç”¨æåæ ‡å¾—\n>\n> $$\n> I^2 = \\int_0^{2\\pi} \\int_0^{\\infty} re^{-r^2/2} \\text{d}  r\\text{d}  \\theta = 2\\pi\n> $$\n","publishedTitle":"ã€Œæ¦‚ç‡è®ºä¸æ•°ç†ç»Ÿè®¡ã€II. éšæœºå˜é‡åŠå…¶åˆ†å¸ƒ"}},{"id":"0b61b0df-30d8-58a8-a1da-c038d9cfd7f9","fields":{"slug":"/course/ptms/note/3/","plainText":"\n> æœ¬ç¯‡ç¬”è®°ä¸»è¦ä»‹ç»äº†å¤šå…ƒéšæœºå˜é‡åŠå…¶åˆ†å¸ƒçš„ç›¸å…³æ¦‚å¿µã€‚é¦–å…ˆè®¨è®ºäº†äºŒå…ƒéšæœºå˜é‡çš„åŸºæœ¬å®šä¹‰ï¼ŒåŒ…æ‹¬ç¦»æ•£å‹å’Œè¿ç»­å‹éšæœºå˜é‡çš„è”åˆåˆ†å¸ƒã€è¾¹é™…åˆ†å¸ƒå’Œæ¡ä»¶åˆ†å¸ƒã€‚å…¶æ¬¡ä»‹ç»äº†äºŒå…ƒæ­£æ€åˆ†å¸ƒè¿™ä¸€é‡è¦çš„ç‰¹ä¾‹ã€‚éšåæ¢è®¨äº†å¤šå…ƒéšæœºå˜é‡çš„ç‹¬ç«‹æ€§æ¦‚å¿µåŠå…¶åˆ¤å®šæ–¹æ³•ã€‚æœ€åè®¨è®ºäº†å¤šå…ƒéšæœºå˜é‡å‡½æ•°çš„åˆ†å¸ƒé—®é¢˜ï¼ŒåŒ…æ‹¬å’Œã€å•†ã€ç§¯ä»¥åŠæœ€å¤§æœ€å°å€¼ç­‰æƒ…å½¢çš„åˆ†å¸ƒæ¨å¯¼æ–¹æ³•ã€‚<small style=\"font-style: italic; opacity: 0.5\">ï¼ˆç”± claude-3.5-sonnet ç”Ÿæˆæ‘˜è¦ï¼‰</small>\n\n<!-- more -->\n\n## 1. äºŒå…ƒéšæœºå˜é‡åŠå…¶åˆ†å¸ƒ\n\n- <span class=\"m-definition\">(äºŒå…ƒéšæœºå˜é‡)</span> è®¾ $E$ æ˜¯ä¸€ä¸ªéšæœºè¯•éªŒï¼Œæ ·æœ¬ç©ºé—´æ˜¯ $S = \\{e\\}$ï¼Œè®¾ $X = X(e)$ï¼Œ$Y = Y(e)$ æ˜¯å®šä¹‰åœ¨ $S$ ä¸Šçš„éšæœºå˜é‡ï¼Œç”±å®ƒä»¬æ„æˆå‘é‡çš„ $(X,Y)$ å« **äºŒå…ƒéšæœºå˜é‡**ã€‚\n- <span class=\"m-definition\">(äºŒå…ƒç¦»æ•£å‹éšæœºå˜é‡)</span> è‹¥äºŒå…ƒéšæœºå˜é‡ $(X,Y)$ å…¨éƒ¨å¯èƒ½å–åˆ°çš„ä¸åŒå€¼æ˜¯æœ‰é™å¯¹æˆ–å¯åˆ—æ— é™å¯¹ï¼Œåˆ™ç§° $(X,Y)$ æ˜¯ **äºŒå…ƒç¦»æ•£å‹éšæœºå˜é‡**ã€‚\n- <span class=\"m-definition\">(è”åˆåˆ†å¸ƒå¾‹)</span> è®¾äºŒå…ƒç¦»æ•£å‹éšæœºå˜é‡ $(X,Y)$ çš„æ‰€æœ‰å¯èƒ½å–å€¼ä¸º $(x_{i},y_{j})\\,\\quad i,j=1,2,\\cdots$ï¼Œè®¾ $p_{ij} = P(X=x_{i},Y=y_{j})$ ä¸º $(X,Y)$ çš„ **è”åˆ(æ¦‚ç‡)åˆ†å¸ƒå¾‹**ã€‚\n  - <span class=\"m-proposition\">(è”åˆåˆ†å¸ƒå¾‹çš„æ€§è´¨)</span>\n    - $p_{ij} \\geq 0\\quad i,j=1,2,\\cdots$\n    - $\\displaystyle{\\sum_{i=1}^{\\infty} \\sum_{j=1}^{\\infty} p_{ij} = 1}$\n    - <span class=\"m-definition\">(è¾¹é™…åˆ†å¸ƒå¾‹)</span> åœ¨ä¸Šè¿°æ¡ä»¶ä¸‹ï¼Œè®¾ $(X,Y)$ çš„ **è¾¹é™…(æ¦‚ç‡)åˆ†å¸ƒå¾‹** ä¸º $P(Y=y_{j})=P(X<\\infty,Y=y_{j})=p_{\\cdot j}$ å’Œ $P(X=x_{i})=P(X=x_{i},Y<\\infty) = p_{i\\cdot}$ã€‚\n    - <span class=\"m-definition\">(æ¡ä»¶åˆ†å¸ƒå¾‹)</span> åœ¨ä¸Šè¿°æ¡ä»¶ä¸‹ï¼Œè®¾ $(X,Y)$ çš„ **æ¡ä»¶(æ¦‚ç‡)åˆ†å¸ƒå¾‹** ä¸º $P(X=x_{i}\\mid Y=y_{j})=\\dfrac{p_{ij}}{p_{\\cdot j}}$ å’Œ $P(Y=y_{j}\\mid X=x_{i})=\\dfrac{p_{ij}}{p_{i\\cdot}}$ã€‚\n- <span class=\"m-definition\">(è”åˆåˆ†å¸ƒå‡½æ•°)</span> è®¾ $(X,Y)$ ä¸ºäºŒå…ƒéšæœºå˜é‡ï¼Œå¯¹äºä»»æ„å®æ•° $x,y$ï¼ŒäºŒå…ƒå‡½æ•° $F(x,y)=P\\{ (X\\leq x) \\cap (Y\\leq y) \\}=P(X\\leq x,Y\\leq y)$ ç§°ä¸ºäºŒå…ƒéšæœºå˜é‡ $(X,Y)$ çš„ **è”åˆ(æ¦‚ç‡)åˆ†å¸ƒå‡½æ•°**ã€‚\n  - <span class=\"m-proposition\">(è”åˆåˆ†å¸ƒå‡½æ•°çš„æ€§è´¨)</span>\n    - $F(x,y)$ å…³äº $x,y$ åˆ†åˆ«å•è°ƒä¸å‡\n    - $0\\leq F(x,y)\\leq 1,\\ F(+\\infty,+\\infty)=1$ ä¸”å¯¹ä»»æ„ $x,y$ï¼Œ$F(-\\infty,y)=F(x,-\\infty)=F(-\\infty,-\\infty)=0$\n    - $F(x,y)$ å…³äº $x,y$ å³è¿ç»­ï¼Œå³ $\\displaystyle{\\lim_{ \\varepsilon \\to 0^{+} } F(x+\\varepsilon,y) = \\lim_{ \\varepsilon \\to 0^{+} } F(x,y+\\varepsilon)=F(x,y)}$\n    - è‹¥ $x_{1}<x_{2},y_{1}<y_{2}$ï¼Œåˆ™ $F(x_{2},y_{2})-F(x_{2},y_{1})-F(x_{1},y_{2})+F(x_{1},y_{1})= P(x_{1}<X\\leq x_{2},y_{1}<Y\\leq y_{2}) \\geq 0$\n  - <span class=\"m-definition\">(è¾¹é™…åˆ†å¸ƒå‡½æ•°)</span> åœ¨ä¸Šè¿°æ¡ä»¶ä¸‹ï¼Œè®¾ $X,Y$ çš„ **è¾¹é™…(æ¦‚ç‡)åˆ†å¸ƒå‡½æ•°** åˆ†åˆ«ä¸º $F_{X}(x) = F(x,+\\infty)$ å’Œ $F_{Y}(y) = F(+\\infty,y)$ã€‚\n  - <span class=\"m-definition\">(æ¡ä»¶åˆ†å¸ƒå‡½æ•°)</span> åœ¨ä¸Šè¿°æ¡ä»¶ä¸‹ï¼Œè®¾ $X,Y$ çš„ **æ¡ä»¶(æ¦‚ç‡)åˆ†å¸ƒå‡½æ•°** åˆ†åˆ«ä¸º $F_{X\\mid Y}(x\\mid y)=P(X\\leq x\\mid Y=y)=\\dfrac{P(X\\leq x,Y=y)}{P(Y=y)}$ã€‚ç‰¹åˆ«åœ°ï¼Œè‹¥ $P(Y=y)=0$ï¼Œåˆ™è®° $\\displaystyle{P(X\\leq x\\mid Y=y)=\\lim_{ \\varepsilon \\to 0^{+}} \\dfrac{P(X\\leq x,y<Y<y+ \\varepsilon)}{P(y<Y<y+\\varepsilon)}}$ã€‚\n- <span class=\"m-definition\">(è”åˆå¯†åº¦å‡½æ•°)</span> å¯¹äºäºŒå…ƒéšæœºå˜é‡ $(X,Y)$ï¼Œå¦‚æœå­˜åœ¨éè´Ÿå‡½æ•° $f(x,y)$ ä½¿å¯¹äºä»»æ„ $(x,y)$ æ»¡è¶³ $\\displaystyle{F(x,y)=\\int_{-\\infty}^{y}\\int_{-\\infty}^{x} f(u,v) \\text{d}u\\text{d}v}$ï¼Œåˆ™ç§° $(X,Y)$ ä¸º **äºŒå…ƒè¿ç»­å‹éšæœºå˜é‡**ï¼Œç§° $f(x,y)$ ä¸ºäºŒå…ƒéšæœºå˜é‡çš„ **è”åˆ(æ¦‚ç‡)å¯†åº¦å‡½æ•°**ã€‚\n  - <span class=\"m-proposition\">(è”åˆå¯†åº¦å‡½æ•°çš„æ€§è´¨)</span>\n    - $f(x,y) \\geq 0$\n    - $\\displaystyle{\\int_{-\\infty}^{+\\infty} \\int_{-\\infty}^{+\\infty} f(x,y) \\text{d} x \\text{d}y = 1}$\n    - è®¾ $G$ æ˜¯å¹³é¢ä¸ŠåŒºåŸŸï¼Œåˆ™ $(X,Y)$ è½åœ¨ $G$ å†…çš„æ¦‚ç‡ $\\displaystyle{P\\{ (X,Y) \\in G \\} = \\iint_{G} f(x,y) \\text{d}x\\text{d}y}$\n    - åœ¨ $f(x,y)$ çš„è¿ç»­ç‚¹ $(x,y)$ï¼Œæœ‰ $\\dfrac{\\partial^{2} F(x,y)}{\\partial x \\partial y} = f(x,y)$\n  - <span class=\"m-definition\">(è¾¹é™…å¯†åº¦å‡½æ•°)</span> åœ¨ä¸Šè¿°æ¡ä»¶ä¸‹ï¼Œè®¾ $X,Y$ çš„ **è¾¹é™…(æ¦‚ç‡)å¯†åº¦å‡½æ•°** åˆ†åˆ«ä¸º $\\displaystyle{f_{X} (x) = \\int_{-\\infty}^{\\infty} f(x,y) \\text{d}y=\\int_{-\\infty}^{x} f_{X} (u) \\text{d}u}$ å’Œ $f_{Y} (y) = \\displaystyle{\\int_{-\\infty}^{+\\infty} f(x,y) \\text{d} x=\\int_{-\\infty}^{y} f_{Y} (v)\\text{d}v}$ã€‚\n  - <span class=\"m-definition\">(æ¡ä»¶å¯†åº¦å‡½æ•°)</span> åœ¨ä¸Šè¿°æ¡ä»¶ä¸‹ï¼Œè®¾ $X,Y$ çš„ **æ¡ä»¶(æ¦‚ç‡)å¯†åº¦å‡½æ•°** åˆ†åˆ«ä¸º $f_{X\\mid Y}(x\\mid y)=\\dfrac{f(x,y)}{f_{Y}(y)},\\ f_{Y}(y)>0$ å’Œ $f_{Y\\mid X}(y\\mid x)=\\dfrac{f(x,y)}{f_{X}(x)},\\ f_{X}(x)>0$ã€‚\n    - <span class=\"m-proposition\">(æ¡ä»¶å¯†åº¦å‡½æ•°çš„æ€§è´¨)</span>\n      - $f_{X\\mid Y} (x\\mid y)\\geq0$\n      - $\\displaystyle{\\int_{-\\infty}^{+\\infty} f_{X\\mid Y} (x \\mid y) \\text{ d}x = 1}$\n      - $P\\{a<X<b \\mid Y=y\\} = \\displaystyle{ \\int_{a}^{b} f_{X\\mid Y} (x\\mid y)\\text{d}x }$\n      - åœ¨ $f_{X \\mid Y} (x\\mid y)$ çš„è¿ç»­ç‚¹ $x$ï¼Œæœ‰ $\\dfrac{\\text{d} F_{X\\mid Y}(x \\mid y)}{\\text{d}x} =f_{X \\mid Y} (x\\mid y)$\n      - $f(x,y) = f_{X\\mid Y}(x \\mid y) f_{Y} (y) = f_{X}(x) f_{Y\\mid X} (y \\mid x)$\n- <span class=\"m-definition\">(äºŒå…ƒæ­£æ€åˆ†å¸ƒ)</span> è®¾äºŒå…ƒéšæœºå˜é‡ $(X,Y)$ çš„æ¦‚ç‡å¯†åº¦å‡½æ•°ä¸º $\\displaystyle{f(x,y) = \\dfrac{1}{2\\pi \\sigma_{1} \\sigma_{2} \\sqrt{1-\\rho^{2}}} \\cdot \\exp \\left( -\\dfrac{1}{2(1-\\rho^{2})}  \\left( \\frac{\\left(x-\\mu_1\\right)^2}{\\sigma_1^2}-2\\rho\\frac{\\left(x-\\mu_1\\right)\\left(y-\\mu_2\\right)}{\\sigma_1\\sigma_2}+\\frac{\\left(y-\\mu_2\\right)^2}{\\sigma_2^2} \\right)\\right)}$ $\\quad (-\\infty<x<+\\infty,\\ -\\infty<y<+\\infty)$ å…¶ä¸­ $\\mu_{1},\\mu_{2},\\sigma_{1},\\sigma_{2},\\rho$ éƒ½æ˜¯å¸¸æ•°ï¼Œä¸” $\\sigma_{1}>0,\\sigma_{2}>0,-1<\\rho<1$ï¼›ç§° $(X,Y)$ ä¸ºæœä»å‚æ•°ä¸º $\\mu_{1},\\mu_{2},\\sigma_{1},\\sigma_{2},\\rho$ çš„ **äºŒå…ƒæ­£æ€åˆ†å¸ƒ**ï¼Œè®°ä¸º $(X,Y) \\sim N(\\mu_{1},\\mu_{2},\\sigma_{1}^{2},\\sigma_{2}^{2},\\rho )$ã€‚\n  - å›¾ä¾‹ï¼š  \n     ![|420](https://img.memset0.cn/2024/12/04/92IynnLw.png)\n\n## 2. å¤šå…ƒéšæœºå˜é‡çš„ç‹¬ç«‹æ€§\n\n- <span class=\"m-definition\">(äºŒå…ƒéšæœºå˜é‡çš„ç‹¬ç«‹æ€§)</span> è®¾ $F(x,y)$ åŠ $F_{X}(x),F_{Y}(y)$ åˆ†åˆ«æ˜¯éšæœºå˜é‡ $(X,Y)$ çš„è”åˆåˆ†å¸ƒå‡½æ•°åŠè¾¹é™…åˆ†å¸ƒå‡½æ•°ï¼Œè‹¥å¯¹æ‰€æœ‰å®æ•° $x,y$ éƒ½æœ‰ $P(X\\leq x,Y\\leq y)=P(X\\leq x)P(Y\\leq y)$ï¼Œå³ $F(x,y)=F_{X}(x)F_{Y}(y)$ï¼Œåˆ™ç§°éšæœºå˜é‡ $X,Y$ **ç›¸äº’ç‹¬ç«‹**ã€‚\n  - è‹¥ $(X,Y)$ æ˜¯ç¦»æ•£å‹éšæœºå˜é‡ï¼Œåˆ™ $X,Y$ ç›¸äº’ç‹¬ç«‹çš„æ¡ä»¶ç­‰ä»·äº $p_{ij}=p_{i\\cdot}p_{\\cdot j}$ å¯¹ä¸€åˆ‡ $i,j$ éƒ½æˆç«‹ã€‚\n  - è‹¥ $(X,Y)$ æ˜¯è¿ç»­å‹éšæœºå˜é‡ï¼Œåˆ™ $X,Y$ ç›¸äº’ç‹¬ç«‹çš„æ¡ä»¶ç­‰ä»·äº $f(x,y)=f_{X}(x)f_{Y}(y)$ åœ¨å¹³é¢ä¸Šé™¤å»â€œé›¶é¢ç§¯â€é›†ä»¥å¤–å¤„å¤„æˆç«‹ã€‚\n  - <span class=\"m-theorem\"></span> è¿ç»­å‹éšæœºå˜é‡ $X,Y$ ç›¸äº’ç‹¬ç«‹çš„å……åˆ†å¿…è¦æ¡ä»¶æ˜¯å­˜åœ¨è¿ç»­å‡½æ•° $m(\\cdot),n(\\cdot)$ ä½¿å¾— $f(x,y)=m(x)\\cdot n(y),\\ |x|<+\\infty,|y|<+\\infty$ã€‚\n\n> [!example]- è¯æ˜ï¼šå¯¹äºäºŒç»´æ­£æ€éšæœºå˜é‡ $(X,Y)$ï¼Œ$X$ ä¸ $Y$ ç›¸äº’ç‹¬ç«‹çš„å……è¦æ¡ä»¶æ˜¯å‚æ•° $\\rho=0$ã€‚\n> TBD\n\n## 3. å¤šå…ƒéšæœºå˜é‡çš„å‡½æ•°çš„åˆ†å¸ƒ\n\n- $Z=X+Y$ çš„æƒ…å½¢\n  - <span class=\"m-definition\">(å·ç§¯å…¬å¼)</span> è®¾è¿ç»­å‹éšæœºå˜é‡ $(X,Y)$ çš„å¯†åº¦å‡½æ•°ä¸º $f(x,y)$ ä¸” $X$ ä¸ $Y$ ==ç›¸äº’ç‹¬ç«‹==ï¼Œåˆ™ $Z=X+Y$ çš„å¯†åº¦å‡½æ•°ä¸º $\\displaystyle{f_{Z}(z)=\\int_{-\\infty}^{+\\infty} f_{X}(z-y)f_{Y}(y) \\text{d}y=\\int_{-\\infty}^{\\infty} f_{X}(x)f_{Y}(z-x)\\text{d}x}$ï¼Œç§°ä¸º **å·ç§¯å…¬å¼**ã€‚\n    - <span class=\"m-corollary\"></span> è®¾ $X$ ä¸ $Y$ ç›¸äº’ç‹¬ç«‹ä¸” $X \\sim N(\\mu_{1},\\sigma_{1}^{2}),\\ Y\\sim N(\\mu_{2},\\sigma_{2}^{2})$ï¼Œåˆ™ $aX+bY+c\\sim N(a\\mu_{1}+b\\mu_{2}+c,a^{2}\\sigma_{1}^{2}+b^{2}\\sigma_{2}^{2})$ã€‚\n- $Z=\\dfrac{Y}{X}$ æˆ– $Z=XY$ çš„æƒ…å½¢ï¼š\n  - $Z=\\dfrac{Y}{X}$ çš„æ¦‚ç‡å¯†åº¦å‡½æ•°ä¸ºï¼š$\\displaystyle{f_{Z}(z)=\\int_{-\\infty}^{+\\infty} |x| f(x,xz)\\text{d}x}$\n  - $Z=XY$ çš„æ¦‚ç‡å¯†åº¦å‡½æ•°ä¸ºï¼š$\\displaystyle{f_{Z} (z) = \\int_{-\\infty}^{+\\infty} \\dfrac{1}{|x|} f \\left( x, \\dfrac{z}{x} \\right) \\text{d}x}$\n- $M=\\max \\{ X,Y \\}$ æˆ– $N=\\min \\{ X,Y \\}$ çš„æƒ…å½¢\n  - è®¾ $X,Y$ æ˜¯ä¸¤ä¸ª==ç›¸äº’ç‹¬ç«‹==çš„éšæœºå˜é‡ï¼Œåˆ™ $M=\\max \\{ X,Y\\}$ çš„åˆ†å¸ƒå‡½æ•°ä¸º $F_{M}(z) = F_{X}(z)F_{Y}(z)$ï¼›$N=\\min \\{ X,Y \\}$ çš„åˆ†å¸ƒå‡½æ•°ä¸º $F_{N}(z)=1-(1-F_{X}(z))(1-F_{Y}(z))$ã€‚\n","publishedTitle":"ã€Œæ¦‚ç‡è®ºä¸æ•°ç†ç»Ÿè®¡ã€III. å¤šå…ƒéšæœºå˜é‡åŠå…¶åˆ†å¸ƒ"}},{"id":"87c03518-cfc4-5365-b91d-a764ab939834","fields":{"slug":"/course/ptms/note/4/","plainText":"\n> æœ¬ç¯‡ç¬”è®°ä»‹ç»äº†éšæœºå˜é‡çš„ä¸‰ä¸ªé‡è¦æ•°å­—ç‰¹å¾ï¼šæ•°å­¦æœŸæœ›ã€æ–¹å·®å’Œåæ–¹å·®ã€‚é¦–å…ˆè®¨è®ºäº†ç¦»æ•£å‹å’Œè¿ç»­å‹éšæœºå˜é‡çš„æ•°å­¦æœŸæœ›å®šä¹‰åŠå…¶æ€§è´¨ï¼ŒåŒ…æ‹¬çº¿æ€§æ€§å’Œç‹¬ç«‹å˜é‡çš„æœŸæœ›ã€‚å…¶æ¬¡ä»‹ç»äº†æ–¹å·®å’Œæ ‡å‡†å·®çš„æ¦‚å¿µã€è®¡ç®—æ–¹æ³•ä»¥åŠåˆ‡æ¯”é›ªå¤«ä¸ç­‰å¼ï¼Œå¹¶æ€»ç»“äº†å¸¸è§åˆ†å¸ƒçš„å‡å€¼ä¸æ–¹å·®ã€‚æœ€åæ¢è®¨äº†åæ–¹å·®ä¸ç›¸å…³ç³»æ•°ï¼Œé˜è¿°äº†å®ƒä»¬çš„è®¡ç®—å…¬å¼ã€åŸºæœ¬æ€§è´¨ï¼Œä»¥åŠåœ¨æè¿°éšæœºå˜é‡ä¹‹é—´çº¿æ€§å…³ç³»ä¸­çš„é‡è¦ä½œç”¨ã€‚<small style=\"font-style: italic; opacity: 0.5\">ï¼ˆç”± claude-3.5-sonnet ç”Ÿæˆæ‘˜è¦ï¼‰</small>\n\n<!-- more -->\n\n## 1. æ•°å­¦æœŸæœ›\n\n- <span class=\"m-definition\">(æ•°å­¦æœŸæœ›)</span> å¯¹äºç¦»æ•£å‹éšæœºå˜é‡ $X$ï¼Œè®¾å…¶åˆ†å¸ƒå¾‹ä¸º $P(X=x_{k}) = p_{k}$ï¼Œè‹¥çº§æ•° $\\displaystyle{\\sum_{k=1}^{+\\infty} x_{k} p_{k}}$ ==ç»å¯¹æ”¶æ•›==ï¼Œåˆ™ç§° $\\displaystyle{\\sum_{k=1}^{+\\infty} x_{k} p_{k}}$ çš„å€¼ä¸º $X$ çš„ **æ•°å­¦æœŸæœ›**ï¼Œè®°ä¸º $E(X)$ï¼›å¯¹äºç¦»æ•£å‹éšæœºå˜é‡ $X$ï¼Œè®¾å…¶å¯†åº¦å‡½æ•°ä¸º $f(x)$ï¼Œè‹¥ç§¯åˆ† $\\displaystyle{\\int_{-\\infty}^{\\infty} x f(x) \\text{d}x}$ ==ç»å¯¹æ”¶æ•›==ï¼Œåˆ™ç§° $\\displaystyle{\\int_{-\\infty}^{\\infty} x f(x) \\text{d}x}$ çš„å€¼ä¸º $X$ çš„ **æ•°å­¦æœŸæœ›**ã€‚\n- <span class=\"m-theorem\"></span> éšæœºå˜é‡å‡½æ•°çš„æ•°å­¦æœŸæœ›ï¼š\n  - è®¾ $X$ æ˜¯ç¦»æ•£å‹éšæœºå˜é‡ä¸” $E(Y)$ å­˜åœ¨ï¼Œåˆ™æœ‰ $\\displaystyle{E(Y)=E(g(X))=\\sum_{k=0}^{+\\infty} g(x_k) p_{k}}$ã€‚\n  - è®¾ $X$ æ˜¯è¿ç»­å‹éšæœºå˜é‡ä¸” $E(Y)$ å­˜åœ¨ï¼Œåˆ™æœ‰ $\\displaystyle{E(Y)=E(g(X))=\\int_{-\\infty}^{+\\infty} g(x) f(x) \\text{d}x}$ã€‚\n  - è®¾ $(X,Y)$ æ˜¯äºŒå…ƒç¦»æ•£å‹éšæœºå˜é‡ä¸” $E(Z)$ å­˜åœ¨ï¼Œåˆ™æœ‰ $\\displaystyle{E(Z)=E(h(X,Y))=\\sum_{i=1}^{\\infty} \\sum_{j=1}^{\\infty} h(x_{i},y_{j}) p_{ij}}$ã€‚\n  - è®¾ $(X,Y)$ æ˜¯äºŒå…ƒè¿ç»­å‹éšæœºå˜é‡ä¸” $E(Z)$ å­˜åœ¨ï¼Œåˆ™æœ‰ $E(Z)=E(h(X,Y))=\\displaystyle{\\int_{-\\infty}^{+\\infty} \\int_{-\\infty}^{+\\infty} h(x,y) f(x,y) \\text{d}x\\text{d}y}$ã€‚\n- <span class=\"m-theorem\">(æœŸæœ›çš„çº¿æ€§æ€§)</span> è®¾ $X_1,X_2,\\cdots,X_n$ æ˜¯éšæœºå˜é‡ï¼Œåˆ™ $\\displaystyle{E \\left( c_{0} + \\sum_{i=1}^{n} c_{i} X_{i} \\right) = c_{0} +\\sum_{i=1}^{n} c_{i} E(X_{i})}$ã€‚\n- <span class=\"m-theorem\">(ç‹¬ç«‹å˜é‡çš„æœŸæœ›)</span> è®¾ $X_1,X_2,\\cdots,X_n$ æ˜¯ç›¸äº’ç‹¬ç«‹çš„éšæœºå˜é‡ï¼Œåˆ™ $\\displaystyle{E \\left( \\prod_{i=1}^{n} X_{i} \\right) = \\prod_{i=1}^{n} E(X_{i})}$ã€‚\n\n## 2. æ–¹å·®\n\n- <span class=\"m-definition\">(æ–¹å·®ä¸æ ‡å‡†å·®)</span> è®¾ $X$ æ˜¯éšæœºå˜é‡ï¼Œè‹¥ $E \\left( \\left( X-E(X) \\right)^{2} \\right)$ å­˜åœ¨ï¼Œåˆ™ç§°å…¶ä¸º $X$ çš„ **æ–¹å·®**ï¼Œè®°ä¸º $D(X)$ æˆ– $\\operatorname*{Var}(X)$ã€‚åˆç§° $\\sqrt{D(X)}$ ä¸º **æ ‡å‡†å·®** æˆ– **å‡æ–¹å·®**ï¼Œè®°ä¸º $\\sigma(X)$ã€‚\n  - å¯¹äºç¦»æ•£å‹éšæœºå˜é‡ $X$ ä¸” $D(X)$ å­˜åœ¨ï¼Œåˆ™ $\\displaystyle{D(X) = \\sum_{i=1}^{\\infty} (x_{i} - E(X))^{2} p_{i}}$ã€‚\n  - å¯¹äºè¿ç»­å‹éšæœºå˜é‡ $X$ ä¸” $D(X)$ å­˜åœ¨ï¼Œåˆ™ $\\displaystyle{D(X) = \\int_{-\\infty}^{+\\infty} (x-E(X))^{2} f(x) \\text{d} x}$ã€‚\n- <span class=\"m-theorem\"></span> $D(X)=E(X^{2}) - [E(X)]^{2}$ï¼›â€œå¹³æ–¹çš„æœŸæœ›å‡æœŸæœ›çš„å¹³æ–¹â€ã€‚\n  - å¯ä»¥é€šè¿‡è¿™ä¸€å…¬å¼å’ŒæœŸæœ›çš„å®šä¹‰å¼ï¼Œé€šè¿‡ç§¯åˆ†/æ±‚å’Œè®¡ç®—éšæœºå˜é‡çš„æ–¹å·®ä¸æ ‡å‡†å·®ã€‚\n- <span class=\"m-theorem\">(åˆ‡æ¯”é›ªå¤«ä¸ç­‰å¼)</span> è®¾éšæœºå˜é‡ $X$ å…·æœ‰æ•°å­¦æœŸæœ› $E(X)=\\mu$ï¼Œæ–¹å·® $D(X)=\\sigma^{2}$ï¼Œåˆ™å¯¹äºä»»æ„æ­£æ•° $\\varepsilon$ï¼Œä¸ç­‰å¼ $\\displaystyle{P\\{|X-\\mu|\\geq\\varepsilon\\}\\leq\\frac{\\sigma^2}{\\varepsilon^2}}$ æˆç«‹ã€‚\n- ![å‡ ç§å¸¸è§åˆ†å¸ƒçš„å‡å€¼ä¸æ–¹å·®|600](https://img.memset0.cn/2024/11/26/JXJgjXkI.png)\n- <span class=\"m-definition\">(æ ‡å‡†åŒ–å˜é‡)</span> è®¾éšæœºå˜é‡ $X$ å…·æœ‰æ•°å­¦æœŸæœ› $E(X)=\\mu$ï¼Œæ–¹å·® $D(X)=\\sigma^{2} \\neq 0$ï¼Œåˆ™è®° $X^{\\ast} = \\dfrac{X-\\mu}{\\sigma}$ ä¸º $X$ çš„ **æ ‡å‡†åŒ–å˜é‡**ã€‚\n\n## 3. åæ–¹å·®ä¸ç›¸å…³ç³»æ•°\n\n- <span class=\"m-definition\">(åæ–¹å·®)</span> è®¾ $\\operatorname*{Cov}(X,Y)=E\\{ [E-E(X)] [E-E(Y)] \\}$ ä¸ºéšæœºå˜é‡ $X$ ä¸ $Y$ çš„ **åæ–¹å·®**ã€‚\n  - <span class=\"m-theorem\">(åæ–¹å·®çš„è®¡ç®—å…¬å¼)</span> $\\operatorname*{Cov}(X,Y)=E(XY)-E(X)E(Y)$ã€‚\n  - <span class=\"m-theorem\">(æ–¹å·®çš„åŠ æ³•æ€§è´¨)</span> $D(X+Y)=D(X)+D(Y)+2\\operatorname*{Cov}(X,Y)$ã€‚\n  - <span class=\"m-proposition\">(åæ–¹å·®çš„åŸºæœ¬æ€§è´¨)</span>\n    - $\\operatorname*{Cov}(X,Y)=\\operatorname*{Cov}(Y,X)$ï¼›\n    - $\\operatorname*{Cov}(X,X)=D(X)$ï¼›\n    - $\\operatorname*{Cov}(aX,bY)=ab\\cdot\\operatorname*{Cov}(X,Y)$ï¼Œå…¶ä¸­ $a,b\\in \\mathbb{R}$ï¼›\n    - $\\operatorname*{Cov}(X_{1}+X_{2},Y)=\\operatorname*{Cov}(X_{1},Y)+\\operatorname*{Cov}(X_{2},Y)$ï¼›\n    - å½“ $D(X)D(Y) \\neq 0$ æ—¶æœ‰ $\\left( \\operatorname*{Cov}(X,Y) \\right)^{2} \\leq D(X)D(Y)$ï¼Œå½“ $X$ ä¸ $Y$ æœ‰ä¸¥æ ¼çš„çº¿æ€§å…³ç³»æ—¶å–ç­‰å·ã€‚\n- <span class=\"m-definition\">(ç›¸å…³ç³»æ•°)</span> è®¾ $\\displaystyle{\\rho_{XY}=\\dfrac{\\operatorname*{Cov}(X,Y)}{\\sqrt{D(X) \\cdot D(Y)}}}$ ä¸ºéšæœºå˜é‡ $X$ ä¸ $Y$ çš„ **ç›¸å…³ç³»æ•°**ï¼Œè¿™æ˜¯ä¸€ä¸ªæ— é‡çº²çš„é‡ï¼Œç”¨äºè¡¨å¾ $X,Y$ ä¹‹é—´==çº¿æ€§å…³ç³»çš„ç´§å¯†ç¨‹åº¦==ã€‚\n  - <span class=\"m-definition\"></span> å½“ä¸”ä»…å½“ $\\rho_{XY}=0$ æ—¶ç§°éšæœºå˜é‡ $X,Y$ **ä¸ç›¸å…³**ã€‚ï¼ˆæ³¨æ„ï¼šä¸ç›¸å…³ä¸æ„å‘³ç€ç›¸äº’ç‹¬ç«‹ï¼ä½†ç›¸äº’ç‹¬ç«‹çš„éšæœºå˜é‡ä¸€å®šä¸ç›¸å…³ï¼‰\n  - <span class=\"m-proposition\">(ç›¸å…³ç³»æ•°çš„åŸºæœ¬æ€§è´¨)</span>\n    - $|\\rho_{XY}| \\leq 1$ï¼›\n    - å½“ä¸”ä»…å½“ $P\\{ Y=a+bX \\}=1$ æ—¶ä¸Šå¼å–ç­‰å·ï¼Œä¸” $b>0$ æ—¶ $\\rho_{XY}=1$ï¼›å½“ $b<0$ æ—¶ $\\rho_{XY}=-1$ã€‚\n  - <span class=\"m-theorem\"></span> ç”¨å…³äº $X$ çš„çº¿æ€§å‡½æ•° $a+bX$ æ¥è¿‘ä¼¼è¡¨ç¤º $Y$ï¼Œä»¥å‡æ–¹è¯¯å·® $e(a,b)=E\\left( (Y-(a+bX))^{2} \\right)$ è¡¡é‡è¿‘ä¼¼è¡¨ç¤ºçš„å¥½åç¨‹åº¦ï¼Œ$e(a,b)$ è¶Šå°ï¼Œ$X.Y$ ä¹‹é—´çš„ç›¸å…³ç³»æ•°è¶Šå¤§ã€‚\n\n> [!example]- è¯æ˜ï¼šçº¿æ€§è¿‘ä¼¼æ—¶å‡æ–¹è¯¯å·®æœ€å°æ—¶ç›¸å…³ç³»æ•°æœ€å¤§\n>\n> æ ¹æ®å·²çŸ¥ï¼Œ\n>\n> $$\n> e(a,b)=E(Y^2)+b^2E(X^2)+a^2-2bE(XY)+2abE(X)-2aE(Y)\n> $$\n>\n> åˆ†åˆ«å…³äº $a,b$ æ±‚åå¯¼å¯ä»¥å¾—åˆ°\n>\n> $$\n> \\begin{cases}\\dfrac{\\partial e}{\\partial a}=2a+2bE(X)-2E(Y)=0\\\\\\dfrac{\\partial e}{\\partial b}=2bE(X^2)-2E(XY)+2aE(X)=0\\end{cases}\n> $$\n>\n> è§£å¾—ï¼š\n>\n> $$\n> b_0=\\frac{Cov(X,Y)}{D(X)},\\quad a_0=E(Y)-b_0E(X)\n> $$\n>\n> ä»£å…¥å¾—æ­¤æ—¶ï¼š\n>\n> $$\n> e_{\\min}(a,b)=(1-\\rho_{XY}^2)D(Y)\n> $$\n\n## 4. å…¶ä»–æ•°å­—ç‰¹å¾\n\n- <span class=\"m-definition\">($k$ é˜¶(åŸç‚¹)çŸ©)</span> è®¾ $X$ æ˜¯éšæœºå˜é‡ï¼Œè‹¥ $E(X^{k})\\, (k=1,2,\\cdots)$ å­˜åœ¨åˆ™ç§°å®ƒä¸º $X$ çš„ **$k$ é˜¶(åŸç‚¹)è·**ã€‚\n- <span class=\"m-definition\">($k$ é˜¶ä¸­å¿ƒçŸ©)</span> è®¾ $X$ æ˜¯éšæœºå˜é‡ï¼Œè‹¥ $E((X-E(X))^{k})\\, (k=1,2,\\cdots)$ å­˜åœ¨åˆ™ç§°å®ƒä¸º $X$ çš„ **$k$ é˜¶ä¸­å¿ƒçŸ©**ã€‚\n- <span class=\"m-definition\">($k+l$ é˜¶æ··åˆ(åŸç‚¹)çŸ©)</span> è®¾ $X,Y$ æ˜¯éšæœºå˜é‡ï¼Œè‹¥ $E(X^{k}Y^{l})\\, (k,l=1,2,\\cdots)$ å­˜åœ¨åˆ™ç§°å®ƒä¸º $X,Y$ çš„ **$k+l$ é˜¶æ··åˆ(åŸç‚¹)çŸ©**ã€‚\n- <span class=\"m-definition\">($k+l$ é˜¶æ··åˆä¸­å¿ƒçŸ©)</span> è®¾ $X,Y$ æ˜¯éšæœºå˜é‡ï¼Œè‹¥ $E((X-E(X))^{k}(Y-E(Y))^{l})\\, (k,l=1,2,\\cdots)$ å­˜åœ¨åˆ™ç§°å®ƒä¸º $X,Y$ çš„ **$k+l$ é˜¶æ··åˆä¸­å¿ƒçŸ©**ã€‚\n","publishedTitle":"ã€Œæ¦‚ç‡è®ºä¸æ•°ç†ç»Ÿè®¡ã€IV. éšæœºå˜é‡çš„æ•°å­—ç‰¹å¾"}},{"id":"d5478423-fa8f-5a4c-a2b0-3a7dfbb08804","fields":{"slug":"/course/ptms/note/5/","plainText":"\n> æœ¬ç¯‡ç¬”è®°ä»‹ç»äº†æ¦‚ç‡è®ºä¸­ä¸¤ä¸ªé‡è¦çš„æé™å®šç†ã€‚é¦–å…ˆè®¨è®ºäº†å¤§æ•°å®šå¾‹ï¼ŒåŒ…æ‹¬ä¾æ¦‚ç‡æ”¶æ•›çš„å®šä¹‰ã€å¼±å¤§æ•°å®šå¾‹ã€è¾›é’¦å¤§æ•°å®šå¾‹å’Œä¼¯åŠªåˆ©å¤§æ•°å®šå¾‹ï¼Œä»¥åŠè¯æ˜è¿™äº›å®šç†æ‰€éœ€çš„é©¬å°”ç§‘å¤«ä¸ç­‰å¼å’Œåˆ‡æ¯”é›ªå¤«ä¸ç­‰å¼ã€‚éšåä»‹ç»äº†ä¸­å¿ƒæé™å®šç†ï¼Œé‡ç‚¹é˜è¿°äº†ç‹¬ç«‹åŒåˆ†å¸ƒçš„ä¸­å¿ƒæé™å®šç†åŠå…¶ç‰¹ä¾‹æ££è«å¼—-æ‹‰æ™®æ‹‰æ–¯å®šç†ï¼Œè¿™äº›å®šç†æ­ç¤ºäº†å¤§é‡ç‹¬ç«‹éšæœºå˜é‡ä¹‹å’Œçš„æ¦‚ç‡åˆ†å¸ƒè¶‹è¿‘äºæ­£æ€åˆ†å¸ƒçš„æ€§è´¨ã€‚<small style=\"font-style: italic; opacity: 0.5\">ï¼ˆç”± claude-3.5-sonnet ç”Ÿæˆæ‘˜è¦ï¼‰</small>\n\n<!-- more -->\n\n## 1. å¤§æ•°å®šå¾‹\n\n- <span class=\"m-definition\">(ä¾æ¦‚ç‡æ”¶æ•›)</span> å¯¹äºéšæœºå˜é‡åºåˆ— $Y_{1},Y_{2},\\cdots$ï¼Œè‹¥å­˜åœ¨æŸå¸¸æ•° $c$ ä½¿å¾— $\\forall \\varepsilon>0$ï¼Œå‡æœ‰ï¼š$\\displaystyle{\\lim_{ n \\to +\\infty } P\\left\\{ \\left| Y_{n}-c \\right| \\geq \\varepsilon \\right\\}} = 0$ï¼Œåˆ™ç§° $\\{ Y_{n},n\\geq1 \\}$ **ä¾æ¦‚ç‡æ”¶æ•›** äºå¸¸æ•° $c$ï¼Œè®°ä¸ºï¼šå½“ $n\\to+\\infty$ æ—¶ï¼Œ$Y_{n} \\stackrel{P}\\longrightarrow c$ã€‚\n  - <span class=\"m-proposition\"></span> è‹¥ $X_n \\stackrel{P}\\longrightarrow a$ï¼Œ$f(x)$ åœ¨ç‚¹ $a$ è¿ç»­ï¼Œåˆ™å½“ $n\\to+\\infty$ æ—¶ï¼Œ$f(X_{n}) \\stackrel{P}\\longrightarrow f(a)$ã€‚\n  - <span class=\"m-proposition\"></span> è‹¥ $X_{n} \\stackrel{P}\\longrightarrow a$ï¼Œ$Y_{n} \\stackrel{P}\\longrightarrow b$ï¼Œ$g$ åœ¨ $(a,b)$ è¿ç»­ï¼Œåˆ™ $g(X_{n},Y_{n}) \\stackrel{P}\\longrightarrow g(a,b)$ã€‚\n- <span class=\"m-theorem\">(å¼±)å¤§æ•°å®šå¾‹</span> è®¾ $\\{ X_{n},n\\geq1 \\}$ ä¸ºéšæœºå˜é‡åºåˆ—ï¼Œè‹¥å­˜åœ¨å¸¸æ•°åºåˆ— $\\{ c_{n},n\\geq1 \\}$ï¼Œä½¿å¾—å½“ $n\\to+\\infty$ æ—¶ï¼Œ$\\displaystyle{\\dfrac{1}{n} \\sum_{i=1}^{n} X_{i}-c_{n} \\stackrel{P}{\\longrightarrow} 0}$ã€‚å³ $\\forall \\varepsilon>0$ï¼Œæœ‰ $\\displaystyle{\\lim_{ n \\to \\infty } P\\left\\{ \\left| \\dfrac{1}{n} \\sum_{i=1}^{n} X_{i} - c_{n} \\right| \\right\\} \\geq \\varepsilon = 0}$ï¼Œåˆ™ç§° $\\{ X_{n},n\\geq1 \\}$ æœä»å¼±å¤§æ•°å®šå¾‹ã€‚\n- <span class=\"m-theorem\">(è¾›é’¦å¤§æ•°å®šå¾‹)</span> è®¾éšæœºå˜é‡åºåˆ— $\\{ X_{n},n\\geq1 \\}$ ç‹¬ç«‹åŒåˆ†å¸ƒä¸”å…·æœ‰ç›¸åŒçš„æ•°å­¦æœŸæœ› $E(X_{k})=\\mu$ï¼Œåˆ™åºåˆ—çš„å¹³å‡å€¼ $\\displaystyle{\\overline{X} = \\dfrac{1}{n} \\sum_{k=1}^{n} X_{k}}$ ä¾æ¦‚ç‡æ”¶æ•›äº $\\mu$ï¼Œå³ $\\overline{X} \\stackrel{P}{\\longrightarrow} \\mu$ã€‚\n- <span class=\"m-theorem\">(ä¼¯åŠªåˆ©å¤§æ•°å®šå¾‹)</span> è®¾ $n_{A}$ æ˜¯ $n$ æ¬¡ç‹¬ç«‹é‡å¤å®è¯•éªŒä¸­äº‹ä»¶ $A$ å‘ç”Ÿçš„æ¬¡æ•°ï¼Œ$p$ æ˜¯äº‹ä»¶ $A$ åœ¨æ¯æ¬¡è¯•éªŒä¸­å‘ç”Ÿçš„æ¦‚ç‡ï¼Œåˆ™æœ‰ï¼šå½“ $n\\to+\\infty$ æ—¶ï¼Œ$\\dfrac{n_{A}}{n} \\stackrel{P}{\\longrightarrow} p$ã€‚\n- <span class=\"m-theorem\">(é©¬å°”ç§‘å¤«ä¸ç­‰å¼)</span> ==ï¼ˆä¸è€ƒï¼‰==è®¾éšæœºå˜é‡ $Y$ çš„ $k$ é˜¶çŸ©å­˜åœ¨ï¼ˆ$k\\geq1$ï¼‰ï¼Œåˆ™å¯¹äºä»»æ„ $\\varepsilon>0$ï¼Œéƒ½æœ‰ $\\displaystyle{P\\{ |Y|\\geq \\varepsilon\\}}\\leq \\dfrac{E(|Y|^{k})}{\\varepsilon^{k}}$ æˆç«‹ã€‚\n  - ç­‰ä»·å½¢å¼ï¼š$\\displaystyle{P\\left\\{\\left|Y\\right|<\\varepsilon\\right\\}\\geq1-\\frac{E(\\left|Y\\right|^k)}{\\varepsilon^k}}$ã€‚\n- <span class=\"m-theorem\">(åˆ‡æ¯”é›ªå¤«ä¸ç­‰å¼)</span> è®¾ $X$ çš„æ–¹å·® $D(X)$ å­˜åœ¨ï¼Œåˆ™å¯¹äºä»»æ„ $\\varepsilon>0$ éƒ½æœ‰ï¼š$P\\{ |X-E(X)| \\geq \\varepsilon \\} \\leq \\dfrac{D(X)}{\\varepsilon^{2}}$ã€‚\n  - ç­‰ä»·å½¢å¼ï¼š$P\\{ |X-E(X)| < \\varepsilon \\} \\geq 1 -\\dfrac{D(X)}{\\varepsilon^{2}}$ã€‚\n\n> [!note]- è¯æ˜é©¬å°”ç§‘å¤«ä¸ç­‰å¼\n>\n> å¯¹äºä»»æ„ $\\varepsilon>0$ï¼Œä»¤ $\\displaystyle{Z=\\begin{cases}\\varepsilon, & \\text{å½“ }| Y|\\geq\\varepsilon\\text{ æ—¶;} \\\\0, & \\text{å½“ }| Y|<\\varepsilon\\text{ æ—¶}. & \\end{cases}}$ åˆ™ $Z\\leq |Y|$ï¼Œæ•… $Z^{k}\\leq|Y|^{k}$ï¼Œæ•… $E(Z^{k})\\leq E(|Y|^{k})$ã€‚\n>\n> è€Œæ ¹æ® $Z$ çš„å®šä¹‰ï¼ŒçŸ¥ $E(Z^{k}) = \\varepsilon^{k} P\\{ |Y|\\geq \\varepsilon \\}$ï¼Œæ‰€ä»¥ $P\\{ |Y|\\geq \\varepsilon \\}=\\dfrac{E(Z)^{k}}{\\varepsilon^{k}} \\leq \\dfrac{E(|Y|^{k})}{\\varepsilon^{k}}$ã€‚\n\n> [!note] è¯æ˜åˆ‡æ¯”é›ªå¤«å¤§æ•°å®šå¾‹\n>\n> è®¾ $\\{ X_{n},n\\geq1 \\}$ ç›¸äº’ç‹¬ç«‹ä¸”å…·æœ‰ç›¸åŒçš„æœŸæœ› $\\mu$ å’Œç›¸åŒçš„æ–¹å·® $\\sigma^{2}$ï¼Œè¯æ˜ï¼šå½“ $n\\to+\\infty$ æ—¶ï¼Œ$\\displaystyle{\\dfrac{1}{n} \\sum_{i=1}^{n} X_{i} \\stackrel{P}{\\longrightarrow} \\mu}$ã€‚\n>\n> > [!quote]- è¯æ˜\n> >\n> > ![|440](https://img.memset0.cn/2024/12/06/fz4wv1br.png)\n\n## 2. ä¸­å¿ƒæé™å®šç†\n\n- <span class=\"m-theorem\">(ç‹¬ç«‹åŒåˆ†å¸ƒçš„ä¸­å¿ƒæé™å®šç†)</span> è®¾éšæœºåºåˆ— $\\{ X_{n},n\\geq1 \\}$ ç‹¬ç«‹åŒåˆ†å¸ƒï¼Œ$E(X_{i})=\\mu$ï¼Œ$D(X_{i})=\\sigma^{2}$ï¼Œåˆ™å¯¹ä»»æ„å®æ•° $x$ï¼Œ$\\displaystyle{\\lim_{ n \\to \\infty } P\\left\\{ \\dfrac{ \\sum_{i=1}^{n} X_{i}-n\\mu }{\\sqrt{n} \\sigma} \\leq x \\right\\} = \\int_{-\\infty}^{x} \\dfrac{1}{\\sqrt{2\\pi}} e^{-t^{2}/2} \\text{d}  t = \\Phi(x) }$ã€‚\n  - å› æ­¤å½“ $n$ å……åˆ†å¤§æ—¶ï¼Œ$\\displaystyle{\\dfrac{1}{n} \\sum_{i=1}^{n} X_{i} \\sim  N\\left( \\mu,  \\dfrac{\\sigma^{2}}{n}\\right)}$ã€‚\n  - <span class=\"m-theorem\">(æ££è«å¼—â€”æ‹‰æ™®æ‹‰æ–¯ä¸­å¿ƒæé™å®šç†)</span> å½“ $n$ å……åˆ†å¤§æ—¶ï¼Œ$B(n,p) \\sim N(np,np(1-p))$ã€‚\n","publishedTitle":"ã€Œæ¦‚ç‡è®ºä¸æ•°ç†ç»Ÿè®¡ã€V. å¤§æ•°å®šå¾‹åŠä¸­å¿ƒæé™å®šç†"}},{"id":"62b64e4d-33ae-5579-be50-fcd49e7f3cb0","fields":{"slug":"/course/ptms/note/6/","plainText":"\n> æœ¬ç¯‡ç¬”è®°ä»‹ç»äº†æ•°ç†ç»Ÿè®¡ä¸­çš„æ ·æœ¬å’ŒæŠ½æ ·åˆ†å¸ƒçš„åŸºæœ¬æ¦‚å¿µã€‚é¦–å…ˆè®²è§£äº†éšæœºæ ·æœ¬å’Œç®€å•éšæœºæ ·æœ¬çš„å®šä¹‰ï¼Œä»¥åŠæ ·æœ¬çš„å¸¸ç”¨ç»Ÿè®¡é‡ï¼ˆå¦‚æ ·æœ¬å‡å€¼ã€æ ·æœ¬æ–¹å·®ç­‰ï¼‰ã€‚æ¥ç€è¯¦ç»†é˜è¿°äº†ä¸‰ä¸ªé‡è¦çš„æŠ½æ ·åˆ†å¸ƒï¼š$\\chi^{2}$ åˆ†å¸ƒã€$t$ åˆ†å¸ƒå’Œ $F$ åˆ†å¸ƒï¼ŒåŒ…æ‹¬å®ƒä»¬çš„å®šä¹‰ã€æ€§è´¨å’Œä¸Š $\\alpha$ åˆ†ä½æ•°ã€‚æœ€åè®¨è®ºäº†æ­£æ€æ€»ä½“ä¸‹çš„æŠ½æ ·åˆ†å¸ƒå®šç†ï¼Œä¸ºä¸‹ä¸€ç« èŠ‚ä»‹ç»æ¢è½´é‡åšé“ºå«ã€‚<small style=\"font-style: italic; opacity: 0.5\">ï¼ˆç”± claude-3.5-sonnet ç”Ÿæˆæ‘˜è¦ï¼‰</small>\n\n<!-- more -->\n\n## 1. æ ·æœ¬\n\n- <span class=\"m-definition\">(éšæœºæ ·æœ¬)</span> ä»æ€»ä½“ä¸­éšæœºé€‰å– $n$ ä¸ªä¸ªä½“ï¼Œç§°ä¸ºä¸€ä¸ª **éšæœºæ ·æœ¬**ã€‚\n- <span class=\"m-definition\">(ç®€å•éšæœºæ ·æœ¬)</span> éšæœºæ ·æœ¬ $(X_{1},X_{2},\\cdots,X_{n})$ ç§°ä¸ºå®¹é‡æ˜¯ $n$ çš„ **ç®€å•éšæœºæ ·æœ¬** å½“ä¸”ä»…å½“æ»¡è¶³ä»¥ä¸‹æ¡ä»¶ï¼šâ‘  æ¯ä¸ª $X_{i}$ ä¸ $X$ åŒåˆ†å¸ƒï¼›â‘¡ $X_{1},X_{2},\\cdots,X_{n}$ æ˜¯ç›¸äº’ç‹¬ç«‹çš„éšæœºå˜é‡ã€‚\n  - åé¢æåˆ°çš„æ ·æœ¬å‡æŒ‡ç®€å•éšæœºæ ·æœ¬ã€‚\n  - è‹¥æ€»ä½“ $X$ å…·æœ‰æ¦‚ç‡å¯†åº¦å‡½æ•° $f(X)$ï¼Œåˆ™æ ·æœ¬ $(X_{1},X_2,\\cdots,X_{n})$ å…·æœ‰è”åˆå¯†åº¦å‡½æ•°ï¼š$\\displaystyle{f(X_{1},X_{2},\\cdots,X_{n}) = \\prod_{i=1}^{n} f(X_{i})}$ã€‚\n- æ ·æœ¬çš„å¸¸ç”¨ç»Ÿè®¡é‡ï¼š\n  - <span class=\"m-definition\">(æ ·æœ¬å‡å€¼)</span> $\\displaystyle{\\overline{X} = \\dfrac{1}{n} \\sum_{i=1}^{n} X_{i}}$\n  - <span class=\"m-definition\">(æ ·æœ¬æ–¹å·®)</span> $\\displaystyle{S^{2} ={\\color{red}\\dfrac{1}{n-1}} \\sum_{i=1}^{n} (X_{i}-\\overline{X})^{2}}$\n  - <span class=\"m-definition\">(æ ·æœ¬ $k$ é˜¶çŸ©)</span> $\\displaystyle{A_{k}= \\dfrac{1}{n}\\sum_{i=1}^{n} X_{i}^{k}}$\n  - <span class=\"m-definition\">(æ ·æœ¬ $k$ é˜¶ä¸­å¿ƒçŸ©)</span> $\\displaystyle{B_{k}=\\dfrac{1}{n} \\sum_{i=1}^{n} \\left( X_{i} - \\overline{X} \\right)^{k}}$\n- å¯¹æ€»ä½“æ–¹å·®çš„ä¼°è®¡å¯ä»¥ç”¨ $S^{2}$ ä¹Ÿå¯ä»¥ç”¨ $B_2$ï¼ˆåŒºåˆ«åœ¨äºå‰é¢çš„ç³»æ•°æ˜¯ $\\dfrac{1}{n-1}$ è¿˜æ˜¯ $\\dfrac{1}{n}$ï¼‰ã€‚ä¸»è¦çš„åŒºåˆ«æ˜¯ $S^{2}$ ä½œä¸ºæ€»ä½“æ–¹å·®æ˜¯æ— åä¼°è®¡ï¼Œä½† $B_{2}$ ä½œä¸ºæ€»ä½“æ–¹å·®çš„ä¼°è®¡æ˜¯æœ‰åçš„ã€‚\n\n## 2. æŠ½æ ·åˆ†å¸ƒ\n\n> ä¸‰ä¸ªåˆ†å¸ƒçš„æ¦‚ç‡å¯†åº¦å‡½æ•°ä¸è¦æ±‚æŒæ¡ã€‚\n\n- <span class=\"m-definition\">($\\chi^2$ åˆ†å¸ƒ)</span> è®¾éšæœºå˜é‡ $X_{1},X_{2},\\cdots,X_{n}$ ç›¸äº’ç‹¬ç«‹ï¼Œ$X_{i} \\sim N(0,1)\\ (i=1,2,\\cdots,n)$ åˆ™ç§° $\\displaystyle{\\chi_{n}^{2}=\\sum_{i=1}^{n} X_{i}^{2}}$ æœä»è‡ªç”±åº¦ä¸º $n$ çš„ $\\chi^{2}$ åˆ†å¸ƒï¼Œè®°ä¸º $\\chi^{2} \\sim \\chi^{2}(n)$ã€‚\n  <span class=\"m-proposition\"></span> è®¾ $\\chi^{2} \\sim \\chi^{2}(n)$ï¼Œåˆ™æœ‰ $E(\\chi^{2})=n$ï¼Œ$D(\\chi^{2})=2n$ã€‚\n  - <span class=\"m-proposition\">($\\chi^2$ åˆ†å¸ƒçš„å¯åŠ æ€§)</span> è®¾ $Y_{1} \\sim \\chi^{2}(n_{1}),\\ Y_{2} \\sim \\chi^{2}(n_{2})$ï¼Œä¸” $Y_{1},Y_{2}$ ç›¸äº’ç‹¬ç«‹ï¼Œåˆ™æœ‰ $Y_{1}+Y_2 \\sim \\chi^{2}(n_{1}+n_{2})$ã€‚å¯ä»¥æ¨å¹¿åˆ°æœ‰é™ä¸ªçš„æƒ…å½¢ã€‚\n  - å¯¹ç»™å®šçš„æ¦‚ç‡ $\\alpha\\ (0<\\alpha<1)$ï¼Œç§°æ»¡è¶³æ¡ä»¶ $\\displaystyle{\\int_{\\chi^{2}(n)}^{\\infty} f_{n}(y) \\text{d}  y = \\alpha}$ çš„ç‚¹ $\\chi_{\\alpha}^{2}(n)$ ä¸º $\\chi^{2}(n)$ åˆ†å¸ƒçš„ **ä¸Š $\\alpha$ åˆ†ä½æ•°**ã€‚\n- <span class=\"m-definition\">($t$ åˆ†å¸ƒ)</span> è®¾ $X \\sim N(0,1)$ï¼Œ$Y \\sim \\chi^{2}(n)$ï¼Œå¹¶ä¸”å‡è®¾ $X,Y$ ç›¸äº’ç‹¬ç«‹ï¼Œåˆ™ç§°éšæœºå˜é‡ $T=\\dfrac{X}{\\sqrt{Y/n}}$ æœä» **è‡ªç”±åº¦** ä¸º $n$ çš„ $t$ åˆ†å¸ƒï¼Œè®°ä¸º $T \\sim t(n)$ã€‚\n  - æ¦‚ç‡å¯†åº¦å‡½æ•°ï¼š$f(t,n)=\\dfrac{\\Gamma\\left( \\frac{n+1}2 \\right)}{\\sqrt{n \\pi} \\Gamma\\left( \\frac n2 \\right) }\\left( 1+ \\dfrac{t^{2}}{n}\\right)^{-(n+1)/2},\\ -\\infty<t<+\\infty$ã€‚\n  - å¯¹ç»™å®šçš„ $\\alpha\\ (0<\\alpha<1)$ï¼Œç§°æ»¡è¶³æ¡ä»¶ $\\displaystyle{\\int_{t_{\\alpha}(n)}^{+\\infty} f(t,n) \\text{d}  t = \\alpha}$ çš„ç‚¹ $t_{\\alpha}(n)$ ä¸º $t(n)$ åˆ†å¸ƒçš„**ä¸Š $\\alpha$ åˆ†ä½æ•°**ã€‚\n  - <span class=\"m-proposition\"></span> $t_{\\alpha}(n) = -t_{1-\\alpha}(n)$ã€‚\n- <span class=\"m-definition\">($F$ åˆ†å¸ƒ)</span> è®¾ $X \\sim \\chi^{2}(n_{1}),\\ Y \\sim \\chi^{2}(n_{2})$ï¼Œä¸” $X,Y$ ç‹¬ç«‹ï¼Œåˆ™ç§°éšæœºå˜é‡ $F=\\dfrac{X / n_{1}}{Y / n_{2}}$ æœä»è‡ªç”±åº¦ $(n_{1},n_{2})$ çš„ $F$ åˆ†å¸ƒï¼Œè®°ä¸º $F \\sim F(n_{1},n_{2})$ï¼Œå…¶ä¸­ $n_{1}$ ç§°ä¸º **ç¬¬ä¸€è‡ªç”±åº¦**ï¼Œ$n_{2}$ ç§°ä¸º **ç¬¬äºŒè‡ªç”±åº¦**ã€‚\n  - æ¦‚ç‡å¯†åº¦å‡½æ•°ï¼š$f\\left(x;n_1,n_2\\right)=\\begin{cases}\\frac{1}{B\\left(n_1/2,n_2/2\\right)}n_1^{\\frac{n_1}{2}}n_2^{\\frac{n_2}{2}}x^{\\frac{n_1}{2}-1}\\left(n_2+n_1x\\right)^{-\\frac{n_1+n_2}{2}} & x>0  \\\\0 & x\\leq0 & \\end{cases}$ï¼Œå…¶ä¸­ $\\displaystyle{B\\left(a,b\\right)=\\int_0^1x^{a-1}\\left(1-x\\right)^{b-1}dx=\\frac{\\Gamma(a)\\Gamma(b)}{\\Gamma(a+b)}}$ã€‚\n  - å¯¹ç»™å®šçš„ $\\alpha\\ (0<\\alpha<1)$ï¼Œç§°æ»¡è¶³æ¡ä»¶ $\\displaystyle{\\int_{F_\\alpha(n_1,n_2)}^\\infty f\\left(x;n_1,n_2\\right)\\text{d}  x=\\alpha}$ çš„ç‚¹ $F_{\\alpha}(n_{1},n_{2})$ ä¸º $F(n,m)$ åˆ†å¸ƒçš„ **ä¸Š $\\alpha$ åˆ†ä½æ•°**ã€‚\n  - <span class=\"m-proposition\"></span> $F_{\\alpha} (n_{1},n_{2}) = \\dfrac{1}{F_{1-\\alpha} (n_{2},n_{1})}$ã€‚\n\n## 3. æ­£æ€æ€»ä½“ä¸‹çš„æŠ½è±¡åˆ†å¸ƒ\n\n> è¿™äº›å†…å®¹å…¶å®éƒ½æ˜¯ä¸ºäº†å¼•å‡ºä¸‹ä¸€ç« æ¢è½´é‡çš„æ¦‚å¿µã€‚é™¤äº†â€œ$\\overline{X}$ ä¸ $S^{2}$ ç›¸äº’ç‹¬ç«‹â€è¿™ä¸€æ¡ï¼Œåˆ«çš„ä¸éœ€è¦é¢å¤–è®°å¿†ã€‚\n\n- <span class=\"m-theorem\"></span> è®¾ $X_{1},X_{2},\\cdots,X_{n}$ ä¸ºæ¥è‡ªæ­£æ€æ€»ä½“ $N(\\mu,\\sigma^{2})$ çš„ç®€å•éšæœºæ ·æœ¬ï¼Œ$\\overline{X}$ æ˜¯æ ·æœ¬å‡å€¼ï¼Œ$S^{2}$ æ˜¯æ ·æœ¬æ–¹å·®ï¼Œåˆ™æœ‰ï¼š\n\n  - $\\displaystyle{\\overline{X} \\sim N\\left( \\mu, \\dfrac{\\sigma^{2}}{n} \\right)}$\n  - $\\dfrac{(n-1)S^{2}}{\\sigma^{2}} \\sim \\chi^{2}(n-1)$\n  - $\\overline{X}$ ä¸ $S^{2}$ ==ç›¸äº’ç‹¬ç«‹== - æ¦‚ç‡å¯†åº¦å‡½æ•°ï¼š$f_{n}(y)=\\begin{cases}\\dfrac{1}{2 \\Gamma(n/2)} \\left( \\dfrac{y}{2} \\right)^{n/2-1} e^{-y/2},\\quad&y>0\\\\0,\\quad&y\\leq0\\end{cases}$ï¼Œå…¶ä¸­ $\\displaystyle{\\Gamma(\\alpha) = \\int_{0}^{+\\infty} x^{\\alpha-1} e^{-x} \\text{d} x}$ã€‚\n  - <span class=\"m-proposition\"></span> ï¼Œåˆ«çš„ä¸éœ€è¦é¢å¤–è®°å¿†ã€‚\n\n- <span class=\"m-theorem\"></span> è®¾ $X_{1},X_{2},\\cdots,X_{n}$ ä¸ºæ¥è‡ªæ­£æ€æ€»ä½“ $N(\\mu,\\sigma^{2})$ çš„ç®€å•éšæœºæ ·æœ¬ï¼Œ$\\overline{X}$ æ˜¯æ ·æœ¬å‡å€¼ï¼Œ$S^{2}$ æ˜¯æ ·æœ¬æ–¹å·®ï¼Œåˆ™æœ‰ï¼š\n  - $\\displaystyle{\\overline{X} \\sim N\\left( \\mu, \\dfrac{\\sigma^{2}}{n} \\right)}$\n  - $\\dfrac{(n-1)S^{2}}{\\sigma^{2}} \\sim \\chi^{2}(n-1)$\n  - $\\overline{X}$ ä¸ $S^{2}$ ==ç›¸äº’ç‹¬ç«‹==\n  - $\\dfrac{\\overline{X}-\\mu}{S/\\sqrt{n}} \\sim t(n-1)$\n- <span class=\"m-theorem\"></span> è®¾ $X_{1},X_{2},\\cdots,X_{n_{1}}$ï¼Œ$Y_{1},Y_{2},\\cdots,Y_{n_{2}}$ åˆ†åˆ«æ˜¯æ¥è‡ªæ­£æ€æ€»ä½“ $N(\\mu_{1},\\sigma_{1}^{2})$ å’Œ $N(\\mu_{2},\\sigma_{2}^{2})$ çš„æ ·æœ¬ï¼Œä¸”è¿™ä¸¤ä¸ªæ ·æœ¬ç›¸äº’ç‹¬ç«‹ï¼Œè®¾ $\\displaystyle{\\overline{X}=\\dfrac{1}{n_{1}} \\sum_{i=1}^{n_{1}} X_{i}}$ï¼Œ$\\displaystyle{\\overline{Y}=\\dfrac{1}{n_{2}} \\sum_{i=1}^{n_{2}} Y_{i} }$ åˆ†åˆ«æ˜¯ä¸¤æ ·æœ¬çš„å‡å€¼ï¼Œ$S_{1}^{2},S_2^{2}$ åˆ†åˆ«æ˜¯ä¸¤æ ·æœ¬çš„æ ·æœ¬æ–¹å·®ï¼Œåˆ™æœ‰\n  - $\\dfrac{S_{1}^{2} / \\sigma_{1}^{2}}{S_{2}^{2} / \\sigma_{2}^{2}} \\sim F(n_{1}-1,n_{2}-1)$\n    - $\\displaystyle{\\frac{\\left(\\overline{X}-\\overline{Y}\\right)-\\left(\\mu_1-\\mu_2\\right)}{\\sqrt{\\dfrac{\\sigma_1^2}{n_1}+\\dfrac{\\sigma_2^2}{n_2}}}\\sim N(0,1)}$\n    - å½“ $\\sigma_{1}^{2}=\\sigma_{2}^{2}=\\sigma^{2}$ æ—¶ï¼Œ$\\displaystyle{\\frac{\\left(\\overline{X}-\\overline{Y}\\right)-\\left(\\mu_1-\\mu_2\\right)}{S_w\\sqrt{\\dfrac{1}{n_1}+\\dfrac{1}{n_2}}}\\sim t(n_1+n_2-2)}$ï¼Œå…¶ä¸­ $\\displaystyle{S_w^2=\\frac{\\left(n_1-1\\right)S_1^2+\\left(n_2-1\\right)S_2^2}{n_1+n_2-2}}$ã€‚\n","publishedTitle":"ã€Œæ¦‚ç‡è®ºä¸æ•°ç†ç»Ÿè®¡ã€VI. æ ·æœ¬åŠæŠ½æ ·åˆ†å¸ƒ"}},{"id":"0bca9516-52f7-56cf-9e70-9ef89d8194dc","fields":{"slug":"/course/ptms/note/7/","plainText":"\n> æœ¬ç¯‡ç¬”è®°ä»‹ç»äº†æ•°ç†ç»Ÿè®¡ä¸­å‚æ•°ä¼°è®¡çš„åŸºæœ¬æ¦‚å¿µå’Œæ–¹æ³•ã€‚é¦–å…ˆè®²è§£äº†ç‚¹ä¼°è®¡çš„ä¸¤ç§ä¸»è¦æ–¹æ³•ï¼šçŸ©ä¼°è®¡æ³•å’Œæå¤§ä¼¼ç„¶ä¼°è®¡æ³•ã€‚æ¥ç€è¯¦ç»†é˜è¿°äº†è¯„ä»·ä¼°è®¡é‡ä¼˜åŠ£çš„å››ä¸ªå‡†åˆ™ï¼šæ— åæ€§ã€æœ‰æ•ˆæ€§ã€å‡æ–¹è¯¯å·®å’Œç›¸åˆæ€§ã€‚æœ€åä»‹ç»äº†åŒºé—´ä¼°è®¡çš„æ¦‚å¿µï¼Œé‡ç‚¹è®¨è®ºäº†ç½®ä¿¡åŒºé—´å’Œæ¢è½´é‡ï¼Œå¹¶é€šè¿‡å®ä¾‹è¯´æ˜äº†å¦‚ä½•åˆ©ç”¨æ¢è½´é‡æ„é€ ç½®ä¿¡åŒºé—´ã€‚<small style=\"font-style: italic; opacity: 0.5\">ï¼ˆç”± claude-3.5-sonnet ç”Ÿæˆæ‘˜è¦ï¼‰</small>\n\n<!-- more -->\n\n## 1. å‚æ•°ä¼°è®¡\n\n- <span class=\"m-definition\">(å‚æ•°)</span> ååº”æ€»ä½“æŸæ–¹é¢ç‰¹å¾çš„é‡ã€‚\n- <span class=\"m-definition\">(å‚æ•°ä¼°è®¡)</span> å½“æ€»ä½“çš„å‚æ•°æœªçŸ¥æ—¶ï¼Œåˆ©ç”¨æ ·æœ¬èµ„æ–™å¯¹å…¶ç»™å‡ºä¼°è®¡ã€‚\n- <span class=\"m-definition\">(ç‚¹ä¼°è®¡)</span> è®¾æ€»ä½“ $X$ æœ‰æœªçŸ¥å‚æ•° $\\theta$ï¼Œ$X_{1},\\cdots,X_{n}$ æ˜¯ $X$ çš„ç®€å•éšæœºæ ·æœ¬ã€‚æ„é€ åˆé€‚çš„ç»Ÿè®¡é‡ $\\hat{\\theta} = \\hat{\\theta}(x_{1},\\cdots,x_{n})$ ç”¨æ¥ä¼°è®¡æœªçŸ¥å‚æ•° $\\theta$ï¼Œç§° $\\hat{\\theta}$ ä¸ºå‚æ•° $\\theta$ çš„ **ç‚¹ä¼°è®¡é‡**ï¼Œ$\\hat{\\theta}(x_{1},\\cdots,x_{n})$ ä¸ºå‚æ•° $\\theta$ çš„ **ç‚¹ä¼°è®¡å€¼**ã€‚\n  - <span class=\"m-definition\">(çŸ©ä¼°è®¡æ³•)</span>\n    - ç»Ÿè®¡æ€æƒ³ï¼šä»¥æ ·æœ¬çŸ©ä¼°è®¡æ€»ä½“çŸ©ï¼Œä»¥æ ·æœ¬çŸ©çš„å‡½æ•°ä¼°è®¡æ€»ä½“çŸ©çš„å‡½æ•°ã€‚\n      - ç†è®ºä¾æ®ï¼šè¾›é’¦å¤§æ•°å®šå¾‹å’Œä¾æ¦‚ç‡æ”¶æ•›çš„æ€§è´¨ã€‚\n    - æ­¥éª¤ï¼š\n      - â‘  æ±‚æ€»ä½“å‰ $k$ é˜¶çŸ©å…³äº $k$ ä¸ªå‚æ•°çš„å‡½æ•°ï¼š$\\mu_i=E(X^i)=h_i(\\theta_1,\\cdots,\\theta_k)\\ (i=1,\\cdots,k)$\n      - â‘¡ æ±‚å„å‚æ•°å…³äº $k$ é˜¶çŸ©çš„åå‡½æ•°ï¼š$\\theta_i=g_i(\\mu_1,\\cdots,\\mu_k)\\ (i=1,\\cdots,k)$\n      - â‘¢ ä»¥æ ·æœ¬å„é˜¶çŸ© $A_{1},\\cdots,A_{k}$ ä»£æ›¿æ€»ä½“å„é˜¶çŸ© $\\mu_{1},\\cdots,\\mu_{k}$ å¾—å„å‚æ•°çš„çŸ©ä¼°è®¡ $\\hat{\\theta}_i=g_i(A_1,\\cdots,A_k)\\ (i=1,\\cdots,k)$\n      - åœ¨å®é™…åº”ç”¨æ—¶ï¼Œä¸ºæ±‚è§£æ–¹ä¾¿ï¼Œä¹Ÿå¯ä»¥ç”¨ä¸­å¿ƒçŸ©ä»£æ›¿åŸç‚¹çŸ©ï¼›é‡‡ç”¨çš„çŸ©ä¸åŒï¼Œå¾—å‡ºçš„å‚æ•°ä¼°è®¡è‡ªç„¶ä¹Ÿä¸åŒã€‚\n  - <span class=\"m-definition\">(æå¤§ä¼¼ç„¶ä¼°è®¡)</span>\n    - è®¾ç¦»æ•£å‹æ€»ä½“ $X \\sim p(x;\\theta),\\ \\theta \\in \\Theta$ï¼Œ$\\theta$ æœªçŸ¥ï¼Œä»æ€»ä½“ $X$ ä¸­å–å¾—æ ·æœ¬ $X_{1},X_{2},\\cdots,X_{n}$ï¼Œå…¶è§‚å¯Ÿå€¼ä¸º $x_{1},x_{2},\\cdots,x_{n}$ï¼Œåˆ™äº‹ä»¶ $\\{ X_{1}=x_{1},\\cdots,X_{n}=x_{n} \\}$ å‘ç”Ÿçš„æ¦‚ç‡ä¸º $L(\\theta) = P\\{ X_{1}=x_{1},\\cdots,X_{n}=x_{n} \\} = p(x_{1}; \\theta) \\cdots p(x_{n}; \\theta) = \\displaystyle{\\prod_{i=1}^{n} p(x_{i}; \\theta)}$ã€‚ç§° $\\hat{\\theta}(x_{1},\\cdots,x_{n})$ ä¸º $\\theta$ çš„ **æå¤§ä¼¼ç„¶ä¼°è®¡å€¼**ï¼Œç›¸åº”ç»Ÿè®¡é‡ $\\hat{\\theta}(X_{1},\\cdots,X_n)$ ä¸º $\\theta$ çš„ **æå¤§ä¼¼ç„¶ä¼°è®¡é‡**ã€‚\n    - æå¤§ä¼¼ç„¶åŸç†ï¼š$\\displaystyle{L(\\hat{\\theta} (x_{1},x_{2},\\cdots,x_{n})) = \\max_{\\theta \\in \\Theta} L(\\theta)}$ã€‚\n    - è¯´æ˜ï¼š\n      - æœªçŸ¥å‚æ•°å¯èƒ½ä¸æ­¢ä¸€ä¸ªï¼Œä¸€èˆ¬è®¾ä¸º $\\theta=(\\theta_{1},\\theta_{2},\\cdots,\\theta_{n})$ã€‚\n      - åœ¨æ±‚ $L(\\theta)$ çš„æœ€å¤§å€¼æ—¶ï¼Œé€šå¸¸è½¬åŒ–ä¸ºæ±‚ $\\ln L(\\theta)$ çš„æœ€å¤§å€¼ï¼Œå…¶ä¸­ $\\ln L(\\theta)$ ç§°ä¸º **å¯¹æ•°ä¼¼ç„¶å‡½æ•°**ã€‚åˆ©ç”¨ $\\dfrac{\\partial \\ln L(\\theta)}{\\partial \\theta_{i}}=0$ è§£å¾— $\\hat{\\theta_{i}}$ã€‚\n      - è‹¥ $L(\\theta)$ å…³äºæŸä¸ª $\\theta_{i}$ æ˜¯å•è°ƒå¢ï¼ˆå‡ï¼‰å‡½æ•°ï¼Œæ­¤æ—¶ $\\theta_{i}$ çš„æå¤§ä¼¼ç„¶ä¼°è®¡åœ¨å…¶è¾¹ç•Œå–å¾—ã€‚\n      - è‹¥ $\\hat{\\theta}$ æ˜¯ $\\theta$ çš„æå¤§ä¼¼ç„¶ä¼°è®¡ï¼Œåˆ™ $g(\\theta)$ çš„æå¤§ä¼¼ç„¶ä¼°è®¡ä¸º $g(\\hat{\\theta})$ã€‚\n\n## 2. ä¼°è®¡é‡çš„è¯„é€‰å‡†åˆ™\n\n- <span class=\"m-definition\">(æ— åæ€§å‡†åˆ™)</span> è‹¥å‚æ•° $\\theta$ çš„ä¼°è®¡é‡ $\\hat{\\theta} = \\hat{\\theta} (X_{1},X_{2},\\cdots,X_{n})$ï¼Œæ»¡è¶³ $E(\\hat{\\theta})=\\theta$ï¼Œåˆ™ç§° $\\hat{\\theta}$ æ˜¯ $\\theta$ çš„ä¸€ä¸ª **æ— åä¼°è®¡é‡**ã€‚\n  - è‹¥ $E(\\hat{\\theta})\\neq \\theta$ï¼Œé‚£ä¹ˆ $\\left| E(\\hat{\\theta}) - \\theta \\right|$ ç§°ä¸ºä¼°è®¡é‡ $\\hat{\\theta}$ çš„ **åå·®**ã€‚\n  - è‹¥ $\\displaystyle{\\lim_{ n \\to \\infty } E(\\hat{\\theta})  = \\theta}$ï¼Œåˆ™ç§° $\\hat{\\theta}$ æ˜¯ $\\theta$ çš„ **æ¸è¿›æ— åä¼°è®¡é‡**ã€‚\n  - **çº å**ï¼šè‹¥ $E(\\hat{\\theta}) = a \\theta + b,\\ \\theta \\in \\Theta$ï¼Œå…¶ä¸­ $a,b$ æ˜¯å¸¸æ•°ä¸” $a\\neq0$ï¼Œåˆ™ $\\dfrac{1}{a} (\\hat{\\theta} - b)$ æ˜¯ $\\theta$ çš„æ— åä¼°è®¡ã€‚\n- <span class=\"m-definition\">(æœ‰æ•ˆæ€§å‡†åˆ™)</span> è®¾ $\\hat{\\theta}_{1}, \\hat{\\theta}_{2}$ æ˜¯ $\\theta$ çš„ä¸¤ä¸ª==æ— å==ä¼°è®¡ï¼Œå¦‚æœ $D(\\hat{\\theta}_{1}) \\leq D(\\hat{\\theta}_{2})$ï¼Œå¯¹ä¸€åˆ‡ $\\theta \\in \\Theta$ æˆç«‹ï¼Œä¸”ä¸ç­‰å·è‡³å°‘å¯¹æŸä¸€ $\\theta \\in \\Theta$ æˆç«‹ï¼Œåˆ™ç§° $\\hat{\\theta}_{1}$ æ¯” $\\hat{\\theta}_2$ **æœ‰æ•ˆ**ã€‚\n- <span class=\"m-definition\">(å‡æ–¹è¯¯å·®å‡†åˆ™)</span> è®¾ $\\hat{\\theta}$ æ˜¯å‚æ•° $\\theta$ çš„ç‚¹ä¼°è®¡ï¼Œæ–¹å·®å­˜åœ¨ï¼Œåˆ™ç§° $E\\left(\\left( \\hat{\\theta} - \\theta \\right)^{2}\\right)$ æ˜¯ä¼°è®¡é‡çš„å‡æ–¹è¯¯å·®ï¼Œè®°ä¸º $Mse(\\hat{\\theta})$ã€‚è‹¥ $\\hat{\\theta}$ æ˜¯ $\\theta$ çš„æ— åä¼°è®¡ï¼Œåˆ™æœ‰ $Mse(\\hat{\\theta}) = D(\\hat{\\theta})$ã€‚\n- <span class=\"m-definition\">(ç›¸åˆæ€§å‡†åˆ™)</span> è®¾ $\\hat{\\theta}(X_{1},X_{2},\\cdots,X_{n})$ ä¸ºå‚æ•° $\\theta$ çš„ä¼°è®¡é‡ï¼Œè‹¥å¯¹äºä»»æ„ $\\theta \\in \\Theta$ï¼Œå½“ $n\\to+\\infty$ æ—¶ï¼Œ$\\hat{\\theta}_{n}$ ä¾æ¦‚ç‡æ”¶æ•›äº $\\theta$ï¼Œå³ $\\forall \\varepsilon>0$ï¼Œæœ‰ $\\displaystyle{\\lim_{ n \\to \\infty } P\\left\\{ \\hat{\\theta}_{n} - \\theta \\right\\} \\geq \\varepsilon} = 0$ æˆç«‹ï¼Œåˆ™ç§° $\\hat{\\theta}_{n}$ ä¸º $\\theta$ çš„ **ç›¸åˆä¼°è®¡é‡** æˆ– **ä¸€è‡´ä¼°è®¡é‡**ã€‚\n  - æ ¹æ®ä¾æ¦‚ç‡æ”¶æ•›çš„æ€§è´¨ï¼Œç”± $A_{1},\\cdots,A_{k}$ æ˜¯ $\\mu_{1},\\cdots,\\mu_{k}$ çš„ç›¸åˆä¼°è®¡ï¼Œè‹¥ $g(\\mu_{1},\\cdots,\\mu_{k})$ æ˜¯è¿ç»­å‡½æ•°ï¼Œåˆ™ $g(A_{1},\\cdots,A_{k})$ æ˜¯ $g(\\mu_{1},\\cdots,\\mu_{k})$ çš„ **ç›¸åˆä¼°è®¡**ã€‚\n\n## 3. åŒºé—´ä¼°è®¡\n\n> ç½®ä¿¡åŒºé—´æ˜¯å¯ä»¥é€šè¿‡æ¢è½´é‡æ¨å‡ºçš„ï¼Œå»ºè®®æŒæ¡è¿™æ ·å¯ä»¥å¤§å¤§å‡å°‘æœŸæœ«è€ƒè¯•æ—¶çš„è®°å¿†é‡ã€‚\n\n- <span class=\"m-definition\">(ç½®ä¿¡åŒºé—´)</span> è®¾æ€»ä½“ $X$ çš„åˆ†å¸ƒå‡½æ•° $F(x;\\theta)$ å«æœ‰ä¸€ä¸ªæœªçŸ¥å‚æ•° $\\theta$ï¼Œ$(X_{1},\\cdots,X_{n})$ æ˜¯æ€»ä½“ $X$ çš„ä¸€ä¸ªæ ·æœ¬ï¼Œå¯¹ç»™å®šçš„å€¼ $\\alpha\\ (0<\\alpha<1)$ï¼Œå¦‚æœæœ‰ä¸¤ä¸ªç»Ÿè®¡é‡ $\\hat{\\theta}_{L} = \\hat{\\theta}_{L} (X_{1},\\cdots,X_{n})$ï¼Œ$\\hat{\\theta}_{U}= \\hat{\\theta}_{U}(X_{1},\\cdots,X_{n})$ï¼Œä½¿å¾—ï¼š$P\\left\\{ \\hat{\\theta}_{L} (X_{1},\\cdots,X_{n}) < \\theta < \\hat{\\theta}_{U}(X_{1},\\cdots,X_{n}) \\right\\} \\geq 1 - \\alpha\\ (\\forall \\theta \\in \\Theta)$ã€‚åˆ™ç§°éšæœºåŒºé—´ $\\left( \\hat{\\theta}_{L}, \\hat{\\theta}_{U} \\right)$ æ˜¯ $\\theta$ çš„ **åŒä¾§ç½®ä¿¡åŒºé—´**ï¼Œç§° $1-\\alpha$ ä¸º **ç½®ä¿¡åº¦**ï¼Œ$\\hat{\\theta}_{L}$ ä¸º **åŒä¾§ç½®ä¿¡ä¸‹é™**ï¼Œ$\\hat{\\theta}_{U}$ ä¸º **åŒä¾§ç½®ä¿¡ä¸Šé™**ã€‚\n- <span class=\"m-definition\">(æ¢è½´é‡)</span> è®¾æ€»ä½“ $X$ çš„æ¦‚ç‡å¯†åº¦å‡½æ•° $f(x;\\theta)$ï¼Œå…¶ä¸­ $\\theta$ ä¸ºå¾…ä¼°å‚æ•°ï¼Œå¹¶è®¾ $X_{1},X_{2},\\cdots,X_{n}$ æ˜¯æ¥è‡ªæ€»ä½“ $X$ çš„æ ·æœ¬ï¼Œå¦‚æœæ ·æœ¬å’Œå‚æ•° $\\theta$ çš„å‡½æ•° $G(X_{1},X_{2},\\cdots,X_{n}; \\theta)$ çš„åˆ†å¸ƒå®Œå…¨å·²çŸ¥ï¼Œä¸”å½¢å¼ä¸Šä¸ä¾èµ–äºå…¶ä»–æœªçŸ¥å‚æ•°ï¼Œåˆ™ç§° $G(X_{1},X_{2},\\cdots,X_{n};\\theta)$ ä¸º **æ¢è½´é‡**ã€‚\n  - å•ä¸ªæ­£æ€æ€»ä½“æ—¶çš„å‡è®¾æ£€éªŒçš„æ¢è½´é‡ï¼š\n    - å¾…ä¼° $\\mu$ï¼Œ$\\sigma^{2}$ å·²çŸ¥ï¼š$\\displaystyle{Z=\\frac{\\overline{X}-\\mu_0}{\\sigma/\\sqrt{n}}} \\sim N(0,1)$ï¼›\n    - å¾…ä¼° $\\mu$ï¼Œ$\\sigma^{2}$ æœªçŸ¥ï¼š$T=\\dfrac{\\overline{X}-\\mu_0}{S/\\sqrt{n}} \\sim t(n-1)$ï¼›\n    - å¾…ä¼° $\\sigma^{2}$ï¼Œ$\\mu$ æœªçŸ¥ï¼š$\\displaystyle{\\chi^2=\\frac{(n-1)S^2}{\\sigma^2}\\sim\\chi^2(n-1)}$ï¼›\n  - ä¸¤ä¸ªæ­£æ€æ€»ä½“æ—¶çš„å‡è®¾æ£€éªŒçš„æ¢è½´é‡ï¼š\n    - å¾…ä¼° $\\mu_{1}-\\mu_{2}$ï¼Œ$\\sigma^{2}_{1}$ å’Œ $\\sigma^{2}_{2}$ å·²çŸ¥ï¼š$Z=\\dfrac{(\\overline{X}-\\overline{Y})-(\\mu_1-\\mu_2)}{\\sqrt{\\dfrac{\\sigma_1^2}{n_1}+\\dfrac{\\sigma_2^2}{n_2}}}\\sim N(0,1)$ï¼›\n    - å¾…ä¼° $\\mu_{1}-\\mu_{2}$ï¼Œ$\\sigma^{2}_{1}=\\sigma^{2}_{2}$ æœªçŸ¥ï¼š$t=\\dfrac{(\\overline{X}-\\overline{Y})-(\\mu_{1}-\\mu_{2})}{S_{w}\\sqrt{\\dfrac{1}{n_{1}}+\\dfrac{1}{n_{2}}}}\\sim t(n_{1}+n_{2}-2)$ï¼Œå…¶ä¸­ $S_{w}^{2}=\\dfrac{(n_{1}-1)S_{1}^{2}+(n_{2}-1)S_{2}^{2}}{n_{1}+n_{2}-2}$ï¼›\n    - å¾…ä¼° $\\dfrac{\\sigma^{2}_{1}}{\\sigma^{2}_{2}}$ï¼Œ$\\mu_{1},\\mu_{2}$ æœªçŸ¥ï¼š$\\displaystyle{F=\\frac{S_{1}^{2}/S_{2}^{2}}{\\sigma_{1}^{2}/\\sigma_{2}^{2}}\\sim F(n_{1}-1,n_{2}-1)}$ï¼›\n  - å…¶ä½™çš„ä»…äº†è§£å³å¯ï¼Œè€ƒè¯•ä¸è€ƒå¯Ÿã€‚\n\n> [!important] æ ¹æ®æ¢è½´é‡æ¨å‡ºç½®ä¿¡åŒºé—´å’Œå•ä¾§ç½®ä¿¡é™ï¼ˆä»¥å¾…ä¼° $\\mu$ï¼Œ$\\sigma^{2}$ å·²çŸ¥çš„æƒ…å†µä¸ºä¾‹ï¼‰\n>\n> - $\\displaystyle{Z=\\frac{\\overline{X}-\\mu_0}{\\sigma/\\sqrt{n}}} \\sim N(0,1)$ï¼Œæ•…è½åœ¨ $\\left( z_{\\alpha / 2}, z_{1-\\alpha / 2} \\right)$ ä¸­çš„æ¦‚ç‡æ°ä¸º $1-\\alpha$ï¼›\n> - $\\displaystyle{z_{\\alpha / 2} < \\dfrac{\\overline{X}-\\mu_0}{\\sigma/\\sqrt{n}} < z_{1-\\alpha/2}}$\n> - $\\displaystyle{\\implies \\dfrac{\\sigma}{\\sqrt{n}} z_{\\alpha / 2} < \\overline{X}-\\mu_0 < \\dfrac{\\sigma}{\\sqrt{n}} z_{1-\\alpha/2}}$\n> - $\\displaystyle{\\implies \\overline{X} + \\dfrac{\\sigma}{\\sqrt{n}} z_{1-\\alpha/2} < \\mu_0 < \\overline{X} + \\dfrac{\\sigma}{\\sqrt{n}} z_{\\alpha / 2}}$\n> - è¿™æ ·å°±å¾—åˆ°äº†ç½®ä¿¡åŒºé—´ä¸ºï¼š$\\overline{X} + \\dfrac{\\sigma}{\\sqrt{n}} z_{1-\\alpha/2} < \\mu_0 < \\overline{X} + \\dfrac{\\sigma}{\\sqrt{n}} z_{\\alpha / 2}$\n\n![|802](https://img.memset0.cn/2024/12/29/4KXViWIO.png)\n","publishedTitle":"ã€Œæ¦‚ç‡è®ºä¸æ•°ç†ç»Ÿè®¡ã€VII. å‚æ•°ä¼°è®¡"}},{"id":"957bc106-d6f3-5c1b-8297-60ba5e66954d","fields":{"slug":"/course/ptms/note/8/","plainText":"\n> æœ¬ç¯‡ç¬”è®°ä»‹ç»äº†æ•°ç†ç»Ÿè®¡ä¸­å‡è®¾æ£€éªŒçš„åŸºæœ¬æ¦‚å¿µå’Œæ–¹æ³•ã€‚é¦–å…ˆè®¨è®ºäº†ä¸¤ç±»é”™è¯¯ï¼ˆç¬¬ I ç±»é”™è¯¯å’Œç¬¬ II ç±»é”™è¯¯ï¼‰ä»¥åŠ P- å€¼çš„å®šä¹‰å’Œåº”ç”¨ã€‚ç„¶åè¯¦ç»†é˜è¿°äº†å•ä¸ªæ­£æ€æ€»ä½“çš„å‡è®¾æ£€éªŒé—®é¢˜ï¼ŒåŒ…æ‹¬åŒè¾¹æ£€éªŒã€å·¦è¾¹æ£€éªŒå’Œå³è¾¹æ£€éªŒçš„æ‹’ç»åŸŸå’Œ P- å€¼è®¡ç®—ã€‚æœ€åæ¢è®¨äº†åŒºé—´ä¼°è®¡ä¸å‡è®¾æ£€éªŒçš„å…³ç³»ï¼Œè¯´æ˜äº†å®ƒä»¬ä¹‹é—´çš„ç›¸äº’è½¬æ¢ï¼Œä»¥åŠå•ä¾§ç½®ä¿¡é™ä¸å•è¾¹å‡è®¾æ£€éªŒçš„å¯¹åº”å…³ç³»ã€‚<small style=\"font-style: italic; opacity: 0.5\">ï¼ˆç”± claude-3.5-sonnet ç”Ÿæˆæ‘˜è¦ï¼‰</small>\n\n<!-- more -->\n\n## 1. å‡è®¾æ£€éªŒ\n\n> åé¢å‡è®¾æ£€éªŒçš„æ‹’ç»åŸŸå’Œ $P_{-}$ å€¼éƒ½æ˜¯å¯ä»¥é€šè¿‡æ£€éªŒç»Ÿè®¡é‡æœ¬èº«çš„æ€§è´¨è€Œå¾—åˆ°çš„ã€‚æ•…å…¶å®ç¬¬ä¸ƒç« å’Œç¬¬å…«ç« çš„å†…å®¹åªè¦èƒŒäº†æ¢è½´é‡éƒ½å¯ä»¥è‡ªå·±æ¨å‡ºæ¥ã€‚\n\n- ä¸¤ç±»é”™è¯¯\n  - <span class=\"m-definition\">(ç¬¬ I ç±»é”™è¯¯)</span> æ‹’ç»çœŸå®çš„åŸå‡è®¾ï¼ˆå¼ƒçœŸï¼‰\n    - $\\alpha=P\\{ \\text{ç¬¬ I ç±»é”™è¯¯} \\}=P\\{ \\text{æ‹’ç» }H_{0} \\mid H_{0}\\text{ ä¸ºçœŸ} \\}$\n    - ä¸€èˆ¬æ¥è¯´éƒ½æ˜¯é¢˜ç›®ä¸­ç»™å‡ºï¼Œå³é—®ä½ æ˜¯å¦æœ‰ $95\\%$ çš„æŠŠæ¡æ‹’ç»åŸå‡è®¾ï¼Œå°±æ˜¯é—®çŠ¯ç¬¬ä¸€ç±»é”™è¯¯çš„æ¦‚ç‡æ˜¯å¦å°äº $0.05\\%$ã€‚\n  - <span class=\"m-definition\">(ç¬¬ II ç±»é”™è¯¯)</span> æ¥å—é”™è¯¯çš„åŸå‡è®¾ï¼ˆå–ä¼ªï¼‰\n    - $\\beta=P\\{ \\text{ç¬¬ II ç±»é”™è¯¯} \\}=P \\{ \\text{æ¥å— }H_{0} \\mid H_{0} \\text{ ä¸ºå‡} \\}$\n    - æ­¤ç±»é—®é¢˜éœ€è¦ç»™å‡ºå¾…ä¼°å‚æ•°çš„çœŸå®å€¼ï¼Œç„¶åæ ¹æ®æ¢è½´é‡è¿›è¡Œè®¡ç®—ï¼Œå…·ä½“å¯å‚è€ƒä½œä¸šé¢˜ã€‚\n- <span class=\"m-definition\">($P_-$ å€¼)</span> å½“åŸå‡è®¾æˆç«‹æ—¶ï¼Œæ£€éªŒç»Ÿè®¡é‡å–æ¯”è§‚å¯Ÿåˆ°çš„ç»“æœæ›´ä¸ºæç«¯çš„æ•°å€¼çš„æ¦‚ç‡ã€‚\n  - å½“ $P_{-} \\leq \\alpha$ æ—¶ï¼Œæ‹’ç»åŸå‡è®¾ï¼›å½“ $P_{-} > \\alpha$ æ—¶ï¼Œæ¥å—åŸå‡è®¾ã€‚\n  - åŒè¾¹æ£€éªŒé—®é¢˜ä¸­çš„ $P_{-}$ å€¼å¯ä»¥å¦‚ä¸‹è®¡ç®—ï¼šå…ˆç®—å‡ºä¸€è¾¹çš„æ¦‚ç‡ $p$ï¼Œåˆ™ $P_{-} = 2 \\min \\{ p,1-p \\}$ã€‚\n- å‡è®¾é—®é¢˜ä¸æ£€éªŒï¼ˆè¿™é‡Œä»¥å•ä¸ªæ­£æ€æ€»ä½“çš„ $Z$ æ£€éªŒä¸ºä¾‹ï¼‰\n  - åŒè¾¹å‡è®¾é—®é¢˜ï¼š$H_0:\\mu=\\mu_0,H_1:\\mu\\neq\\mu_0$,å…¶ä¸­ $\\mu_0$ æ˜¯å·²çŸ¥çš„å¸¸æ•°ï¼Œç”±å‰ä¸€èŠ‚è®¨è®ºçŸ¥ï¼Œå¯å–æ£€éªŒç»Ÿè®¡é‡ä¸º $Z=\\dfrac{\\bar{X}-\\mu_0}{\\sigma/\\sqrt{n}}$ã€‚\n    - æ ¹æ® Neyman-Pearson åŸåˆ™ï¼Œæ‹’ç»åŸŸä¸º $W=\\left\\{|Z|=\\left|\\dfrac{\\overline{X}-\\mu_0}{\\sigma/\\sqrt{n}}\\right|\\geq z_{\\alpha/2}\\right\\}$ã€‚\n    - $P_-=P_{H_0}\\left\\{| Z|\\geq| z_0|\\right\\}=2P_{H_0}\\left\\{Z\\geq| z_0|\\right\\}=2(1-\\Phi(| z_0|))$ï¼ˆå…¶ä¸­ $z_0 = \\dfrac{\\overline{x}-\\mu_0}{\\sigma / \\sqrt n}$ï¼‰ã€‚\n  - å·¦è¾¹å‡è®¾é—®é¢˜ï¼š$H_0:\\mu\\geq \\mu_0,H_1: \\mu< \\mu_0$,å…¶ä¸­ $\\mu_0$ æ˜¯å·²çŸ¥çš„å¸¸æ•°æ£€éªŒç»Ÿè®¡é‡ä»å–ä¸º $Z=\\dfrac{\\bar{X}-\\mu_0}{\\sigma/\\sqrt{n}}$ã€‚æ‹’ç»åŸŸå½¢å¼ä¸º $Z=\\dfrac{\\overline{X}-\\mu_0}{\\sigma/\\sqrt{n}}\\leq C$ã€‚\n    - æ ¹æ® Neyman-Pearson åŸåˆ™ï¼Œæ‹’ç»åŸŸä¸º $W=\\left\\{Z=\\dfrac{\\overline{X}-\\mu_0}{\\sigma/\\sqrt{n}}\\leq-z_\\alpha\\right\\}$ã€‚\n    - $P\\_ = \\Phi(z_0)$ã€‚\n  - å³è¾¹å‡è®¾é—®é¢˜ï¼š$H_0:\\mu\\leq\\mu_0,H_1:\\mu>\\mu_0$, å…¶ä¸­ $\\mu_0$ æ˜¯å·²çŸ¥çš„å¸¸æ•°ã€‚æ£€éªŒç»Ÿè®¡é‡ä»å–ä¸º $Z=\\dfrac{\\overline{X}-\\mu_0}{\\sigma/\\sqrt{n}}$ã€‚\n    - æ ¹æ® Neyman-Pearson åŸåˆ™ï¼Œæ‹’ç»åŸŸä¸º $W=\\left\\{Z=\\dfrac{\\overline{X}-\\mu_0}{\\sigma/\\sqrt{n}}\\geq z_\\alpha\\right\\}$ã€‚\n    - $P\\_ = 1-\\Phi(z_0)$ã€‚\n\n## 2. åŒºé—´ä¼°è®¡\n\n- ä¸¤è€…å¯ä»¥äº’ç›¸è½¬æ¢ã€‚ä¾‹å¦‚ï¼Œ$\\mu$ çš„ç½®ä¿¡æ°´å¹³ä¸º $1-\\alpha$ çš„ç½®ä¿¡åŒºé—´ä¸º $\\displaystyle{\\overline{X}-\\frac\\sigma{\\sqrt{n}}z_{\\alpha/2}<\\mu<\\overline{X}+\\frac\\sigma{\\sqrt{n}}z_{\\alpha/2}}$ï¼Œåˆ™å‡è®¾æ£€éªŒé—®é¢˜ $H_0:\\mu=\\mu_0$ï¼Œ$H_1:\\mu\\neq\\mu_0$ çš„æ¥å—åŸŸä¸º $\\displaystyle{\\overline{W}=\\left\\{\\overline{X}-\\frac{\\sigma}{\\sqrt{n}}z_{\\alpha/2}<\\mu_0<\\overline{X}+\\frac{\\sigma}{\\sqrt{n}}z_{\\alpha/2}\\right\\}}$ã€‚\n- ä¸€èˆ¬åœ°ï¼Œè‹¥å‡è®¾æ£€éªŒé—®é¢˜ $H_0: \\theta = \\theta _0H_1: \\theta \\neq \\theta _0$ çš„æ˜¾è‘—æ°´å¹³ä¸º $\\alpha$ çš„æ¥å—åŸŸèƒ½ç­‰ä»·åœ°å†™æˆ $\\hat{\\theta}_L<\\theta_0<\\hat{\\theta}_U$ï¼Œé‚£ä¹ˆ($\\hat{\\theta}_L,\\hat{\\theta}_U)$ æ˜¯å‚æ•° $\\theta$ çš„ç½®ä¿¡æ°´å¹³ä¸º $1-\\alpha$ çš„ç½®ä¿¡åŒºé—´ã€‚\n  - åä¹‹ï¼Œè‹¥ ($\\hat{\\theta}_L,\\hat{\\theta}_U$) æ˜¯ $\\theta$ çš„ç½®ä¿¡æ°´å¹³ä¸º $1-\\alpha$ çš„ç½®ä¿¡åŒºé—´ï¼Œåˆ™å½“ $\\theta_0\\in(\\begin{array}{c}\\hat{\\theta}_L,&\\hat{\\theta}_U\\end{array})$ æ—¶ï¼Œæ¥å—åŒè¾¹æ£€éªŒ $H_0: \\theta = \\theta _0$, $H_1: \\theta \\neq \\theta _0$ ä¸­çš„åŸå‡è®¾ $H_0$, ä¸”æ£€éªŒçš„æ‹’ç»åŸŸä¸º $\\theta _0\\leq \\hat{\\theta } _L$ æˆ–$\\theta_0\\geq\\hat{\\theta}_U$ã€‚\n- å•ä¾§ç½®ä¿¡é™ä¸å•è¾¹å‡è®¾æ£€éªŒçš„å…³ç³»ï¼š\n  - è‹¥ $\\hat{\\theta}_L$ æ˜¯ $\\theta$ çš„ç½®ä¿¡æ°´å¹³ä¸º $1-\\alpha$ çš„å•ä¾§ç½®ä¿¡ä¸‹é™ï¼Œåˆ™å½“ $\\theta_0\\geq\\hat{\\theta}_L$ æ—¶ï¼Œæ¥å—å³è¾¹æ£€éªŒ $H_0: \\theta \\leq \\theta _0$, $H_1: \\theta > \\theta _0$ ä¸­çš„åŸå‡è®¾ $H_0$, åä¹‹ï¼Œæ‹’ç»åŸå‡è®¾ã€‚\n  - è‹¥ $\\hat{\\theta}_U$ æ˜¯ $\\theta$ çš„ç½®ä¿¡æ°´å¹³ä¸º $1-\\alpha$ çš„å•ä¾§ç½®ä¿¡ä¸Šé™ï¼Œåˆ™å½“ $\\theta_0\\leq\\hat{\\theta}_U$ æ—¶ï¼Œæ¥å—å·¦è¾¹æ£€éªŒ $H_0: \\theta \\geq \\theta _0$, $H_1: \\theta < \\theta _0$ ä¸­çš„åŸå‡è®¾ $H_0$, åä¹‹ï¼Œæ‹’ç»åŸå‡è®¾ã€‚\n\n![](https://img.memset0.cn/2025/01/13/Q2KcljXM.png)\n\n![](https://img.memset0.cn/2025/01/13/9pFWgfcU.png)\n","publishedTitle":"ã€Œæ¦‚ç‡è®ºä¸æ•°ç†ç»Ÿè®¡ã€VIII. å‡è®¾æ£€éªŒ"}},{"id":"71062cd2-2a20-59c6-af61-c2f89b9fe017","fields":{"slug":"/oi/solution/opencup/2020/gomel-h/","plainText":"\n> ç»™å‡º $n$ ä¸ªåŒºé—´ $[l_i, r_i]$ ï¼Œä½ éœ€è¦æ”¾ä¸‹**è‡³å¤š** $n$ ä¸ªç‚¹ï¼Œä½¿å¾—æ¯ä¸ªåŒºé—´é‡Œè‡³å°‘åŒ…å«ä¸€ä¸ªç‚¹ã€‚å¹¶ä¸”åŒºé—´é‡Œç‚¹ä¸ªæ•°çš„æœ€å¤§å€¼è¦å°½å¯èƒ½å°ã€‚\n> \n> $1 \\le n \\le 10^5, 10^9 \\le l_i < r_i \\le 10^9$ ã€‚\n\n<!-- more -->\n\n## é¢˜è§£\n\nå…ˆæŒ‰ç…§å¦‚ä¸‹æ–¹æ³•è´ªå¿ƒï¼šç»´æŠ¤ä¸€ä¸ªé›†åˆè¡¨ç¤ºå½“å‰æ²¡æœ‰æ”¾ç‚¹çš„åŒºé—´ï¼Œæ¯æ¬¡é€‰å‡ºä¸€ä¸ªå³ç«¯ç‚¹æœ€å°çš„åŒºé—´ï¼Œåœ¨è¿™ä¸ªå³ç«¯ç‚¹æ”¾ä¸‹ä¸€ä¸ªåŒºé—´ã€‚\n\nè‹¥æ­¤æ—¶çš„æœ€å¤§å€¼ä¸º $t$ ï¼Œåˆ™ç­”æ¡ˆè¦ä¹ˆä¸º $t$ è¦ä¹ˆä¸º $t-1$ ã€‚\n\nè¯æ˜ï¼šè€ƒè™‘ä¸€ä¸ªè¢«æ”¾äº† $t$ ä¸ªç‚¹çš„åŒºé—´ï¼Œåªæœ‰å¯èƒ½æŠŠç¬¬ä¸€ä¸ªç‚¹çš„ç§»åˆ°åŒºé—´å¤–ï¼Œå…¶ä½™çš„ç‚¹å¿…å®šåœ¨åŒºé—´å†…ç§»åŠ¨ã€‚\n\næ€ä¹ˆåˆ¤æ–­ç­”æ¡ˆæ˜¯å¦ä¸º $t-1$ å‘¢ï¼Œå®šä¹‰ä¸€ä¸ªç‚¹ $x$ æ˜¯åˆæ³•çš„å½“ä¸”ä»…å½“åªè€ƒè™‘ $x$ å’Œæ‰€æœ‰è¢«æ”¾åœ¨ $x$ å³ä¾§çš„ç‚¹æ‰€æœ‰å³ç«¯ç‚¹ $r_i\\geq x$ çš„åŒºé—´éƒ½èƒ½è‡³å¤šæ”¾ $t-1$ ä¸ªã€‚\n\nä»å³å¾€å·¦æ‰«æçº¿ï¼Œå®šä¹‰ $next_x$ ä¸ºåœ¨ $x$ å³ä¾§ï¼Œèƒ½æ‰¾åˆ°çš„æœ€è¿œåˆæ³•ç‚¹ï¼Œä¸”åŒºé—´ $(x, next_x)$ å†…ä¸ä¸¥æ ¼åŒ…å«ä»»æ„ä¸€ä¸ªåŒºé—´ã€‚ä»¤ $y=next^{t-1}_x$ ï¼Œå¦‚æœä¸å­˜åœ¨ä¸€ä¸ªåŒºé—´åŒæ—¶åŒ…å« $x, y$ ï¼Œé‚£ä¹ˆ $x$ å°±æ˜¯åˆæ³•çš„ã€‚\n\næ±‚å‡ºæ‰€æœ‰åˆæ³•ç‚¹åï¼Œè‹¥ $min_{i=1}^n (l_i)$ æ˜¯åˆæ³•çš„ï¼Œç­”æ¡ˆä¸º $t-1$ ï¼Œå¦åˆ™ç­”æ¡ˆä¸º $t$ ã€‚\n\n![](https://static.memset0.cn/img/v6/2024/02/11/vZ3u4ZK7.png)\n\nï¼ˆé™„å›¾ï¼šè€ƒè™‘æˆ‘ä»¬æ˜¯è¦è®©æ¯ä¸ªå½¢å¦‚ $x_1$ çš„è´¡çŒ®éƒ½ä¸¢åˆ°å¤–é¢å»ï¼Œä½†æ˜¯ $x'_1$ èƒ½å–çš„èŒƒå›´åªèƒ½åœ¨ $[x'_l; x'_r]$ ï¼Œå¦åˆ™å°±ä¸èƒ½å®Œæ•´è¦†ç›–å†…éƒ¨çº¿æ®µï¼‰\n\n## å‘\n\nä¸€å¼€å§‹è°ƒäº†åŠå¤©å°±æ˜¯ç¦»æ•£åŒ–çš„é—®é¢˜ã€‚\n\nå®é™…ä¸ŠåŒºé—´é—´ç•™ç™½çš„éƒ¨åˆ†æ˜¯æœ‰å½±å“çš„ï¼ˆè€ƒè™‘æ˜¯å¦å®Œå…¨åŒ…å«çš„æ—¶å€™ï¼‰ï¼ŒæŠŠè¿™éƒ¨åˆ†ä¹Ÿä¸¢è¿›å»ç¦»æ•£åŒ–å°±è¿‡äº†ï¼Œå“­å“­ã€‚\n\nä¸è¿‡åˆ«çš„éƒ¨åˆ†èƒ½ä¸€éå†™å¯¹è¿˜æ˜¯æŒºå¼€å¿ƒçš„ã€‚\n\n## zimpha çš„é¢˜è§£\n\nè€ƒè™‘æ¯ä¸ªåŒºé—´è‡³å°‘æ”¾ä¸€ä¸ªç‚¹çš„è´ªå¿ƒåšæ³•ã€‚ç»´æŠ¤ä¸€ä¸ªé›†åˆè¡¨ç¤ºå½“å‰æ²¡æœ‰æ”¾ç‚¹çš„åŒºé—´ï¼Œæ¯æ¬¡é€‰å‡ºä¸€ä¸ªå³ç«¯ç‚¹æœ€å°çš„åŒºé—´ï¼Œåœ¨è¿™ä¸ªå³ç«¯ç‚¹æ”¾ä¸‹ä¸€ä¸ªåŒºé—´ã€‚\n\nå¦‚æœåœ¨ä¸Šè¿°æ–¹æ¡ˆä¸‹ï¼Œæœ€å¤§å€¼ä¸º $t$ ï¼Œé‚£ä¹ˆå¯ä»¥è¯æ˜æœ€ä¼˜å€¼è¦ä¹ˆæ˜¯ $t$ ï¼Œè¦ä¹ˆæ˜¯ $t-1$ ã€‚\n\nè€ƒè™‘ä¸Šè¿°æ–¹æ¡ˆä¸‹ï¼ŒåŒ…å«ç‚¹æ•°æœ€å¤šçš„é‚£ä¸ªåŒºé—´ $[l, r]$ ã€‚å‡è®¾è¿™ $t$ ä¸ªç‚¹ä»å·¦å¾€å³ä¾æ¬¡ä¸º $x_1, x_2, \\dots, x_t$ ã€‚é‚£ä¹ˆåœ¨æœ€ä¼˜æ–¹æ¡ˆä¸‹ï¼Œè¿™ä¸ªåŒºé—´é‡Œçš„ç‚¹ä¸ªæ•°è‚¯å®šè¦ $\\le t$ ã€‚è€ƒè™‘ $l$ å·¦è¾¹çš„ç¬¬ä¸€ä¸ªç‚¹ä¸º $x^\\prime_1$ ï¼Œé‚£ä¹ˆæ¥ä¸‹æ¥é‚£ä¸ªç‚¹ $x^\\prime_2$ ä¸€å®šè¦ä¸è¶…è¿‡ $x_2$ ã€‚å› ä¸ºæˆ‘ä»¬éœ€è¦ç”¨ $x^\\prime_2$ æ¥è¦†ç›–è¢« $x_1$ è¦†ç›–çš„åŒºé—´ï¼Œå¦‚æœè¶…è¿‡ $x_2$ ï¼Œè‚¯å®šä¼šæœ‰åŒºé—´æ²¡æœ‰è¢«è¦†ç›–ã€‚ç±»ä¼¼çš„ï¼Œ $x^\\prime_3$ ä¸€å®šä¸èƒ½è¶…è¿‡ $x_3$ ã€‚ä¾æ¬¡ç±»æ¨ï¼Œ $x^\\prime_t$ ä¸€å®šä¸èƒ½è¶…è¿‡ $x_t$ ã€‚ä¹Ÿå°±æ˜¯å°‘åŒºé—´ $[l, r]$ é‡Œè‡³å°‘è¦æœ‰ $t-1$ ä¸ªç‚¹ã€‚\n\né‚£ä¹ˆæ¥ä¸‹æ¥åªéœ€è¦åˆ¤å®š $t-1$ æ˜¯å¦å¯è¡Œå³å¯ã€‚æˆ‘ä»¬ä»å·¦å¾€å³è€ƒè™‘æ•°è½´ä¸Šæ¯ä¸ªç‚¹ $x$ ï¼Œå®šä¹‰ $x$ æ˜¯åˆæ³•çš„å½“ä¸”ä»…å½“å¦‚æœæˆ‘ä»¬çš„æ–¹æ¡ˆåŒ…å«äº†ç‚¹ $x$ åï¼Œä»…è€ƒè™‘åŠ å…¥å…¶å®ƒ $\\ge x$ çš„ç‚¹ï¼Œæ‰€æœ‰å³ç«¯ç‚¹ $r_i \\ge x$ çš„åŒºé—´é‡Œé¢æœ€å¤šåªæœ‰ $t-1$ ä¸ªç‚¹ã€‚ä»¤ $next(x)$ æ˜¯ $x$ å³è¾¹æœ€è¿œçš„åˆæ³•çš„ç‚¹ï¼Œä½¿å¾—æ²¡æœ‰åŒºé—´ $[l_i, r_i]$ ä¸¥æ ¼åœ¨åŒºé—´ $[x, next_x]$ é‡Œã€‚è€ƒè™‘ $y=next^{t-1}(x)$ ï¼Œå¦‚æœå­˜åœ¨ä¸€ä¸ª $[l_i, r_i]$ åŒæ—¶åŒ…å«äº†ç«¯ç‚¹ $x$ å’Œ $y$ ï¼Œé‚£ä¹ˆ $x$ æ˜¾ç„¶æ˜¯ä¸åˆæ³•çš„ï¼Œå¦åˆ™ $x$ æ˜¯åˆæ³•çš„ã€‚\n\næœ€åå¦‚æœæ‰€æœ‰ç‚¹ $\\min(l_i)-1$ æ˜¯åˆæ³•çš„ï¼Œé‚£ä¹ˆå°±å­˜åœ¨ä¸€ä¸ª $t-1$ çš„è§£ã€‚\n\nå¤æ‚åº¦ $O(n \\log n)$ ã€‚\n\n## ä»£ç \n\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\nconst int N = 6e5 + 9, M = 21;\nint T, n, t, tn, ta[N], maxl[N], maxr[N], mrk[N], nxt[N][M];\nvector<int> pos, ans;\nstruct node {\n  int l, r;\n} a[N];\nstruct segment {\n  int l, r, mid, s;\n} p[N << 2];\ninline bool inside(int l, int r) { return l <= r && maxl[r] >= l; }\ninline bool outside(int l, int r) { return l > r || maxr[l] >= r; }\nvoid build(int u, int l, int r) {\n  p[u].l = l, p[u].r = r, p[u].mid = (l + r) >> 1, p[u].s = 0;\n  if (l == r) return;\n  build(u << 1, l, p[u].mid);\n  build(u << 1 | 1, p[u].mid + 1, r);\n}\nvoid modify(int u, int k, int x) {\n  if (p[u].l == p[u].r) {\n    p[u].s += x;\n    return;\n  }\n  modify(k <= p[u].mid ? u << 1 : u << 1 | 1, k, x);\n  p[u].s = p[u << 1].s + p[u << 1 | 1].s;\n}\nint query(int u, int l, int r) {\n  if (p[u].l == l && p[u].r == r) return p[u].s;\n  if (r <= p[u].mid) return query(u << 1, l, r);\n  if (l > p[u].mid) return query(u << 1 | 1, l, r);\n  return query(u << 1, l, p[u].mid) + query(u << 1 | 1, p[u].mid + 1, r);\n}\nint main() {\n#ifdef memset0\n  freopen(\"1.in\", \"r\", stdin);\n#endif\n  cin.tie(0)->sync_with_stdio(0);\n  for (cin >> T; T--;) {\n    t = tn = 0, ans.clear(), pos.clear();\n    cin >> n;\n    ta[++tn] = 1e9 + 10, ta[++tn] = -1e9 - 10;\n    for (int i = 1; i <= n; i++) {\n      cin >> a[i].l, ta[++tn] = a[i].l;\n      cin >> a[i].r, ta[++tn] = a[i].r;\n      ta[++tn] = a[i].l - 1, ta[++tn] = a[i].l + 1;\n      ta[++tn] = a[i].r - 1, ta[++tn] = a[i].r + 1;\n    }\n    sort(ta + 1, ta + tn + 1);\n    tn = unique(ta + 1, ta + tn + 1) - ta - 1;\n    for (int i = 1; i <= n; i++) {\n      a[i].l = lower_bound(ta + 1, ta + tn + 1, a[i].l) - ta;\n      a[i].r = lower_bound(ta + 1, ta + tn + 1, a[i].r) - ta;\n    }\n    memset(maxl + 1, 0, tn << 2);\n    memset(maxr + 1, 0, tn << 2);\n    for (int i = 1; i <= n; i++) {\n      maxl[a[i].r] = max(maxl[a[i].r], a[i].l);\n      maxr[a[i].l] = max(maxr[a[i].l], a[i].r);\n    }\n    for (int i = 1; i <= tn; i++) {\n      maxl[i] = max(maxl[i - 1], maxl[i]);\n      maxr[i] = max(maxr[i - 1], maxr[i]);\n    }\n    sort(a + 1, a + n + 1, [](const node &a, const node &b) { return a.r == b.r ? a.l < b.l : a.r < b.r; });\n    build(1, 1, tn);\n    for (int i = 1; i <= n; i++)\n      if (!query(1, a[i].l, a[i].r)) {\n        modify(1, a[i].r, 1);\n        ans.push_back(a[i].r);\n      }\n    for (int i = 1; i <= n; i++) {\n      t = max(t, query(1, a[i].l, a[i].r));\n    }\n    if (t > 1) {\n      memset(mrk + 1, 0, tn);\n      pos.push_back(tn), mrk[tn] = 1;\n      for (int i = 0; i < M; i++) nxt[tn][i] = tn;\n      for (int i = tn - 1, j, l, r, mid, s, k; i >= 1; i--) {\n        l = 0, r = pos.size() - 1, nxt[i][0] = -1;\n        while (l <= r) {\n          mid = (l + r) >> 1;\n          if (!inside(i + 1, pos[mid] - 1)) {\n            nxt[i][0] = pos[mid];\n            r = mid - 1;\n          } else {\n            l = mid + 1;\n          }\n        }\n        if (!~nxt[i][0]) continue;\n        for (j = nxt[i][0], k = M - 1, s = t - 2; k >= 0; k--) {\n          if ((s >> k) & 1) j = nxt[j][k];\n        }\n        if (outside(i, j)) continue;\n        pos.push_back(i), mrk[i] = 1;\n        for (int j = 1; j < M; j++) {\n          nxt[i][j] = nxt[nxt[i][j - 1]][j - 1];\n        }\n      }\n      int minl = tn;\n      for (int i = 1; i <= n; i++) minl = min(minl, a[i].l);\n      if (mrk[minl - 1]) {\n        --t, ans.clear();\n        int u = minl - 1;\n        while (u != tn) ans.push_back(u), u = nxt[u][0];\n        if (ans.front() == 1) ans.erase(ans.begin());\n      }\n    }\n    cout << t << ' ' << ans.size() << ' ';\n    for (int i = 0; i < ans.size(); i++) {\n      cout << ta[ans[i]] << \" \\n\"[i + 1 == ans.size()];\n    }\n  }\n}\n```","publishedTitle":"ã€ŒXX Open Cup. GP of Gomelã€Hit"}},{"id":"b02cf9cf-5019-5e9f-96f2-3ae8cb3d1668","fields":{"slug":"/oi/solution/opencup/2020/korea-d/","plainText":"\n> ç»™å®šä¸¤ä¸ªé•¿åº¦ $n$ çš„åºåˆ— $s,t$ï¼Œåºåˆ—æ¯ä¸€ä½æ˜¯ $1$ æˆ– $2$ã€‚æ¯æ¬¡ä½ å¯ä»¥é€‰æ‹©ä¸€ä¸ªé•¿åº¦ $\\leq 3$ çš„åŒºé—´è¿›è¡Œå·¦å³ç¿»è½¬ï¼Œä»£ä»·ä¸ºåŒºé—´æ•°å€¼å’ŒåŠ ä¸Šç»™å®šå¸¸æ•° $c$ã€‚é—®å°† $s$ å˜æ¢æˆ $t$ çš„æœ€å°ä»£ä»·ã€‚\n> \n> $n \\leq 500$ã€‚\n\n<!-- more -->\n\n## é¢˜è§£\n\néå¸¸å·§å¦™çš„ä¸€ä¸ªé¢˜ã€‚\n\næˆ‘ä»¬è½¬åŒ–ä¸ºæ ¼è·¯é—®é¢˜ï¼Œ$1$ è¡¨ç¤ºå‘å³èµ°ï¼Œ$2$ è¡¨ç¤ºå‘ä¸Šèµ°ã€‚åˆ™ $s$ å’Œ $t$ å¯¹åº”çš„ä¸¤æ¡è·¯çº¿ï¼Œè¢«ä»–ä»¬çš„äº¤ç‚¹åˆ†å‰²ä¸ºè‹¥å¹²æ®µã€‚\n\nç›¸å½“äºæˆ‘ä»¬éœ€è¦ç”¨ $1 \\times 1, 1 \\times 2, 2 \\times 1$ ä¸‰ç§é•¿æ–¹å½¢å¡«å……åˆ°ä¸¤æ¡è·¯çº¿åŒ…å›´ä½çš„åŒºé—´é‡Œã€‚ä¸å¦¨å…ˆè®¾åˆå§‹è§£ä¸ºå…¨ç”¨ $1 \\times 1$ çš„ç½‘æ ¼å¡«å……ï¼Œé»‘ç™½æŸ“è‰²åç›¸å½“äºåœ¨å¾—åˆ°çš„äºŒåˆ†å›¾è·‘æœ€å°è´¹ç”¨æœ€å¤§æµã€‚\n\næ³¨æ„åˆ°æ”¾ä¸€ä¸ª $2 \\times 1$ çš„é•¿æ–¹å½¢å¯¹åº”çš„è¾¹æƒæ˜¯ $2+c$ï¼Œ$1 \\times 2$ çš„é•¿æ–¹å½¢å¯¹åº”çš„è¾¹æƒæ˜¯ $1+c$ã€‚ä¸€å¼€å§‹æˆ‘ä»¬å¯ä»¥è´ªå¿ƒçš„å¡« $2 \\times 1$ çš„é•¿æ–¹å½¢ï¼Œè¿™æ ·å‰©ä¸‹æœªè¢«è¦†ç›–çš„æ ¼å­åªæœ‰ $O(n)$ ä¸ªã€‚åœ¨è¿™ä¸ªæ®‹é‡ç½‘ç»œä¸Šè·‘å¢å¹¿ï¼Œå®¹æ˜“è¯æ˜è‡³å¤šå¢å¹¿ $O(n)$ æ¬¡ã€‚\n\næ±‚æ–¹æ¡ˆå¯èƒ½è¿˜éœ€è¦è·‘ä¸ªæ‹“æ‰‘æ’åºã€‚\n\næ—¶é—´å¤æ‚åº¦ $O(n^3 \\log n)$ï¼Œç„¶è€Œå¬è¯´æœ‰ç‰›é€¼çš„ $O(n^2)$ DP åšæ³•ã€‚\n\n## ä»£ç \n\n```cpp\n#include <bits/stdc++.h>\n#define endl '\\n'\nusing namespace std;\nconst int N = 509, M = 1 << 21;\nint n, c, s, t, l, r, ans, cnt, nod, ind[N * N], q[M], pre[M], dis[M], minA[N], minB[N], id[N][N], num[N][N];\nint tot = 2, hed[M], nxt[M], to[M], val[M], cst[M];\nbool mrk[N][N], inq[M];\nstring a, b;\nvector<int> G[N * N];\nvector<pair<int, int>> seq(1), loc(1);\ninline void add(int u, int v, int w) {\n  nxt[tot] = hed[u], to[tot] = v, val[tot] = 1, cst[tot] = w, hed[u] = tot++;\n  nxt[tot] = hed[v], to[tot] = u, val[tot] = 0, cst[tot] = -w, hed[v] = tot++;\n}\nvoid way(string &a, int *min) {\n  int x = 1, y = 1;\n  for (int i = 1; i <= n; i++)\n    if (a[i] == '1') {\n      min[x] = y;\n      for (int i = y; i < N; i++) mrk[x][i] ^= 1;\n      ++x;\n    } else {\n      ++y;\n    }\n}\nbool spfa() {\n  memset(pre + 1, 0, nod << 2);\n  memset(dis + 1, -63, nod << 2);\n  dis[s] = pre[s] = 0;\n  q[l = r = 1] = s, inq[s] = true;\n  while (l <= r) {\n    int u = q[(l++) % M];\n    inq[u] = false;\n    for (int i = hed[u]; i; i = nxt[i])\n      if (val[i] && dis[to[i]] < dis[u] + cst[i]) {\n        pre[to[i]] = i;\n        dis[to[i]] = dis[u] + cst[i];\n        if (!inq[to[i]]) q[(++r) % M] = to[i], inq[to[i]] = 1;\n      }\n  }\n  return pre[t] && dis[t] > 0;\n}\nint main() {\n#ifdef memset0\n  freopen(\"1.in\", \"r\", stdin);\n#endif\n  cin.tie(0)->sync_with_stdio(0);\n  cin >> n >> c >> a >> b;\n  a.insert(a.begin(), '\\0');\n  b.insert(b.begin(), '\\0');\n  way(a, minA);\n  way(b, minB);\n  for (int i = 0; i < N; i++)\n    for (int j = 0; j < N; j++)\n      if (mrk[i][j]) {\n        id[i][j] = ++nod;\n        loc.push_back({i, j});\n        ans += 3 + c;\n      }\n  s = ++nod, t = ++nod;\n  for (int i = 0; i < N; i++)\n    for (int j = 0; j < N; j++)\n      if (mrk[i][j]) {\n        if ((i + j) & 1) {\n          add(s, id[i][j], 0);\n          for (int d = -1; d <= 1; d += 2) {\n            if (mrk[i + d][j]) add(id[i][j], id[i + d][j], 2 + c);\n            if (mrk[i][j + d]) add(id[i][j], id[i][j + d], 1 + c);\n          }\n        } else {\n          add(id[i][j], t, 0);\n        }\n      }\n  for (int i = 0; i < N; i++)\n    for (int j = 0; j < N; j++)\n      if (mrk[i][j] && mrk[i + 1][j]) {\n        auto connect = [&](int i, int j) {\n          int u = id[i][j];\n          for (int i = hed[u]; i; i = nxt[i]) {\n            if (to[i] == s) return val[i];\n            if (to[i] == t) return val[i ^ 1];\n          }\n          assert(0);\n        };\n        auto play = [&](int u, int v, int k) {\n          for (int i = hed[u]; i; i = nxt[i])\n            if (to[i] == v) {\n              ans -= k * cst[i];\n              val[i] -= k, val[i ^ 1] += k;\n            }\n        };\n        if (!connect(i, j) && !connect(i + 1, j)) {\n          int u = id[i][j], v = id[i + 1][j];\n          if (!((i + j) & 1)) swap(u, v);\n          play(u, s, -1);\n          play(u, v, 1);\n          play(v, t, 1);\n        }\n      }\n  while (spfa()) {\n    int sum = 0;\n    for (int i = pre[t]; i; i = pre[to[i ^ 1]]) {\n      sum += cst[i];\n      val[i]--, val[i ^ 1]++;\n    }\n    ans -= sum;\n  }\n  for (int i = 0; i < N; i++)\n    for (int j = 0; j < N; j++)\n      if (mrk[i][j] && ((i + j) & 1)) {\n        int ii = 0, jj = 0;\n        for (int k = hed[id[i][j]]; k; k = nxt[k])\n          if (to[k] != s && val[k ^ 1]) {\n            ii = loc[to[k]].first;\n            jj = loc[to[k]].second;\n          }\n        if (ii && jj) {\n          int k = min(i + j, ii + jj) - 1;\n          num[i][j] = num[ii][jj] = ++cnt;\n          seq.push_back({k, k + 2});\n        }\n      }\n  for (int i = 0; i < N; i++)\n    for (int j = 0; j < N; j++)\n      if (mrk[i][j] && !num[i][j]) {\n        int k = i + j - 1;\n        num[i][j] = ++cnt;\n        seq.push_back({k, k + 1});\n      }\n  for (int i = 0; i < N; i++)\n    for (int j = 0; j < N; j++)\n      if (mrk[i][j]) {\n        if (minA[i] < minB[i]) {\n          if (mrk[i + 1][j] && num[i][j] != num[i + 1][j]) {\n            G[num[i + 1][j]].push_back(num[i][j]);\n            ++ind[num[i][j]];\n          }\n          if (mrk[i][j - 1] && num[i][j] != num[i][j - 1]) {\n            G[num[i][j - 1]].push_back(num[i][j]);\n            ++ind[num[i][j]];\n          }\n        } else {\n          if (mrk[i - 1][j] && num[i][j] != num[i - 1][j]) {\n            G[num[i - 1][j]].push_back(num[i][j]);\n            ++ind[num[i][j]];\n          }\n          if (mrk[i][j + 1] && num[i][j] != num[i][j + 1]) {\n            G[num[i][j + 1]].push_back(num[i][j]);\n            ++ind[num[i][j]];\n          }\n        }\n      }\n  cout << cnt << endl;\n  l = 1, r = 0;\n  for (int i = 1; i <= cnt; i++)\n    if (!ind[i]) q[++r] = i;\n  while (l <= r) {\n    int u = q[l++];\n    cout << seq[u].first << ' ' << seq[u].second << endl;\n    for (int v : G[u]) {\n      if (!--ind[v]) q[++r] = v;\n    }\n  }\n}\n```","publishedTitle":"ã€ŒXX Open Cup. GP of Koreaã€Container"}},{"id":"9fe3ce8e-63e1-5680-b933-ac03e17b4848","fields":{"slug":"/oi/solution/icpc/2020/macau/k/","plainText":"\n> ä¸»åŠæ–¹å°†åœ¨ä¸€ä¸ªäºŒç»´å¹³é¢ä¸­æŠ•æ”¾å¹¿å‘Šã€‚å…±æœ‰ $n$ ä¸ªå¹¿å‘Šå¯è¢«æŠ•æ”¾ï¼Œå…¶ä¸­æ¯ä¸ªå¹¿å‘Šçš„éƒ½æ˜¯å·¦ä¸Šè§’ä¸º $(x_i,y_i)$ çš„ $w\\times h$ çŸ©å½¢ä¸”å‡ºç°æ—¶é—´ä¸º $[l_i,r_i]$ã€‚åŒä¸€æ—¶é—´å†…ï¼Œä»»æ„ä¸¤ä¸ªè¢«æŠ•æ”¾çš„å¹¿å‘Šä¸èƒ½æœ‰é‡å é¢ç§¯ã€‚æ­¤å¤–è¿˜æœ‰ $m$ æ¡é™åˆ¶ $(u_i,v_i)$ è¡¨ç¤ºåœ¨å¹¿å‘Š $u_i$ å’Œå¹¿å‘Š $v_i$ ä¸­è‡³å°‘é€‰æ‹©æŠ•æ”¾ä¸€æ¡ã€‚åˆ¤æ–­æ˜¯å¦å­˜åœ¨ä¸€ç»„åˆæ³•çš„æŠ•æ”¾æ–¹æ¡ˆï¼Œå¦‚æœå­˜åœ¨çš„è¯ç»™å‡ºæ–¹æ¡ˆã€‚\n>\n> $1\\le n\\le 5\\times 10^4$ï¼Œ$1\\le m\\le 10^5$ï¼Œ$1\\le w,h,x_i,y_i,l_i,r_i \\le 2000$ã€‚\n\n<!-- more -->\n\nï¼ˆæœ¬æ–‡å°†ä»‹ç»ä¸€ä¸ªç†è®ºå¤æ‚åº¦æ›´ä¼˜çš„åšæ³•ï¼Œå¯æƒœç”±äºå¸¸æ•°é—®é¢˜æœªèƒ½åœ¨ QOJ ä¸Šé€šè¿‡å…¨éƒ¨æµ‹è¯•é›†ã€‚ï¼‰\n\n## é¢˜è§£\n\nè€ƒè™‘ç”¨åŸºäº Tarjan åšæ³•çš„ 2-SAT çš„è§£å†³é—®é¢˜ï¼šç»™å®šçš„ $m$ æ¡é™åˆ¶å¯ä»¥æ–¹ä¾¿çš„ç”¨æœ‰å‘è¾¹ $\\lnot u_i\\rightarrow v_i$ å’Œ $\\lnot v_i \\rightarrow u_i$ è¡¨ç¤ºã€‚\n\nå…³äº $n$ æ¡å¹¿å‘Šä¸èƒ½é‡å çš„çº¦æŸï¼Œå°† $n$ æ¡å¹¿å‘ŠæŒ‰ç…§æ—¶é—´å³ç«¯ç‚¹ $r_i$ æ’åºåï¼Œåšæ—¶é—´çš„æ‰«æçº¿ã€‚æŸæ¡å¹¿å‘Š $i$ å’Œæ—¶é—´ä¸Šä¸ä»–æœ‰é‡å çš„å¹¿å‘Šé›†åˆæ˜¯ä¸€æ®µè¿ç»­çš„åŒºé—´ã€‚å¯¹åŸåºåˆ—ä»¥ $S$ ä¸ºå—å¤§å°åˆ†å—ï¼Œå°†è¿ç»­åŒºé—´åŸºäºåˆ†å—è¿›è¡Œå¤„ç†ï¼Œ\n\n- é›¶æ•£å—éƒ¨åˆ†ï¼šç›´æ¥æ¯”è¾ƒæ¯æ¡å¹¿å‘Šæ˜¯å¦ä¸ç¬¬ $i$ æ¡å¹¿å‘Šåœ¨ç©ºé—´ï¼ˆé‚£ä¸ªäºŒç»´å¹³é¢ï¼‰ä¸Šæœ‰é‡åˆã€‚è¿™ä¸€éƒ¨åˆ†è´¡çŒ®çš„æ—¶é—´å¤æ‚åº¦å…±ä¸º $O(n S)$ã€‚\n- æ•´å—éƒ¨åˆ†ï¼šå°† $i$ è¿™ä¸€ä¿¡æ¯ç¦»çº¿åˆ°æ¯ä¸€æ•´å—ä¸­ï¼Œä½œä¸ºä¸€æ¬¡å¸¦å…³äºå¹¿å‘Š $i$ çš„â€œè¯¢é—®â€ã€‚\n\nä¹‹åæšä¸¾æ¯ä¸ªå—ï¼Œä¸Šé¢æœ‰è‹¥å¹²æ¡ç¦»çº¿ä¸Šæ¥çš„è¯¢é—®ã€‚è€ƒè™‘è®¡ç®—çŸ©å½¢ $[x_i,x_i+w-1] \\times [y_i,y_i+h-1]$ ä¸ $[x_j,x_j+w-1]\\times [y_j,y_j+h-1]$ æ˜¯å¦æœ‰äº¤ï¼Œç­‰ä»·äºæŸ¥è¯¢ $(x_i,y_i)$ æ˜¯å¦åœ¨çŸ©å½¢ $[x_j-w+2,x_j+w-2]\\times [y_j-h+2,y_j+h-2]$ å†…ã€‚å°†å—ä¸­çš„æ‰€æœ‰**è¯¢é—®**æ’å…¥åˆ° K-D Tree ä¸­ï¼Œç”¨å—ä¸­çš„ $S$ ä¸ª**å¹¿å‘Š**ä½œä¸ºæŸ¥è¯¢ï¼Œè€ƒè™‘åŸºäº K-D Tree çš„ç»“æ„ä¼˜åŒ–å»ºå›¾ã€‚\n\nåˆ©ç”¨æ’å…¥çš„èŠ‚ç‚¹æ˜¯ $(x_1,y_1),(x_2,y_2) \\ldots (x_n,y_n)$ çš„å­é›†è¿™ä¸€æ€§è´¨ï¼Œé€šè¿‡é¢„å…ˆ $O(n\\log n)$ å»ºæ ‘ï¼Œè¿™æ ·æ¯ä¸ªå—çš„å»ºæ ‘è¿‡ç¨‹åªéœ€è¦åœ¨åŸç»“æ„ä¸Šâ€œå¼€å…³â€è‹¥å¹²ç‚¹å³å¯ï¼Œå¯ä»¥å°†å¤æ‚åº¦é™åˆ°å•æ¬¡ $O(n)$ çš„ï¼Œè€ŒæŸ¥è¯¢è´¡çŒ®çš„å¤æ‚åº¦ä¸º $O(S\\sqrt{n})$ã€‚è¿™ä¸€éƒ¨åˆ†æ€»æ—¶é—´å¤æ‚åº¦ä¸º $O\\left(\\dfrac{n^2}S + n\\sqrt{n}\\right)$ã€‚\n\nå– $S=\\sqrt{n}$ï¼Œå°±å¯ä»¥å¾—åˆ°æ—¶ç©ºå¤æ‚åº¦å‡ä¸º $O(n\\sqrt{n})$ çš„åšæ³•ã€‚\n\n## è¯„ä»·\n\næˆ‘ä»¬çš„åšæ³•çš„è™½ç„¶æ—¶ç©ºå¤æ‚åº¦ä¸º $O(n\\sqrt{n})$ï¼Œæ¸è¿›æ„ä¹‰ä¸Šä¼˜äºå®˜æ–¹é¢˜è§£ç»™å‡ºçš„ $O\\left(\\dfrac{n^2}{\\omega}\\right)$ åšæ³•ã€‚ä½†ç”±äº K-D Treeã€2-SAT çš„å¸¸æ•°è¾ƒå¤§ï¼Œå°½ç®¡åšä¸»è¿›è¡Œäº†å¾ˆå¤šå°è¯•ï¼Œå‡æœªèƒ½åœ¨åŒæ—¶æ»¡è¶³é¢˜ç›®çš„æ˜¯æ—¶ã€ç©ºçº¦æŸçš„æ¡ä»¶ä¸‹é€šè¿‡æœ¬é¢˜ã€‚æ¬¢è¿æ­£åœ¨é˜…è¯»è¿™ç¯‡æ–‡ç« çš„ä½ æå‡ºæ”¹è¿›å»ºè®®ã€‚\n\n## ä»£ç \n\nè¿™ä»½ä»£ç åœ¨æœ¬æœºä¸Šå¯è¿‡ï¼Œä½†åœ¨ QOJ ä¸Šä¼š [TLE on #27](https://qoj.ac/submission/356348)ã€‚å¦‚æœè°ƒæ•´å—å¤§å°åˆ™å¯èƒ½ MLEã€‚\n\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\n\n#define cho(u, x) ((u) << 1 | (x))\n\nconst int N = 5e4 + 9, M = 5e6, S = 370;\nint n, m, w, h, bln[N], tot, tmp[N], now[N];\nbool ans[N], use[N];\nvector<vector<int>> G;\n\nvoid myassert(int x) {\n  if (!x) {\n    cout << \"assertion failed\" << endl;\n    exit(-1);\n  }\n}\n\nint tim, col_tot;\nvector<int> dfn, low, col;\nvector<char> ins;\nint top, stk[M];\nvoid tarjan(int u) {\n  dfn[u] = low[u] = ++tim;\n  ins[u] = true, stk[++top] = u;\n  for (int v : G[u])\n    if (!dfn[v]) {\n      tarjan(v);\n      low[u] = min(low[u], low[v]);\n    } else if (ins[v]) {\n      low[u] = min(low[u], dfn[v]);\n    }\n  if (dfn[u] == low[u]) {\n    ++col_tot;\n    do {\n      col[stk[top]] = col_tot;\n      ins[stk[top]] = false;\n    } while (stk[top--] != u);\n  }\n}\n\nstruct point {\n  int x, y;\n};\n\nstruct atom {\n  int l, r, id;\n  point u;\n  inline bool operator<(const atom &rhs) const { return r == rhs.r ? l < rhs.l : r < rhs.r; }\n} a[N];\n\nint newnode() {\n  ++tot;\n  if (G.size() <= static_cast<size_t>(tot * 2 + 10)) {\n    G.resize(G.size() + N);\n  }\n  return tot;\n}\n\nvoid addedge(int u, int v) {\n  // fprintf(stderr, \">>> add edge %d[%d] %d[%d] \\n\", u >> 1, u & 1, v >> 1, v & 1);\n  G[u].emplace_back(v);\n}\n\nvoid check(int i, int j) {\n  if (a[i].u.x < a[j].u.x) {\n    if (a[i].u.x + w <= a[j].u.x) return;\n  } else {\n    if (a[j].u.x + w <= a[i].u.x) return;\n  }\n  if (a[i].u.y < a[j].u.y) {\n    if (a[i].u.y + h <= a[j].u.y) return;\n  } else {\n    if (a[j].u.y + h <= a[i].u.y) return;\n  }\n  addedge(cho(i, 1), cho(j, 0));\n  addedge(cho(j, 1), cho(i, 0));\n}\n\nint d, rt;\nstruct node {\n  int x[2], l[2], r[2], ch[2], src, nod;\n  bool operator<(const node &rhs) const { return x[d] < rhs.x[d]; }\n} kdt[N];\n\ninline void maintain(int u) {\n  kdt[u].l[0] = kdt[u].x[0];\n  if (kdt[u].ch[0] && kdt[kdt[u].ch[0]].l[0] < kdt[u].l[0]) kdt[u].l[0] = kdt[kdt[u].ch[0]].l[0];\n  if (kdt[u].ch[1] && kdt[kdt[u].ch[1]].l[0] < kdt[u].l[0]) kdt[u].l[0] = kdt[kdt[u].ch[1]].l[0];\n  kdt[u].l[1] = kdt[u].x[1];\n  if (kdt[u].ch[0] && kdt[kdt[u].ch[0]].l[1] < kdt[u].l[1]) kdt[u].l[1] = kdt[kdt[u].ch[0]].l[1];\n  if (kdt[u].ch[1] && kdt[kdt[u].ch[1]].l[1] < kdt[u].l[1]) kdt[u].l[1] = kdt[kdt[u].ch[1]].l[1];\n  kdt[u].r[0] = kdt[u].x[0];\n  if (kdt[u].ch[0] && kdt[kdt[u].ch[0]].r[0] > kdt[u].r[0]) kdt[u].r[0] = kdt[kdt[u].ch[0]].r[0];\n  if (kdt[u].ch[1] && kdt[kdt[u].ch[1]].r[0] > kdt[u].r[0]) kdt[u].r[0] = kdt[kdt[u].ch[1]].r[0];\n  kdt[u].r[1] = kdt[u].x[1];\n  if (kdt[u].ch[0] && kdt[kdt[u].ch[0]].r[1] > kdt[u].r[1]) kdt[u].r[1] = kdt[kdt[u].ch[0]].r[1];\n  if (kdt[u].ch[1] && kdt[kdt[u].ch[1]].r[1] > kdt[u].r[1]) kdt[u].r[1] = kdt[kdt[u].ch[1]].r[1];\n}\n\nint build(int l, int r, int k) {\n  if (l > r) return 0;\n  int mid = (l + r) >> 1;\n  d = k;\n  nth_element(kdt + l, kdt + mid, kdt + r + 1);\n  kdt[mid].ch[0] = build(l, mid - 1, k ^ 1);\n  kdt[mid].ch[1] = build(mid + 1, r, k ^ 1);\n  maintain(mid);\n  // fprintf(stderr, \"build tree u=%d lc=%d rc=%d\\n\", mid, kdt[mid].ch[0], kdt[mid].ch[1]);\n  return mid;\n}\n\nvoid query(int u, const node &cur) {\n  if (cur.l[0] <= kdt[u].l[0] && cur.l[1] <= kdt[u].l[1] && kdt[u].r[0] <= cur.r[0] && kdt[u].r[1] <= cur.r[1]) {\n    if (kdt[u].nod) {\n      addedge(cho(cur.src, 1), cho(kdt[u].nod, 0));\n      addedge(cho(kdt[u].nod, 1), cho(cur.src, 0));\n    }\n    return;\n  }\n  if (cur.l[0] > kdt[u].r[0] || cur.l[1] > kdt[u].r[1] || cur.r[0] < kdt[u].l[0] || cur.r[1] < kdt[u].l[1]) {\n    return;\n  }\n  if (use[kdt[u].src] && cur.l[0] <= kdt[u].x[0] && cur.l[1] <= kdt[u].x[1] && kdt[u].x[0] <= cur.r[0] && kdt[u].x[1] <= cur.r[1]) {\n    addedge(cho(cur.src, 1), cho(kdt[u].src, 0));\n    addedge(cho(kdt[u].src, 1), cho(cur.src, 0));\n  }\n  query(kdt[u].ch[0], cur);\n  query(kdt[u].ch[1], cur);\n}\n\nvoid assign(int u) {\n  if (kdt[u].ch[0]) assign(kdt[u].ch[0]);\n  if (kdt[u].ch[1]) assign(kdt[u].ch[1]);\n  int lc = kdt[u].ch[0], rc = kdt[u].ch[1];\n  if (kdt[lc].nod && kdt[rc].nod) {\n    kdt[u].nod = newnode();\n    addedge(cho(kdt[u].nod, 0), cho(kdt[lc].nod, 0));\n    addedge(cho(kdt[lc].nod, 1), cho(kdt[u].nod, 1));\n    addedge(cho(kdt[u].nod, 0), cho(kdt[rc].nod, 0));\n    addedge(cho(kdt[rc].nod, 1), cho(kdt[u].nod, 1));\n    if (use[kdt[u].src]) {\n      addedge(cho(kdt[u].nod, 0), cho(kdt[u].src, 0));\n      addedge(cho(kdt[u].src, 1), cho(kdt[u].nod, 1));\n    }\n  } else if (kdt[lc].nod) {\n    if (use[kdt[u].src]) {\n      kdt[u].nod = newnode();\n      G[cho(kdt[u].nod, 0)] = {cho(kdt[lc].nod, 0), cho(kdt[u].src, 0)};\n      addedge(cho(kdt[lc].nod, 1), cho(kdt[u].nod, 1));\n      addedge(cho(kdt[u].src, 1), cho(kdt[u].nod, 1));\n    } else {\n      kdt[u].nod = kdt[lc].nod;\n    }\n  } else if (kdt[rc].nod) {\n    if (use[kdt[u].src]) {\n      kdt[u].nod = newnode();\n      G[cho(kdt[u].nod, 0)] = {cho(kdt[rc].nod, 0), cho(kdt[u].src, 0)};\n      addedge(cho(kdt[rc].nod, 1), cho(kdt[u].nod, 1));\n      addedge(cho(kdt[u].src, 1), cho(kdt[u].nod, 1));\n    } else {\n      kdt[u].nod = kdt[rc].nod;\n    }\n  } else {\n    if (use[kdt[u].src]) {\n      kdt[u].nod = kdt[u].src;\n    } else {\n      kdt[u].nod = 0;\n    }\n  }\n  // fprintf(stderr, \"assign %d use=%d src=%d nod=%d\\n\", u, use[kdt[u].src], kdt[u].src, kdt[u].nod);\n}\n\nstruct block {\n  int l, r;\n  vector<int> q;\n  void solve() {\n    // fprintf(stderr, \"solve block %d %d\\n\", l, r);\n    for (int i = 1; i <= n; i++) use[i] = false;\n    for (int x : q) use[x] = true;\n    assign(rt);\n    node cur;\n    for (int i = l; i <= r; i++) {\n      cur.l[0] = a[i].u.x - (w - 1), cur.r[0] = a[i].u.x + (w - 1);\n      cur.l[1] = a[i].u.y - (h - 1), cur.r[1] = a[i].u.y + (h - 1);\n      cur.src = i, cur.nod = -1;\n      query(rt, cur);\n    }\n  }\n} b[N / S + 9];\n\nint main() {\n#ifdef memset0\n  // freopen(\"K.in\", \"r\", stdin);\n  // freopen(\"K-big.txt\", \"r\", stdin);\n  freopen(\"K-data.txt\", \"r\", stdin);\n#endif\n  cin.tie(0)->sync_with_stdio(0);\n  // vector<pair<int, int>> lim;\n  cin >> n >> w >> h;\n  for (int i = 1; i <= n; i++) {\n    cin >> a[i].l >> a[i].r >> a[i].u.x >> a[i].u.y;\n    a[i].id = i;\n  }\n  sort(a + 1, a + n + 1);\n  // for (int i = 1; i <= n; i++) fprintf(stderr, \"a[%d] => l=%d r=%d x=%d y=%d id=%d\\n\", i, a[i].l, a[i].r, a[i].u.x, a[i].u.y, a[i].id);\n  for (int i = 1; i <= n; i++) {\n    now[a[i].id] = i;\n  }\n  cin >> m;\n  tot = n;\n  G.resize(tot * 2 + N);\n  for (int u, v, i = 1; i <= m; i++) {\n    cin >> u >> v;\n    // lim.emplace_back(u, v);\n    u = now[u];\n    v = now[v];\n    addedge(cho(u, 0), cho(v, 1));\n    addedge(cho(v, 0), cho(u, 1));\n  }\n\n  for (int i = 1; i <= n; i++) {\n    kdt[i].src = i;\n    kdt[i].x[0] = a[i].u.x;\n    kdt[i].x[1] = a[i].u.y;\n  }\n  rt = build(1, n, 0);\n\n  for (int i = 1; i <= n; i++) {\n    bln[i] = i / S + 1;\n    if (!b[bln[i]].l) b[bln[i]].l = i;\n    b[bln[i]].r = i;\n    // cout << bln[i] << \" \\n\"[i == n];\n  }\n  for (int i = 1; i <= n; i++) tmp[i] = a[i].r;\n  for (int ql, qr, i = 1; i <= n; i++) {\n    ql = lower_bound(tmp + 1, tmp + i, a[i].l) - tmp;\n    qr = i - 1;\n    if (ql <= qr) {\n      // fprintf(stderr, \"solve [ql=%d[%d] qr=%d[%d]] i=%d\\n\", ql, bln[ql], qr, bln[qr], i);\n      if (bln[ql] == bln[qr]) {\n        for (int j = ql; j <= qr; j++) check(j, i);\n      } else {\n        for (int j = ql; j <= b[bln[ql]].r; j++) check(j, i);\n        for (int j = b[bln[qr]].l; j <= qr; j++) check(j, i);\n        for (int k = bln[ql] + 1; k < bln[qr]; k++) {\n          b[k].q.emplace_back(i);\n        }\n      }\n    }\n  }\n  cerr << \"clock = \" << clock() / (double)CLOCKS_PER_SEC << endl;\n  for (int i = 1; i <= bln[n]; i++) {\n    b[i].solve();\n  }\n#ifdef memset0\n  int edg = 0;\n  for (int i = cho(1, 0); i <= cho(tot, 1); i++) edg += G[i].size();\n  cerr << \"tot = \" << tot << \"; edg = \" << edg << endl;\n#endif\n\n  dfn.resize((tot + 1) << 1);\n  low.resize((tot + 1) << 1);\n  col.resize((tot + 1) << 1);\n  ins.resize((tot + 1) << 1);\n  cerr << \"clock = \" << clock() / (double)CLOCKS_PER_SEC << endl;\n  for (int i = cho(1, 0); i <= cho(tot, 1); i++)\n    if (!dfn[i]) {\n      tarjan(i);\n    }\n  cerr << \"clock = \" << clock() / (double)CLOCKS_PER_SEC << endl;\n  for (int i = 1; i <= tot; i++)\n    if (col[cho(i, 0)] == col[cho(i, 1)]) {\n      cout << \"No\" << endl;\n      return 0;\n    }\n  cout << \"Yes\" << endl;\n  for (int i = 1; i <= n; i++) {\n    ans[a[i].id] = col[cho(i, 0)] > col[cho(i, 1)];\n  }\n  // for (int i = 1; i <= n; i++) cerr << col[cho(i, 0)] << \" \\n\"[i == n];\n  // for (int i = 1; i <= n; i++) cerr << col[cho(i, 1)] << \" \\n\"[i == n];\n#ifdef ONLINE_JUDGE\n  for (int i = 1; i <= n; i++) cout << ans[i];\n  cout << endl;\n#endif\n#ifdef memset0\n  cerr << \"clock = \" << clock() / (double)CLOCKS_PER_SEC << endl;\n#endif\n}\n```\n","publishedTitle":"ã€ŒMacau 20 Kã€Candy Ads"}},{"id":"c6bd5787-1f01-5463-a2b5-86a512ec27b8","fields":{"slug":"/oi/solution/icpc/2018/worldfinal/g/","plainText":"\n> ç»™å®šä¸€ä¸ª $n$ ä¸ªç‚¹çš„ç®€å•å¤šè¾¹å½¢ï¼ˆä¸ä¿è¯æ˜¯å‡¸çš„ï¼‰ï¼Œä½ éœ€è¦ç¡®å®šä¸€ä¸ªåŠå¾„ $r$ï¼Œç„¶ååœ¨æ¯ä¸ªç«¯ç‚¹ç”»ä¸€ä¸ªåŠå¾„ä¸º $r$ çš„åœ†ï¼Œè¦æ±‚èƒ½è¦†ç›–ç®€å•å¤šè¾¹å½¢çš„å…¨éƒ¨é¢ç§¯ã€‚\n> \n> ![center](https://static.memset0.cn/img/v6/2024/02/11/9Mz2vSQn.png)\n> \n> ä½ éœ€è¦ç¡®å®šè¿™ä¸ª $r$ æœ€å°æ˜¯å¤šå°‘ï¼Œç²¾åº¦è¦æ±‚ $10^{-6}$ã€‚\n> \n> $3 \\leq n \\leq 2000,\\ -10^4 \\leq x_i,y_i \\leq 10^4$ã€‚\n\n<!-- more -->\n\n## é¢˜è§£\n\nè€ƒè™‘æ±‚å‡ºç«¯ç‚¹çš„ Voronoi å›¾ï¼Œç­”æ¡ˆä¸€å®šæ˜¯ç”± Voronoi å›¾çš„ç«¯ç‚¹ï¼Œæˆ–è€…æ˜¯ Voronoi å›¾å’Œå¤šè¾¹å½¢çš„äº¤ç‚¹è´¡çŒ®çš„ã€‚ç”±äºè¿™é¢˜æ•°æ®èŒƒå›´è¾ƒå°ï¼Œæˆ‘ä»¬å¯ä»¥è·‘æš´åŠ›åŠå¹³é¢äº¤ã€‚\n\n## Hack\n\næ­£å¸¸åšæ³•ä¸­ï¼Œæˆ‘ä»¬çŸ¥é“ Voronoi å›¾å®é™…ä¸Šæ˜¯æŠŠäºŒç»´å¹³é¢æŒ‰ç…§è·ç¦»æœ€è¿‘çš„å…³é”®ç‚¹åˆ’åˆ†ä¸ºè‹¥å¹²éƒ¨åˆ†ï¼Œæ‰€ä»¥è´¡çŒ®ç­”æ¡ˆçš„è®¡ç®—æ˜¯å®¹æ˜“çš„ã€‚\n\nç„¶è€Œæˆ‘ä»¬ç‚¹å¼€ä¸€çœ‹åšä¸»çš„ä»£ç ï¼š[LibreOJ Submission #959701](https://loj.ac/submission/959701)ï¼Œå‘ç°ä»–å¥½åƒå¹¶ä¸æ¸…æ¥š Voronoi å›¾çš„æ€§è´¨ï¼Œè€Œæ˜¯å¤§åŠ›çŒœæƒ³ Voronoi å›¾å’ŒåŸå¤šè¾¹å½¢çš„äº¤ç‚¹ä¸ªæ•°æ˜¯ $O(n)$ çº§åˆ«çš„ï¼Œç„¶åæš´åŠ›è·‘è´¡çŒ®ç­”æ¡ˆã€‚çœ‹èµ·æ¥å¥½åƒéå¸¸å¯¹ï¼Œè€Œä¸”å®é™…ä¸Šè·‘çš„è¿˜å¾ˆå¿«ã€‚\n\nä½†è¿™ä¸ªçŒœæƒ³å˜›å¹¶ä¸æ­£ç¡®ï¼Œæ€ä¹ˆå¡å‘¢ï¼Ÿæˆ‘ä»¬è€ƒè™‘å¯¹äº¤ç‚¹ä¸ªæ•°è®¡æ•°ï¼šå°†æˆ‘ä»¬æŠŠç®€å•å¤šè¾¹å½¢çš„è¾¹æå‡ºæ¥æŸ“è‰²ï¼Œè‹¥è¾¹ä¸Šçš„ä¸€ä¸ªåŒºé—´å’Œç«¯ç‚¹ $i$ è·ç¦»æœ€è¿‘ï¼Œå°±æŸ“æˆæŸ“è‰² $i$ã€‚é‚£ä¹ˆæ€»äº¤ç‚¹ä¸ªæ•°å³ç­‰äºæ¯æ¡è¾¹çš„é¢œè‰²æ®µæ•°å’Œã€‚Hack ç¨‹åºè§åã€‚\n\n## ä»£ç \n\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\nconst int N = 2e3 + 9;\nconst double inf = 2e4, eps = 0;\nnamespace geometry {\nconst double mathPI = acos(-1);\ntemplate <class T> inline T abs(const T &x) { return x < 0 ? -x : x; }\nstruct point {\n  double x, y;\n  inline bool operator<(const point &rhs) const { return (abs(x - rhs.x) <= eps) ? (y - rhs.y < -eps) : (x - rhs.x < -eps); }\n  inline bool operator==(const point &rhs) const { return abs(x - rhs.x) <= eps && abs(y - rhs.y) <= eps; }\n};\nstruct line {\n  point a, b;\n  inline bool operator<(const line &rhs) const { return a == rhs.a ? b < rhs.b : a < rhs.a; }\n};\ninline double squaredDistance(const point &a, const point &b) { return (a.x - b.x) * (a.x - b.x) + (a.y - b.y) * (a.y - b.y); }\ninline double distance(const point &a, const point &b) { return sqrt(squaredDistance(a, b)); }\ninline double cross(const point &u, const point &a, const point &b) { return (a.x - u.x) * (b.y - u.y) - (b.x - u.x) * (a.y - u.y); }\ninline point intersect(const line &a, const line &b) {\n  double u = ((a.a.y - b.a.y) * (b.a.x - b.b.x) - (a.a.x - b.a.x) * (b.a.y - b.b.y)) / ((a.a.x - a.b.x) * (b.a.y - b.b.y) - (a.a.y - a.b.y) * (b.a.x - b.b.x));\n  return {u * (a.a.x - a.b.x) + a.a.x, u * (a.a.y - a.b.y) + a.a.y};\n}\ninline bool checkSegmentCrossed(const line &a, const line &b) { return ((cross(a.a, a.b, b.a) < eps) ^ (cross(a.a, a.b, b.b) < eps)) && ((cross(b.a, b.b, a.a) < eps) ^ (cross(b.a, b.b, a.b) < eps)); }\ninline bool insideConvex(const point &x, const vector<point> &a) {\n  bool target = cross(a[0], a[1], x) < eps;\n  for (int i = 1; i < a.size(); i++)\n    if (target != (cross(a[i], a[(i + 1) % a.size()], x) < eps)) return false;\n  return true;\n}\ninline bool insidePolygon(const point &x, const vector<point> &a) {\n  vector<double> deg(a.size());\n  for (int i = 0; i < a.size(); i++) {\n    deg[i] = atan2(a[i].y - x.y, a[i].x - x.x);\n  }\n  double sum = 0;\n  for (int i = 0; i < a.size(); i++) {\n    double cur = deg[i] - deg[(i + 1) % a.size()];\n    if (cur >= mathPI) cur -= mathPI;\n    if (cur <= -mathPI) cur += mathPI;\n    sum += cur;\n  }\n  return abs(sum) > .5 * mathPI;\n}\ndeque<point> halfPlane(const vector<line> &source) {\n  vector<pair<line, double>> plane(source.size());\n  for (int i = 0; i < plane.size(); i++) {\n    plane[i] = {source[i], atan2(source[i].b.y - source[i].a.y, source[i].b.x - source[i].a.x)};\n  }\n  sort(plane.begin(), plane.end(), [&](const pair<line, double> &a, const pair<line, double> &b) { return abs(a.second - b.second) > eps ? a.second < b.second : cross(a.first.a, b.first.a, b.first.b) > eps; });\n  deque<point> q;\n  deque<line> ql;\n  for (int i = 0; i < plane.size(); i++) {\n    if (i && abs(plane[i].second - plane[i - 1].second) <= eps) continue;\n    line cur = plane[i].first;\n    while (q.size() && cross(cur.a, cur.b, q.back()) < -eps) q.pop_back(), ql.pop_back();\n    while (q.size() && cross(cur.a, cur.b, q.front()) < -eps) q.pop_front(), ql.pop_front();\n    if (ql.size()) q.push_back(intersect(ql.back(), cur));\n    ql.push_back(cur);\n  }\n  while (q.size() > 1 && cross(ql.front().a, ql.front().b, q.back()) < -eps) q.pop_back(), ql.pop_back();\n  return q;\n}\n} // namespace geometry\nusing namespace geometry;\nint n, satisifyCounter;\nvector<point> a;\ndouble ans;\nset<point> voronoiNode;\nset<line> voronoiEdge;\nvoid satisifyNode(const point &x) {\n  if (isnan(x.x) || isnan(x.y)) return;\n  double cur = numeric_limits<double>::infinity();\n  for (int i = 0; i < n; i++) {\n    cur = min(cur, squaredDistance(x, a[i]));\n  }\n  ++satisifyCounter;\n  ans = max(ans, cur);\n}\nint main() {\n#ifdef memset0\n  freopen(\"1.in\", \"r\", stdin);\n#endif\n  cin.tie(0)->sync_with_stdio(0);\n  cin >> n;\n  a.resize(n);\n  for (int i = 0; i < n; i++) cin >> a[i].x >> a[i].y;\n  for (int i = 0; i < n; i++) satisifyNode({(a[i].x + a[(i + 1) % n].x) / 2, (a[i].y + a[(i + 1) % n].y) / 2});\n  for (int i = 0; i < n; i++) {\n    vector<line> plane = {\n        {{inf, inf}, {-inf, inf}},\n        {{inf, -inf}, {inf, inf}},\n        {{-inf, inf}, {-inf, -inf}},\n        {{-inf, -inf}, {inf, -inf}},\n    };\n    for (int j = 0; j < n; j++)\n      if (i != j) {\n        point mid{(a[i].x + a[j].x) / 2, (a[i].y + a[j].y) / 2};\n        point delta{a[i].x - mid.x, a[i].y - mid.y};\n        plane.push_back({{mid.x - delta.y, mid.y + delta.x}, {mid.x + delta.y, mid.y - delta.x}});\n      }\n    auto convex = halfPlane(plane);\n    for (int i = 0; i < convex.size(); i++) {\n      voronoiNode.insert(convex[i]);\n      line e = {convex[i], convex[(i + 1) % convex.size()]};\n      if (e.a.x < e.b.x) swap(e.a, e.b);\n      voronoiEdge.insert(e);\n    }\n  }\n  for (const point &x : voronoiNode) {\n    if (insidePolygon(x, a)) {\n      satisifyNode(x);\n    }\n  }\n  for (const line &e : voronoiEdge) {\n    for (int i = 0; i < a.size(); i++) {\n      line target{a[i], a[(i + 1) % a.size()]};\n      if (checkSegmentCrossed(e, target)) {\n        satisifyNode(intersect(e, target));\n      }\n    }\n  }\n  cout << fixed << setprecision(12) << sqrt(ans) << endl;\n}\n```\n\n## Hack ç¨‹åº\n\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\nint main() {\n  cin.tie(0)->sync_with_stdio(0);\n  const int lx = -10000, rx = -9000, ly = -10000, ry = 10000, m = 250;\n  vector<pair<int, int>> node;\n  for (int i = 1; i <= m; i++) {\n    node.push_back({rx, i * 2 - 1});\n    node.push_back({lx, i * 2 - 1});\n    node.push_back({lx, i * 2});\n    node.push_back({rx, i * 2});\n  }\n  for (int i = 1; i <= m; i++) {\n    node.push_back({rx + i * 2 - 1, ry});\n    node.push_back({rx + i * 2 - 1, ly});\n    if (i != m) {\n      node.push_back({rx + i * 2, ly});\n      node.push_back({rx + i * 2, ry});\n    } else {\n      node.push_back({rx + m * 2, ly - 1});\n      node.push_back({rx, ly - 1});\n    }\n  }\n  cout << node.size() << endl;\n  for (auto x : node) cout << x.first << \" \" << x.second << endl;\n  cout << endl;\n}\n```","publishedTitle":"ã€ŒICPC World Finals 2018ã€ç†ŠçŒ«ä¿æŠ¤åŒº"}},{"id":"7e21f105-e993-59a8-a5be-fa53e6556407","fields":{"slug":"/oi/solution/icpc/2021/macau/j/","plainText":"\n> ç»´æŠ¤ä¸€æ£µç‚¹æœ‰é¢œè‰²çš„æ ‘ï¼Œä¸€å¼€å§‹åªæœ‰ç¼–å·ä¸º $1$ çš„èŠ‚ç‚¹ï¼Œå…¶é¢œè‰²ä¸º $C$ï¼Œè¦æ±‚æ”¯æŒä»¥ä¸‹æ“ä½œ $q$ æ¬¡ï¼š\n>\n> 1. ç»™å®š $x,c,d$ï¼Œæ·»åŠ ä¸€ä¸ªç¼–å·ä¸º $n+1$ é¢œè‰²ä¸º $c$ çš„èŠ‚ç‚¹ï¼Œå‘ç‚¹ $x$ è¿ä¸€æ¡é•¿åº¦ä¸º $d$ çš„è¾¹\n> 2. ç»™å®š $x,c$ï¼Œå°†ç‚¹ $x$ çš„é¢œè‰²å˜æˆ $c$ã€‚\n>\n> æ¯æ¬¡æ“ä½œåï¼Œä½ éƒ½éœ€è¦åœ¨æ ‘ä¸Šé€‰ä¸¤ä¸ªé¢œè‰²ä¸åŒçš„ç‚¹å¹¶æœ€å¤§åŒ–å®ƒä»¬ä¹‹é—´æœ€çŸ­ç®€å•è·¯å¾„çš„é•¿åº¦ï¼Œå¹¶è¾“å‡ºã€‚\n>\n> $1\\le q\\le 5 \\times 10^5$ã€‚\n\n<!-- more -->\n\n## é¢˜è§£\n\nè¿™é¢˜å¹¶ä¸è¦æ±‚å¼ºåˆ¶åœ¨çº¿ï¼Œæ·»åŠ èŠ‚ç‚¹å¹¶ä¸ä¼šæ”¹å˜æ ‘çš„å½¢çŠ¶å’Œè¾¹çš„é•¿åº¦ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥å…ˆç¦»çº¿æ‰€æœ‰æ“ä½œï¼Œå°†ä¸¤ç§æ“ä½œéƒ½è½¬åŒ–ä¸ºå¯¹é¢œè‰²çš„ä¿®æ”¹ã€‚\n\nå¦‚æœåªè¦æ±‚æ±‚ä¸€æ¬¡ç­”æ¡ˆï¼Œæˆ‘ä»¬å¯ä»¥è€ƒè™‘ç‚¹åˆ†æ²»ï¼Œä»æ¯ä¸€ä¸ªåˆ†æ²»ä¸­å¿ƒå‡ºå‘ï¼Œæœç´¢å¾—åˆ°çš„ä¿¡æ¯æ˜¯ä¸€ä¸ªä¸‰å…ƒç»„ $(d,x,y)$ï¼Œå…¶ä¸­ $d$ æ˜¯åˆ†æ²»ä¸­å¿ƒåˆ°ç›®æ ‡ç‚¹çš„è·¯å¾„é•¿åº¦ã€$x$ æ˜¯ç›®æ ‡ç‚¹çš„é¢œè‰²ï¼Œ$y$ æ˜¯ç›®æ ‡ç‚¹åœ¨ $d$ çš„å“ªä¸ªå­æ ‘é‡Œã€‚è¿™æ ·é—®é¢˜å°±è½¬åŒ–ä¸ºï¼Œéœ€è¦é€‰æ‹©ä¸¤ä¸ªä¸‰å…ƒç»„ $(d_1,x_1,y_1)$ å’Œ $(d_2,x_2,y_2)$ï¼Œæœ€å¤§åŒ– $d_1+d_2$ ä¸”æ»¡è¶³ $x_1\\neq x_2 \\land y_1 \\neq y_2$ã€‚è¿™ä¸ªé—®é¢˜æ¯”è¾ƒç»å…¸ï¼Œå¯ä»¥è€ƒè™‘ç±»ä¼¼ 2023 å¹´ CCPC Online F çš„æ€è·¯ç»´æŠ¤ã€‚\n\nç°åœ¨éœ€è¦åœ¨æ¯æ¬¡ä¿®æ”¹æ“ä½œåå¾—åˆ°ç­”æ¡ˆï¼Œå¯ä»¥æŠŠç‚¹åˆ†æ²»æ¢æˆç‚¹åˆ†æ ‘ï¼Œæ¯æ¬¡ä¿®æ”¹é¢œè‰²åªéœ€è¦é‡åš $O(\\log n)$ ä¸ªåˆ†æ²»ä¸­å¿ƒçš„ç»“æœã€‚æ³¨æ„åˆ°å‰é¢æåˆ°çš„é—®é¢˜æˆ‘ä»¬åªéœ€è¦æ”¯æŒå•ç‚¹ä¿®æ”¹å…¨å±€æŸ¥è¯¢ï¼Œä¸”æ»¡è¶³çº¿æ®µæ ‘ä¿¡æ¯çš„æ€§è´¨ï¼Œå¯ä»¥è€ƒè™‘å¯¹äºæ¯ä¸ªåˆ†æ²»ä¸­å¿ƒå¼€ä¸€ä¸ªçº¿æ®µæ ‘è§£å†³ã€‚\n\n## ä»£ç \n\n```cpp\n#include <bits/stdc++.h>\n#define endl '\\n'\nusing namespace std;\nconst int N = 5e5 + 9, M = 1 << 21;\nint T, Q, C, n, root, all, fa[N], c[N], siz[N], mxp[N], par[N];\nbool vis[N];\nvector<int> que, op[N];\nvector<pair<int, int>> G[N];\nvector<pair<int, long long>> ins[N];\nstruct operation {\n  int op, x, c, d;\n} q[N];\nvoid findroot(int u) {\n  siz[u] = 1, mxp[u] = 0;\n  for (auto [v, w] : G[u])\n    if (v != fa[u] && !vis[v]) {\n      fa[v] = u;\n      findroot(v);\n      siz[u] += siz[v];\n      if (siz[v] > mxp[u]) mxp[u] = siz[v];\n    }\n  mxp[u] = max(mxp[u], all - siz[u]);\n  if (root == 0 || mxp[u] < mxp[root]) root = u;\n}\nstruct atom {\n  long long w;\n  int x, y;\n  inline bool operator<(const atom &rhs) const { return w > rhs.w; }\n};\nvector<pair<int, atom>> dat;\nstruct atom_list {\n  atom a[4];\n  short len = 0;\n} p[M];\nlong long calc(atom_list &u) {\n  long long ans = 0;\n  for (int i = 0; i < u.len; i++)\n    for (int j = i + 1; j < u.len; j++)\n      if (u.a[i].x != u.a[j].x && u.a[i].y != u.a[j].y && u.a[i].w >= 0 && u.a[j].w >= 0) {\n        if (u.a[i].w + u.a[j].w > ans) ans = u.a[i].w + u.a[j].w;\n      }\n  return ans;\n}\nvoid maintain(atom_list &u, const atom_list &l, const atom_list &r) {\n  int x1 = 0, x2 = 0, y1 = 0, y2 = 0, lstx = 0, lsty = 0;\n  u.len = 0;\n#define doi(_it)                             \\\n  atom it = _it;                             \\\n  if (!x1 && !y1) {                          \\\n    x1 = it.x, y1 = it.y, u.a[u.len++] = it; \\\n  } else {                                   \\\n    if (it.x != x1) {                        \\\n      if (!x2) x2 = it.y;                    \\\n      else if (x2 != it.y)                   \\\n        x2 = -1;                             \\\n    }                                        \\\n    if (it.y != y1) {                        \\\n      if (!y2) y2 = it.x;                    \\\n      else if (y2 != it.x)                   \\\n        y2 = -1;                             \\\n    }                                        \\\n    if (x2 != lstx || y2 != lsty) {          \\\n      u.a[u.len++] = it;                     \\\n    }                                        \\\n    lstx = x2, lsty = y2;                    \\\n    if (x2 == -1 && y2 == -1) break;         \\\n  }\n  int i = 0, j = 0;\n  while (i < l.len && j < r.len) {\n    if (l.a[i].w > r.a[j].w) {\n      doi(l.a[i]);\n      i++;\n    } else {\n      doi(r.a[j]);\n      j++;\n    }\n  }\n  if (x2 != -1 || y2 != -1) {\n    while (i < l.len) {\n      doi(l.a[i]);\n      i++;\n    }\n  }\n  if (x2 != -1 || y2 != -1) {\n    while (j < r.len) {\n      doi(r.a[j]);\n      j++;\n    }\n  }\n}\nvoid build(int u, int l, int r) {\n  p[u].len = 0;\n  if (l == r) {\n    return;\n  }\n  int mid = (l + r) >> 1;\n  build(u << 1, l, mid);\n  build(u << 1 | 1, mid + 1, r);\n}\nvoid modify(int u, int k, const atom &x, int l, int r) {\n  if (l == r) {\n    p[u].a[0] = x;\n    p[u].len = 1;\n    return;\n  }\n  int mid = (l + r) >> 1;\n  if (k <= mid) {\n    modify(u << 1, k, x, l, mid);\n  } else {\n    modify(u << 1 | 1, k, x, mid + 1, r);\n  }\n  maintain(p[u], p[u << 1], p[u << 1 | 1]);\n}\nstruct status {\n  int len;\n  long long ans;\n  vector<int> ord;\n  vector<atom> dat;\n} f;\nvoid dfs(int u, int cur) {\n  siz[u] = 1;\n  for (auto [v, w] : G[u])\n    if (v != fa[u] && !vis[v]) {\n      fa[v] = u;\n      dfs(v, cur);\n      siz[u] += siz[v];\n    }\n}\nvoid collect(int u, long long len, int sub, int cur) {\n  dat.push_back({u, {len, -1, sub}});\n  siz[u] = 1;\n  for (auto [v, w] : G[u])\n    if (v != fa[u] && !vis[v]) {\n      fa[v] = u;\n      collect(v, len + w, sub, cur);\n      siz[u] += siz[v];\n    }\n}\nvoid build(int u, int src = 0) {\n  par[u] = src;\n  vis[u] = 1;\n  que.push_back(u);\n  for (auto [v, w] : G[u])\n    if (!vis[v]) {\n      fa[v] = u;\n      dfs(v, u);\n    }\n  for (auto [v, w] : G[u])\n    if (!vis[v]) {\n      all = siz[v], root = 0, findroot(v), build(root, u);\n    }\n}\nvoid solve(int u) {\n  vis[u] = 1;\n  vector<pair<int, atom>>{}.swap(dat);\n  dat.push_back({u, {0, -1, u}});\n  for (auto [v, w] : G[u])\n    if (!vis[v]) {\n      fa[v] = u;\n      collect(v, w, v, u);\n    }\n  sort(dat.begin(), dat.end());\n  f.ord.resize(dat.size());\n  f.dat.resize(dat.size());\n  f.len = dat.size();\n  for (int i = 0; i < dat.size(); i++) {\n    f.ord[i] = dat[i].first;\n    f.dat[i] = dat[i].second;\n  }\n  build(1, 1, f.len);\n  for (int i : op[u]) {\n    int k = lower_bound(f.ord.begin(), f.ord.end(), q[i].x) - f.ord.begin() + 1;\n    f.dat[k - 1].x = q[i].c;\n    modify(1, k, f.dat[k - 1], 1, f.len);\n    ins[i].emplace_back(u, calc(p[1]));\n  }\n  op[u].clear();\n  op[u].shrink_to_fit();\n}\nnamespace pool {\nstruct segment {\n  long long ans;\n} p[M];\nvoid build(int u, int l, int r) {\n  p[u].ans = 0;\n  if (l == r) return;\n  int mid = (l + r) >> 1;\n  build(u << 1, l, mid);\n  build(u << 1 | 1, mid + 1, r);\n}\nvoid modify(int u, int k, long long s, int l, int r) {\n  if (l == r) {\n    p[u].ans = s;\n    return;\n  }\n  int mid = (l + r) >> 1;\n  if (k <= mid) {\n    modify(u << 1, k, s, l, mid);\n  } else {\n    modify(u << 1 | 1, k, s, mid + 1, r);\n  }\n  p[u].ans = max(p[u << 1].ans, p[u << 1 | 1].ans);\n}\n} // namespace pool\nint main() {\n#ifdef memset0\n  freopen(\"1.in\", \"r\", stdin);\n#endif\n  cin.tie(0)->sync_with_stdio(0);\n  cin >> T;\n  while (T--) {\n    cin >> Q >> C;\n    n = 1;\n    G[1].clear();\n    for (int i = 1; i <= Q; i++) {\n      cin >> q[i].op >> q[i].x >> q[i].c;\n      if (q[i].op == 0) {\n        cin >> q[i].d;\n        c[++n] = -1;\n        G[n] = {{q[i].x, q[i].d}};\n        G[q[i].x].emplace_back(n, q[i].d);\n        q[i].x = n;\n      }\n    }\n    fill_n(vis + 1, n, false);\n    fa[1] = 0, root = 0, all = n, findroot(1), build(root);\n    q[0].op = 1, q[0].c = C, q[0].x = 1;\n    for (int i = 0; i <= Q; i++) {\n      for (int u = q[i].x; u; u = par[u]) op[u].push_back(i);\n    }\n    fill_n(vis + 1, n, false);\n    for (int u : que) solve(u);\n    que.clear();\n    pool::build(1, 1, n);\n    for (int i = 0; i <= Q; i++) {\n      for (const auto &[k, t] : ins[i]) pool::modify(1, k, t, 1, n);\n      ins[i].clear();\n      ins[i].shrink_to_fit();\n      if (i) cout << pool::p[1].ans << endl;\n    }\n  }\n  return 0;\n}\n```\n","publishedTitle":"ã€ŒMacau 21 Jã€Colorful Tree"}}]}}}